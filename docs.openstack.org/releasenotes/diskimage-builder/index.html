<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>diskimage-builder Release Notes &mdash; diskimage-builder 1.27.1.dev17 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.27.1.dev17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="diskimage-builder 1.27.1.dev17 documentation" href="#" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="diskimage-builder-release-notes">
<h1>diskimage-builder Release Notes<a class="headerlink" href="#diskimage-builder-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>1.27.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Cleaning logs was split, some was done in the img-functions.finalise_base, some was done in the base element. The version unifies tidy up logs in the lib/img-functions. Especially when building docker container images the base element cannot be used. This patch removes about some hundreds KB of useless logs in cases when the base element is not used.</li>
</ul>
</div>
<div class="section" id="deprecation-notes">
<h3>Deprecation Notes<a class="headerlink" href="#deprecation-notes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">DIB_YUMCHROOT_USE_CACHE</span></code> variable has been removed and the Fedora and CentOS <code class="docutils literal"><span class="pre">-minimal</span></code> initial chroot will always be created by the package manager.  The default creation of a chroot tarball is stopped for these elements.  This unused option was unsafe; there is no guarantee that the base system will not change even between runs.  Getting the package manager to reuse the cache for the initial chroot install is future work.</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>1.26.0<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>New Features<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">bootloader</span></code> element will explicitly set the timeout to <code class="docutils literal"><span class="pre">5</span></code> seconds when using <code class="docutils literal"><span class="pre">grub</span></code> (previously this was undefined, but platform defaults were usually 5 seconds).  Set this to <code class="docutils literal"><span class="pre">0</span></code> for faster boots.</li>
<li>New squashfs image output format.</li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2>1.24.0<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <cite>debian-minimal</cite> and and <cite>ubuntu-minimal</cite> elements now install directly from the updates repo, avoiding the need to double-install packages during build.</li>
</ul>
</div>
</div>
<div class="section" id="id5">
<h2>1.23.0<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>New Features<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New openssh-server element to ensure that the openssh server is installed and enabled during boot.</li>
</ul>
</div>
</div>
<div class="section" id="id7">
<h2>1.22.0<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3>New Features<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New zypper-minimal and opensuse-minimal elements to create basic openSUSE images. These two new elements are also making use of the existing zypper element which has been extended to include the functionality previously present in the opensuse element.</li>
</ul>
</div>
</div>
<div class="section" id="id9">
<h2>1.20.0<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>New Features<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New element (runtime-ssh-host-keys) to manage SSH host keys at boot. Since SSH host key generation is not standard across operating systems, add support for both Debian and Ubuntu to handle it. While this is a new element, simple-init has been updated to depend on it.</li>
</ul>
</div>
</div>
<div class="section" id="id11">
<h2>1.18.2<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>New Features<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">package-installs</span></code> element now supports a list of architectures to install the package for in the <code class="docutils literal"><span class="pre">arch</span></code> field and negative matching with a <code class="docutils literal"><span class="pre">not-arch</span></code> field.  This allows greater flexibility when installing packages for only some architectures.</li>
</ul>
</div>
</div>
<div class="section" id="id13">
<h2>1.18.1<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id14">
<h3>Bug Fixes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix issue where ironic-agent did not work on ppc due to missing dmidecode.</li>
<li>Fix issue where we were unable to create empty tempdirs in the target image.</li>
<li>Revert change where we were installing virtualenv on centos with both system and python packages.</li>
</ul>
</div>
</div>
<div class="section" id="id15">
<h2>1.18.0<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>New Features<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">fedora-minimal</span></code> element now supports Fedora 24</li>
<li>The <code class="docutils literal"><span class="pre">pkg-map</span></code> element now correctly supports images without python2 in the default install (such as the latest releases from Ubuntu and Fedora).</li>
</ul>
</div>
</div>
<div class="section" id="id17">
<h2>1.17.0<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id18">
<h3>New Features<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">dib-lint</span></code> tool now has a best-effort sudo check to help flag uses of <code class="docutils literal"><span class="pre">sudo</span></code> outside the chroot environment.  This can help avoid some classes of breakout problems that can interfere with the host system.</li>
<li>Running with <code class="docutils literal"><span class="pre">-x</span></code> will give a more verbose log output that includes function and line-numbers.  Work is ongoing to further reduce noise in the verbose logs to make it as useful as possible. Feedback is welcome on the new format.</li>
<li>the <code class="docutils literal"><span class="pre">pkg-map</span></code> element can now install different packages based on the distribution release.</li>
</ul>
</div>
<div class="section" id="id19">
<h3>Bug Fixes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Locale stripping for <code class="docutils literal"><span class="pre">yum-minimal</span></code> has been reworked to be more reliable for Fedora 23 and CentOS.</li>
<li>The Ubuntu Precise kernel is too old to use the online <code class="docutils literal"><span class="pre">growroot</span></code> element, so we returned to using <code class="docutils literal"><span class="pre">cloud-initramfs-growroot</span></code> in the <code class="docutils literal"><span class="pre">debootstrap</span></code> element for it.</li>
<li>The <code class="docutils literal"><span class="pre">dib-lint</span></code> tool now better matches python files.</li>
<li>The <code class="docutils literal"><span class="pre">apt-sources</span></code> element was fixed to work with the <code class="docutils literal"><span class="pre">debian-minimal</span></code> element.</li>
<li>Dependencies for the systemd target in <code class="docutils literal"><span class="pre">dhcp-all-interfaces</span></code> were updated to correctly wait for interfaces.</li>
</ul>
</div>
</div>
<div class="section" id="id20">
<h2>1.16.0<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>Bug Fixes<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">yum-minimal</span></code> element now correctly strips locale-archive files, but leaves en.US/en.US-UTF8 for compatibility with remote access.  Better failure detection has been added to avoid leaving lock files behind if initial installs to the chroot fail.</li>
<li>The <code class="docutils literal"><span class="pre">epel</span></code> element was fixed to not incorrectly install EPEL6 on Centos 7.  EPEL is added as a requirement of <code class="docutils literal"><span class="pre">centos-minimal</span></code> (previously, it was tacitly required but not expressed).</li>
<li>The <code class="docutils literal"><span class="pre">dib-lint</span></code> tool is now more verbose, has better documentation and more correctly detects errors in JSON &amp; YAML.</li>
<li>The <code class="docutils literal"><span class="pre">ironic-agent</span></code> element no longer removes the <code class="docutils literal"><span class="pre">sudo</span></code> package in its cleanup phase.</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2>1.15.0<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>Bug Fixes<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We now use <code class="docutils literal"><span class="pre">fstrim</span></code> rather than <code class="docutils literal"><span class="pre">zerofree</span></code> to reduce final image size.  This is considered current best practice.</li>
<li>Fix an occasional failure to build <code class="docutils literal"><span class="pre">centos-minimal</span></code> and <code class="docutils literal"><span class="pre">fedora-minimal</span></code> due to suspected rpmdb failures.  The main symptom was <code class="docutils literal"><span class="pre">dnf</span></code> or <code class="docutils literal"><span class="pre">yum</span></code> thinking packages were not installed when they were.</li>
<li>The <code class="docutils literal"><span class="pre">debian-minimal</span></code> element now obeys <code class="docutils literal"><span class="pre">DIB_DEBIAN_COMPONENTS</span></code> for adding components.</li>
<li>Fix some issues with Gentoo, and add to supported distributions. Testing is currently non-voting</li>
</ul>
</div>
<div class="section" id="other-notes">
<h3>Other Notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Start using reno for release notes</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="#">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">diskimage-builder Release Notes</a><ul>
<li><a class="reference internal" href="#id1">1.27.0</a><ul>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#deprecation-notes">Deprecation Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">1.26.0</a><ul>
<li><a class="reference internal" href="#id3">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">1.24.0</a><ul>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5">1.23.0</a><ul>
<li><a class="reference internal" href="#id6">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">1.22.0</a><ul>
<li><a class="reference internal" href="#id8">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">1.20.0</a><ul>
<li><a class="reference internal" href="#id10">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id11">1.18.2</a><ul>
<li><a class="reference internal" href="#id12">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">1.18.1</a><ul>
<li><a class="reference internal" href="#id14">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id15">1.18.0</a><ul>
<li><a class="reference internal" href="#id16">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id17">1.17.0</a><ul>
<li><a class="reference internal" href="#id18">New Features</a></li>
<li><a class="reference internal" href="#id19">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">1.16.0</a><ul>
<li><a class="reference internal" href="#id21">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">1.15.0</a><ul>
<li><a class="reference internal" href="#id23">Bug Fixes</a></li>
<li><a class="reference internal" href="#other-notes">Other Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/diskimage-builder
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">diskimage-builder 1.27.1.dev17 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Diskimage-builder contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/diskimage-builder");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>