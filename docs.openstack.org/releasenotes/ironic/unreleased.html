<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Current Series Release Notes &mdash; Ironic Release Notes 7.0.1.dev7 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '7.0.1.dev7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Ironic Release Notes 7.0.1.dev7 documentation" href="index.html" />
    <link rel="next" title="Ocata Series (7.0.0 - 7.0.x) Release Notes" href="ocata.html" />
    <link rel="prev" title="Ironic Release Notes" href="index.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="current-series-release-notes">
<h1>Current Series Release Notes<a class="headerlink" href="#current-series-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>7.0.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The 7.0.0 release includes many new features and bug fixes. Please review
the upgrade section which describes the required actions to upgrade your
ironic installation from 6.2.2 (Newton) to 7.0.0 (Ocata).</p>
<p>A few major changes are worth mentioning. This is not an
exhaustive list:</p>
<ul class="simple">
<li>&#8220;Port group&#8221; support allows users to take advantage of bonded
network interfaces.</li>
<li>State change and CRUD notifications can now be emitted.</li>
<li>Soft power off, soft reboot, and sending non-maskable interrupts (NMI)
are now supported in the REST API.</li>
<li>The AMT, iBoot, msftocs, seamicro, VirtualBox, and Wake-On-Lan drivers
have been removed from ironic. Please see the upgrade notes for
additional details and options.</li>
<li>&#8220;Dynamic drivers&#8221; is a revamp of how drivers are composed. Rather than a
huge matrix of hardware drivers supporting different things, now users
select a &#8220;hardware type&#8221; for a machine, and can independently change the
deploy method, console manager, RAID management, power control interface,
etc. This is experimental, as not all &#8220;classic&#8221; drivers have a dynamic
equivalent yet, but we encourage users to try this feature out and
submit feedback.</li>
</ul>
<div class="section" id="new-features">
<h3>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Adds support for removing the chassis UUID associated with a node (via <code class="docutils literal"><span class="pre">PATCH</span> <span class="pre">/v1/nodes/&lt;ident&gt;</span></code>). This is available starting with API version 1.25.</p>
</li>
<li><p class="first">Adds the use of DHCP option 210 (tftp-path-prefix). This enables PXE for systems using petitboot, which cannot infer their tftp-path-prefix from the boot file location as petitboot does not use a boot file.</p>
</li>
<li><p class="first">To enable SNMPv3 inspection in iLO drivers, the following parameters must be set in the node&#8217;s <code class="docutils literal"><span class="pre">driver_info</span></code>.
* <code class="docutils literal"><span class="pre">snmp_auth_user</span></code> * <code class="docutils literal"><span class="pre">snmp_auth_prot_password</span></code> * <code class="docutils literal"><span class="pre">snmp_auth_priv_password</span></code> * <code class="docutils literal"><span class="pre">snmp_auth_protocol</span></code> (optional, defaults to iLO default value <code class="docutils literal"><span class="pre">MD5</span></code>) * <code class="docutils literal"><span class="pre">snmp_auth_priv_protocol</span></code> (optional, defaults to iLO default value <code class="docutils literal"><span class="pre">DES</span></code>)</p>
</li>
<li><p class="first">Adds the initial substrate to allow for the creation of storage
interfaces. The default storage interface for nodes is <code class="docutils literal"><span class="pre">noop</span></code>,
which routes to a no-op driver that is included with the substrate.</p>
</li>
<li><p class="first">Adds support for attaching and detaching network VIFs to ironic ports and port groups by using the <code class="docutils literal"><span class="pre">/v1/nodes/&lt;node&gt;/vifs</span></code> API endpoint that was added in API version 1.28. When attaching a VIF to a node, it is attached to the first free port group. A port group is considered free if it has no VIFs attached to any of its ports. Otherwise, only the unattached ports of this port group are available for attachment. If there are no free port groups, the first available port is used instead, where ports with <code class="docutils literal"><span class="pre">pxe_enabled</span></code> set to <code class="docutils literal"><span class="pre">True</span></code> have higher priority.</p>
</li>
<li><p class="first">Adds support for port groups with a new endpoint <code class="docutils literal"><span class="pre">/v1/portgroups/</span></code>.
Ports can be combined into port groups to support static Link Aggregation
Group (LAG) and Multi-Chassis LAG (MLAG) configurations.</p>
<p>Note that if the optional <code class="docutils literal"><span class="pre">mode</span></code> field for a port group is not specified,
its value will be set to the value of the configuration option
<code class="docutils literal"><span class="pre">[DEFAULT]default_portgroup_mode</span></code>, which defaults to <code class="docutils literal"><span class="pre">active-backup</span></code>.</p>
<p>Additionally, adds the following API changes:</p>
<ul class="simple">
<li>a new endpoint <code class="docutils literal"><span class="pre">/v1/nodes/&lt;node&gt;/portgroups</span></code>.</li>
<li>a new endpoint <code class="docutils literal"><span class="pre">/v1/portgroups/&lt;portgroup&gt;/ports</span></code>.</li>
<li>a new field <code class="docutils literal"><span class="pre">portgroup_uuid</span></code> on the port object. This is the UUID
of a port group that this port belongs to, or None if it does not
belong to any port group.</li>
</ul>
<p>All port group API functions are available starting with version 1.26 of
the REST API.</p>
</li>
<li><p class="first">Adds timing metrics to DRAC drivers.</p>
</li>
<li><p class="first">Adds timing metrics to iRMC drivers.</p>
</li>
<li><p class="first">Adds new option <code class="docutils literal"><span class="pre">[deploy]/default_boot_option</span></code> for setting the default boot option when no explicit boot option is requested via capabilities.</p>
</li>
<li><p class="first">Adds new methods to network interfaces, which will become
mandatory in Pike release:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">vif_list</span></code>: List attached VIF IDs for a node.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">vif_attach</span></code>: Attach a virtual network interface to a node.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">vif_detach</span></code>: Detach a virtual network interface from a node.</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">port_changed</span></code>: Handle any actions required when a port</dt>
<dd><p class="first last">changes.</p>
</dd>
</dl>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">portgroup_changed</span></code>: Handle any actions required when a
port group changes.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">get_current_vif</span></code>: Return VIF ID attached to port or port group
object.</p>
</li>
</ul>
</li>
<li><p class="first">Adds support for dynamic drivers. Using a dynamic driver in a node&#8217;s
<code class="docutils literal"><span class="pre">driver</span></code> field is now possible. Dynamic drivers are composed of a
<code class="docutils literal"><span class="pre">hardware</span> <span class="pre">type</span></code> and a number of <code class="docutils literal"><span class="pre">hardware</span> <span class="pre">interfaces</span></code>.</p>
<p>NOTE: this feature is considered somewhat experimental, as not all classic
drivers have a corresponding dynamic driver, and there is minimal CI
for dynamic drivers at the time of this writing.</p>
<p>Hardware types are enabled via the <code class="docutils literal"><span class="pre">[DEFAULT]/enabled_hardware_types</span></code>
configuration option, and hardware interfaces are enabled via the
<code class="docutils literal"><span class="pre">[DEFAULT]/enabled_*_interfaces</span></code> configuration option. A default
interface to use when creating or updating nodes can be specified with the
<code class="docutils literal"><span class="pre">[DEFAULT]/default_*_interface</span></code> configuration option.</p>
<p>The ironic-conductor process will now fail to start if:</p>
<ul class="simple">
<li>a default interface implementation for any enabled hardware type cannot
be found.</li>
<li>a dynamic driver and a classic driver with the same name are both
enabled.</li>
<li>at least one classic driver <em>or</em> one dynamic driver is not enabled.</li>
</ul>
<p>Hardware types available in this release are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ipmi</span></code> for IPMI-compatible hardware.  This type is enabled by default.
Uses the <code class="docutils literal"><span class="pre">ipmitool</span></code> utility under the hood, similar to existing classic
drivers <code class="docutils literal"><span class="pre">pxe_ipmitool</span></code> and <code class="docutils literal"><span class="pre">agent_ipmitool</span></code>. Supports both types of
serial console: via <code class="docutils literal"><span class="pre">shellinabox</span></code> and via <code class="docutils literal"><span class="pre">socat</span></code>, both are disabled
by default.</li>
<li><code class="docutils literal"><span class="pre">irmc</span></code> for FUJITSU PRIMERGY servers, disabled by default.</li>
</ul>
<p>This feature has a number of REST API changes, all of which are available
in API version 1.31.</p>
<ul class="simple">
<li>Adds additional parameters and response fields for GET /v1/drivers and
GET /v1/drivers/&lt;name&gt;.</li>
<li>Exposes the following fields on the node resource, to allow getting and
setting interfaces for a dynamic driver:<ul>
<li>boot_interface</li>
<li>console_interface</li>
<li>deploy_interface</li>
<li>inspect_interface</li>
<li>management_interface</li>
<li>power_interface</li>
<li>raid_interface</li>
<li>vendor_interface</li>
</ul>
</li>
<li>Allows dynamic drivers to be used and returned in the following
API calls, in all versions of the REST API:<ul>
<li>GET /v1/drivers</li>
<li>GET /v1/drivers/&lt;name&gt;</li>
<li>GET /v1/drivers/&lt;name&gt;/properties</li>
<li>GET /v1/drivers/&lt;name&gt;/vendor_passthru/methods</li>
<li>GET/POST /v1/drivers/&lt;name&gt;/vendor_passthru</li>
<li>GET/POST /v1/nodes/&lt;id&gt;/vendor_passthru</li>
</ul>
</li>
</ul>
<p>For more details on the REST API changes, see the <a class="reference external" href="http://docs.openstack.org/developer/ironic/dev/webapi-version-history.html">REST API Version History
documentation</a>.</p>
<p>This also adds dynamic interface fields to node-related notifications:</p>
<ul class="simple">
<li>boot_interface</li>
<li>console_interface</li>
<li>deploy_interface</li>
<li>inspect_interface</li>
<li>management_interface</li>
<li>power_interface</li>
<li>raid_interface</li>
<li>vendor_interface</li>
</ul>
<p>The affected notifications are:</p>
<ul class="simple">
<li>baremetal.node.create.*, new payload version 1.1</li>
<li>baremetal.node.update.*, new payload version 1.1</li>
<li>baremetal.node.delete.*, new payload version 1.1</li>
<li>baremetal.node.maintenance.*, new payload version 1.3</li>
<li>baremetal.node.console.*, new payload version 1.3</li>
<li>baremetal.node.power_set.*, new payload version 1.3</li>
<li>baremetal.node.power_state_corrected.*, new payload version 1.3</li>
<li>baremetal.node.provision_set.*, new payload version 1.3</li>
</ul>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">hctl</span></code> to root device hints. HCTL is the SCSI address and stands for Host, Channel, Target and Lun.</p>
</li>
<li><p class="first">Add support for the injection of Non-Masking Interrupts (NMI) for a node in REST API version 1.29. This feature can be used for hardware diagnostics, and actual support depends on the driver. In 7.0.0, this is available in the ipmitool and iRMC drivers.</p>
</li>
<li><p class="first">Adds support to deploy to nodes with different CPU architectures
from a single conductor. This depends on
two new configuration options, <code class="docutils literal"><span class="pre">[pxe]/pxe_config_template_by_arch</span></code>
and <code class="docutils literal"><span class="pre">[pxe]/pxe_bootfile_name_by_arch</span></code>. Each is a
dictionary mapping CPU architecture to PXE config template or
PXE boot file name, respectively.</p>
<p>As an example, the syntax might look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pxe_config_template_by_arch=aarch64:pxe_grubaa64_config.template,ppc64:pxe_ppc64_config.template
</pre></div>
</div>
<p>Ironic attempts to map the CPU architecture in this mapping to
the <code class="docutils literal"><span class="pre">properties/cpu_arch</span></code> field for a node. If the node&#8217;s CPU
architecture is not found in the mapping, ironic will fall back to
the standard options <code class="docutils literal"><span class="pre">pxe_config_template</span></code>,
<code class="docutils literal"><span class="pre">pxe_bootfile_name</span></code>, <code class="docutils literal"><span class="pre">uefi_pxe_config_template</span></code>,
and <code class="docutils literal"><span class="pre">uefi_pxe_bootfile_name</span></code>.</p>
</li>
<li><p class="first">Adds new configuration option <code class="docutils literal"><span class="pre">[conductor]/send_sensor_data_workers</span></code> to allow concurrent sending of sensor data using the specified number of green threads. The <code class="docutils literal"><span class="pre">[conductor]/wait_timeout_for_send_sensor_data</span></code> configuration option is the time to wait for all spawned green threads before running the periodic task again.</p>
</li>
<li><p class="first">Names can now be used instead of UUIDs for <code class="docutils literal"><span class="pre">[neutron]/cleaning_network</span></code> and <code class="docutils literal"><span class="pre">[neutron]/provisioning_network</span></code> configuration options (formerly called <code class="docutils literal"><span class="pre">[neutron]/cleaning_network_uuid</span></code> and <code class="docutils literal"><span class="pre">[neutron]/provisioning_network_uuid</span></code>). Care has to be taken to ensure that the names are unique among all networks in this case. Note that the mapping between a name and a UUID is cached for the lifetime of the conductor.</p>
</li>
<li><p class="first">Adds in-band inspection interface usable by OneView drivers.</p>
</li>
<li><p class="first">Adds timing metrics to OneView drivers.</p>
</li>
<li><p class="first">Ironic is now configured to work with two oslo.policy CLI scripts that have
been added.</p>
<p>The first of these can be called like
<code class="docutils literal"><span class="pre">oslopolicy-list-redundant</span> <span class="pre">--namespace</span> <span class="pre">ironic</span></code> and will output a list of
policy rules in policy.[json|yaml] that match the project defaults. These
rules can be removed from the policy file as they have no effect there.</p>
<p>The second script can be called like
<code class="docutils literal"><span class="pre">oslopolicy-policy-generator</span> <span class="pre">--namespace</span> <span class="pre">ironic</span>
<span class="pre">--output-file</span> <span class="pre">policy-merged.yaml</span></code>
and will populate the policy-merged.yaml file with the effective policy.
This is the merged results of project defaults and config file overrides.</p>
</li>
<li><p class="first">The pxe_snmp and fake_snmp are now supported and tested.</p>
</li>
<li><p class="first">Agent lookup/heartbeat as vendor passthru is removed from most of
in-tree ironic drivers. Affected drivers are</p>
<ul class="simple">
<li>agent_ipmitool</li>
<li>agent_ipmitool_socat</li>
<li>agent_ipminative</li>
<li>agent_irmc</li>
<li>agent_ssh</li>
<li>agent_vbox</li>
<li>agent_ucs</li>
<li>pxe_agent_cimc</li>
<li>pxe_ipmitool</li>
<li>pxe_ipmitool_socat</li>
<li>pxe_ssh</li>
<li>pxe_ipminative</li>
<li>pxe_seamicro</li>
<li>pxe_snmp</li>
<li>pxe_irmc</li>
<li>pxe_vbox</li>
<li>pxe_msftocs</li>
<li>pxe_ucs</li>
<li>pxe_iscsi_cimc</li>
<li>pxe_drac</li>
<li>pxe_drac_inspector</li>
<li>iscsi_irmc</li>
<li>agent_ilo</li>
<li>iscsi_ilo</li>
<li>pxe_ilo</li>
<li>agent_pxe_oneview</li>
<li>iscsi_pxe_oneview</li>
</ul>
<p>All the other vendor passthru methods are left in place if the
driver had them.</p>
</li>
<li><p class="first">Adds the following notifications:</p>
<ul class="simple">
<li>Creation, updates, or deletions of ironic resources
(node, port and chassis). Event types are
<code class="docutils literal"><span class="pre">baremetal.&lt;resource&gt;.{create,update,delete}.{start,end,error}</span></code>.</li>
<li>Start and stop console on a node. Event types are
<code class="docutils literal"><span class="pre">baremetal.node.console_{set,restore}.{start,end,error}</span></code>.</li>
<li>Changes in node maintenance status. Event types are
<code class="docutils literal"><span class="pre">baremetal.node.maintenance_set.{start,end,error}</span></code>.</li>
<li>When ironic attempts to set the power state on the node. Event types are
<code class="docutils literal"><span class="pre">baremetal.node.power_set.{start,end,error}</span></code>.</li>
<li>When ironic detects the power state on baremetal hardware has changed
and updates the node in the database appropriately. Event types are
<code class="docutils literal"><span class="pre">baremetal.node.power_state_corrected.success</span></code>.</li>
<li>Node provision state changes. Event types are
<code class="docutils literal"><span class="pre">baremetal.node.provision_set.{start,end,success,error}</span></code>.</li>
</ul>
<p>These are only emitted when notifications are enabled.
For more details, see the developer documentation:
<a class="reference external" href="http://docs.openstack.org/developer/ironic/deploy/notifications.html">http://docs.openstack.org/developer/ironic/deploy/notifications.html</a>.</p>
</li>
<li><p class="first">Adds support for security groups for the provisioning and cleaning network. These are optionally specified by the configuration options <code class="docutils literal"><span class="pre">[neutron]/provisioning_network_security_groups</span></code> and <code class="docutils literal"><span class="pre">[neutron]/cleaning_network_security_groups</span></code>, respectively. If not specified, the default security group for the network is used. These options are only applicable for nodes using the &#8220;neutron&#8221; network interface. These options are ignored for nodes using the &#8220;flat&#8221; and &#8220;noop&#8221; network interfaces.</p>
</li>
<li><p class="first">Adds support for soft reboot and soft power off requests in REST API version 1.27. Also adds an optional <code class="docutils literal"><span class="pre">timeout</span></code> parameter to the node power state API. Adds a new configuration option <code class="docutils literal"><span class="pre">[conductor]/soft_power_off_timeout</span></code> to define the default timeout for soft power actions. In 7.0.0, this is supported for ipmitool and iRMC drivers.</p>
</li>
<li><p class="first">Adds support for using operators with the root device hints mechanism. The supported operators are, <code class="docutils literal"><span class="pre">=</span></code>, <code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">s==</span></code>, <code class="docutils literal"><span class="pre">s!=</span></code>, <code class="docutils literal"><span class="pre">s&gt;=</span></code>, <code class="docutils literal"><span class="pre">s&gt;</span></code>, <code class="docutils literal"><span class="pre">s&lt;=</span></code>, <code class="docutils literal"><span class="pre">s&lt;</span></code>, <code class="docutils literal"><span class="pre">&lt;in&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;all-in&gt;</span></code> and <code class="docutils literal"><span class="pre">&lt;or&gt;</span></code>. See <a class="reference external" href="http://docs.openstack.org/project-install-guide/baremetal/draft/advanced.html#specifying-the-disk-for-deployment-root-device-hints">http://docs.openstack.org/project-install-guide/baremetal/draft/advanced.html#specifying-the-disk-for-deployment-root-device-hints</a></p>
</li>
</ul>
</div>
<div class="section" id="upgrade-notes">
<h3>Upgrade Notes<a class="headerlink" href="#upgrade-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Adds a new dependency on the
<a class="reference external" href="https://pypi.python.org/pypi/tooz">tooz library</a>, as the consistent
hash ring code was moved out of ironic and into tooz.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">[DEFAULT]/debug</span></code> configuration option now also enables debug logs for the <code class="docutils literal"><span class="pre">ironic-python-agent</span></code> ramdisk. If the <code class="docutils literal"><span class="pre">ipa-debug</span></code> kernel option is already present in the <code class="docutils literal"><span class="pre">[pxe]/pxe_append_params</span></code> configuration option, ironic will not overwrite it.</p>
</li>
<li><p class="first">Moves node creation logic from the API service to the conductor service. This is more consistent with other node operations and opens opportunities for conductor-side validations on nodes.  However, with this change, node creation may take longer, and this may limit the number of nodes that can be enrolled in parallel.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">[DEFAULT]/default_network_interface</span></code> and <code class="docutils literal"><span class="pre">[dhcp]/dhcp_provider</span></code> configuration options were previously required for the ironic-api service to calculate the correct &#8220;network_interface&#8221; default. Now these options are only required by the ironic-conductor service.</p>
</li>
<li><p class="first">A future release will change the default value of <code class="docutils literal"><span class="pre">[deploy]/default_boot_option</span></code> from &#8220;netboot&#8221; to &#8220;local&#8221;. To avoid disruptions, it is recommended to set an explicit value for this option.</p>
</li>
<li><p class="first">The minimum version of python-oneviewclient is now 2.5.2.</p>
</li>
<li><p class="first">Ironic now uses only the Image Service (glance) v2 API by default. Use of
the deprecated v1 API for certain basic tasks can still be enabled by setting
<code class="docutils literal"><span class="pre">[glance]/glance_api_version</span></code> to <code class="docutils literal"><span class="pre">1</span></code>. This option, however, does not
affect temporary URL generation, as it always requires the v2 API.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">[inspector]/enabled</span></code> configuration option no longer has effect on
the <code class="docutils literal"><span class="pre">fake_inspector</span></code> driver. It will also not have effect on new-style
dynamic drivers based on hardware types; it will be necessary to use
<code class="docutils literal"><span class="pre">[DEFAULT]/enabled_inspect_interfaces</span></code> instead.</p>
</li>
<li><p class="first">Increases the default number of workers for the <code class="docutils literal"><span class="pre">send_sensor_data</span></code> periodic task from 1 to 4.</p>
</li>
<li><p class="first">Ironic no longer passes <code class="docutils literal"><span class="pre">root_device</span></code> as kernel parameter via boot config files. Passing root device hints to Ironic Python Agent (IPA) as kernel parameters was deprecated in Newton release. As a consequence, using root device hints with Ironic as of Ocata release will not be possible when deploying nodes with the help of ramdisks based on IPA as of Mitaka release. Operators relying on root device hints functionality are advised to update their IPA-based Ironic deploy images.</p>
</li>
<li><p class="first">Ironic no longer supports agent lookup/heartbeats as vendor passthru methods. All out-of-tree drivers must be updated to use <code class="docutils literal"><span class="pre">AgentDeployMixin</span></code> classes directly without relying on <code class="docutils literal"><span class="pre">BaseAgentVendor</span></code> class and other classes that were inheriting from it (e.g. <code class="docutils literal"><span class="pre">agent.AgentVendorInterface</span></code> and <code class="docutils literal"><span class="pre">iscsi_deploy.VendorPassthru</span></code>).
This means that ironic is incompatible with deploy ramdisks based on Ironic Python Agent (IPA) &lt; 1.5.0. Operators must update their IPA-based deploy ramdisks in this case. Operators using non-IPA based deploy ramdisks which use ironic lookup/heartbeats functionality must update their ramdisks to use the top level ironic lookup/heartbeats REST API, available since ironic API v1.22.</p>
</li>
<li><p class="first">The deprecated ironic.nova.ClusteredComputerManager module is now removed.
This is not required with nova &gt;= 14.0.0 (Newton).</p>
</li>
<li><p class="first">The configuration option <code class="docutils literal"><span class="pre">[deploy]/erase_devices_iterations</span></code> was
deprecated in the Newton cycle (6.0.0). It is no longer supported. Please
use the option <code class="docutils literal"><span class="pre">[deploy]/shred_random_overwrite_iterations</span></code> instead.</p>
</li>
<li><p class="first">Removes these deprecated methods from the neutron DHCP provider built into
ironic:</p>
<ul class="simple">
<li>create_cleaning_ports</li>
<li>delete_cleaning_ports</li>
</ul>
<p>Removes these related methods from <code class="docutils literal"><span class="pre">ironic.drivers.modules.deploy_utils</span></code>:</p>
<ul class="simple">
<li>prepare_cleaning_ports</li>
<li>tear_down_cleaning_ports</li>
</ul>
<p>If you have your own custom ironic DHCP provider that implements
cleaning methods, you may need to update your code to use the
<code class="docutils literal"><span class="pre">add_cleaning_network()</span></code> and <code class="docutils literal"><span class="pre">remove_cleaning_network()</span></code> network
interface methods. See the modules in <code class="docutils literal"><span class="pre">ironic/drivers/modules/network/</span></code>
for more information.</p>
</li>
<li><p class="first">Removes support for attaching periodic tasks on a driver object, rather
than an interface.</p>
</li>
<li><p class="first">iBoot, Wake-On-LAN and AMT drivers are removed from ironic as they
neither have nor are planning to have a third-party CI.
They are still available from unsupported ironic driver collection
in <code class="docutils literal"><span class="pre">ironic-staging-drivers</span></code> repository.
If the ironic installation was using any driver based on those,
the operator has to install <code class="docutils literal"><span class="pre">ironic-staging-drivers</span></code>
and change the driver on affected nodes
according to following correspondence list</p>
<ul class="simple">
<li>agent_amt -&gt; pxe_amt_agent</li>
<li>pxe_amt -&gt; pxe_amt_iscsi</li>
<li>agent_wol -&gt; pxe_wol_agent</li>
<li>pxe_wol -&gt; pxe_wol_iscsi</li>
<li>agent_iboot -&gt; pxe_iboot_agent</li>
<li>pxe_iboot -&gt; pxe_iboot_iscsi</li>
</ul>
</li>
<li><p class="first">There is no longer any support for doing an iSCSI deploy on ironic
python agent (IPA) ramdisks with versions &lt; 1.3 (Mitaka or earlier).
Please upgrade ironic python agent to a newer version.</p>
</li>
<li><p class="first">A number of drivers that were declared as unsupported in Newton release
have been removed from ironic tree. This includes drivers with
power and/or management driver interfaces based on:</p>
<ul class="simple">
<li>MSFT OCS</li>
<li>SeaMicro client</li>
<li>Virtualbox over pyremotevbox client</li>
</ul>
<p>As a result, the following ironic drivers will no longer be available:</p>
<ul class="simple">
<li>agent_vbox</li>
<li>fake_msftocs</li>
<li>fake_seamicro</li>
<li>fake_vbox</li>
<li>pxe_msftocs</li>
<li>pxe_seamicro</li>
<li>pxe_vbox</li>
</ul>
<p>After upgrading, if one or more of these drivers are in the
&#8216;enabled_drivers&#8217; configuration option,
the ironic-conductor service will fail to start.
Any existing ironic nodes with these drivers assigned will become
inoperational via ironic after ironic upgrade,
as it will be not possible to change any node state/properties
except changing the node driver.
Operators having one of the drivers listed above enabled are required to
either disable those drivers and assign another existing driver
to affected nodes as appropriate,
or install these drivers from elsewhere separately.</p>
</li>
<li><p class="first">For SSH power drivers, if the configuration option
<code class="docutils literal"><span class="pre">[neutron]/port_setup_delay</span></code> had been set to 0,
a delay of 15 seconds was used. This is no longer
the case. Please set the configuration option to
the desired value; otherwise the service will not
wait for Neutron agents to set up a port.</p>
</li>
<li><p class="first">Updates required proliantutils version for iLO drivers to 2.2.0. This version has support for sanitize disk erase using SSA utility.</p>
</li>
</ul>
</div>
<div class="section" id="deprecation-notes">
<h3>Deprecation Notes<a class="headerlink" href="#deprecation-notes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Using <code class="docutils literal"><span class="pre">port.extra['vif_port_id']</span></code> for attaching and detaching VIFs to ports or port groups is deprecated and will be removed in Pike release.</li>
<li>The function <code class="docutils literal"><span class="pre">build_instance_info_for_deploy</span></code> is deprecated from <code class="docutils literal"><span class="pre">ironic.drivers.modules.agent</span></code> and will be removed in the Pike cycle. Its new home is <code class="docutils literal"><span class="pre">ironic.drivers.modules.deploy_utils</span></code>. Out-of-tree drivers that use this function should be updated accordingly.</li>
<li>Usage of the following values was deprecated in the policy files:<ul>
<li><code class="docutils literal"><span class="pre">domain_id</span></code> and <code class="docutils literal"><span class="pre">domain_name</span></code> - <code class="docutils literal"><span class="pre">user_domain_id</span></code> should be used
instead of those (note - <code class="docutils literal"><span class="pre">user_domain_id</span></code> is an ID of the domain,
not its name).</li>
<li><code class="docutils literal"><span class="pre">tenant</span></code> - <code class="docutils literal"><span class="pre">project_name</span></code> should be used instead.</li>
<li><code class="docutils literal"><span class="pre">user</span></code> - <code class="docutils literal"><span class="pre">user_id</span></code> should be used instead.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">update_mac_address</span></code> method in the DHCP provider interface is
deprecated and will be removed in the Pike release.
The logic should be moved to a custom network
interface&#8217;s <code class="docutils literal"><span class="pre">port_changed</span></code> and <code class="docutils literal"><span class="pre">portgroup_changed</span></code> methods.</li>
<li>For DRAC drivers, the node&#8217;s <code class="docutils literal"><span class="pre">driver_info[&quot;drac_host&quot;]</span></code> property is deprecated and will be ignored starting in the Pike release. Please use <code class="docutils literal"><span class="pre">driver_info[&quot;drac_address&quot;]</span></code> instead.</li>
<li>Configuration options <code class="docutils literal"><span class="pre">[neutron]/cleaning_network_uuid</span></code> and <code class="docutils literal"><span class="pre">[neutron]/provisioning_network_uuid</span></code> are deprecated in favor of the new configuration options <code class="docutils literal"><span class="pre">[neutron]/cleaning_network</span></code> and <code class="docutils literal"><span class="pre">[neutron]/provisioning_network</span></code> respectively.</li>
<li>The <code class="docutils literal"><span class="pre">agent_last_heartbeat</span></code> field of <code class="docutils literal"><span class="pre">driver_internal_info</span></code> has been removed from all agent drivers, since this field was unused by ironic.</li>
</ul>
</div>
<div class="section" id="security-issues">
<h3>Security Issues<a class="headerlink" href="#security-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Private SSH keys are now masked when using the SSH power driver and node details are requested.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds a missing error check into <code class="docutils literal"><span class="pre">ipmitool</span></code> power driver&#8217;s reboot method so that the reboot can fail properly if power off failed.</li>
<li>Fixes disk size detection for out-of-band inspection in iLO drivers, by optionally using SNMPv3 to get the disk size for certain types of storage.</li>
<li>Drivers using the <code class="docutils literal"><span class="pre">AgentDeploy</span></code> interface now correctly support take-over for <code class="docutils literal"><span class="pre">ACTIVE</span></code> netboot-ed nodes.</li>
<li>Fixed an issue of not returning <code class="docutils literal"><span class="pre">chassis_uuid</span></code> field of a node in API responses if it does not belong to a chassis. It should be always returned, either set to None, or to a corresponding chassis UUID.</li>
<li>Fixes SSH driver validation when using a private key with a passphrase for authentication.</li>
<li>Fixes an issue where setting a boot device as persistent does not work when <code class="docutils literal"><span class="pre">ipmi_force_boot_device</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>.  For more information, see <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1626453">https://bugs.launchpad.net/ironic/+bug/1626453</a>.</li>
<li>Fixes an issue where the API service does not start if audit is enabled with the default value of <code class="docutils literal"><span class="pre">[audit]/ignore_req_list</span></code> configuration option.</li>
<li>Catch unknown exceptions with traceback when validating driver interfaces.</li>
<li>Now sets node&#8217;s <code class="docutils literal"><span class="pre">updated_at</span></code> field correctly after a node has been updated.</li>
<li>Removes a check that was preventing whole disk images from being deployed in UEFI mode without explicitly setting the <code class="docutils literal"><span class="pre">boot_option</span></code> capability to <code class="docutils literal"><span class="pre">local</span></code>. For whole disk images, ironic already assumes booting from local storage by default.</li>
<li>A <code class="docutils literal"><span class="pre">[conductor]/api_url</span></code> value specified in the configuration file that does not start with either <code class="docutils literal"><span class="pre">https://</span></code> or <code class="docutils literal"><span class="pre">http://</span></code> is no longer allowed. An incorrect value led to deployment failure on ironic-python-agent side. This misconfiguration will now be detected during ironic-conductor and ironic-api startup. An exception will be raised and an error about the invalid value will be logged.</li>
<li>Fixes an issue with the <code class="docutils literal"><span class="pre">neutron</span></code> network interface that could lead to an inability to retry the deployment in case of failure on boot interface&#8217;s <code class="docutils literal"><span class="pre">prepare_ramdisk</span></code> stage.</li>
<li>Fixes an issue where a pre-created tenant port was automatically
deleted by ironic on instance delete.</li>
<li>Fixes an issue which caused the DRAC driver (<code class="docutils literal"><span class="pre">pxe_drac</span></code>) <code class="docutils literal"><span class="pre">get_bios_config()</span></code> vendor passthru method to unintentionally raise an <code class="docutils literal"><span class="pre">AttributeError</span></code> exception. That method once again returns the current BIOS configuration. For more information, see <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1637671">https://bugs.launchpad.net/ironic/+bug/1637671</a>.</li>
<li>A validation step is added to verify that the Server Profile Template&#8217;s MAC type is set to Physical when dynamic allocation is enabled. The OneView Driver needs this verification because the machine is going to use a MAC that will only be specified at the profile application.</li>
<li>Fixes an issue where the ironic-conductor service would not run if a trailing comma or empty driver was specified in the <code class="docutils literal"><span class="pre">[DEFAULT]enabled_drivers</span></code> configuration option. The service now runs and logs a warning.</li>
<li>Fail deployment when no ports or port groups are linked to a node. This is to avoid active nodes not connected to any tenant network.</li>
<li>Changes interactions with neutron to always use the neutron credentials from ironic configuration, instead of forwarding the credentials from the API client.</li>
<li>Fixes an issue with node rebuild, when tenant network ports were not
unbound prior to moving the node to provisioning network.</li>
<li>Fixes an issue where the OneView deploy interface does not return the node properties and in the tear down phase does not return the state of the node.</li>
<li>Fixes a bug in the OneView driver where the periodic task to check if a node is in use by OneView may end prematurely.</li>
<li>Fixes a bug where some of the API methods were not using the right context values for checking the policy.</li>
<li>Ironic exceptions that contained arbitrary objects in <code class="docutils literal"><span class="pre">kwargs</span></code> and were sent via RPC were causing <code class="docutils literal"><span class="pre">oslo_messaging</span></code> serializer to fail. This was leading to 500 errors from ironic API, timing out waiting for response from the conductor. Starting with this release, all non-serializable objects contained in an exception&#8217;s kwargs are dropped. Whether the error is going to be returned by the service will depend on the configuration option <code class="docutils literal"><span class="pre">[DEFAULT]/fatal_exception_format_errors</span></code>.</li>
<li>An issue when it was impossible to detach manually attached VIF to port (port.extra) when port is in portgroup by using DELETE <code class="docutils literal"><span class="pre">v1/nodes/&lt;node_ident&gt;/vifs</span></code> API.</li>
<li>Fixes a bug in the iLO drivers&#8217; inspection where an existing <code class="docutils literal"><span class="pre">local_gb</span></code> node property was overwritten with &#8220;0&#8221; if not detected.</li>
<li>Correctly handle unexpected exceptions during inspection. Return more detailed error message to a user and log the traceback.</li>
<li>Fixes a bug with incorrect base socat command, which prevented the usage of console.</li>
<li>Adds support for deploying to IPv6 iSCSI portals.</li>
<li>Remove &#8220;dhcp&#8221; command from the default iPXE script. It is redundant, and may even break booting when the provisioning NIC is not the first one.</li>
<li>Fixes a problem where the deployment of a node would fail to continue if a malformed MAC address was passed to the lookup mechanism in the Ironic API. For example, if a node contains an Infiniband card, the lookup used to fail because the agent ramdisk passes a MAC address (or GID) with 20 octets (instead of the expected 6 octets) as part of the lookup request. Invalid addresses are now ignored.</li>
<li>Fixes a bug in manual clean step caching, which resulted in all clean steps
not being abortable. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1658061">https://bugs.launchpad.net/ironic/+bug/1658061</a>.</li>
<li>Nodes with classic drivers cannot have any interfaces (except for network
and storage) specified. HTTP status 400 is returned in these cases.</li>
<li>Fixes an issue with ironic being able to change the power state of nodes currently in use by OneView.</li>
<li>Fixes the OneView driver to make the <code class="docutils literal"><span class="pre">set_boot_device</span></code> method work as expected with the <code class="docutils literal"><span class="pre">persistent</span></code> option set to <code class="docutils literal"><span class="pre">False</span></code>.</li>
<li>Drivers using the <code class="docutils literal"><span class="pre">PXEBoot</span></code> boot interface now correctly support node
take-over for netboot-ed nodes in <code class="docutils literal"><span class="pre">ACTIVE</span></code> state.  During take-over, the
PXE environment is first re-created before attempting to switch it to
&#8220;service mode&#8221;.</li>
<li>Fixes a bug where OneView drivers create a new instance of the OneView client for each request made.</li>
<li>Ironic now validates any swift temporary URL when preparing for deployment of nodes.</li>
<li>Fixes an issue when attaching VIF to a port with missed <code class="docutils literal"><span class="pre">local_link_connection</span></code> field was allowed when node network interface was <code class="docutils literal"><span class="pre">neutron</span></code>.</li>
</ul>
</div>
<div class="section" id="other-notes">
<h3>Other Notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Some combinations of port group protocols and hardware might not support
falling back to single interface mode. If a static port group was created
under such circumstances (where
<code class="docutils literal"><span class="pre">portgroup.standalone_ports_supported</span> <span class="pre">=</span> <span class="pre">False</span></code>), additional restrictions
apply to such ports and port groups, for example such ports will not
support booting over PXE.</p>
<p>Certain restrictions are imposed on values of port properties for ports
belonging to a port group:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">port.pxe_enabled</span></code> cannot be set to True if the port is a member of
a port group with portgroup.standalone_ports_supported already
set to False.</li>
<li><code class="docutils literal"><span class="pre">portgroup.standalone_ports_supported</span></code> cannot be set to False on a
port group if at least one port in that port group has
<code class="docutils literal"><span class="pre">port.pxe_enabled=True</span></code></li>
<li><code class="docutils literal"><span class="pre">port.extra.vif_port_id</span></code> cannot be set on a port that is a member of
a port group with <code class="docutils literal"><span class="pre">portgroup.standalone_ports_supported=False</span></code> as
setting it means that we using port in single interface mode.</li>
<li><code class="docutils literal"><span class="pre">portgroup.standalone_ports_supported</span></code> cannot be set to False on a
port group if it has at least one port with <code class="docutils literal"><span class="pre">port.extra.vif_port_id</span></code>
set.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="id2">
<h2>6.2.0<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>New Features<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds support for inter-service notifications (disabled by default until the <code class="docutils literal"><span class="pre">notification_level</span></code> configuration option is set). For more information, see the notifications documentation in the developer&#8217;s guide (<a class="reference external" href="http://docs.openstack.org/developer/ironic/dev/notifications.html">http://docs.openstack.org/developer/ironic/dev/notifications.html</a>). Notifications are not actually emitted yet, but will be added in a future release.</li>
<li>Adds support for InfiniBand networking to allow hardware inspection and PXE boot over InfiniBand.</li>
<li>Add the field <cite>standalone_ports_supported</cite> to the port group object. This field indicates whether ports that are members of this port group can be used as stand-alone ports. The default is <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li>Added configdrive support for whole disk images for iSCSI based deploy. This will work for UEFI only or BIOS only images. It will not work for hybrid images which are capable of booting from BIOS and UEFI boot mode.</li>
<li>Adds out-of-band inspection interface usable by DRAC drivers.</li>
<li>Adds <code class="docutils literal"><span class="pre">list_unfinished_jobs</span></code> method to the vendor-passthru interface of the DRAC driver. It provides a way to check the status of the remote config job after a BIOS configuration change was submitted using the <code class="docutils literal"><span class="pre">set_bios_config</span></code> method.</li>
<li>Adds out-of-band RAID management to DRAC driver using the generic RAID interface which makes the functionality available via manual cleaning steps.</li>
<li>New configuration option, <code class="docutils literal"><span class="pre">[drac]/query_raid_config_job_status_interval</span></code> was added. After Ironic has created the RAID config job on the DRAC card, it continues to check for status update on the config job to determine whether the RAID configuration was successfully finished within this interval. Default is 120 seconds.</li>
<li>Adds a new <code class="docutils literal"><span class="pre">[deploy]/erase_devices_metadata_priority</span></code> configuration option to allow operators to configure the priority of (or disable) the &#8220;erase_devices_metadata&#8221; cleaning step.</li>
<li>By default, the ironic-conductor service caches the node&#8217;s deploy ramdisk and kernel images locally and serves them via a separate HTTP server. A new <code class="docutils literal"><span class="pre">[pxe]/ipxe_use_swift</span></code> configuration option (disabled by default) allows images to be accessed directly from object store via Swift temporary URLs. This is only applicable if iPXE is enabled (via <code class="docutils literal"><span class="pre">[pxe]/ipxe_enabled</span></code> configuration option) and image store is in Glance/Swift. For user images that are partition images requiring non-local boot, the default behavior with local caching and an HTTP server will still apply for user image kernel and ramdisk.</li>
<li>Adds a new policy rule that may be used to mask instance-specific secrets, such as configdrive contents or the temp URL used to store a configdrive or instance image.  This is similar to how passwords are already masked.</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Upgrade Notes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">inspect</span></code> interface of the <code class="docutils literal"><span class="pre">pxe_drac</span></code> driver has switched to use out-of-band inspection. For inband inspection, the node should be updated to use the <code class="docutils literal"><span class="pre">pxe_drac_inspector</span></code> driver instead.</li>
<li>The new &#8220;erase_devices_metadata&#8221; cleaning step is enabled by default (if available) in the ironic-python-agent project (priority 99). Wiping the devices metadata is usually very fast and shouldn&#8217;t add much time (if any) to the overall cleaning process. Operators wanting to disable this cleaning step can do it by setting the <code class="docutils literal"><span class="pre">[deploy]/erase_devices_metadata_priority</span></code> configuration option to 0.</li>
<li>Minimum required version of python-ironic-inspector-client was bumped to 1.5.0 (released as part of the Mitaka cycle).</li>
<li>Instance secrets will now, by default, be masked in API responses.  Operators wishing to expose the configdrive or instance image to specific users will need to update their policy.json file and grant the relevant keystone roles.</li>
<li>The minimum required version of proliantutils (needed for iLO drivers) was bumped to 2.1.11. This version includes fixes for the bugs caused by python request library version 2.11.0, Proliant Gen7 support and iLO based RAID configuration.</li>
<li>The minimum required version of python-scciclient (needed for the iRMC driver) was bumped to 0.4.0.</li>
<li>When registering a OneView node in ironic, operator should make sure field <code class="docutils literal"><span class="pre">server_profile_template_uri</span></code> is set in properties/capabilities and not in driver_info anymore. Otherwise the node will fail on validation.</li>
<li>The default bootloader for PXE + UEFI has changed from ELILO to Grub2 because ELILO is not being actively developed anymore. Operators relying on ELILO should explicitly set the <code class="docutils literal"><span class="pre">[pxe]/uefi_pxe_bootfile_name</span></code> and <code class="docutils literal"><span class="pre">[pxe]/uefi_pxe_config_template</span></code> configuration options to the ELILO ROM and configuration template.</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Deprecation Notes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The ClusteredComputeManager is now deprecated.</p>
<p>The Newton version of Nova adds functionality to the ironic virt driver to
support multiple compute hosts without using the hack we call
ClusteredComputeManager. As such, we are marking this unsupported
component as deprecated, and plan to remove it before the end of the Ocata
development cycle.</p>
</li>
<li><p class="first">The following drivers are marked as unsupported and therefore deprecated.
Some or all of these drivers may be removed in the Ocata cycle or later.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">agent_amt</span></code></li>
<li><code class="docutils literal"><span class="pre">agent_iboot</span></code></li>
<li><code class="docutils literal"><span class="pre">agent_pyghmi</span></code></li>
<li><code class="docutils literal"><span class="pre">agent_ssh</span></code></li>
<li><code class="docutils literal"><span class="pre">agent_vbox</span></code></li>
<li><code class="docutils literal"><span class="pre">agent_wol</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_ipminative</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_ssh</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_seamicro</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_iboot</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_snmp</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_vbox</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_amt</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_msftocs</span></code></li>
<li><code class="docutils literal"><span class="pre">fake_wol</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_ipminative</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_ssh</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_vbox</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_seamicro</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_iboot</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_snmp</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_amt</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_msftocs</span></code></li>
<li><code class="docutils literal"><span class="pre">pxe_wol</span></code></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3>Security Issues<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Configdrives often contain sensitive information. Users may upload their own images, which could also contain sensitive information.  The Agent drivers may store this information in a Swift temp URL to allow access from the Agent ramdisk. These URLs are considered sensitive information because they grant unauthenticated access to sensitive information.  Now, we only selectively expose this information to privileged users, whereas previously it was exposed to all authenticated users.</li>
</ul>
</div>
<div class="section" id="id7">
<h3>Bug Fixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">dynamic_allocation</span></code> flag in a node&#8217;s driver_info previously only accepted a Boolean. It now also accepts the strings &#8216;t&#8217;, &#8216;true&#8217;, &#8216;on&#8217;, &#8216;y&#8217;, &#8216;yes&#8217;, or &#8216;1&#8217; as True, and the strings &#8216;f&#8217;, &#8216;false&#8217;, &#8216;off&#8217;, &#8216;n&#8217;, &#8216;no&#8217;, or &#8216;0&#8217; as False. These are matched case-insensitively.</li>
<li>Fixes a bug which prevented the ironic-conductor service from using the interval values from the configuration options, for the periodic tasks. Instead, the default values had been used.</li>
<li>The API now returns an appropriate error message when a chassis description over 255 characters is specified.</li>
<li>Fixes DRAC deploy interface failure when automated cleaning is called without any clean step.</li>
<li>Removed invalid API URL <code class="docutils literal"><span class="pre">/v1/nodes/ports</span></code>. For more information, see <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1580997">https://bugs.launchpad.net/ironic/+bug/1580997</a>.</li>
<li>When no boot mode is explicitly set on a node using an iLO driver, ironic automatically picks a boot mode based on hardware capabilities. This confuses deployers, as these factors are system specific and not configurable. In order to ensure predictable behavior, a new configuration parameter, <code class="docutils literal"><span class="pre">[ilo]/default_boot_mode</span></code>, was added to allow deployers to explicitly set a default. The default value of this option keeps behavior consistent for existing deployments.</li>
<li>Ironic Inspector inspection interface will now fetch the service endpoint for the service catalog, if &#8220;service_url&#8221; is not provided and keystone support is enabled.</li>
<li>Fixes a problem where the boot mode (UEFI or BIOS) wasn&#8217;t being considered when setting the boot device of a node using the &#8220;ipminative&#8221; management interface. It would incorrectly switch UEFI to legacy BIOS mode as part of the request to change the boot device.</li>
<li>Fixes a problem where the boot mode (UEFI or BIOS) wasn&#8217;t being considered when setting the boot device of a node using the &#8220;ipmitool&#8221; management interface. It would incorrectly switch from UEFI to Legacy BIOS mode on some hardware models.</li>
<li>Update create provisioning ports logic to fail only when no neutron ports were created. If we created at least one neutron port, proceed with the deployment. It was the default behaviour for flat scenario.</li>
<li>Fixed updating a MAC on a port for active instances in maintenance mode (previously returned HTTP 500).</li>
<li>Return HTTP 400 for requests to update a MAC on a port for an active instance without maintenance mode set (previously returned HTTP 500).</li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>6.1.0<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>New Features<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">OneView drivers now support dynamic allocation of nodes in OneView, allowing for better resource sharing with non-OpenStack users since Server Hardware will be allocated only when the node is scheduled to be used. To enable the new allocation feature for a node, set the flag <code class="docutils literal"><span class="pre">dynamic_allocation=True</span></code> on the node&#8217;s <code class="docutils literal"><span class="pre">driver_info</span></code>. More information is available at <a class="reference external" href="http://docs.openstack.org/developer/ironic/drivers/oneview.html">http://docs.openstack.org/developer/ironic/drivers/oneview.html</a>.</p>
</li>
<li><p class="first">Adds a <code class="docutils literal"><span class="pre">resource_class</span></code> field to the node resource, which will be used by Nova to define which nodes may quantitatively match a Nova flavor. Operators should populate this accordingly before deploying the Ocata version of Nova.</p>
</li>
<li><p class="first">Exposes the <code class="docutils literal"><span class="pre">local_link_connection</span></code> and <code class="docutils literal"><span class="pre">pxe_enabled</span></code> properties of the
Port resource to the REST API, raising the API maximum version to 1.19.</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">pxe_enabled</span></code> field indicates whether this Port should be used when
PXE booting this Node.</li>
<li>The <code class="docutils literal"><span class="pre">local_link_connection</span></code> field may be used to supply the port
binding profile.</li>
</ul>
</li>
<li><p class="first">A new dictionary field <code class="docutils literal"><span class="pre">internal_info</span></code> is added to the port API object. It is readonly from the API side, and can contain any internal information ironic needs to store for the port. <code class="docutils literal"><span class="pre">cleaning_vif_port_id</span></code> is being stored inside this dictionary.</p>
</li>
<li><p class="first">Adds support for socat-based serial console to ipmitool-based drivers. These are available by using the <code class="docutils literal"><span class="pre">agent_ipmitool_socat</span></code> and <code class="docutils literal"><span class="pre">pxe_ipmitool_socat</span></code> drivers.</p>
</li>
<li><p class="first">The ironic-api service now supports logging audit messages of
API calls. The following configuration parameters have been added.
By default audit logging for ironic-api service is turned off.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[audit]/enabled</span></code></li>
<li><code class="docutils literal"><span class="pre">[audit]/ignore_req_list</span></code></li>
<li><code class="docutils literal"><span class="pre">[audit]/audit_map_file</span></code></li>
</ul>
<p>Further documentation for this feature is available at
<a class="reference external" href="http://docs.openstack.org/developer/ironic/deploy/api-audit-support.html">http://docs.openstack.org/developer/ironic/deploy/api-audit-support.html</a> .</p>
</li>
<li><p class="first">Adds support for collecting deployment logs from the IPA
ramdisk. Five new configuration options were added:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[agent]/deploy_logs_collect</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/deploy_logs_storage_backend</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/deploy_logs_local_path</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/deploy_logs_swift_container</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/deploy_logs_swift_days_to_expire</span></code>.</li>
</ul>
</li>
<li><p class="first">Ironic now emits timing metrics for all API methods to statsd, if enabled by the <code class="docutils literal"><span class="pre">[metrics]</span></code> and <code class="docutils literal"><span class="pre">[metrics_statsd]</span></code> configuration sections.</p>
</li>
<li><p class="first">RESTful access to every API resource may now be controlled by adjusting
policy settings. Defaults are set in code, and remain backwards compatible
with the previously-included policy.json file.  Two new roles are checked
by default, &#8220;baremetal_admin&#8221; and &#8220;baremetal_observer&#8221;, though these may be
replaced or overridden by configuration.  The &#8220;baremetal_observer&#8221; role
grants read-only access to Ironic&#8217;s API.</p>
</li>
<li><p class="first">New API endpoint for deploy ramdisk lookup <code class="docutils literal"><span class="pre">/v1/lookup</span></code>. This endpoint is not authenticated to allow ramdisks to access it without passing the credentials to them.</p>
</li>
<li><p class="first">New API endpoint for deploy ramdisk heartbeat <code class="docutils literal"><span class="pre">/v1/heartbeat/&lt;NODE&gt;</span></code>. This endpoint is not authenticated to allow ramdisks to access it without passing the credentials to them.</p>
</li>
<li><p class="first">Adds multitenant networking support.</p>
<p>Ironic now has the concept of &#8220;network interfaces&#8221; for a node, which
represent a networking driver.</p>
<p>There are three network interfaces available:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">flat</span></code>: this replicates the old flat network behavior and is the default
when using neutron for DHCP.</li>
<li><code class="docutils literal"><span class="pre">noop</span></code>: this replicates the old flat behavior when not using neutron for
DHCP, and is the default when the configuration option
<code class="docutils literal"><span class="pre">[DHCP]/dhcp_provider</span></code> is set to &#8220;none&#8221;.</li>
<li><code class="docutils literal"><span class="pre">neutron</span></code>: this allows for separating the provisioning and cleaning
networks from the tenant networks, and provides isolation from tenant
network to tenant network, and tenant network to control plane.
The following configuration options must be set if the neutron interface
is enabled, or ironic-conductor will fail to start:<ul>
<li><code class="docutils literal"><span class="pre">[neutron]/provisioning_network_uuid</span></code></li>
<li><code class="docutils literal"><span class="pre">[neutron]/cleaning_network_uuid</span></code></li>
</ul>
</li>
</ul>
<p>A <code class="docutils literal"><span class="pre">[DEFAULT]/enabled_network_interfaces</span></code> option (which must be set for
both ironic-api and ironic-conductor services) controls which network
interfaces are available for use.</p>
<p>A network interface is set for a node by setting the <code class="docutils literal"><span class="pre">network_interface</span></code>
field for the node via the REST API. This field is available in API version
1.20 and above. Changing the network interface may only be done in the
<code class="docutils literal"><span class="pre">enroll</span></code>, <code class="docutils literal"><span class="pre">inspecting</span></code>, and <code class="docutils literal"><span class="pre">manageable</span></code> states.</p>
<p>The configuration option <code class="docutils literal"><span class="pre">[DEFAULT]/default_network_interface</span></code> may be
used to specify which network interface is defined when a node is created.</p>
<p><strong>WARNING: don&#8217;t set the option ``[DEFAULT]/default_network_interface``
before upgrading to this release without reading the upgrade notes about
it, due to data migrations depending on the value.</strong></p>
</li>
<li><p class="first">Adds the ability for ironic conductor to pass configurations for agent metrics on lookup. When paired with a sufficiently new ironic python agent, this will configure the metrics backends.</p>
</li>
<li><p class="first">Extend the root device hints to identify whether a disk is rotational or not.</p>
</li>
<li><p class="first">Added support to validate iLO SSL certificate in iLO drivers. A new configuration option <code class="docutils literal"><span class="pre">[ilo]/ca_file</span></code> is added to specify the iLO CA certificate file. If <code class="docutils literal"><span class="pre">[ilo]/ca_file</span></code> is specified, the iLO drivers will validate iLO SSL certificates.</p>
</li>
</ul>
</div>
<div class="section" id="id10">
<h3>Upgrade Notes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Adds a <code class="docutils literal"><span class="pre">resource_class</span></code> field to the node resource, which will be used by Nova to define which nodes may quantitatively match a Nova flavor. Operators should populate this accordingly before deploying the Ocata version of Nova.</p>
</li>
<li><p class="first">Collecting logs on deploy failure is enabled by default and the logs will be saved to the local disk at the location specified by the configuration option <code class="docutils literal"><span class="pre">[agent]/deploy_logs_local_path</span></code> (by default, <code class="docutils literal"><span class="pre">/var/log/ironic/deploy</span></code>). Operators upgrading may want to disable this feature, enable some form of rotation for the logs or change the configuration to store the logs in Swift to avoid disk space problems.</p>
</li>
<li><p class="first">During an upgrade, it is recommended that all deployers re-evaluate the
settings in their <code class="docutils literal"><span class="pre">/etc/ironic/policy.json</span></code> file. This file should now be
used only to override default configuration, such as by limiting access to
the ironic service to specific tenants or restricting access to
specific API endpoints. A <code class="docutils literal"><span class="pre">policy.json.sample</span></code> file is provided that
lists all supported policies.</p>
</li>
<li><p class="first">Changes the way to configure access credentials for OpenStack services
clients. For each service, both Keystone session options
(timeout, SSL-related ones) and Keystone auth_plugin options
(auth_url, auth_type and corresponding auth_plugin options)
should be specified in the configuration section for this service.
Configuration sections affected are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[neutron]</span></code> for Neutron service user</li>
<li><code class="docutils literal"><span class="pre">[glance]</span></code> for Glance service user</li>
<li><code class="docutils literal"><span class="pre">[swift]</span></code> for Swift service user</li>
<li><code class="docutils literal"><span class="pre">[inspector]</span></code> for Ironic Inspector service user</li>
<li><code class="docutils literal"><span class="pre">[service_catalog]</span></code> <em>new section</em> for Ironic service user,
used to discover Ironic endpoint from Keystone Catalog</li>
</ul>
<p>This enables fine tuning of authentication for each service.</p>
<p>Backward-compatible options handling is provided
using values from <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> config section,
but operators are advised to switch to the new config options as the
old options are deprecated. The old options will be removed during the
Ocata cycle.
For more information on sessions, auth plugins and their settings,
please refer to <a class="reference external" href="http://docs.openstack.org/developer/keystoneauth/">http://docs.openstack.org/developer/keystoneauth/</a>.</p>
</li>
<li><p class="first">Small change in semantics of default for <code class="docutils literal"><span class="pre">[neutron]/url</span></code> option</p>
<ul class="simple">
<li>default is changed to None.</li>
<li>For the case when <code class="docutils literal"><span class="pre">[neutron]/auth_strategy</span></code> is <code class="docutils literal"><span class="pre">noauth</span></code>,
default means use <code class="docutils literal"><span class="pre">http://$my_ip:9696</span></code>.</li>
<li>For the case when <code class="docutils literal"><span class="pre">[neutron]/auth_strategy</span></code> is <code class="docutils literal"><span class="pre">keystone</span></code>,
default means to resolve the endpoint from Keystone Catalog.</li>
</ul>
</li>
<li><p class="first">New config section <code class="docutils literal"><span class="pre">[service_catalog]</span></code> for access credentials used to discover Ironic API URL from Keystone Catalog. Previously credentials from <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> section were used, which is now deprecated for such purpose.</p>
</li>
<li><p class="first">A new configuration option <code class="docutils literal"><span class="pre">[api]/restrict_lookup</span></code> is added, which restricts the lookup API (normally only used by ramdisks) to only work when the node is in specific states used by the ramdisk, and defaults to True. Operators that need this endpoint to work in any state may set this to False, though this is insecure and should not be used in normal operation.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">[DEFAULT]/default_network_interface</span></code> configuration option is introduced,
with empty default value. If set, the specified interface will be used as
the network interface for nodes that don&#8217;t have <code class="docutils literal"><span class="pre">network_interface</span></code> field
set. If it is not set, the network interface is determined by looking at
the <code class="docutils literal"><span class="pre">[dhcp]/dhcp_provider</span></code> value. If it is <code class="docutils literal"><span class="pre">neutron</span></code> - <code class="docutils literal"><span class="pre">flat</span></code> network
interface is the default, <code class="docutils literal"><span class="pre">noop</span></code> otherwise.</p>
<p>The network interface will be set for all nodes without network_interface
already set via a database migration. This will be set following the logic
above. When running database migrations for an existing deployment, it&#8217;s
important to check the above configuration options to ensure the existing
nodes will have the expected network_interface. If
<code class="docutils literal"><span class="pre">[DEFAULT]/default_network_interface</span></code> is not set, everything should go as
expected. If it is set, ensure that it is set to the value that you wish
existing nodes to use.</p>
</li>
<li><p class="first">Note that if the configuration option <code class="docutils literal"><span class="pre">[DEFAULT]/default_network_interface</span></code> is set, it must be set in the configuration file for both the API and conductor hosts.</p>
</li>
<li><p class="first">If <code class="docutils literal"><span class="pre">neutron</span></code> network interface is specified for the configuration option <code class="docutils literal"><span class="pre">[DEFAULT]/enabled_network_interfaces</span></code>, then <code class="docutils literal"><span class="pre">[neutron]/provisioning_network_uuid</span></code> and <code class="docutils literal"><span class="pre">[neutron]/cleaning_network_uuid</span></code> configuration options are required. If either of them is not specified, the ironic-conductor service will fail to start.</p>
</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Deprecation Notes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecates pre-allocation feature for the OneView drivers since it requires resource allocation to Ironic prior to boot time, which makes Server Hardware unavailable to non-OpenStack OneView users. Pre-allocation will be removed in the OpenStack Pike release. All nodes with <code class="docutils literal"><span class="pre">dynamic_allocation=False</span></code> set, or that don&#8217;t have the <code class="docutils literal"><span class="pre">dynamic_allocation</span></code> flag set, will be assumed to be in pre-allocation. Users may use the REST API or the <code class="docutils literal"><span class="pre">ironic-oneview-cli</span></code> to migrate nodes from pre-allocation to dynamic allocation. More information is available at <a class="reference external" href="http://docs.openstack.org/developer/ironic/drivers/oneview.html">http://docs.openstack.org/developer/ironic/drivers/oneview.html</a>.</li>
<li>Agent vendor passthru is deprecated and will be removed in Ocata release. Operators should update their IPA image to the Newton version to use the new replacement API. Driver developers should stop using the agent vendor passthru.</li>
<li>The <code class="docutils literal"><span class="pre">[ilo]/clean_priority_erase_devices</span></code> configuration option is deprecated and will be removed in the Ocata cycle. Please use the <code class="docutils literal"><span class="pre">[deploy]/erase_devices_priority</span></code> option instead.</li>
<li>The <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> configuration section is deprecated for configuring clients for other services (but is still used for configuring API token authentication), in favor of the <code class="docutils literal"><span class="pre">[service_catalog]</span></code> section. The ability to configure clients for other services via the <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> section will be removed during the Ocata cycle.</li>
<li>The configuration option <code class="docutils literal"><span class="pre">[agent]/heartbeat_timeout</span></code> was renamed to <code class="docutils literal"><span class="pre">[api]/ramdisk_heartbeat_timeout</span></code>. The old variant is deprecated.</li>
<li><code class="docutils literal"><span class="pre">create_cleaning_ports</span></code> and <code class="docutils literal"><span class="pre">delete_cleaning_ports</span></code> methods in DHCP
providers are deprecated and will be removed completely in the Ocata
release. The logic they are implementing should be moved to a custom
network interface&#8217;s <code class="docutils literal"><span class="pre">add_cleaning_network</span></code> and
<code class="docutils literal"><span class="pre">remove_cleaning_network</span></code> methods respectively. After that, the methods
themselves should be removed from DHCP provider so that the custom
network interface is used instead. <code class="docutils literal"><span class="pre">flat</span></code> network interface does not
require <code class="docutils literal"><span class="pre">[neutron]/cleaning_network_uuid</span></code> for now so as not to break
standalone deployments upon upgrade, but it will be required in the Ocata
release if the <code class="docutils literal"><span class="pre">flat</span></code> network interface is enabled.</li>
<li>Putting periodic tasks on a driver object (rather than interface) is deprecated. Driver developers should move periodic tasks from driver objects to interface objects.</li>
</ul>
</div>
<div class="section" id="id12">
<h3>Security Issues<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Previously, access to Ironic&#8217;s REST API was &#8220;all or nothing&#8221;.  With this
release, it is now possible to restrict read and write access to API
resources to specific cloud roles.</li>
</ul>
</div>
<div class="section" id="id13">
<h3>Bug Fixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adoption feature logic was updated to prevent ramdisk creation and default to instance creation where appropriate based on the driver.</li>
<li>Adoption documentation has been updated to note that the boot_option should likely be defined for nodes by a user leveraging the feature.</li>
<li>Adoption documentation has been updated to note that a user may wish to utilize the <code class="docutils literal"><span class="pre">noop</span></code> network interface that arrived with API version 1.20.</li>
<li>Fixes the issue of not attaching virtual media during cleaning operation for vmedia based drivers.</li>
<li>A node using the <code class="docutils literal"><span class="pre">agent_ilo</span></code> or <code class="docutils literal"><span class="pre">iscsi_ilo</span></code> driver now has its <code class="docutils literal"><span class="pre">driver_info/ilo_deploy_iso</span></code> field validated during node validation.</li>
<li>Clear target_power_state of the nodes locked by the conductor on its startup.</li>
<li>Fixed a bug where the ironic python agent ramdisk was not creating an ephemeral partition because the ephemeral partition size was not being passed correctly to the agent.</li>
<li>Do not rely on keystonemiddleware config options for instantiating clients for other OpenStack services. This allows changing keystonemiddleware options from legacy ones and thus support Keystone V3 for token validation.</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Other Notes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">continue_deploy</span></code> and <code class="docutils literal"><span class="pre">reboot_to_instance</span></code> methods in the <code class="docutils literal"><span class="pre">BaseAgentVendor</span></code> class stopped accepting ** arguments. They were never used anyway; drivers should stop passing anything there.</li>
</ul>
</div>
</div>
<div class="section" id="id15">
<h2>6.0.0<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<p>Starting with this release IPA is the only deployment and inspection ramdisk supported by Ironic.</p>
<div class="section" id="id16">
<h3>New Features<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Addition of the provision state target verb of <code class="docutils literal"><span class="pre">adopt</span></code> which allows an operator to move a node into an <code class="docutils literal"><span class="pre">active</span></code> state from <code class="docutils literal"><span class="pre">manageable</span></code> state, without performing a deployment operation on the node. This can be used to represent nodes that have been previously deployed by other means that will now be managed by ironic and be later released to the available hardware pool.</li>
<li>A new configuration option <code class="docutils literal"><span class="pre">[deploy]continue_if_disk_secure_erase_fails</span></code>, which has a default value of False, has been added. If set to True, the Ironic Python Agent will revert to a disk shred operation if an ATA secure erase operation fails. Under normal circumstances, the failure of an ATA secure erase operation results in the node being put in <code class="docutils literal"><span class="pre">clean</span> <span class="pre">failed</span></code> state.</li>
<li>IPA supported iSCSI portal port customization already. With this patch, we added new portal_port argument into agent_client.start_iscsi_target() method to pass iSCSI portal port to IPA side. And add new configuration into iscsi module as CONF.iscsi.portal_port</li>
<li>Operators can now set deploy.power_off_after_deploy_failure to leave nodes powered on when a deployment fails. This is useful for troubleshooting deployment issues. As a note, Nova will still attempt to delete a node after a failed deployment, so deploy.power_off_after_deploy_failure may not be very effective in non-standalone deployments until a similar patch to ironic&#8217;s driver in nova is proposed.</li>
<li>This adds the reboot_requested option for in-band cleaning. If set to true, Ironic will reboot the node after that step has completed and before continuing with the next step. This option is useful for when some action, such as a BIOS upgrade or setting change, requires a reboot to take effect.</li>
<li>It is now possible to configure the notifications to use a different transport URL than the RPCs. These could potentially be completely different message broker hosts (though they don&#8217;t need to be). If the notification-specific configuration is not provided, the notifier will use the same transport as the RPCs.</li>
<li>ipxe will now retry to download the kernel or the initrd in case of failure. The previous behavior was to give up and continue the boot on the next boot device. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1326656">https://bugs.launchpad.net/ironic/+bug/1326656</a></li>
<li>Added support for JBOD volumes in RAID configuration.</li>
<li>A new configuration option, <cite>shred_final_overwrite_with_zeros</cite> is now available. This option controls the final overwrite with zeros done on all block devices for a node under cleaning. This feature was previously always enabled and not configurable. This option is only used when a block device could not be ATA Secure Erased.</li>
<li>Adds the ability for node vendor passthru methods to use shared locks. Default behavior of always acquiring an exclusive lock for node vendor passthru methods is unchanged.</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Upgrade Notes<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A new configuration option <code class="docutils literal"><span class="pre">[deploy]continue_if_disk_secure_erase_fails</span></code>, which has a default value of False, has been added. The default setting represents the standard behavior of the Ironic Python Agent during a cleaning failure.</li>
<li>Fixed Mitaka ironic python agent ramdisk iSCSI deploy compatibility with newer versions of ironic by logging the warning and retrying the deploy if wiping root disk metadata before exposing it over iSCSI fails. If custom iSCSI port is requested, an error clarifying the issue is logged and the operator is requested either to use the default iSCSI portal port, or to upgrade ironic python agent ramdisk to version &gt;= 1.3 (Newton).</li>
<li>Removes support for &#8220;hexraw&#8221; type in the iPXE script (boot.ipxe) since &#8220;hexraw&#8221; is not supported in older versions of iPXE. &#8220;hexhyp&#8221; replaced &#8220;hexraw&#8221; and has been used since kilo.</li>
<li>Support for the old ramdisk (&#8220;deploy-ironic&#8221; diskimage-builder element) was removed. Please switch to IPA before upgrading.</li>
<li>Removed the workaround in API allowing removing &#8220;instance_uuid&#8221; during cleaning. It was only required for Nova during introduction of cleaning.</li>
<li>In the configuration group <code class="docutils literal"><span class="pre">[agent]</span></code>, the following options were
deprecated in the Liberty cycle and they have been removed:<ul>
<li><code class="docutils literal"><span class="pre">[agent]/agent_pxe_append_params</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/agent_pxe_config_template</span></code></li>
</ul>
</li>
<li>Remove the deprecated &#8220;[conductor]/clean_nodes&#8221; option. Configuration files should instead use the &#8220;[conductor]/automated_clean&#8221; option.</li>
<li>In the config section <code class="docutils literal"><span class="pre">[agent]</span></code> two config options were deprecated in the
Liberty cycle and they have been removed. The options were named:<ul>
<li><code class="docutils literal"><span class="pre">[agent]/agent_erase_devices_priority</span></code></li>
<li><code class="docutils literal"><span class="pre">[agent]/agent_erase_devices_iterations</span></code></li>
</ul>
</li>
<li>Removes support for the deprecated &#8220;discoverd&#8221; group for inspection options. Configuration files should use the &#8220;inspector&#8221; group instead.</li>
<li>Removes the deprecated decorator &#8220;driver_periodic_task&#8221;, Drivers should use the &#8220;periodics.periodic&#8221; decorator from the futurist library instead.</li>
<li>Removes support for the &#8220;message&#8221; attribute from the &#8220;IronicException&#8221; class. Subclasses of &#8220;IronicException&#8221; should instead use the &#8220;_msg_fmt&#8221; attribute. This change is only relevant to developers.</li>
<li>Removes deprecated option &#8220;[agent]/manage_tftp&#8221;. Configuration files should instead use the &#8220;[agent]/manage_agent_boot&#8221; option.</li>
<li>Removes the deprecated config option &#8220;periodic_interval&#8221;.</li>
<li>Removes deprecated options &#8220;[pxe]/http_url&#8221; and &#8220;[pxe]/http_root&#8221;. Configuration files should instead use &#8220;[deploy]/http_url&#8221; and &#8220;[deploy]/http_root&#8221;.</li>
<li>The &#8216;verbose&#8217; configuration option was removed, consequently the &#8220;&#8211;verbose, -v&#8221; parameter from all command lines was also removed. This affects the ironic-api, ironic-conductor, ironic-dbsync, and ironic-rootwrap commands. The verbose config/parameter was originally a shortcut to set the log level to INFO, however the log level has defaulted to INFO since this option was deprecated, so this option was a noop.</li>
</ul>
</div>
<div class="section" id="id18">
<h3>Deprecation Notes<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The [deploy]/erase_devices_iterations config is deprecated and will be removed in the Ocata cycle. It has been replaced by the [deploy]/shred_random_overwrite_iterations config. This configuration option controls the number of times block devices are overwritten with random data. This option is only used when a block device could not be ATA Secure Erased.</li>
</ul>
</div>
<div class="section" id="id19">
<h3>Security Issues<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A critical security vulnerability (CVE-2016-4985) was fixed in this release. Previously, a client with network access to the ironic-api service was able to bypass Keystone authentication and retrieve all information about any Node registered with Ironic, if they knew (or were able to guess) the MAC address of a network card belonging to that Node, by sending a crafted POST request to the /v1/drivers/$DRIVER_NAME/vendor_passthru resource. Ironic&#8217;s policy.json configuration is now respected when responding to this request such that, if passwords should be masked for other requests, they are also masked for this request.</li>
</ul>
</div>
<div class="section" id="id20">
<h3>Bug Fixes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixes a bug where Ironic won&#8217;t log the request-id during hardware inspection.</li>
<li>Fix a problem that caused the bmc_reset() vendor passthru method from the IPMI drivers to be always executed as &#8220;warm&#8221;.</li>
<li>This fixes the issue of RAID interface not being supported in iscsi_ilo driver.</li>
<li>A bug has been corrected where a node&#8217;s current clean_step was not purged upon that node timing out from a CLEANWAIT state. Previously, this bug would prevent a user from retrying cleaning operations. For more information, see <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1590146">https://bugs.launchpad.net/ironic/+bug/1590146</a>.</li>
<li>Correct api version check conditional for node.name to address an issue that we could set node name to &#8216;&#8217; using API version lower than 1.5, where node names were introduced.</li>
<li>Fixes a problem which causes the conductor to error out on startup in case there&#8217;s a duplicated entry in the enabled_drivers configuration option.</li>
<li>Remove the possibility to set incorrect node name by specifying multiple add/replace operations in patch request. Since this version, all the values specified in the patch for name are checked, in order to conform to JSON PATCH RFC <a class="reference external" href="https://tools.ietf.org/html/rfc6902">https://tools.ietf.org/html/rfc6902</a>.</li>
<li>Fixed the default value of &#8216;port&#8217; in iscsi_deploy.get_deploy_info to be set to [iscsi]/portal_port option value, instead of hardcoding it to &#8216;3260&#8217;.</li>
<li>Fixes an issue where iLO drivers fail to download the firmware file from swift when the swift file path includes swift pseudo folder.</li>
<li>This fixes InvalidMAC exception of iRMC out-of-band inspection.</li>
<li>Fixed a VirtualBox issue that Ironic fails to set VirtualBox VM&#8217;s boot device when it is powered on. This bug causes two problems 1. VirtualBox cannot deploy VMs in local boot mode. 2. Ironic fails to set boot device when VirtualBox VMs is powered on and also fails to get the correct boot device from Ironic API call when VMs is powered on.</li>
<li>A bug was identified in the behavior of the iLO drivers where nodes that are not active but taking part of a conductor takeover could be powered off. In preparation for new features and functionality, that risk encountering this bug, we are limiting the deployment preparation steps to the <code class="docutils literal"><span class="pre">deploying</span></code> state to prevent nodes from being erroneously powered off.</li>
<li>Fixed performance issue for &#8216;ironic.nova.compute.ClusteredComputeManager&#8217; when during Nova instance termination resources were updated for all Nova hypervisors.</li>
<li>Fixes a problem which allowed nodes to be named with some reserved words that are implicitly not allowed due the way the Ironic API works. The reserved words are &#8220;maintenance&#8221;, &#8220;management&#8221;, &#8220;ports&#8221;, &#8220;states&#8221;, &#8220;vendor_passthru&#8221;, &#8220;validate&#8221; and &#8220;detail&#8221;.</li>
<li>Some nodes&#8217; console may be enabled but the corresponding console services stopped while starting conductors, this tries to start consoles on conductor startup to make the status consistent.</li>
<li>This forces iRMC vmedia boot from remotely connected (redirected) CD/DVD instead of default CD/DVD. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1561852">https://bugs.launchpad.net/ironic/+bug/1561852</a> for details.</li>
<li>Fixed a bug that was causing grub installation failure. If the disk was already coming with a partition table, the conductor was not able to wipe it properly and the new partition table would conflict with the old one. The issue was only impacting new nodes and installations with automated_clean disabled in the configuration. A disk instance without preserve_ephemeral is now purged before new deployment. See <a class="reference external" href="https://bugs.launchpad.net/ironic-lib/+bug/1550604">https://bugs.launchpad.net/ironic-lib/+bug/1550604</a></li>
</ul>
</div>
<div class="section" id="id21">
<h3>Other Notes<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When a node is enrolled into ironic, upon transition to the <code class="docutils literal"><span class="pre">manageable</span></code> state, the current power state of the node is recorded.  Once the node is adopted and in an <code class="docutils literal"><span class="pre">active</span></code> state, that recorded power state will be enforced by ironic unless an operator changes the power state in ironic. This was the default behavior of ironic prior to the adoption feature.</li>
<li>Adopt oslo-config-generator to generate sample config files. New config options from Ironic code should register with ironic/conf/opts.py. New external libraries should register with tools/config/ironic-config-generator.conf. A deprecated option should add a deprecated group even if it didn&#8217;t alter its group, otherwise the deprecated group will use &#8216;DEFAULT&#8217; by default.</li>
<li>Do not show DEBUG logging from keystoneauth and keystonemiddleware by default.</li>
<li>Log eventlet.wsgi.server events with a proper logger name and ignore DEBUG logging by default.</li>
<li>Add Neutron <code class="docutils literal"><span class="pre">port_setup_delay</span></code> configuration option. This delay allows Ironic to wait for Neutron port operations until we have a mechanism for synchronizing events with Neutron. Set to 0 by default.</li>
</ul>
</div>
</div>
<div class="section" id="id22">
<h2>5.1.0<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id23">
<h3>New Features<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds support for partition images for agent based drivers.</li>
<li>Adds support to pass a optional CA certificate using [glance]glance_cafile configuration option to validate the SSL certificate served by glance for secured https communication between Glance and Ironic.</li>
<li>Append request_id as <code class="docutils literal"><span class="pre">Openstack-Request-Id</span></code> header to the response.</li>
</ul>
</div>
<div class="section" id="id24">
<h3>Upgrade Notes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds a [glance]glance_cafile configuration option to pass a optional certificate for secured https communication. It is used  when [glance]glance_api_insecure configuration option is set to False.</li>
</ul>
</div>
<div class="section" id="id25">
<h3>Bug Fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ensure node&#8217;s target_provision_state is cleared when the node is moved to a stable state, indicating that the state transition is done.</li>
<li>Fixes the bug where the user specified disk_label is ignored for the agent drivers for partition images.</li>
<li>Fixes a problem where some hardware/firmware (specially faulty ones) won&#8217;t come back online after an in-band ACPI soft power off by adding a new driver property called &#8220;deploy_forces_oob_reboot&#8221; that can be set to the nodes being deployed by the IPA ramdisk. If the value of this property is True, Ironic will power cycle the node via out-of-band.</li>
<li>Fixes a bug where the keystone_authtoken/region_name wasn&#8217;t passed to Swift when instantiating its client, in a multi-region environment this is needed so the client can choose the correct swift endpoint.</li>
</ul>
</div>
</div>
<div class="section" id="id26">
<h2>5.0.0<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<p>This release adds support for manual cleaning and RAID configuration. Operators may now manually run clean steps, including setting up RAID on a node, while a node is in the manageable state.</p>
<p>This release features switch to Oslo Futurist library for asynchronous thread execution and periodic tasks. Main benefit is that periodic tasks are now executed truly in parallel, and not sequentially in one green thread.</p>
<div class="section" id="id27">
<h3>New Features<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add support for ipmitool&#8217;s port (-p) option. This allows ipmitool support for operators that do not use the default port (623) as their IPMI port.</li>
<li>Pass proxy information from agent driver to IPA ramdisk, so that images can be cached on the proxy server.</li>
<li>Add support for a new capability called &#8216;disk_label&#8217; to allow operators to choose the disk label that will be used when Ironic is partitioning the disk.</li>
<li>iLO drivers now provide out-of-band firmware update as a manual cleaning step, for supported hardware components.</li>
<li>Support for activation of iLO Advanced license as a manual cleaning step in iLO drivers.</li>
<li>Enabled Inspector Inspection for CIMC and UCS drivers</li>
<li>Adds support for using iPXE in UEFI mode.</li>
<li>Add the ability to adjust ipxe timeout during image downloading, default is still unlimited (0).</li>
<li>Adds out-of-band inspection support for iRMC drivers.</li>
<li>Add support for filtering nodes using the same driver via the API.</li>
<li>Adds support for manual cleaning. This is available with API version 1.15. For more information, see <a class="reference external" href="http://docs.openstack.org/developer/ironic/deploy/cleaning.html#manual-cleaning">http://docs.openstack.org/developer/ironic/deploy/cleaning.html#manual-cleaning</a></li>
<li>Root device hints extended to support the device name.</li>
<li>Database migrations downgrade support was removed. More info about database migration/rollback could be found here <a class="reference external" href="http://docs.openstack.org/openstack-ops/content/ops_upgrades-roll-back.html">http://docs.openstack.org/openstack-ops/content/ops_upgrades-roll-back.html</a></li>
<li>Adds ShellinaboxConsole support for virsh SSH driver.</li>
</ul>
</div>
<div class="section" id="known-issues">
<h3>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>When using caching proxy with <code class="docutils literal"><span class="pre">agent_*</span></code> drivers, caching the image on the proxy server might involve increasing [glance]swift_temp_url_duration config option value. This way, the cached entry will be valid for a period of time long enough to see the benefits of caching. Large temporary URL duration might become a security issue in some cases.</li>
</ul>
</div>
<div class="section" id="id28">
<h3>Upgrade Notes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Adds a [glance]swift_temp_url_cache_enabled configuration option to enable Swift temporary URL caching. It is only useful if the caching proxy is used. Also adds [glance]swift_temp_url_expected_download_start_delay, which is used to check if the Swift temporary URL duration is long enough to let the image download to start, and, if temporary URL caching is enabled, to determine if a cached entry will be still valid when download starts. The value of [glance]swift_temp_url_expected_download_start_delay must be less than the value for the [glance]swift_temp_url_duration configuration option.</p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">choices</span></code> parameter to config options. Invalid values will be
rejected when first accessing them, which can happen in the middle of
deployment.</p>
<table border="1" class="docutils">
<colgroup>
<col width="67%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Choices</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[DEFAULT]/auth_strategy</td>
<td>keystone, noauth</td>
</tr>
<tr class="row-odd"><td>[glance]/auth_strategy</td>
<td>keystone, noauth</td>
</tr>
<tr class="row-even"><td>[glance]/glance_protocol</td>
<td>http, https</td>
</tr>
<tr class="row-odd"><td>[neutron]/auth_strategy</td>
<td>keystone, noauth</td>
</tr>
<tr class="row-even"><td>[amt]/protocol</td>
<td>http, https</td>
</tr>
<tr class="row-odd"><td>[irmc]/remote_image_share_type</td>
<td>CIFS, NFS</td>
</tr>
<tr class="row-even"><td>[irmc]/port</td>
<td>443, 80</td>
</tr>
<tr class="row-odd"><td>[irmc]/auth_method</td>
<td>basic, digest</td>
</tr>
<tr class="row-even"><td>[irmc]/sensor_method</td>
<td>ipmitool, scci</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Adds a config option &#8216;debug_tracebacks_in_api&#8217; to allow the API service to return tracebacks in API responses in an error condition.</p>
</li>
<li><p class="first">Dependency for DRAC driver changed from <code class="docutils literal"><span class="pre">pywsman</span></code> to <code class="docutils literal"><span class="pre">python-dracclient</span></code> with version &gt;= 0.0.5. Exceptions thrown by the driver and return values of the <code class="docutils literal"><span class="pre">set_bios_config</span></code>, <code class="docutils literal"><span class="pre">commit_bios_config</span></code> and <code class="docutils literal"><span class="pre">abandon_bios_config</span></code> methods changed on the vendor-passthru interface.</p>
</li>
<li><p class="first">Configuration option &#8220;workers_pool_size&#8221; can no longer be less or equal to 2. Please set it to greater value (the default is 100) before update.</p>
</li>
<li><p class="first">Adds new configuration [ironic_lib]root_helper, to specify
the command that is prefixed to commands that are run as root.
Defaults to using the rootwrap config file at
/etc/ironic/rootwrap.conf.</p>
</li>
<li><p class="first">Moves these configuration options from [deploy] group to the
new [disk_utils] group: efi_system_partition_size, dd_block_size
and iscsi_verify_attempts.</p>
</li>
<li><p class="first">Updated python-scciclient required version number for iRMC driver to 0.3.0 which fixed the bug &#8216;#1518999&#8217; and &#8216;#1519000&#8217;.</p>
</li>
</ul>
</div>
<div class="section" id="id29">
<h3>Deprecation Notes<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The [conductor]/clean_nodes config is deprecated and will be removed in the Newton cycle. It has been replaced by the [conductor]/automated_clean config.</li>
<li>Configuration option &#8220;periodic_interval&#8221; is deprecated.</li>
<li>Using &#8220;driver_periodic_task&#8221; decorator is deprecated. Please update your out-of-tree drivers to use &#8220;periodics.periodic&#8221; decorator from Futurist library.</li>
<li>The following configuration options have been moved to
the [disk_utils] group; they are deprecated from the
[deploy] group: efi_system_partition_size, dd_block_size and
iscsi_verify_attempts.</li>
</ul>
</div>
<div class="section" id="id30">
<h3>Bug Fixes<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>No longer returns tracebacks for API errors in debug mode.</li>
<li>Disables default execution of clean step &#8216;reset_ilo&#8217; during automated cleaning. Resetting of iLO is not required during every invocation of automated cleaning. If required, operator can enable the same.</li>
<li>DRAC driver migrated from <code class="docutils literal"><span class="pre">pywsman</span></code> to <code class="docutils literal"><span class="pre">python-dracclient</span></code> fixing the driver lockup issue caused by the python interpreter not handling signals when execution handed to the c library.</li>
<li>Fixes an issue with setting the boot device multiple times without a reboot in the DRAC driver by setting the boot device only before power management operations.</li>
<li>Add missing &#8220;lookup&#8221; method to the pxe_drac driver vendor interface enabling it to be deployed using the IPA ramdisk.</li>
<li>API service once again records HTTP access logs. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1536828">https://bugs.launchpad.net/ironic/+bug/1536828</a> for details.</li>
<li>Fix issues with error handling when spawning a new thread to continue cleaning. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1539118">https://bugs.launchpad.net/ironic/+bug/1539118</a>.</li>
<li>Fixes an issue with the provided iPXE template where whole disk images could not be booted. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1524403">https://bugs.launchpad.net/ironic/+bug/1524403</a>.</li>
<li>Periodic tasks are no longer executed all in one thread.</li>
<li>Fixes issue where automated cleaning fails for iLO drivers. Automated cleaning fails for iLO driver if iLO is in System POST state. iLO does not allow setting of boot device when it is in System POST state.</li>
<li>Fixes bug where ironic reboots the node with deploy image instead of the user image during second reboot in uefi boot mode when ipxe is enabled.</li>
<li>Fixes an issue that prevented the node name to be removed as part of the node update.</li>
<li>In conductor/rpcapi.py, object_backport_version(), object_action() and object_class_action_versions() misspell NotImplementedError with NotImplemented which returns nothing useful to users. See <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1524163">https://bugs.launchpad.net/ironic/+bug/1524163</a>.</li>
<li>Updated python-scciclient required version number for iRMC driver to 0.3.0 which fixed the bug &#8216;#1518999&#8217; and &#8216;#1519000&#8217;.</li>
</ul>
</div>
<div class="section" id="id31">
<h3>Other Notes<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Code related to disk partitioning was moved to ironic-lib.</li>
</ul>
</div>
</div>
<div class="section" id="id32">
<h2>4.3.0<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<p>A major bug was fixed where clean steps do not run.</p>
<p>Ironic&#8217;s 4.3.0 release brings a number of new features, driver enhancements, and bug fixes.</p>
<div class="section" id="id33">
<h3>New Features<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds an <cite>agent_iboot</cite> driver to allow use of the Iboot power driver with the Agent deploy driver.</li>
<li>Adds experimental support for IPv6 PXE booting. This is configurable via the [pxe]ip_version configuration option.</li>
<li>Adds <cite>agent_pxe_oneview</cite> and <cite>iscsi_pxe_oneview</cite> drivers for integration with the HP OneView Management System.</li>
<li>The ironic-api service now supports SSL when running the service directly (as opposed to behind mod_wsgi or similar).</li>
<li>Adds an <cite>agent_wol</cite> driver that combines the Agent deploy interface with the Wake-On-LAN power driver.</li>
<li>Adds inspection support for the <cite>agent_ipmitool</cite> and <cite>agent_ssh</cite> drivers.</li>
<li>The Agent deploy driver now streams raw images directly to disk (instead of staging in memory) by default.</li>
<li>Adds support for in-band clean steps in the iSCSI deploy driver, when using ironic-python-agent as the ramdisk.</li>
<li>Adds support for using Glance with a Ceph backend via the RADOS Gateway Swift API, with the Agent deploy driver.</li>
<li>The API root endpoint (GET /) now returns version
information for the server; specifically:<ul>
<li>min_version - minimum API version supported by the server;</li>
<li>version - maximum API version supported by the server;</li>
<li>status - version status, &#8220;CURRENT&#8221; for v1.</li>
</ul>
</li>
<li>Adds root device hints for <cite>wwn_with_extension</cite> and <cite>wwn_vendor_extension</cite>.</li>
<li>Adds support to the SSH power driver for XenServer VMs.</li>
</ul>
</div>
<div class="section" id="id34">
<h3>Upgrade Notes<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds a config [amt]awake_interval for the interval to wake up the AMT interface for a node. This should correspond to the IdleTimeout config option on the AMT interface. Setting to 0 will disable waking the AMT interface, just like setting IdleTimeout=0 on the AMT interface will disable the AMT interface from sleeping when idle.</li>
<li>Adds a new configuration option, hash_ring_reset_interval, to control how often the conductor&#8217;s view of the hash ring is reset. This has a default of 180 seconds, the same as the default for the sync_local_state periodic task that used to handle this reset.</li>
<li>The <cite>task</cite> parameter to <cite>ManagementInterface.get_supported_boot_devices</cite> was previously deprecated as optional, and is now mandatory for all implementations of ManagementInterface.</li>
<li>The Agent deploy driver now streams raw images directly to disk (instead of staging in memory) by default; this can be turned off by setting the [agent]stream_raw_images configuration option to False. Streaming may be undesirable if the disk the image is being written is significantly slower than the network.</li>
<li>Adds a configuration option for the Iboot driver, [iboot]reboot_delay, to allow adding a pause between power off and power on.</li>
</ul>
</div>
<div class="section" id="critical-issues">
<h3>Critical Issues<a class="headerlink" href="#critical-issues" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixes a bug where the conductor&#8217;s view of the hash ring was never refreshed if the sync_local_state periodic task was disabled. For more info, see <a class="reference external" href="https://bugs.launchpad.net/ironic/+bug/1506657">https://bugs.launchpad.net/ironic/+bug/1506657</a>.</li>
<li>Fixes an issue where the next cleaning for a node would hang if the previous cleaning was aborted.</li>
<li>This fixes a bug where Ironic skipped all clean steps, which may leave the previous tenant&#8217;s data on disk available to new users.</li>
</ul>
</div>
<div class="section" id="id35">
<h3>Security Issues<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>This fixes a bug where Ironic skipped all clean steps, which may leave the previous tenant&#8217;s data on disk available to new users.</li>
</ul>
</div>
<div class="section" id="id36">
<h3>Bug Fixes<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixes an issue with talking to a sleeping AMT interface by waking up the interface before sending commands, if needed. This is configured with the [amt]awake_interval config option.</li>
<li>Make boot.ipxe fallback to its previous behavior on <em>really</em> old iPXE ROMs where &#8216;inc&#8217; command is not available at all, see <a class="reference external" href="https://launchpad.net/bugs/1507738">https://launchpad.net/bugs/1507738</a>.</li>
<li>Fixes an issue where the <cite>agent_ilo</cite> driver did not correctly clean up temporary files created during the deploy process.</li>
<li>Fixes an issue where ironic could not communicate with IPMI endpoints when the password consisted of only numbers.</li>
<li>Fixes an issue where ipmitool console did not work with an empty IPMI password.</li>
<li>Fixes an issue where iPXE may try to boot from the wrong MAC address, resulting in deploy failures.</li>
<li>Fixes an issue where <cite>node.last_error</cite> did not show the actual issue when the periodic power state sync failed.</li>
<li>Because the agent deploy driver now streams raw images directly to disk, images larger than the RAM available to the deploy ramdisk will no longer fail to deploy.</li>
<li>Fixes an issue where some SNMP power controllers will not power back on after a deploy.</li>
<li>The <cite>cpus</cite>, <cite>local_gb</cite>, and <cite>memory_mb</cite> properties of a node are now validated at input time to ensure they are non-negative numbers.</li>
</ul>
</div>
<div class="section" id="id37">
<h3>Other Notes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds a <cite>clean_dhcp_opts</cite> method to the DHCP provider base class, to give DHCP providers a method to clean up DHCP reservations if needed.</li>
<li>iLO drivers are now based on the new BootInterface.</li>
<li>iRMC drivers are now based on the new BootInterface.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Current Series Release Notes</a><ul>
<li><a class="reference internal" href="#id1">7.0.0</a><ul>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#upgrade-notes">Upgrade Notes</a></li>
<li><a class="reference internal" href="#deprecation-notes">Deprecation Notes</a></li>
<li><a class="reference internal" href="#security-issues">Security Issues</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li><a class="reference internal" href="#other-notes">Other Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">6.2.0</a><ul>
<li><a class="reference internal" href="#id3">New Features</a></li>
<li><a class="reference internal" href="#id4">Upgrade Notes</a></li>
<li><a class="reference internal" href="#id5">Deprecation Notes</a></li>
<li><a class="reference internal" href="#id6">Security Issues</a></li>
<li><a class="reference internal" href="#id7">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">6.1.0</a><ul>
<li><a class="reference internal" href="#id9">New Features</a></li>
<li><a class="reference internal" href="#id10">Upgrade Notes</a></li>
<li><a class="reference internal" href="#id11">Deprecation Notes</a></li>
<li><a class="reference internal" href="#id12">Security Issues</a></li>
<li><a class="reference internal" href="#id13">Bug Fixes</a></li>
<li><a class="reference internal" href="#id14">Other Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id15">6.0.0</a><ul>
<li><a class="reference internal" href="#id16">New Features</a></li>
<li><a class="reference internal" href="#id17">Upgrade Notes</a></li>
<li><a class="reference internal" href="#id18">Deprecation Notes</a></li>
<li><a class="reference internal" href="#id19">Security Issues</a></li>
<li><a class="reference internal" href="#id20">Bug Fixes</a></li>
<li><a class="reference internal" href="#id21">Other Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id22">5.1.0</a><ul>
<li><a class="reference internal" href="#id23">New Features</a></li>
<li><a class="reference internal" href="#id24">Upgrade Notes</a></li>
<li><a class="reference internal" href="#id25">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id26">5.0.0</a><ul>
<li><a class="reference internal" href="#id27">New Features</a></li>
<li><a class="reference internal" href="#known-issues">Known Issues</a></li>
<li><a class="reference internal" href="#id28">Upgrade Notes</a></li>
<li><a class="reference internal" href="#id29">Deprecation Notes</a></li>
<li><a class="reference internal" href="#id30">Bug Fixes</a></li>
<li><a class="reference internal" href="#id31">Other Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32">4.3.0</a><ul>
<li><a class="reference internal" href="#id33">New Features</a></li>
<li><a class="reference internal" href="#id34">Upgrade Notes</a></li>
<li><a class="reference internal" href="#critical-issues">Critical Issues</a></li>
<li><a class="reference internal" href="#id35">Security Issues</a></li>
<li><a class="reference internal" href="#id36">Bug Fixes</a></li>
<li><a class="reference internal" href="#id37">Other Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">Ironic Release Notes</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ocata.html"
                                  title="next chapter">Ocata Series (7.0.0 - 7.0.x) Release Notes</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/ironic
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/unreleased.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ocata.html" title="Ocata Series (7.0.0 - 7.0.x) Release Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Ironic Release Notes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ironic Release Notes 7.0.1.dev7 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Ironic Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Ironic Release Notes");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>