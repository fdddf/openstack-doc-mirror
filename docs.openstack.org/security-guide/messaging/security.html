<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Messaging security</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Messaging security</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="../messaging.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Message queuing"></i></a>
    
    
    <a href="case-studies.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Case studies"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 05:42</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Messaging security</a><ul>
<li><a class="reference internal" href="#messaging-transport-security">Messaging transport security</a><ul>
<li><a class="reference internal" href="#rabbitmq-server-ssl-configuration">RabbitMQ server SSL configuration</a></li>
<li><a class="reference internal" href="#qpid-server-ssl-configuration">Qpid server SSL configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queue-authentication-and-access-control">Queue authentication and access control</a><ul>
<li><a class="reference internal" href="#authentication-configuration-example-rabbitmq">Authentication configuration example: RabbitMQ</a></li>
<li><a class="reference internal" href="#openstack-service-configuration-rabbitmq">OpenStack service configuration: RabbitMQ</a></li>
<li><a class="reference internal" href="#authentication-configuration-example-qpid">Authentication configuration example: Qpid</a></li>
<li><a class="reference internal" href="#openstack-service-configuration-qpid">OpenStack service configuration: Qpid</a></li>
</ul>
</li>
<li><a class="reference internal" href="#message-queue-process-isolation-and-policy">Message queue process isolation and policy</a><ul>
<li><a class="reference internal" href="#namespaces">Namespaces</a></li>
<li><a class="reference internal" href="#network-policy">Network policy</a></li>
<li><a class="reference internal" href="#mandatory-access-controls">Mandatory access controls</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="messaging-security">
<h1>Messaging security<a class="headerlink" href="#messaging-security" title="Permalink to this headline">¶</a></h1>
<p>This section discusses security hardening approaches for the three most
common message queuing solutions used in OpenStack: RabbitMQ, Qpid, and
ZeroMQ.</p>
<div class="section" id="messaging-transport-security">
<h2>Messaging transport security<a class="headerlink" href="#messaging-transport-security" title="Permalink to this headline">¶</a></h2>
<p>AMQP based solutions (Qpid and RabbitMQ) support transport-level
security using TLS. ZeroMQ messaging does not natively support TLS, but
transport-level security is possible using labelled IPsec or CIPSO
network labels.</p>
<p>We highly recommend enabling transport-level cryptography for your
message queue. Using TLS for the messaging client connections provides
protection of the communications from tampering and eavesdropping
in-transit to the messaging server. Below is guidance on how TLS is
typically configured for the two popular messaging servers Qpid and
RabbitMQ. When configuring the trusted certificate authority (CA) bundle
that your messaging server uses to verify client connections, it is
recommended that this be limited to only the CA used for your nodes,
preferably an internally managed CA. The bundle of trusted CAs will
determine which client certificates will be authorized and pass the
client-server verification step of the setting up the TLS connection.
Note, when installing the certificate and key files, ensure that the
file permissions are restricted, for example using <code class="docutils literal"><span class="pre">chmod</span> <span class="pre">0600</span></code>, and
the ownership is restricted to the messaging server daemon user to
prevent unauthorized access by other processes and users on the
messaging server.</p>
<div class="section" id="rabbitmq-server-ssl-configuration">
<h3>RabbitMQ server SSL configuration<a class="headerlink" href="#rabbitmq-server-ssl-configuration" title="Permalink to this headline">¶</a></h3>
<p>The following lines should be added to the system-wide RabbitMQ
configuration file, typically <code class="docutils literal"><span class="pre">/etc/rabbitmq/rabbitmq.config</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span><span class="n">rabbit</span><span class="p">,</span> <span class="p">[</span>
     <span class="p">{</span><span class="n">tcp_listeners</span><span class="p">,</span> <span class="p">[]</span> <span class="p">},</span>
     <span class="p">{</span><span class="n">ssl_listeners</span><span class="p">,</span> <span class="p">[{</span><span class="s2">&quot;&lt;IP address or hostname of management network interface&gt;&quot;</span><span class="p">,</span> <span class="mi">5671</span><span class="p">}]</span> <span class="p">},</span>
     <span class="p">{</span><span class="n">ssl_options</span><span class="p">,</span> <span class="p">[{</span><span class="n">cacertfile</span><span class="p">,</span><span class="s2">&quot;/etc/ssl/cacert.pem&quot;</span><span class="p">},</span>
                    <span class="p">{</span><span class="n">certfile</span><span class="p">,</span><span class="s2">&quot;/etc/ssl/rabbit-server-cert.pem&quot;</span><span class="p">},</span>
                    <span class="p">{</span><span class="n">keyfile</span><span class="p">,</span><span class="s2">&quot;/etc/ssl/rabbit-server-key.pem&quot;</span><span class="p">},</span>
                    <span class="p">{</span><span class="n">verify</span><span class="p">,</span><span class="n">verify_peer</span><span class="p">},</span>
                    <span class="p">{</span><span class="n">fail_if_no_peer_cert</span><span class="p">,</span><span class="n">true</span><span class="p">}]}</span>
   <span class="p">]}</span>
<span class="p">]</span><span class="o">.</span>
</pre></div>
</div>
<p>Note, the <code class="docutils literal"><span class="pre">tcp_listeners</span></code> option is set to <code class="docutils literal"><span class="pre">[]</span></code> to prevent it from
listening on a non-SSL port. The <code class="docutils literal"><span class="pre">ssl_listeners</span></code> option should be
restricted to only listen on the management network for the services.</p>
<p>For more information on RabbitMQ SSL configuration see:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.rabbitmq.com/configure.html">RabbitMQ Configuration</a></li>
<li><a class="reference external" href="http://www.rabbitmq.com/ssl.html">RabbitMQ SSL</a></li>
</ul>
</div>
<div class="section" id="qpid-server-ssl-configuration">
<h3>Qpid server SSL configuration<a class="headerlink" href="#qpid-server-ssl-configuration" title="Permalink to this headline">¶</a></h3>
<p>The Apache Foundation has a messaging security guide for Qpid. See:</p>
<ul class="simple">
<li><a class="reference external" href="http://qpid.apache.org/releases/qpid-0.32/cpp-broker/book/chap-Messaging_User_Guide-Security.html#sect-Messaging_User_Guide-Security-Encryption_using_SSL">Apache Qpid
SSL</a></li>
</ul>
</div>
</div>
<div class="section" id="queue-authentication-and-access-control">
<span id="id1"></span><h2>Queue authentication and access control<a class="headerlink" href="#queue-authentication-and-access-control" title="Permalink to this headline">¶</a></h2>
<p>RabbitMQ and Qpid offer authentication and access control mechanisms for
controlling access to queues. ZeroMQ offers no such mechanisms.</p>
<p>Simple Authentication and Security Layer (SASL) is a framework for
authentication and data security in Internet protocols. Both RabbitMQ
and Qpid offer SASL and other pluggable authentication mechanisms beyond
simple user names and passwords that allow for increased authentication
security. While RabbitMQ supports SASL, support in OpenStack does not
currently allow for requesting a specific SASL authentication mechanism.
RabbitMQ support in OpenStack allows for either user name and password
authentication over an unencrypted connection or user name and password
in conjunction with X.509 client certificates to establish the secure
TLS connection.</p>
<p>We recommend configuring X.509 client certificates on all the OpenStack
service nodes for client connections to the messaging queue and where
possible (currently only Qpid) perform authentication with X.509 client
certificates. When using user names and passwords, accounts should be
created per-service and node for finer grained auditability of access to
the queue.</p>
<p>Before deployment, consider the TLS libraries that the queuing servers
use. Qpid uses Mozilla&#8217;s NSS library, whereas RabbitMQ uses Erlang&#8217;s TLS
module which uses OpenSSL.</p>
<div class="section" id="authentication-configuration-example-rabbitmq">
<h3>Authentication configuration example: RabbitMQ<a class="headerlink" href="#authentication-configuration-example-rabbitmq" title="Permalink to this headline">¶</a></h3>
<p>On the RabbitMQ server, delete the default <code class="docutils literal"><span class="pre">guest</span></code> user:</p>
<div class="code console highlight-default"><div class="highlight"><pre><span></span><span class="c1"># rabbitmqctl delete_user guest</span>
</pre></div>
</div>
<p>On the RabbitMQ server, for each OpenStack service or node that
communicates with the message queue set up user accounts and privileges:</p>
<div class="code console highlight-default"><div class="highlight"><pre><span></span><span class="c1"># rabbitmqctl add_user compute01 RABBIT_PASS</span>
<span class="c1"># rabbitmqctl set_permissions compute01 &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span>
</pre></div>
</div>
<p>Replace RABBIT_PASS with a suitable password.</p>
<p>For additional configuration information see:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.rabbitmq.com/access-control.html">RabbitMQ Access
Control</a></li>
<li><a class="reference external" href="http://www.rabbitmq.com/authentication.html">RabbitMQ
Authentication</a></li>
<li><a class="reference external" href="http://www.rabbitmq.com/plugins.html">RabbitMQ Plugins</a></li>
<li><a class="reference external" href="http://hg.rabbitmq.com/rabbitmq-auth-mechanism-ssl/file/rabbitmq_v3_1_3/README">RabbitMQ SASL External
Auth</a></li>
</ul>
</div>
<div class="section" id="openstack-service-configuration-rabbitmq">
<h3>OpenStack service configuration: RabbitMQ<a class="headerlink" href="#openstack-service-configuration-rabbitmq" title="Permalink to this headline">¶</a></h3>
<div class="code ini highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">rpc_backend</span> <span class="o">=</span> <span class="n">nova</span><span class="o">.</span><span class="n">openstack</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">rpc</span><span class="o">.</span><span class="n">impl_kombu</span>
<span class="n">rabbit_use_ssl</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">rabbit_host</span> <span class="o">=</span> <span class="n">RABBIT_HOST</span>
<span class="n">rabbit_port</span> <span class="o">=</span> <span class="mi">5671</span>
<span class="n">rabbit_user</span> <span class="o">=</span> <span class="n">compute01</span>
<span class="n">rabbit_password</span> <span class="o">=</span> <span class="n">RABBIT_PASS</span>
<span class="n">kombu_ssl_keyfile</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">pem</span>
<span class="n">kombu_ssl_certfile</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">cert</span><span class="o">.</span><span class="n">pem</span>
<span class="n">kombu_ssl_ca_certs</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssl</span><span class="o">/</span><span class="n">cacert</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
</div>
<div class="section" id="authentication-configuration-example-qpid">
<h3>Authentication configuration example: Qpid<a class="headerlink" href="#authentication-configuration-example-qpid" title="Permalink to this headline">¶</a></h3>
<p>For configuration information see:</p>
<ul class="simple">
<li><a class="reference external" href="http://qpid.apache.org/releases/qpid-0.32/cpp-broker/book/chap-Messaging_User_Guide-Security.html#sect-Messaging_User_Guide-Security-User_Authentication">Apache Qpid
Authentication</a></li>
<li><a class="reference external" href="http://qpid.apache.org/releases/qpid-0.32/cpp-broker/book/chap-Messaging_User_Guide-Security.html#sect-Messaging_User_Guide-Security-Authorization">Apache Qpid
Authorization</a></li>
</ul>
</div>
<div class="section" id="openstack-service-configuration-qpid">
<h3>OpenStack service configuration: Qpid<a class="headerlink" href="#openstack-service-configuration-qpid" title="Permalink to this headline">¶</a></h3>
<div class="code ini highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">rpc_backend</span> <span class="o">=</span> <span class="n">nova</span><span class="o">.</span><span class="n">openstack</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">rpc</span><span class="o">.</span><span class="n">impl_qpid</span>
<span class="n">qpid_protocol</span> <span class="o">=</span> <span class="n">ssl</span>
<span class="n">qpid_hostname</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">IP</span> <span class="ow">or</span> <span class="n">hostname</span> <span class="n">of</span> <span class="n">management</span> <span class="n">network</span> <span class="n">interface</span> <span class="n">of</span> <span class="n">messaging</span> <span class="n">server</span><span class="o">&gt;</span>
<span class="n">qpid_port</span> <span class="o">=</span> <span class="mi">5671</span>
<span class="n">qpid_username</span> <span class="o">=</span> <span class="n">compute01</span>
<span class="n">qpid_password</span> <span class="o">=</span> <span class="n">QPID_PASS</span>
</pre></div>
</div>
<p>Optionally, if using SASL with Qpid specify the SASL mechanisms in use
by adding:</p>
<div class="code ini highlight-default"><div class="highlight"><pre><span></span><span class="n">qpid_sasl_mechanisms</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">space</span> <span class="n">separated</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">SASL</span> <span class="n">mechanisms</span> <span class="n">to</span> <span class="n">use</span> <span class="k">for</span> <span class="n">auth</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="message-queue-process-isolation-and-policy">
<h2>Message queue process isolation and policy<a class="headerlink" href="#message-queue-process-isolation-and-policy" title="Permalink to this headline">¶</a></h2>
<p>Each project provides a number of services which send and consume
messages. Each binary which sends a message is expected to consume
messages, if only replies, from the queue.</p>
<p>Message queue service processes should be isolated from each other and
other processes on a machine.</p>
<div class="section" id="namespaces">
<h3>Namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>Network namespaces are highly recommended for all services running on
OpenStack Compute Hypervisors. This will help prevent against the
bridging of network traffic between VM guests and the management
network.</p>
<p>When using ZeroMQ messaging, each host must run at least one ZeroMQ
message receiver to receive messages from the network and forward
messages to local processes through IPC. It is possible and advisable to
run an independent message receiver per project within an IPC namespace,
along with other services within the same project.</p>
</div>
<div class="section" id="network-policy">
<h3>Network policy<a class="headerlink" href="#network-policy" title="Permalink to this headline">¶</a></h3>
<p>Queue servers should only accept connections from the management
network. This applies to all implementations. This should be implemented
through configuration of services and optionally enforced through global
network policy.</p>
<p>When using ZeroMQ messaging, each project should run a separate ZeroMQ
receiver process on a port dedicated to services belonging to that
project. This is equivalent to the AMQP concept of control exchanges.</p>
</div>
<div class="section" id="mandatory-access-controls">
<h3>Mandatory access controls<a class="headerlink" href="#mandatory-access-controls" title="Permalink to this headline">¶</a></h3>
<p>Use both mandatory access controls (MACs) and discretionary access
controls (DACs) to restrict the configuration for processes to only
those processes. This restriction prevents these processes from being
isolated from other processes that run on the same machine(s).</p>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="../messaging.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Message queuing"></i></a>
          
          
            <a href="case-studies.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Case studies"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 05:42</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">System documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../management.html">Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secure-communication.html">Secure communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-endpoints.html">API endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../identity.html">Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block-storage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shared-file-systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object Storage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../messaging.html">Message queuing</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Messaging security</a></li>
<li class="toctree-l2"><a class="reference internal" href="case-studies.html">Case studies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data-processing.html">Data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../databases.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tenant-data.html">Tenant data privacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instance-management.html">Instance security management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring-logging.html">Monitoring and logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compliance.html">Compliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security-review.html">Security Review</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../checklist.html">Security Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "messaging/security" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/security-doc/tree/security-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 54490ffcd7d99357eb6920db6bca313cd23eb0d8";
        var bugProject = "ossp-security-documentation";
        var bugTitle = "Messaging security in Security Guide";
    var fieldTags = "sec-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.0.1 on 2017-02-14 05:42";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>