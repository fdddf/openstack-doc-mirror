<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: DNS integration</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>DNS integration</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="config-dhcp-ha.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: High-availability for DHCP"></i></a>
    
    
    <a href="config-dns-res.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Name resolution for instances"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 13:48</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">DNS integration</a><ul>
<li><a class="reference internal" href="#the-networking-service-internal-dns-resolution">The Networking service internal DNS resolution</a></li>
<li><a class="reference internal" href="#integration-with-an-external-dns-service">Integration with an external DNS service</a><ul>
<li><a class="reference internal" href="#use-case-1-ports-are-published-directly-in-the-external-dns-service">Use case 1: Ports are published directly in the external DNS service</a></li>
<li><a class="reference internal" href="#use-case-2-floating-ips-are-published-with-associated-port-dns-attributes">Use case 2: Floating IPs are published with associated port DNS attributes</a></li>
<li><a class="reference internal" href="#use-case-3-floating-ips-are-published-in-the-external-dns-service">Use case 3: Floating IPs are published in the external DNS service</a></li>
<li><a class="reference internal" href="#performance-considerations">Performance considerations</a></li>
<li><a class="reference internal" href="#configuring-openstack-networking-for-integration-with-an-external-dns-service">Configuring OpenStack Networking for integration with an external DNS service</a></li>
<li><a class="reference internal" href="#configuration-of-the-externally-accessible-network-for-use-case-1">Configuration of the externally accessible network for use case 1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="dns-integration">
<span id="config-dns-int"></span><h1>DNS integration<a class="headerlink" href="#dns-integration" title="Permalink to this headline">¶</a></h1>
<p>This page serves as a guide for how to use the DNS integration functionality of
the Networking service. The functionality described covers DNS from two points
of view:</p>
<ul class="simple">
<li>The internal DNS functionality offered by the Networking service and its
interaction with the Compute service.</li>
<li>Integration of the Compute service and the Networking service with an
external DNSaaS (DNS-as-a-Service).</li>
</ul>
<p>Users can control the behavior of the Networking service in regards to DNS
using two attributes associated with ports, networks, and floating IPs. The
following table shows the attributes available for each one of these resources:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Resource</th>
<th class="head">dns_name</th>
<th class="head">dns_domain</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ports</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Networks</td>
<td>No</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>Floating IPs</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="section" id="the-networking-service-internal-dns-resolution">
<span id="config-dns-int-dns-resolution"></span><h2>The Networking service internal DNS resolution<a class="headerlink" href="#the-networking-service-internal-dns-resolution" title="Permalink to this headline">¶</a></h2>
<p>The Networking service enables users to control the name assigned to ports by
the internal DNS. To enable this functionality, do the following:</p>
<ol class="arabic">
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code> file and assign a value different to
<code class="docutils literal"><span class="pre">openstacklocal</span></code> (its default value) to the <code class="docutils literal"><span class="pre">dns_domain</span></code> parameter in
the <code class="docutils literal"><span class="pre">[default]</span></code> section. As an example:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">dns_domain</span> <span class="o">=</span> <span class="s">example.org.</span>
</pre></div>
</div>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">dns</span></code> to <code class="docutils literal"><span class="pre">extension_drivers</span></code> in the <code class="docutils literal"><span class="pre">[ml2]</span></code> section of
<code class="docutils literal"><span class="pre">/etc/neutron/plugins/ml2/ml2_conf.ini</span></code>. The following is an example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[ml2]</span>
<span class="go">extension_drivers = port_security,dns</span>
</pre></div>
</div>
</li>
</ol>
<p>After re-starting the <code class="docutils literal"><span class="pre">neutron-server</span></code>, users will be able to assign a
<code class="docutils literal"><span class="pre">dns_name</span></code> attribute to their ports.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The enablement of this functionality is prerequisite for the enablement of
the Networking service integration with an external DNS service, which is
described in detail in <a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a>.</p>
</div>
<p>The following illustrates the creation of a port with <code class="docutils literal"><span class="pre">my-port</span></code>
in its <code class="docutils literal"><span class="pre">dns_name</span></code> attribute.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The name assigned to the port by the Networking service internal DNS is now
visible in the response in the <code class="docutils literal"><span class="pre">dns_assignment</span></code> attribute.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron port-create my-net --dns_name my-port
<span class="go">Created a new port:</span>
<span class="go">+-----------------------+-----------------------------------------------------------------------------------+</span>
<span class="go">| Field                 | Value                                                                             |</span>
<span class="go">+-----------------------+-----------------------------------------------------------------------------------+</span>
<span class="go">| admin_state_up        | True                                                                              |</span>
<span class="go">| allowed_address_pairs |                                                                                   |</span>
<span class="go">| binding:vnic_type     | normal                                                                            |</span>
<span class="go">| device_id             |                                                                                   |</span>
<span class="go">| device_owner          |                                                                                   |</span>
<span class="go">| dns_assignment        | {&quot;hostname&quot;: &quot;my-port&quot;, &quot;ip_address&quot;: &quot;10.0.1.3&quot;, &quot;fqdn&quot;: &quot;my-port.example.org.&quot;} |</span>
<span class="go">| dns_name              | my-port                                                                           |</span>
<span class="go">| fixed_ips             | {&quot;subnet_id&quot;:&quot;6141b474-56cd-430f-b731-71660bb79b79&quot;, &quot;ip_address&quot;: &quot;10.0.1.3&quot;}    |</span>
<span class="go">| id                    | fb3c10f4-017e-420c-9be1-8f8c557ae21f                                              |</span>
<span class="go">| mac_address           | fa:16:3e:aa:9b:e1                                                                 |</span>
<span class="go">| name                  |                                                                                   |</span>
<span class="go">| network_id            | bf2802a0-99a0-4e8c-91e4-107d03f158ea                                              |</span>
<span class="go">| port_security_enabled | True                                                                              |</span>
<span class="go">| security_groups       | 1f0ddd73-7e3c-48bd-a64c-7ded4fe0e635                                              |</span>
<span class="go">| status                | DOWN                                                                              |</span>
<span class="go">| tenant_id             | d5660cb1e6934612a01b4fb2fb630725                                                  |</span>
<span class="go">+-----------------------+-----------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>When this functionality is enabled, it is leveraged by the Compute service when
creating instances. When allocating ports for an instance during boot, the
Compute service populates the <code class="docutils literal"><span class="pre">dns_name</span></code> attributes of these ports with
the <code class="docutils literal"><span class="pre">hostname</span></code> attribute of the instance, which is a DNS sanitized version of
its display name. As a consequence, at the end of the boot process, the
allocated ports will be known in the dnsmasq associated to their networks by
their instance <code class="docutils literal"><span class="pre">hostname</span></code>.</p>
<p>The following is an example of an instance creation, showing how its
<code class="docutils literal"><span class="pre">hostname</span></code> populates the <code class="docutils literal"><span class="pre">dns_name</span></code> attribute of the allocated port:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> nova boot --image cirros --flavor <span class="m">42</span> <span class="se">\</span>
  --nic net-id<span class="o">=</span>37aaff3a-6047-45ac-bf4f-a825e56fd2b3 my_vm
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| Property                             | Value                                                          |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| OS-DCF:diskConfig                    | MANUAL                                                         |</span>
<span class="go">| OS-EXT-AZ:availability_zone          |                                                                |</span>
<span class="go">| OS-EXT-STS:power_state               | 0                                                              |</span>
<span class="go">| OS-EXT-STS:task_state                | scheduling                                                     |</span>
<span class="go">| OS-EXT-STS:vm_state                  | building                                                       |</span>
<span class="go">| OS-SRV-USG:launched_at               | -                                                              |</span>
<span class="go">| OS-SRV-USG:terminated_at             | -                                                              |</span>
<span class="go">| accessIPv4                           |                                                                |</span>
<span class="go">| accessIPv6                           |                                                                |</span>
<span class="go">| adminPass                            | dB45Zvo8Jpfe                                                   |</span>
<span class="go">| config_drive                         |                                                                |</span>
<span class="go">| created                              | 2016-02-05T21:35:04Z                                           |</span>
<span class="go">| flavor                               | m1.nano (42)                                                   |</span>
<span class="go">| hostId                               |                                                                |</span>
<span class="go">| id                                   | 66c13cb4-3002-4ab3-8400-7efc2659c363                           |</span>
<span class="go">| image                                | cirros-0.3.4-x86_64-uec(b9d981eb-d21c-4ce2-9dbc-dd38f3d9015f)  |</span>
<span class="go">| key_name                             | -                                                              |</span>
<span class="go">| locked                               | False                                                          |</span>
<span class="go">| metadata                             | {}                                                             |</span>
<span class="go">| name                                 | my_vm                                                          |</span>
<span class="go">| os-extended-volumes:volumes_attached | []                                                             |</span>
<span class="go">| progress                             | 0                                                              |</span>
<span class="go">| security_groups                      | default                                                        |</span>
<span class="go">| status                               | BUILD                                                          |</span>
<span class="go">| tenant_id                            | d5660cb1e6934612a01b4fb2fb630725                               |</span>
<span class="go">| updated                              | 2016-02-05T21:35:04Z                                           |</span>
<span class="go">| user_id                              | 8bb6e578cba24e7db9d3810633124525                               |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-list --device_id 66c13cb4-3002-4ab3-8400-7efc2659c363
<span class="go">+--------------------------------------+------+-------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| id                                   | name | mac_address       | fixed_ips                                                                             |</span>
<span class="go">+--------------------------------------+------+-------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| b3ecc464-1263-44a7-8c38-2d8a52751773 |      | fa:16:3e:a8:ce:b8 | {&quot;subnet_id&quot;: &quot;277eca5d-9869-474b-960e-6da5951d09f7&quot;, &quot;ip_address&quot;: &quot;172.24.5.8&quot;}     |</span>
<span class="go">|                                      |      |                   | {&quot;subnet_id&quot;: &quot;eab47748-3f0a-4775-a09f-b0c24bb64bc4&quot;, &quot;ip_address&quot;:&quot;2001:db8:10::8&quot;}  |</span>
<span class="go">+--------------------------------------+------+-------------------+---------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-show b3ecc464-1263-44a7-8c38-2d8a52751773
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| Field                 | Value                                                                                 |</span>
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| admin_state_up        | True                                                                                  |</span>
<span class="go">| allowed_address_pairs |                                                                                       |</span>
<span class="go">| binding:vnic_type     | normal                                                                                |</span>
<span class="go">| device_id             | 66c13cb4-3002-4ab3-8400-7efc2659c363                                                  |</span>
<span class="go">| device_owner          | compute:None                                                                          |</span>
<span class="go">| dns_assignment        | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;172.24.5.8&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}       |</span>
<span class="go">|                       | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;2001:db8:10::8&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}   |</span>
<span class="go">| dns_name              | my-vm                                                                                 |</span>
<span class="go">| extra_dhcp_opts       |                                                                                       |</span>
<span class="go">| fixed_ips             | {&quot;subnet_id&quot;: &quot;277eca5d-9869-474b-960e-6da5951d09f7&quot;, &quot;ip_address&quot;: &quot;172.24.5.8&quot;}     |</span>
<span class="go">|                       | {&quot;subnet_id&quot;: &quot;eab47748-3f0a-4775-a09f-b0c24bb64bc4&quot;, &quot;ip_address&quot;: &quot;2001:db8:10::8&quot;} |</span>
<span class="go">| id                    | b3ecc464-1263-44a7-8c38-2d8a52751773                                                  |</span>
<span class="go">| mac_address           | fa:16:3e:a8:ce:b8                                                                     |</span>
<span class="go">| name                  |                                                                                       |</span>
<span class="go">| network_id            | 37aaff3a-6047-45ac-bf4f-a825e56fd2b3                                                  |</span>
<span class="go">| port_security_enabled | True                                                                                  |</span>
<span class="go">| security_groups       | 1f0ddd73-7e3c-48bd-a64c-7ded4fe0e635                                                  |</span>
<span class="go">| status                | ACTIVE                                                                                |</span>
<span class="go">| tenant_id             | d5660cb1e6934612a01b4fb2fb630725                                                      |</span>
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>In the above example notice that:</p>
<ul class="simple">
<li>The name given to the instance by the user, <code class="docutils literal"><span class="pre">my_vm</span></code>, is sanitized by the
Compute service and becomes <code class="docutils literal"><span class="pre">my-vm</span></code> as the port&#8217;s <code class="docutils literal"><span class="pre">dns_name</span></code>.</li>
<li>The port&#8217;s <code class="docutils literal"><span class="pre">dns_assignment</span></code> attribute shows that its FQDN is
<code class="docutils literal"><span class="pre">my-vm.example.org.</span></code> in the Networking service internal DNS, which is
the result of concatenating the port&#8217;s <code class="docutils literal"><span class="pre">dns_name</span></code> with the value configured
in the <code class="docutils literal"><span class="pre">dns_domain</span></code> parameter in <code class="docutils literal"><span class="pre">neutron.conf</span></code>, as explained previously.</li>
<li>The <code class="docutils literal"><span class="pre">dns_assignment</span></code> attribute also shows that the port&#8217;s <code class="docutils literal"><span class="pre">hostname</span></code> in
the Networking service internal DNS is <code class="docutils literal"><span class="pre">my-vm</span></code>.</li>
<li>Instead of having the Compute service create the port for the instance, the
user might have created it and assigned a value to its <code class="docutils literal"><span class="pre">dns_name</span></code>
attribute. In this case, the value assigned to the <code class="docutils literal"><span class="pre">dns_name</span></code> attribute
must be equal to the value that Compute service will assign to the instance&#8217;s
<code class="docutils literal"><span class="pre">hostname</span></code>, in this example <code class="docutils literal"><span class="pre">my-vm</span></code>. Otherwise, the instance boot will
fail.</li>
</ul>
</div>
<div class="section" id="integration-with-an-external-dns-service">
<h2>Integration with an external DNS service<a class="headerlink" href="#integration-with-an-external-dns-service" title="Permalink to this headline">¶</a></h2>
<p>Users can also integrate the Networking and Compute services with an external
DNS. To accomplish this, the users have to:</p>
<ol class="arabic simple">
<li>Enable the functionality described in
<a class="reference internal" href="#config-dns-int-dns-resolution"><span>The Networking service internal DNS resolution</span></a>.</li>
<li>Configure an external DNS driver. The Networking service provides a driver
reference implementation based on the OpenStack DNS service. It is expected
that third party vendors will provide other implementations in the future.
For detailed configuration instructions, see
<a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a>.</li>
</ol>
<p>Once the <code class="docutils literal"><span class="pre">neutron-server</span></code> has been configured and restarted, users will have
functionality that covers three use cases, described in the following sections.
In each of the use cases described below:</p>
<ul class="simple">
<li>The examples assume the OpenStack DNS service as the external DNS.</li>
<li>A, AAAA and PTR records will be created in the DNS service.</li>
<li>Before executing any of the use cases, the user must create in the DNS
service under his project a DNS zone where the A and AAAA records will be
created. For the description of the use cases below, it is assumed the zone
<code class="docutils literal"><span class="pre">example.org.</span></code> was created previously.</li>
<li>The PTR records will be created in zones owned by a project with admin
privileges. See <a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a> for more details.</li>
</ul>
<div class="section" id="use-case-1-ports-are-published-directly-in-the-external-dns-service">
<span id="config-dns-use-case-1"></span><h3>Use case 1: Ports are published directly in the external DNS service<a class="headerlink" href="#use-case-1-ports-are-published-directly-in-the-external-dns-service" title="Permalink to this headline">¶</a></h3>
<p>In this case, the user is creating ports or booting instances on a network
that is accessible externally. The steps to publish the port in the external
DNS service are the following:</p>
<ol class="arabic simple">
<li>Assign a valid domain name to the network&#8217;s <code class="docutils literal"><span class="pre">dns_domain</span></code> attribute. This
name must end with a period (<code class="docutils literal"><span class="pre">.</span></code>).</li>
<li>Boot an instance specifying the externally accessible network.
Alternatively, create a port on the externally accessible network specifying
a valid value to its <code class="docutils literal"><span class="pre">dns_name</span></code> attribute. If the port is going to be used
for an instance boot, the value assigned to <code class="docutils literal"><span class="pre">dns_name</span></code> must be equal to
the <code class="docutils literal"><span class="pre">hostname</span></code> that the Compute service will assign to the instance.
Otherwise, the boot will fail.</li>
</ol>
<p>Once these steps are executed, the port&#8217;s DNS data will be published in the
external DNS service. This is an example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron net-list
<span class="go">+--------------------------------------+----------+----------------------------------------------------------+</span>
<span class="go">| id                                   | name     | subnets                                                  |</span>
<span class="go">+--------------------------------------+----------+----------------------------------------------------------+</span>
<span class="go">| 41fa3995-9e4a-4cd9-bb51-3e5424f2ff2a | public   | a67cfdf7-9d5d-406f-8a19-3f38e4fc3e74                     |</span>
<span class="go">|                                      |          | cbd8c6dc-ca81-457e-9c5d-f8ece7ef67f8                     |</span>
<span class="go">| 37aaff3a-6047-45ac-bf4f-a825e56fd2b3 | external | 277eca5d-9869-474b-960e-6da5951d09f7 172.24.5.0/24       |</span>
<span class="go">|                                      |          | eab47748-3f0a-4775-a09f-b0c24bb64bc4 2001:db8:10::/64    |</span>
<span class="go">| bf2802a0-99a0-4e8c-91e4-107d03f158ea | my-net   | 6141b474-56cd-430f-b731-71660bb79b79 10.0.1.0/24         |</span>
<span class="go">| 38c5e950-b450-4c30-83d4-ee181c28aad3 | private  | 43414c53-62ae-49bc-aa6c-c9dd7705818a fda4:653e:71b0::/64 |</span>
<span class="go">|                                      |          | 5b9282a1-0be1-4ade-b478-7868ad2a16ff 10.0.0.0/24         |</span>
<span class="go">+--------------------------------------+----------+----------------------------------------------------------+</span>

<span class="gp">$</span> neutron net-update 37aaff3a-6047-45ac-bf4f-a825e56fd2b3 --dns_domain example.org.
<span class="go">Updated network: 37aaff3a-6047-45ac-bf4f-a825e56fd2b3</span>

<span class="gp">$</span> neutron net-show 37aaff3a-6047-45ac-bf4f-a825e56fd2b3
<span class="go">+---------------------------+--------------------------------------+</span>
<span class="go">| Field                     | Value                                |</span>
<span class="go">+---------------------------+--------------------------------------+</span>
<span class="go">| admin_state_up            | True                                 |</span>
<span class="go">| availability_zone_hints   |                                      |</span>
<span class="go">| availability_zones        | nova                                 |</span>
<span class="go">| dns_domain                | example.org.                         |</span>
<span class="go">| id                        | 37aaff3a-6047-45ac-bf4f-a825e56fd2b3 |</span>
<span class="go">| mtu                       | 1450                                 |</span>
<span class="go">| name                      | external                             |</span>
<span class="go">| port_security_enabled     | True                                 |</span>
<span class="go">| provider:network_type     | vlan                                 |</span>
<span class="go">| provider:physical_network |                                      |</span>
<span class="go">| provider:segmentation_id  | 2016                                 |</span>
<span class="go">| router:external           | False                                |</span>
<span class="go">| shared                    | True                                 |</span>
<span class="go">| status                    | ACTIVE                               |</span>
<span class="go">| subnets                   | eab47748-3f0a-4775-a09f-b0c24bb64bc4 |</span>
<span class="go">|                           | 277eca5d-9869-474b-960e-6da5951d09f7 |</span>
<span class="go">| tenant_id                 | 04fc2f83966245dba907efb783f8eab9     |</span>
<span class="go">+---------------------------+--------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name         | data                                                                  |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org. | ns1.devstack.org. malavall.us.ibm.com. 1454729414 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org. | ns1.devstack.org.                                                     |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-create 37aaff3a-6047-45ac-bf4f-a825e56fd2b3 --dns_name my-vm
<span class="go">Created a new port:</span>
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| Field                 | Value                                                                                 |</span>
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>
<span class="go">| admin_state_up        | True                                                                                  |</span>
<span class="go">| allowed_address_pairs |                                                                                       |</span>
<span class="go">| binding:vnic_type     | normal                                                                                |</span>
<span class="go">| device_id             |                                                                                       |</span>
<span class="go">| device_owner          |                                                                                       |</span>
<span class="go">| dns_assignment        | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;172.24.5.9&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}       |</span>
<span class="go">|                       | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;2001:db8:10::9&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}   |</span>
<span class="go">| dns_name              | my-vm                                                                                 |</span>
<span class="go">| fixed_ips             | {&quot;subnet_id&quot;: &quot;277eca5d-9869-474b-960e-6da5951d09f7&quot;, &quot;ip_address&quot;: &quot;172.24.5.9&quot;}     |</span>
<span class="go">|                       | {&quot;subnet_id&quot;: &quot;eab47748-3f0a-4775-a09f-b0c24bb64bc4&quot;, &quot;ip_address&quot;: &quot;2001:db8:10::9&quot;} |</span>
<span class="go">| id                    | 04be331b-dc5e-410a-9103-9c8983aeb186                                                  |</span>
<span class="go">| mac_address           | fa:16:3e:0f:4b:e4                                                                     |</span>
<span class="go">| name                  |                                                                                       |</span>
<span class="go">| network_id            | 37aaff3a-6047-45ac-bf4f-a825e56fd2b3                                                  |</span>
<span class="go">| port_security_enabled | True                                                                                  |</span>
<span class="go">| security_groups       | 1f0ddd73-7e3c-48bd-a64c-7ded4fe0e635                                                  |</span>
<span class="go">| status                | DOWN                                                                                  |</span>
<span class="go">| tenant_id             | d5660cb1e6934612a01b4fb2fb630725                                                      |</span>
<span class="go">+-----------------------+---------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name               | data                                                                  |</span>
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org.       | ns1.devstack.org. malavall.us.ibm.com. 1455563035 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org.       | ns1.devstack.org.                                                     |</span>
<span class="go">| 3593591b-181f-4beb-9ab7-67fad7413b37 | A    | my-vm.example.org. | 172.24.5.9                                                            |</span>
<span class="go">| 5649c68f-7a88-48f5-9f87-ccb1f6ae67ca | AAAA | my-vm.example.org. | 2001:db8:10::9                                                        |</span>
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>

<span class="gp">$</span> nova boot --image cirros --flavor <span class="m">42</span> <span class="se">\</span>
  --nic port-id<span class="o">=</span>04be331b-dc5e-410a-9103-9c8983aeb186 my_vm
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| Property                             | Value                                                          |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| OS-DCF:diskConfig                    | MANUAL                                                         |</span>
<span class="go">| OS-EXT-AZ:availability_zone          |                                                                |</span>
<span class="go">| OS-EXT-STS:power_state               | 0                                                              |</span>
<span class="go">| OS-EXT-STS:task_state                | scheduling                                                     |</span>
<span class="go">| OS-EXT-STS:vm_state                  | building                                                       |</span>
<span class="go">| OS-SRV-USG:launched_at               | -                                                              |</span>
<span class="go">| OS-SRV-USG:terminated_at             | -                                                              |</span>
<span class="go">| accessIPv4                           |                                                                |</span>
<span class="go">| accessIPv6                           |                                                                |</span>
<span class="go">| adminPass                            | TDc9EpBT3B9W                                                   |</span>
<span class="go">| config_drive                         |                                                                |</span>
<span class="go">| created                              | 2016-02-15T19:10:43Z                                           |</span>
<span class="go">| flavor                               | m1.nano (42)                                                   |</span>
<span class="go">| hostId                               |                                                                |</span>
<span class="go">| id                                   | 62c19691-d1c7-4d7b-a88e-9cc4d95d4f41                           |</span>
<span class="go">| image                                | cirros-0.3.4-x86_64-uec (b9d981eb-d21c-4ce2-9dbc-dd38f3d9015f) |</span>
<span class="go">| key_name                             | -                                                              |</span>
<span class="go">| locked                               | False                                                          |</span>
<span class="go">| metadata                             | {}                                                             |</span>
<span class="go">| name                                 | my_vm                                                          |</span>
<span class="go">| os-extended-volumes:volumes_attached | []                                                             |</span>
<span class="go">| progress                             | 0                                                              |</span>
<span class="go">| security_groups                      | default                                                        |</span>
<span class="go">| status                               | BUILD                                                          |</span>
<span class="go">| tenant_id                            | d5660cb1e6934612a01b4fb2fb630725                               |</span>
<span class="go">| updated                              | 2016-02-15T19:10:43Z                                           |</span>
<span class="go">| user_id                              | 8bb6e578cba24e7db9d3810633124525                               |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>

<span class="gp">$</span> nova list
<span class="go">+--------------------------------------+-------+--------+------------+-------------+-------------------------------------+</span>
<span class="go">| ID                                   | Name  | Status | Task State | Power State | Networks                            |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+-------------------------------------+</span>
<span class="go">| 62c19691-d1c7-4d7b-a88e-9cc4d95d4f41 | my_vm | ACTIVE | -          | Running     | external=172.24.5.9, 2001:db8:10::9 |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+-------------------------------------+</span>
</pre></div>
</div>
<p>In this example the port is created manually by the user and then used to boot
an instance. Notice that:</p>
<ul class="simple">
<li>The port&#8217;s data was visible in the DNS service as soon as it was created.</li>
<li>See <a class="reference internal" href="#config-dns-performance-considerations"><span>Performance considerations</span></a> for an explanation of
the potential performance impact associated with this use case.</li>
</ul>
<p>Following are the PTR records created for this example. Note that for
IPv4, the value of ipv4_ptr_zone_prefix_size is 24. In the case of IPv6, the
value of ipv6_ptr_zone_prefix_size is 116. For more details, see
<a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> designate record-list <span class="m">5</span>.24.172.in-addr.arpa.
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name                     | data                                                                |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| ab7ada72-7e64-4bed-913e-04718a80fafc | NS   | 5.24.172.in-addr.arpa.   | ns1.devstack.org.                                                   |</span>
<span class="go">| 28346a94-790c-4ae1-9f7b-069d98d9efbd | SOA  | 5.24.172.in-addr.arpa.   | ns1.devstack.org. admin.example.org. 1455563035 3600 600 86400 3600 |</span>
<span class="go">| cfcaf537-844a-4c1b-9b5f-464ff07dca33 | PTR  | 9.5.24.172.in-addr.arpa. | my-vm.example.org.                                                  |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>

<span class="gp">$</span> designate record-list <span class="m">0</span>.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.8.b.d.0.1.0.0.2.ip6.arpa.
<span class="go">+--------------------------------------+------+---------------------------------------------------------------------------+---------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name                                                                      | data                                                                |</span>
<span class="go">+--------------------------------------+------+---------------------------------------------------------------------------+---------------------------------------------------------------------+</span>
<span class="go">| d8923354-13eb-4bd9-914a-0a2ae5f95989 | SOA  | 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.8.b.d.0.1.0.0.2.ip6.arpa.       | ns1.devstack.org. admin.example.org. 1455563036 3600 600 86400 3600 |</span>
<span class="go">| 72e60acd-098d-41ea-9771-5b6546c9c06f | NS   | 0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.8.b.d.0.1.0.0.2.ip6.arpa.       | ns1.devstack.org.                                                   |</span>
<span class="go">| 877e0215-2ddf-4d01-a7da-47f1092dfd56 | PTR  | 9.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.1.0.0.8.b.d.0.1.0.0.2.ip6.arpa. | my-vm.example.org.                                                  |</span>
<span class="go">+--------------------------------------+------+---------------------------------------------------------------------------+---------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a> for detailed instructions on how
to create the externally accessible network.</p>
</div>
<div class="section" id="use-case-2-floating-ips-are-published-with-associated-port-dns-attributes">
<h3>Use case 2: Floating IPs are published with associated port DNS attributes<a class="headerlink" href="#use-case-2-floating-ips-are-published-with-associated-port-dns-attributes" title="Permalink to this headline">¶</a></h3>
<p>In this use case, the address of a floating IP is published in the external
DNS service in conjunction with the <code class="docutils literal"><span class="pre">dns_name</span></code> of its associated port and the
<code class="docutils literal"><span class="pre">dns_domain</span></code> of the port&#8217;s network. The steps to execute in this use case are
the following:</p>
<ol class="arabic simple">
<li>Assign a valid domain name to the network&#8217;s <code class="docutils literal"><span class="pre">dns_domain</span></code> attribute. This
name must end with a period (<code class="docutils literal"><span class="pre">.</span></code>).</li>
<li>Boot an instance or alternatively, create a port specifying a valid value to
its <code class="docutils literal"><span class="pre">dns_name</span></code> attribute. If the port is going to be used for an instance
boot, the value assigned to <code class="docutils literal"><span class="pre">dns_name</span></code> must be equal to the <code class="docutils literal"><span class="pre">hostname</span></code>
that the Compute service will assign to the instance. Otherwise, the boot
will fail.</li>
<li>Create a floating IP and associate it to the port.</li>
</ol>
<p>Following is an example of these steps:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron net-update 38c5e950-b450-4c30-83d4-ee181c28aad3 --dns_domain example.org.
<span class="go">Updated network: 38c5e950-b450-4c30-83d4-ee181c28aad3</span>

<span class="gp">$</span> neutron net-show 38c5e950-b450-4c30-83d4-ee181c28aad3
<span class="go">+-------------------------+--------------------------------------+</span>
<span class="go">| Field                   | Value                                |</span>
<span class="go">+-------------------------+--------------------------------------+</span>
<span class="go">| admin_state_up          | True                                 |</span>
<span class="go">| availability_zone_hints |                                      |</span>
<span class="go">| availability_zones      | nova                                 |</span>
<span class="go">| dns_domain              | example.org.                         |</span>
<span class="go">| id                      | 38c5e950-b450-4c30-83d4-ee181c28aad3 |</span>
<span class="go">| mtu                     | 1450                                 |</span>
<span class="go">| name                    | private                              |</span>
<span class="go">| port_security_enabled   | True                                 |</span>
<span class="go">| router:external         | False                                |</span>
<span class="go">| shared                  | False                                |</span>
<span class="go">| status                  | ACTIVE                               |</span>
<span class="go">| subnets                 | 43414c53-62ae-49bc-aa6c-c9dd7705818a |</span>
<span class="go">|                         | 5b9282a1-0be1-4ade-b478-7868ad2a16ff |</span>
<span class="go">| tenant_id               | d5660cb1e6934612a01b4fb2fb630725     |</span>
<span class="go">+-------------------------+--------------------------------------+</span>

<span class="gp">$</span> nova boot --image cirros --flavor <span class="m">42</span> <span class="se">\</span>
  --nic net-id<span class="o">=</span>38c5e950-b450-4c30-83d4-ee181c28aad3 my_vm
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| Property                             | Value                                                          |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| OS-DCF:diskConfig                    | MANUAL                                                         |</span>
<span class="go">| OS-EXT-AZ:availability_zone          |                                                                |</span>
<span class="go">| OS-EXT-STS:power_state               | 0                                                              |</span>
<span class="go">| OS-EXT-STS:task_state                | scheduling                                                     |</span>
<span class="go">| OS-EXT-STS:vm_state                  | building                                                       |</span>
<span class="go">| OS-SRV-USG:launched_at               | -                                                              |</span>
<span class="go">| OS-SRV-USG:terminated_at             | -                                                              |</span>
<span class="go">| accessIPv4                           |                                                                |</span>
<span class="go">| accessIPv6                           |                                                                |</span>
<span class="go">| adminPass                            | oTLQLR3Kezmt                                                   |</span>
<span class="go">| config_drive                         |                                                                |</span>
<span class="go">| created                              | 2016-02-15T19:27:34Z                                           |</span>
<span class="go">| flavor                               | m1.nano (42)                                                   |</span>
<span class="go">| hostId                               |                                                                |</span>
<span class="go">| id                                   | 43f328bb-b2d1-4cf1-a36f-3b2593397cb1                           |</span>
<span class="go">| image                                | cirros-0.3.4-x86_64-uec (b9d981eb-d21c-4ce2-9dbc-dd38f3d9015f) |</span>
<span class="go">| key_name                             | -                                                              |</span>
<span class="go">| locked                               | False                                                          |</span>
<span class="go">| metadata                             | {}                                                             |</span>
<span class="go">| name                                 | my_vm                                                          |</span>
<span class="go">| os-extended-volumes:volumes_attached | []                                                             |</span>
<span class="go">| progress                             | 0                                                              |</span>
<span class="go">| security_groups                      | default                                                        |</span>
<span class="go">| status                               | BUILD                                                          |</span>
<span class="go">| tenant_id                            | d5660cb1e6934612a01b4fb2fb630725                               |</span>
<span class="go">| updated                              | 2016-02-15T19:27:34Z                                           |</span>
<span class="go">| user_id                              | 8bb6e578cba24e7db9d3810633124525                               |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>

<span class="gp">$</span> nova list
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>
<span class="go">| ID                                   | Name  | Status | Task State | Power State | Networks                                                |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>
<span class="go">| 43f328bb-b2d1-4cf1-a36f-3b2593397cb1 | my_vm | ACTIVE | -          | Running     | private=fda4:653e:71b0:0:f816:3eff:fe16:b5f2, 10.0.0.15 |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-list --device_id 43f328bb-b2d1-4cf1-a36f-3b2593397cb1
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| id                                   | name | mac_address       | fixed_ips                                                                                                   |</span>
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| da0b1f75-c895-460f-9fc1-4d6ec84cf85f |      | fa:16:3e:16:b5:f2 | {&quot;subnet_id&quot;: &quot;5b9282a1-0be1-4ade-b478-7868ad2a16ff&quot;, &quot;ip_address&quot;: &quot;10.0.0.15&quot;}                            |</span>
<span class="go">|                                      |      |                   | {&quot;subnet_id&quot;: &quot;43414c53-62ae-49bc-aa6c-c9dd7705818a&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe16:b5f2&quot;} |</span>
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-show da0b1f75-c895-460f-9fc1-4d6ec84cf85f
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| Field                 | Value                                                                                                       |</span>
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| admin_state_up        | True                                                                                                        |</span>
<span class="go">| allowed_address_pairs |                                                                                                             |</span>
<span class="go">| binding:vnic_type     | normal                                                                                                      |</span>
<span class="go">| device_id             | 43f328bb-b2d1-4cf1-a36f-3b2593397cb1                                                                        |</span>
<span class="go">| device_owner          | compute:None                                                                                                |</span>
<span class="go">| dns_assignment        | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;10.0.0.15&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}                              |</span>
<span class="go">|                       | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe16:b5f2&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}   |</span>
<span class="go">| dns_name              | my-vm                                                                                                       |</span>
<span class="go">| extra_dhcp_opts       |                                                                                                             |</span>
<span class="go">| fixed_ips             | {&quot;subnet_id&quot;: &quot;5b9282a1-0be1-4ade-b478-7868ad2a16ff&quot;, &quot;ip_address&quot;: &quot;10.0.0.15&quot;}                            |</span>
<span class="go">|                       | {&quot;subnet_id&quot;: &quot;43414c53-62ae-49bc-aa6c-c9dd7705818a&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe16:b5f2&quot;} |</span>
<span class="go">| id                    | da0b1f75-c895-460f-9fc1-4d6ec84cf85f                                                                        |</span>
<span class="go">| mac_address           | fa:16:3e:16:b5:f2                                                                                           |</span>
<span class="go">| name                  |                                                                                                             |</span>
<span class="go">| network_id            | 38c5e950-b450-4c30-83d4-ee181c28aad3                                                                        |</span>
<span class="go">| port_security_enabled | True                                                                                                        |</span>
<span class="go">| security_groups       | 1f0ddd73-7e3c-48bd-a64c-7ded4fe0e635                                                                        |</span>
<span class="go">| status                | ACTIVE                                                                                                      |</span>
<span class="go">| tenant_id             | d5660cb1e6934612a01b4fb2fb630725                                                                            |</span>
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name         | data                                                                  |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org. | ns1.devstack.org. malavall.us.ibm.com. 1455563783 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org. | ns1.devstack.org.                                                     |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron floatingip-create 41fa3995-9e4a-4cd9-bb51-3e5424f2ff2a <span class="se">\</span>
  --port_id da0b1f75-c895-460f-9fc1-4d6ec84cf85f
<span class="go">Created a new floatingip:</span>
<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">| Field               | Value                                |</span>
<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">| dns_domain          |                                      |</span>
<span class="go">| dns_name            |                                      |</span>
<span class="go">| fixed_ip_address    | 10.0.0.15                            |</span>
<span class="go">| floating_ip_address | 172.24.4.4                           |</span>
<span class="go">| floating_network_id | 41fa3995-9e4a-4cd9-bb51-3e5424f2ff2a |</span>
<span class="go">| id                  | e78f6eb1-a35f-4a90-941d-87c888d5fcc7 |</span>
<span class="go">| port_id             | da0b1f75-c895-460f-9fc1-4d6ec84cf85f |</span>
<span class="go">| router_id           | 970ebe83-c4a3-4642-810e-43ab7b0c2b5f |</span>
<span class="go">| status              | DOWN                                 |</span>
<span class="go">| tenant_id           | d5660cb1e6934612a01b4fb2fb630725     |</span>
<span class="go">+---------------------+--------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name               | data                                                                  |</span>
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org.       | ns1.devstack.org. malavall.us.ibm.com. 1455564861 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org.       | ns1.devstack.org.                                                     |</span>
<span class="go">| 5ff53fd0-3746-48da-b9c9-77ed3004ec67 | A    | my-vm.example.org. | 172.24.4.4                                                            |</span>
<span class="go">+--------------------------------------+------+--------------------+-----------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>In this example, notice that the data is published in the DNS service when the
floating IP is associated to the port.</p>
<p>Following are the PTR records created for this example. Note that for
IPv4, the value of ipv4_ptr_zone_prefix_size is 24. For more details, see
<a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> designate record-list <span class="m">4</span>.24.172.in-addr.arpa.
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name                     | data                                                                |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| 2dd0b894-25fa-4563-9d32-9f13bd67f329 | NS   | 4.24.172.in-addr.arpa.   | ns1.devstack.org.                                                   |</span>
<span class="go">| 47b920f1-5eff-4dfa-9616-7cb5b7cb7ca6 | SOA  | 4.24.172.in-addr.arpa.   | ns1.devstack.org. admin.example.org. 1455564862 3600 600 86400 3600 |</span>
<span class="go">| fb1edf42-abba-410c-8397-831f45fd0cd7 | PTR  | 4.4.24.172.in-addr.arpa. | my-vm.example.org.                                                  |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
</pre></div>
</div>
</div>
<div class="section" id="use-case-3-floating-ips-are-published-in-the-external-dns-service">
<h3>Use case 3: Floating IPs are published in the external DNS service<a class="headerlink" href="#use-case-3-floating-ips-are-published-in-the-external-dns-service" title="Permalink to this headline">¶</a></h3>
<p>In this use case, the user assigns <code class="docutils literal"><span class="pre">dns_name</span></code> and <code class="docutils literal"><span class="pre">dns_domain</span></code> attributes
to a floating IP when it is created. The floating IP data becomes visible in
the external DNS service as soon as it is created. The floating IP can be
associated with a port on creation or later on. The following example shows a
user booting an instance and then creating a floating IP associated to the port
allocated for the instance:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron net-show 38c5e950-b450-4c30-83d4-ee181c28aad3
<span class="go">+-------------------------+--------------------------------------+</span>
<span class="go">| Field                   | Value                                |</span>
<span class="go">+-------------------------+--------------------------------------+</span>
<span class="go">| admin_state_up          | True                                 |</span>
<span class="go">| availability_zone_hints |                                      |</span>
<span class="go">| availability_zones      | nova                                 |</span>
<span class="go">| dns_domain              | example.org.                         |</span>
<span class="go">| id                      | 38c5e950-b450-4c30-83d4-ee181c28aad3 |</span>
<span class="go">| mtu                     | 1450                                 |</span>
<span class="go">| name                    | private                              |</span>
<span class="go">| port_security_enabled   | True                                 |</span>
<span class="go">| router:external         | False                                |</span>
<span class="go">| shared                  | False                                |</span>
<span class="go">| status                  | ACTIVE                               |</span>
<span class="go">| subnets                 | 43414c53-62ae-49bc-aa6c-c9dd7705818a |</span>
<span class="go">|                         | 5b9282a1-0be1-4ade-b478-7868ad2a16ff |</span>
<span class="go">| tenant_id               | d5660cb1e6934612a01b4fb2fb630725     |</span>
<span class="go">+-------------------------+--------------------------------------+</span>

<span class="gp">$</span> nova boot --image cirros --flavor <span class="m">42</span> <span class="se">\</span>
  --nic net-id<span class="o">=</span>38c5e950-b450-4c30-83d4-ee181c28aad3 my_vm
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| Property                             | Value                                                          |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>
<span class="go">| OS-DCF:diskConfig                    | MANUAL                                                         |</span>
<span class="go">| OS-EXT-AZ:availability_zone          |                                                                |</span>
<span class="go">| OS-EXT-STS:power_state               | 0                                                              |</span>
<span class="go">| OS-EXT-STS:task_state                | scheduling                                                     |</span>
<span class="go">| OS-EXT-STS:vm_state                  | building                                                       |</span>
<span class="go">| OS-SRV-USG:launched_at               | -                                                              |</span>
<span class="go">| OS-SRV-USG:terminated_at             | -                                                              |</span>
<span class="go">| accessIPv4                           |                                                                |</span>
<span class="go">| accessIPv6                           |                                                                |</span>
<span class="go">| adminPass                            | HLXGznYqXM4J                                                   |</span>
<span class="go">| config_drive                         |                                                                |</span>
<span class="go">| created                              | 2016-02-15T19:42:44Z                                           |</span>
<span class="go">| flavor                               | m1.nano (42)                                                   |</span>
<span class="go">| hostId                               |                                                                |</span>
<span class="go">| id                                   | 71fb4ac8-eed8-4644-8113-0641962bb125                           |</span>
<span class="go">| image                                | cirros-0.3.4-x86_64-uec (b9d981eb-d21c-4ce2-9dbc-dd38f3d9015f) |</span>
<span class="go">| key_name                             | -                                                              |</span>
<span class="go">| locked                               | False                                                          |</span>
<span class="go">| metadata                             | {}                                                             |</span>
<span class="go">| name                                 | my_vm                                                          |</span>
<span class="go">| os-extended-volumes:volumes_attached | []                                                             |</span>
<span class="go">| progress                             | 0                                                              |</span>
<span class="go">| security_groups                      | default                                                        |</span>
<span class="go">| status                               | BUILD                                                          |</span>
<span class="go">| tenant_id                            | d5660cb1e6934612a01b4fb2fb630725                               |</span>
<span class="go">| updated                              | 2016-02-15T19:42:44Z                                           |</span>
<span class="go">| user_id                              | 8bb6e578cba24e7db9d3810633124525                               |</span>
<span class="go">+--------------------------------------+----------------------------------------------------------------+</span>

<span class="gp">$</span> nova list
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>
<span class="go">| ID                                   | Name  | Status | Task State | Power State | Networks                                                |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>
<span class="go">| 71fb4ac8-eed8-4644-8113-0641962bb125 | my_vm | ACTIVE | -          | Running     | private=fda4:653e:71b0:0:f816:3eff:fe24:8614, 10.0.0.16 |</span>
<span class="go">+--------------------------------------+-------+--------+------------+-------------+---------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-list --device_id 71fb4ac8-eed8-4644-8113-0641962bb125
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| id                                   | name | mac_address       | fixed_ips                                                                                                   |</span>
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| 1e7033fb-8e9d-458b-89ed-8312cafcfdcb |      | fa:16:3e:24:86:14 | {&quot;subnet_id&quot;: &quot;5b9282a1-0be1-4ade-b478-7868ad2a16ff&quot;, &quot;ip_address&quot;: &quot;10.0.0.16&quot;}                            |</span>
<span class="go">|                                      |      |                   | {&quot;subnet_id&quot;: &quot;43414c53-62ae-49bc-aa6c-c9dd7705818a&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe24:8614&quot;} |</span>
<span class="go">+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron port-show 1e7033fb-8e9d-458b-89ed-8312cafcfdcb
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| Field                 | Value                                                                                                       |</span>
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>
<span class="go">| admin_state_up        | True                                                                                                        |</span>
<span class="go">| allowed_address_pairs |                                                                                                             |</span>
<span class="go">| binding:vnic_type     | normal                                                                                                      |</span>
<span class="go">| device_id             | 71fb4ac8-eed8-4644-8113-0641962bb125                                                                        |</span>
<span class="go">| device_owner          | compute:None                                                                                                |</span>
<span class="go">| dns_assignment        | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;10.0.0.16&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}                              |</span>
<span class="go">|                       | {&quot;hostname&quot;: &quot;my-vm&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe24:8614&quot;, &quot;fqdn&quot;: &quot;my-vm.example.org.&quot;}   |</span>
<span class="go">| dns_name              | my-vm                                                                                                       |</span>
<span class="go">| extra_dhcp_opts       |                                                                                                             |</span>
<span class="go">| fixed_ips             | {&quot;subnet_id&quot;: &quot;5b9282a1-0be1-4ade-b478-7868ad2a16ff&quot;, &quot;ip_address&quot;: &quot;10.0.0.16&quot;}                            |</span>
<span class="go">|                       | {&quot;subnet_id&quot;: &quot;43414c53-62ae-49bc-aa6c-c9dd7705818a&quot;, &quot;ip_address&quot;: &quot;fda4:653e:71b0:0:f816:3eff:fe24:8614&quot;} |</span>
<span class="go">| id                    | 1e7033fb-8e9d-458b-89ed-8312cafcfdcb                                                                        |</span>
<span class="go">| mac_address           | fa:16:3e:24:86:14                                                                                           |</span>
<span class="go">| name                  |                                                                                                             |</span>
<span class="go">| network_id            | 38c5e950-b450-4c30-83d4-ee181c28aad3                                                                        |</span>
<span class="go">| port_security_enabled | True                                                                                                        |</span>
<span class="go">| security_groups       | 1f0ddd73-7e3c-48bd-a64c-7ded4fe0e635                                                                        |</span>
<span class="go">| status                | ACTIVE                                                                                                      |</span>
<span class="go">| tenant_id             | d5660cb1e6934612a01b4fb2fb630725                                                                            |</span>
<span class="go">+-----------------------+-------------------------------------------------------------------------------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name         | data                                                                  |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org. | ns1.devstack.org. malavall.us.ibm.com. 1455565110 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org. | ns1.devstack.org.                                                     |</span>
<span class="go">+--------------------------------------+------+--------------+-----------------------------------------------------------------------+</span>

<span class="gp">$</span> neutron floatingip-create 41fa3995-9e4a-4cd9-bb51-3e5424f2ff2a <span class="se">\</span>
  --dns_domain example.org. --dns_name my-floatingip
<span class="go">Created a new floatingip:</span>
<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">| Field               | Value                                |</span>
<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">| dns_domain          | example.org.                         |</span>
<span class="go">| dns_name            | my-floatingip                        |</span>
<span class="go">| fixed_ip_address    |                                      |</span>
<span class="go">| floating_ip_address | 172.24.4.5                           |</span>
<span class="go">| floating_network_id | 41fa3995-9e4a-4cd9-bb51-3e5424f2ff2a |</span>
<span class="go">| id                  | 9f23a9c6-eceb-42eb-9f45-beb58c473728 |</span>
<span class="go">| port_id             |                                      |</span>
<span class="go">| router_id           |                                      |</span>
<span class="go">| status              | DOWN                                 |</span>
<span class="go">| tenant_id           | d5660cb1e6934612a01b4fb2fb630725     |</span>
<span class="go">+---------------------+--------------------------------------+</span>

<span class="gp">$</span> designate record-list example.org.
<span class="go">+--------------------------------------+------+----------------------------+-----------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name                       | data                                                                  |</span>
<span class="go">+--------------------------------------+------+----------------------------+-----------------------------------------------------------------------+</span>
<span class="go">| 10a36008-6ecf-47c3-b321-05652a929b04 | SOA  | example.org.               | ns1.devstack.org. malavall.us.ibm.com. 1455566486 3600 600 86400 3600 |</span>
<span class="go">| 56ca0b88-e343-4c98-8faa-19746e169baf | NS   | example.org.               | ns1.devstack.org.                                                     |</span>
<span class="go">| 8884c56f-3ef5-446e-ae4d-8053cc8bc2b4 | A    | my-floatingip.example.org. | 172.24.4.5                                                            |</span>
<span class="go">+--------------------------------------+------+----------------------------+-----------------------------------------------------------------------+</span>
</pre></div>
</div>
<p>Note that in this use case:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">dns_name</span></code> and <code class="docutils literal"><span class="pre">dns_domain</span></code> attributes of a floating IP must be
specified together on creation. They cannot be assigned to the floating IP
separately.</li>
<li>The <code class="docutils literal"><span class="pre">dns_name</span></code> and <code class="docutils literal"><span class="pre">dns_domain</span></code> of a floating IP have precedence, for
purposes of being published in the external DNS service, over the
<code class="docutils literal"><span class="pre">dns_name</span></code> of its associated port and the <code class="docutils literal"><span class="pre">dns_domain</span></code> of the port&#8217;s
network, whether they are specified or not. Only the <code class="docutils literal"><span class="pre">dns_name</span></code> and the
<code class="docutils literal"><span class="pre">dns_domain</span></code> of the floating IP are published in the external DNS service.</li>
</ul>
<p>Following are the PTR records created for this example. Note that for
IPv4, the value of ipv4_ptr_zone_prefix_size is 24. For more details, see
<a class="reference internal" href="#config-dns-int-ext-serv"><span>Configuring OpenStack Networking for integration with an external DNS service</span></a>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> designate record-list <span class="m">4</span>.24.172.in-addr.arpa.
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| id                                   | type | name                     | data                                                                |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
<span class="go">| 2dd0b894-25fa-4563-9d32-9f13bd67f329 | NS   | 4.24.172.in-addr.arpa.   | ns1.devstack.org.                                                   |</span>
<span class="go">| 47b920f1-5eff-4dfa-9616-7cb5b7cb7ca6 | SOA  | 4.24.172.in-addr.arpa.   | ns1.devstack.org. admin.example.org. 1455566487 3600 600 86400 3600 |</span>
<span class="go">| 589a0171-e77a-4ab6-ba6e-23114f2b9366 | PTR  | 5.4.24.172.in-addr.arpa. | my-floatingip.example.org.                                          |</span>
<span class="go">+--------------------------------------+------+--------------------------+---------------------------------------------------------------------+</span>
</pre></div>
</div>
</div>
<div class="section" id="performance-considerations">
<span id="config-dns-performance-considerations"></span><h3>Performance considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this headline">¶</a></h3>
<p>Only for <a class="reference internal" href="#config-dns-use-case-1"><span>Use case 1: Ports are published directly in the external DNS service</span></a>, if the port binding extension is
enabled in the Networking service, the Compute service will execute one
additional port update operation when allocating the port for the instance
during the boot process. This may have a noticeable adverse effect in the
performance of the boot process that must be evaluated before adoption of this
use case.</p>
</div>
<div class="section" id="configuring-openstack-networking-for-integration-with-an-external-dns-service">
<span id="config-dns-int-ext-serv"></span><h3>Configuring OpenStack Networking for integration with an external DNS service<a class="headerlink" href="#configuring-openstack-networking-for-integration-with-an-external-dns-service" title="Permalink to this headline">¶</a></h3>
<p>The first step to configure the integration with an external DNS service is to
enable the functionality described in <a class="reference internal" href="#config-dns-int-dns-resolution"><span>The Networking service internal DNS resolution</span></a>.
Once this is done, the user has to take the following steps and restart
<code class="docutils literal"><span class="pre">neutron-server</span></code>.</p>
<ol class="arabic">
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">[default]</span></code> section of <code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code> and specify
the external DNS service driver to be used in parameter
<code class="docutils literal"><span class="pre">external_dns_driver</span></code>. The valid options are defined in namespace
<code class="docutils literal"><span class="pre">neutron.services.external_dns_drivers</span></code>. The following example shows how
to set up the driver for the OpenStack DNS service:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">external_dns_driver = designate</span>
</pre></div>
</div>
</li>
<li><p class="first">If the OpenStack DNS service is the target external DNS, the <code class="docutils literal"><span class="pre">[designate]</span></code>
section of <code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code> must define the following
parameters:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">url</span></code>: the OpenStack DNS service public endpoint URL.</li>
<li><code class="docutils literal"><span class="pre">allow_reverse_dns_lookup</span></code>: a boolean value specifying whether to enable
or not the creation of reverse lookup (PTR) records.</li>
<li><code class="docutils literal"><span class="pre">admin_auth_url</span></code>: the Identity service admin authorization endpoint url.
This endpoint will be used by the Networking service to authenticate as an
admin user to create and update reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">admin_username</span></code>: the admin user to be used by the Networking service to
create and update reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">admin_password</span></code>: the password of the admin user to be used by
Networking service to create and update reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">admin_tenant_name</span></code>: the project of the admin user to be used by the
Networking service to create and update reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">ipv4_ptr_zone_prefix_size</span></code>: the size in bits of the prefix for the IPv4
reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">ipv6_ptr_zone_prefix_size</span></code>: the size in bits of the prefix for the IPv6
reverse lookup (PTR) zones.</li>
<li><code class="docutils literal"><span class="pre">insecure</span></code>: Disable SSL certificate validation. By default, certificates
are validated.</li>
<li><code class="docutils literal"><span class="pre">ca_cert</span></code>: Path to a valid Certificate Authority (CA) certificate.</li>
</ul>
<p>The following is an example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[designate]</span>
<span class="go">url = http://55.114.111.93:9001/v2</span>
<span class="go">admin_auth_url = http://55.114.111.93:35357/v2.0</span>
<span class="go">admin_username = neutron</span>
<span class="go">admin_password = x5G90074</span>
<span class="go">admin_tenant_name = service</span>
<span class="go">allow_reverse_dns_lookup = True</span>
<span class="go">ipv4_ptr_zone_prefix_size = 24</span>
<span class="go">ipv6_ptr_zone_prefix_size = 116</span>
<span class="go">ca_cert = /etc/ssl/certs/my_ca_cert</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="configuration-of-the-externally-accessible-network-for-use-case-1">
<h3>Configuration of the externally accessible network for use case 1<a class="headerlink" href="#configuration-of-the-externally-accessible-network-for-use-case-1" title="Permalink to this headline">¶</a></h3>
<p>In <a class="reference internal" href="#config-dns-use-case-1"><span>Use case 1: Ports are published directly in the external DNS service</span></a>, the externally accessible network must
meet the following requirements:</p>
<ul class="simple">
<li>The network cannot have attribute <code class="docutils literal"><span class="pre">router:external</span></code> set to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li>The network type can be FLAT, VLAN, GRE, VXLAN or GENEVE.</li>
<li>For network types VLAN, GRE, VXLAN or GENEVE, the segmentation ID must be
outside the ranges assigned to tenant networks.</li>
</ul>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="config-dhcp-ha.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: High-availability for DHCP"></i></a>
          
          
            <a href="config-dns-res.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Name resolution for instances"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 13:48</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="config.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config-ml2.html">ML2 plug-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-address-scopes.html">Address scopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-auto-allocation.html">Automatic allocation of network topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-az.html">Availability zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-bgp-dynamic-routing.html">BGP dynamic routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dhcp-ha.html">High-availability for DHCP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">DNS integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dns-res.html">Name resolution for instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dvr-ha-snat.html">Distributed Virtual Routing with VRRP</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ipam.html">IPAM configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ipv6.html">IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-lbaas.html">Load Balancer as a Service (LBaaS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-macvtap.html">Macvtap mechanism driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-mtu.html">MTU considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ovs-dpdk.html">Open vSwitch with DPDK datapath</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ovsfwdriver.html">Native Open vSwitch firewall driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-qos.html">Quality of Service (QoS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-rbac.html">Role-Based Access Control (RBAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-routed-networks.html">Routed provider networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-sfc.html">Service function chaining</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-sriov.html">SR-IOV</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-subnet-pools.html">Subnet pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-service-subnets.html">Service subnets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deployment examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "config-dns-int" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/networking-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: b8fd8c76e4ec1d07c2970cbd5770a38196b5b343";
        var bugProject = "openstack-manuals";
        var bugTitle = "DNS integration in Networking Guide";
    var fieldTags = "networking-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 13:48";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>