<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: IPv6</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>IPv6</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="config-ipam.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: IPAM configuration"></i></a>
    
    
    <a href="config-lbaas.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Load Balancer as a Service (LBaaS)"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 13:48</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">IPv6</a><ul>
<li><a class="reference internal" href="#not-in-scope">Not in scope</a></li>
<li><a class="reference internal" href="#neutron-subnets-and-the-ipv6-api-attributes">Neutron subnets and the IPv6 API attributes</a><ul>
<li><a class="reference internal" href="#ipv6-addressing">IPv6 addressing</a></li>
<li><a class="reference internal" href="#router-advertisements">Router advertisements</a></li>
<li><a class="reference internal" href="#ipv6-ra-mode-and-ipv6-address-mode-combinations">ipv6_ra_mode and ipv6_address_mode combinations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-network-considerations">Project network considerations</a><ul>
<li><a class="reference internal" href="#dataplane">Dataplane</a></li>
<li><a class="reference internal" href="#addresses-for-subnets">Addresses for subnets</a></li>
<li><a class="reference internal" href="#address-modes-for-ports">Address modes for ports</a></li>
<li><a class="reference internal" href="#using-slaac-for-addressing">Using SLAAC for addressing</a></li>
<li><a class="reference internal" href="#dhcpv6">DHCPv6</a></li>
</ul>
</li>
<li><a class="reference internal" href="#router-support">Router support</a><ul>
<li><a class="reference internal" href="#neutron-s-distributed-router-feature-and-ipv6">Neutron&#8217;s Distributed Router feature and IPv6</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-services">Advanced services</a><ul>
<li><a class="reference internal" href="#vpnaas">VPNaaS</a></li>
<li><a class="reference internal" href="#lbaas">LBaaS</a></li>
<li><a class="reference internal" href="#fwaas">FWaaS</a></li>
<li><a class="reference internal" href="#nat-floating-ips">NAT &amp; Floating IPs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security-considerations">Security considerations</a><ul>
<li><a class="reference internal" href="#configuring-interfaces-of-the-guest">Configuring interfaces of the guest</a></li>
</ul>
</li>
<li><a class="reference internal" href="#openstack-control-management-network-considerations">OpenStack control &amp; management network considerations</a></li>
<li><a class="reference internal" href="#prefix-delegation">Prefix delegation</a><ul>
<li><a class="reference internal" href="#configuring-openstack-networking-for-prefix-delegation">Configuring OpenStack Networking for prefix delegation</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#configuring-the-dibbler-server">Configuring the Dibbler server</a></li>
<li><a class="reference internal" href="#user-workflow">User workflow</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#extra-configuration">Extra configuration</a><ul>
<li><a class="reference internal" href="#neutron-dhcpv6-pd-agent">Neutron dhcpv6_pd_agent</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="ipv6">
<span id="config-ipv6"></span><h1>IPv6<a class="headerlink" href="#ipv6" title="Permalink to this headline">¶</a></h1>
<p>Scope:</p>
<ul class="simple">
<li>How to enable dual-stack (IPv4 and IPv6 enabled) instances.</li>
<li>How those instances receive an IPv6 address.</li>
<li>How those instances communicate across a router to other subnets or
the internet.</li>
<li>How those instances interact with other OpenStack services.</li>
</ul>
<p>To enable a dual-stack network in OpenStack Networking simply requires
creating a subnet with the <code class="docutils literal"><span class="pre">ip_version</span></code> field set to <code class="docutils literal"><span class="pre">6</span></code>, then the
IPv6 attributes (<code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> and <code class="docutils literal"><span class="pre">ipv6_address_mode</span></code>) set.  The
<code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> and <code class="docutils literal"><span class="pre">ipv6_address_mode</span></code> will be described in detail in
the next section. Finally, the subnets <code class="docutils literal"><span class="pre">cidr</span></code> needs to be provided.</p>
<div class="section" id="not-in-scope">
<h2>Not in scope<a class="headerlink" href="#not-in-scope" title="Permalink to this headline">¶</a></h2>
<p>Things not in the scope of this document include:</p>
<ul class="simple">
<li>Single stack IPv6 project networking</li>
<li>OpenStack control communication between servers and services over an IPv6
network.</li>
<li>Connection to the OpenStack APIs via an IPv6 transport network</li>
<li>IPv6 multicast</li>
<li>IPv6 support in conjunction with any out of tree routers, switches, services
or agents whether in physical or virtual form factors.</li>
</ul>
</div>
<div class="section" id="neutron-subnets-and-the-ipv6-api-attributes">
<h2>Neutron subnets and the IPv6 API attributes<a class="headerlink" href="#neutron-subnets-and-the-ipv6-api-attributes" title="Permalink to this headline">¶</a></h2>
<p>As of Juno, the OpenStack Networking service (neutron) provides two
new attributes to the subnet object, which allows users of the API to
configure IPv6 subnets.</p>
<p>There are two IPv6 attributes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code></li>
<li><code class="docutils literal"><span class="pre">ipv6_address_mode</span></code></li>
</ul>
<p>These attributes can be set to the following values:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">slaac</span></code></li>
<li><code class="docutils literal"><span class="pre">dhcpv6-stateful</span></code></li>
<li><code class="docutils literal"><span class="pre">dhcpv6-stateless</span></code></li>
</ul>
<p>The attributes can also be left unset.</p>
<div class="section" id="ipv6-addressing">
<h3>IPv6 addressing<a class="headerlink" href="#ipv6-addressing" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">ipv6_address_mode</span></code> attribute is used to control how addressing is
handled by OpenStack. There are a number of different ways that guest
instances can obtain an IPv6 address, and this attribute exposes these
choices to users of the Networking API.</p>
</div>
<div class="section" id="router-advertisements">
<h3>Router advertisements<a class="headerlink" href="#router-advertisements" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> attribute is used to control router
advertisements for a subnet.</p>
<p>The IPv6 Protocol uses Internet Control Message Protocol packets
(ICMPv6) as a way to distribute information about networking. ICMPv6
packets with the type flag set to 134 are called &#8220;Router
Advertisement&#8221; packets, which broadcasts information about the router
and the route that can be used by guest instances to send network
traffic.</p>
<p>The <code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> is used to specify if the Networking service should
transmit ICMPv6 packets, for a subnet.</p>
</div>
<div class="section" id="ipv6-ra-mode-and-ipv6-address-mode-combinations">
<h3>ipv6_ra_mode and ipv6_address_mode combinations<a class="headerlink" href="#ipv6-ra-mode-and-ipv6-address-mode-combinations" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ipv6 ra mode</th>
<th class="head">ipv6 address mode</th>
<th class="head">radvd A,M,O</th>
<th class="head">External Router A,M,O</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>N/S</em></td>
<td><em>N/S</em></td>
<td>Off</td>
<td>Not Defined</td>
<td>Backwards compatibility with pre-Juno IPv6 behavior.</td>
</tr>
<tr class="row-odd"><td><em>N/S</em></td>
<td>slaac</td>
<td>Off</td>
<td>1,0,0</td>
<td>Guest instance obtains IPv6 address from non-OpenStack router using SLAAC.</td>
</tr>
<tr class="row-even"><td><em>N/S</em></td>
<td>dhcpv6-stateful</td>
<td>Off</td>
<td>0,1,1</td>
<td>Not currently implemented in the reference implementation.</td>
</tr>
<tr class="row-odd"><td><em>N/S</em></td>
<td>dhcpv6-stateless</td>
<td>Off</td>
<td>1,0,1</td>
<td>Not currently implemented in the reference implementation.</td>
</tr>
<tr class="row-even"><td>slaac</td>
<td><em>N/S</em></td>
<td>1,0,0</td>
<td>Off</td>
<td>Not currently implemented in the reference implementation.</td>
</tr>
<tr class="row-odd"><td>dhcpv6-stateful</td>
<td><em>N/S</em></td>
<td>0,1,1</td>
<td>Off</td>
<td>Not currently implemented in the reference implementation.</td>
</tr>
<tr class="row-even"><td>dhcpv6-stateless</td>
<td><em>N/S</em></td>
<td>1,0,1</td>
<td>Off</td>
<td>Not currently implemented in the reference implementation.</td>
</tr>
<tr class="row-odd"><td>slaac</td>
<td>slaac</td>
<td>1,0,0</td>
<td>Off</td>
<td>Guest instance obtains IPv6 address from OpenStack managed radvd using SLAAC.</td>
</tr>
<tr class="row-even"><td>dhcpv6-stateful</td>
<td>dhcpv6-stateful</td>
<td>0,1,1</td>
<td>Off</td>
<td>Guest instance obtains IPv6 address from dnsmasq using DHCPv6
stateful and optional info from dnsmasq using DHCPv6.</td>
</tr>
<tr class="row-odd"><td>dhcpv6-stateless</td>
<td>dhcpv6-stateless</td>
<td>1,0,1</td>
<td>Off</td>
<td>Guest instance obtains IPv6 address from OpenStack managed
radvd using SLAAC and optional info from dnsmasq using
DHCPv6.</td>
</tr>
<tr class="row-even"><td>slaac</td>
<td>dhcpv6-stateful</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
<tr class="row-odd"><td>slaac</td>
<td>dhcpv6-stateless</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
<tr class="row-even"><td>dhcpv6-stateful</td>
<td>slaac</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
<tr class="row-odd"><td>dhcpv6-stateful</td>
<td>dhcpv6-stateless</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
<tr class="row-even"><td>dhcpv6-stateless</td>
<td>slaac</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
<tr class="row-odd"><td>dhcpv6-stateless</td>
<td>dhcpv6-stateful</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><em>Invalid combination.</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="project-network-considerations">
<h2>Project network considerations<a class="headerlink" href="#project-network-considerations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dataplane">
<h3>Dataplane<a class="headerlink" href="#dataplane" title="Permalink to this headline">¶</a></h3>
<p>Both the Linux bridge and the Open vSwitch dataplane modules support
forwarding IPv6
packets amongst the guests and router ports. Similar to IPv4, there is no
special configuration or setup required to enable the dataplane to properly
forward packets from the source to the destination using IPv6. Note that these
dataplanes will forward Link-local Address (LLA) packets between hosts on the
same network just fine without any participation or setup by OpenStack
components after the ports are all connected and MAC addresses learned.</p>
</div>
<div class="section" id="addresses-for-subnets">
<h3>Addresses for subnets<a class="headerlink" href="#addresses-for-subnets" title="Permalink to this headline">¶</a></h3>
<p>There are four methods for a subnet to get its <code class="docutils literal"><span class="pre">cidr</span></code> in OpenStack:</p>
<ol class="arabic simple">
<li>Direct assignment during subnet creation via command line or Horizon</li>
<li>Referencing a subnet pool during subnet creation</li>
</ol>
<p>In the future, different techniques could be used to allocate subnets
to projects:</p>
<ol class="arabic simple">
<li>Using a PD client to request a prefix for a subnet from a PD server</li>
<li>Use of an external IPAM module to allocate the subnet</li>
</ol>
</div>
<div class="section" id="address-modes-for-ports">
<h3>Address modes for ports<a class="headerlink" href="#address-modes-for-ports" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">That an external DHCPv6 server in theory could override the full
address OpenStack assigns based on the EUI-64 address, but that
would not be wise as it would not be consistent through the system.</p>
</div>
<p>IPv6 supports three different addressing schemes for address configuration and
for providing optional network information.</p>
<dl class="docutils">
<dt>Stateless Address Auto Configuration (SLAAC)</dt>
<dd>Address configuration using Router Advertisement (RA).</dd>
<dt>DHCPv6-stateless</dt>
<dd>Address configuration using RA and optional information
using DHCPv6.</dd>
<dt>DHCPv6-stateful</dt>
<dd>Address configuration and optional information using DHCPv6.</dd>
</dl>
<p>OpenStack can be setup such that OpenStack Networking directly
provides RA, DHCP
relay and DHCPv6 address and optional information for their networks
or this can be delegated to external routers and services based on the
drivers that are in use. There are two neutron subnet attributes -
<code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> and <code class="docutils literal"><span class="pre">ipv6_address_mode</span></code> – that determine how IPv6
addressing and network information is provided to project instances:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code>: Determines who sends RA.</li>
<li><code class="docutils literal"><span class="pre">ipv6_address_mode</span></code>: Determines how instances obtain IPv6 address,
default gateway, or optional information.</li>
</ul>
<p>For the above two attributes to be effective, <code class="docutils literal"><span class="pre">enable_dhcp</span></code> of the
subnet object must be set to True.</p>
</div>
<div class="section" id="using-slaac-for-addressing">
<h3>Using SLAAC for addressing<a class="headerlink" href="#using-slaac-for-addressing" title="Permalink to this headline">¶</a></h3>
<p>When using SLAAC, the currently supported combinations for <code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> and
<code class="docutils literal"><span class="pre">ipv6_address_mode</span></code> are as follows.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ipv6_ra_mode</th>
<th class="head">ipv6_address_mode</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Not specified.</td>
<td>SLAAC</td>
<td>Addresses are assigned using EUI-64, and an external router
will be used for routing.</td>
</tr>
<tr class="row-odd"><td>SLAAC</td>
<td>SLAAC</td>
<td>Address are assigned using EUI-64, and OpenStack Networking
provides routing.</td>
</tr>
</tbody>
</table>
<p>Setting <code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> to <code class="docutils literal"><span class="pre">slaac</span></code> will result in OpenStack Networking
routers being configured to send RA packets, when they are created.
This results in the following values set for the address configuration
flags in the RA messages:</p>
<ul class="simple">
<li>Auto Configuration Flag = 1</li>
<li>Managed Configuration Flag = 0</li>
<li>Other Configuration Flag = 0</li>
</ul>
<p>New or existing Neutron networks that contain a SLAAC enabled IPv6 subnet will
result in all neutron ports attached to the network receiving IPv6 addresses.
This is because when RA broadcast messages are sent out on a neutron
network, they are received by all IPv6 capable ports on the network,
and each port will then configure an IPv6 address based on the
information contained in the RA packet. In some cases, an IPv6 SLAAC
address will be added to a port, in addition to other IPv4 and IPv6 addresses
that the port already has been assigned.</p>
</div>
<div class="section" id="dhcpv6">
<h3>DHCPv6<a class="headerlink" href="#dhcpv6" title="Permalink to this headline">¶</a></h3>
<p>For DHCPv6-stateless, the currently supported combinations are as
follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ipv6_ra_mode</th>
<th class="head">ipv6_address_mode</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DHCPv6-stateless</td>
<td>DHCPv6-stateless</td>
<td>Address and optional information using neutron router and DHCP
implementation respectively.</td>
</tr>
<tr class="row-odd"><td>DHCPv6-stateful</td>
<td>DHCPv6-stateful</td>
<td>Addresses and optional information are assigned using DHCPv6.</td>
</tr>
</tbody>
</table>
<p>Setting DHCPv6-stateless for <code class="docutils literal"><span class="pre">ipv6_ra_mode</span></code> configures the neutron
router with radvd agent to send RAs. The table below captures the
values set for the address configuration flags in the RA packet in
this scenario. Similarly, setting DHCPv6-stateless for
<code class="docutils literal"><span class="pre">ipv6_address_mode</span></code> configures neutron DHCP implementation to provide
the additional network information.</p>
<ul class="simple">
<li>Auto Configuration Flag = 1</li>
<li>Managed Configuration Flag = 0</li>
<li>Other Configuration Flag = 1</li>
</ul>
</div>
</div>
<div class="section" id="router-support">
<h2>Router support<a class="headerlink" href="#router-support" title="Permalink to this headline">¶</a></h2>
<p>The behavior of the neutron router for IPv6 is different than IPv4 in
a few ways.</p>
<p>Internal router ports, that act as default gateway ports for a network, will
share a common port for all IPv6 subnets associated with the network. This
implies that there will be an IPv6 internal router interface with multiple
IPv6 addresses from each of the IPv6 subnets associated with the network and a
separate IPv4 internal router interface for the IPv4 subnet. On the other
hand, external router ports are allowed to have a dual-stack configuration
with both an IPv4 and an IPv6 address assigned to them.</p>
<p>Neutron project networks that are assigned Global Unicast Address (GUA)
prefixes and addresses don’t require NAT on the neutron router external gateway
port to access the outside world. As a consequence of the lack of NAT the
external router port doesn’t require a GUA to send and receive to the external
networks. This implies a GUA IPv6 subnet prefix is not necessarily needed for
the neutron external network. By default, a IPv6 LLA associated with the
external gateway port can be used for routing purposes. To handle this
scenario, the implementation of router-gateway-set API in neutron has been
modified so that an IPv6 subnet is not required for the external network that
is associated with the neutron router. The LLA address of the upstream router
can be learned in two ways.</p>
<ol class="arabic simple">
<li>In the absence of an upstream RA support, <code class="docutils literal"><span class="pre">ipv6_gateway</span></code> flag can be set
with the external router gateway LLA in the neutron L3 agent configuration
file. This also requires that no subnet is associated with that port.</li>
<li>The upstream router can send an RA and the neutron router will
automatically learn the next-hop LLA, provided again that no subnet is
assigned and the <code class="docutils literal"><span class="pre">ipv6_gateway</span></code> flag is not set.</li>
</ol>
<p>Effectively the <code class="docutils literal"><span class="pre">ipv6_gateway</span></code> flag takes precedence over an RA that
is received from the upstream router. If it is desired to use a GUA
next hop that is accomplished by allocating a subnet to the external
router port and assigning the upstream routers GUA address as the
gateway for the subnet.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">That it should be possible for projects to communicate with each other
on an isolated network (a network without a router port) using LLA
with little to no participation on the part of OpenStack. The authors
of this section have not proven that to be true for all scenarios.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When using the neutron L3 agent in a configuration where it is
auto-configuring an IPv6 address via SLAAC, and the agent is
learning its default IPv6 route from the ICMPv6 Router Advertisement,
it may be necessary to set the
<code class="docutils literal"><span class="pre">net.ipv6.conf.&lt;physical_interface&gt;.accept_ra</span></code> sysctl to the
value <code class="docutils literal"><span class="pre">2</span></code> in order for routing to function correctly.
For a more detailed description, please see the <a class="reference external" href="https://bugs.launchpad.net/neutron/+bug/1616282">bug</a>.</p>
</div>
<div class="section" id="neutron-s-distributed-router-feature-and-ipv6">
<h3>Neutron&#8217;s Distributed Router feature and IPv6<a class="headerlink" href="#neutron-s-distributed-router-feature-and-ipv6" title="Permalink to this headline">¶</a></h3>
<p>IPv6 does work when the Distributed Virtual Router functionality is enabled,
but all ingress/egress traffic is via the centralized router (hence, not
distributed). More work is required to fully enable this functionality.</p>
</div>
</div>
<div class="section" id="advanced-services">
<h2>Advanced services<a class="headerlink" href="#advanced-services" title="Permalink to this headline">¶</a></h2>
<div class="section" id="vpnaas">
<h3>VPNaaS<a class="headerlink" href="#vpnaas" title="Permalink to this headline">¶</a></h3>
<p>VPNaaS supports IPv6, but support in Kilo and prior releases will have
some bugs that may limit how it can be used. More thorough and
complete testing and bug fixing is being done as part of the Liberty
release. IPv6-based VPN-as-a-Service is configured similar to the IPv4
configuration. Either or both the <code class="docutils literal"><span class="pre">peer_address</span></code> and the
<code class="docutils literal"><span class="pre">peer_cidr</span></code> can specified as an IPv6 address. The choice of
addressing modes and router modes described above should not impact
support.</p>
</div>
<div class="section" id="lbaas">
<h3>LBaaS<a class="headerlink" href="#lbaas" title="Permalink to this headline">¶</a></h3>
<p>TODO</p>
</div>
<div class="section" id="fwaas">
<h3>FWaaS<a class="headerlink" href="#fwaas" title="Permalink to this headline">¶</a></h3>
<p>FWaaS allows creation of IPv6 based rules.</p>
</div>
<div class="section" id="nat-floating-ips">
<h3>NAT &amp; Floating IPs<a class="headerlink" href="#nat-floating-ips" title="Permalink to this headline">¶</a></h3>
<p>At the current time OpenStack Networking does not provide any facility
to support any flavor of NAT with IPv6. Unlike IPv4 there is no
current embedded support for floating IPs with IPv6. It is assumed
that the IPv6 addressing amongst the projects are using GUAs with no
overlap across the projects.</p>
</div>
</div>
<div class="section" id="security-considerations">
<h2>Security considerations<a class="headerlink" href="#security-considerations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configuring-interfaces-of-the-guest">
<h3>Configuring interfaces of the guest<a class="headerlink" href="#configuring-interfaces-of-the-guest" title="Permalink to this headline">¶</a></h3>
<p>OpenStack currently doesn&#8217;t support the privacy extensions defined by RFC 4941.
The interface identifier and DUID used must be directly derived from the MAC
as described in RFC 2373. The compute hosts must not be setup to utilize the
privacy extensions when generating their interface identifier.</p>
<p>There is no provisions for an IPv6-based metadata service similar to what is
provided for IPv4. In the case of dual stack Guests though it is always
possible to use the IPv4 metadata service instead.</p>
<p>Unlike IPv4 the MTU of a given network can be conveyed in the RA messages sent
by the router and not in the DHCP messages.</p>
</div>
</div>
<div class="section" id="openstack-control-management-network-considerations">
<h2>OpenStack control &amp; management network considerations<a class="headerlink" href="#openstack-control-management-network-considerations" title="Permalink to this headline">¶</a></h2>
<p>As of the Kilo release, considerable effort has gone in to ensuring
the project network can handle dual stack IPv6 and IPv4 transport
across the variety of configurations describe above. OpenStack control
network can be run in a dual stack configuration and OpenStack API
endpoints can be accessed via an IPv6 network. At this time, Open vSwitch
(OVS) tunnel types - STT, VXLAN, GRE, support both IPv4 and IPv6 endpoints.</p>
</div>
<div class="section" id="prefix-delegation">
<h2>Prefix delegation<a class="headerlink" href="#prefix-delegation" title="Permalink to this headline">¶</a></h2>
<p>From the Liberty release onwards, OpenStack Networking supports IPv6 prefix
delegation. This section describes the configuration and workflow steps
necessary to use IPv6 prefix delegation to provide automatic allocation of
subnet CIDRs. This allows you as the OpenStack administrator to rely on an
external (to the OpenStack Networking service) DHCPv6 server to manage your
project network prefixes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Prefix delegation became available in the Liberty release, it is
not available in the Kilo release. HA and DVR routers
are not currently supported by this feature.</p>
</div>
<div class="section" id="configuring-openstack-networking-for-prefix-delegation">
<h3>Configuring OpenStack Networking for prefix delegation<a class="headerlink" href="#configuring-openstack-networking-for-prefix-delegation" title="Permalink to this headline">¶</a></h3>
<p>To enable prefix delegation, edit the <code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code> file.
If you are running OpenStack Liberty, make the following change:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">default_ipv6_subnet_pool = prefix_delegation</span>
</pre></div>
</div>
<p>Otherwise if you are running OpenStack Mitaka, make this change:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ipv6_pd_enabled = True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are not using the default dibbler-based driver for prefix
delegation, then you also need to set the driver in
<code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">pd_dhcp_driver = &lt;class path to driver&gt;</span>
</pre></div>
</div>
<p class="last">Drivers other than the default one may require extra configuration,
please refer to <a class="reference internal" href="#extra-driver-conf"><span>Extra configuration</span></a></p>
</div>
<p>This tells OpenStack Networking to use the prefix delegation mechanism for
subnet allocation when the user does not provide a CIDR or subnet pool id when
creating a subnet.</p>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>To use this feature, you need a prefix delegation capable DHCPv6 server that is
reachable from your OpenStack Networking node(s). This could be software
running on the OpenStack Networking node(s) or elsewhere, or a physical router.
For the purposes of this guide we are using the open-source DHCPv6 server,
Dibbler. Dibbler is available in many Linux package managers, or from source at
<a class="reference external" href="https://github.com/tomaszmrugalski/dibbler">https://github.com/tomaszmrugalski/dibbler</a>.</p>
<p>When using the reference implementation of the OpenStack Networking prefix
delegation driver, Dibbler must also be installed on your OpenStack Networking
node(s) to serve as a DHCPv6 client. Version 1.0.1 or higher is required.</p>
<p>This guide assumes that you are running a Dibbler server on the network node
where the external network bridge exists. If you already have a prefix
delegation capable DHCPv6 server in place, then you can skip the following
section.</p>
</div>
<div class="section" id="configuring-the-dibbler-server">
<h3>Configuring the Dibbler server<a class="headerlink" href="#configuring-the-dibbler-server" title="Permalink to this headline">¶</a></h3>
<p>After installing Dibbler, edit the <code class="docutils literal"><span class="pre">/etc/dibbler/server.conf</span></code> file:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>script &quot;/var/lib/dibbler/pd-server.sh&quot;

iface &quot;br-ex&quot; {
    pd-class {
        pd-pool 2001:db8:2222::/48
        pd-length 64
    }
}
</pre></div>
</div>
<p>The options used in the configuration file above are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">script</span></code>
Points to a script to be run when a prefix is delegated or
released. This is only needed if you want instances on your
subnets to have external network access. More on this below.</li>
<li><code class="docutils literal"><span class="pre">iface</span></code>
The name of the network interface on which to listen for
prefix delegation messages.</li>
<li><code class="docutils literal"><span class="pre">pd-pool</span></code>
The larger prefix from which you want your delegated
prefixes to come. The example given is sufficient if you do
not need external network access, otherwise a unique
globally routable prefix is necessary.</li>
<li><code class="docutils literal"><span class="pre">pd-length</span></code>
The length that delegated prefixes will be. This must be
64 to work with the current OpenStack Networking reference implementation.</li>
</ul>
<p>To provide external network access to your instances, your Dibbler server also
needs to create new routes for each delegated prefix. This is done using the
script file named in the config file above. Edit the
<code class="docutils literal"><span class="pre">/var/lib/dibbler/pd-server.sh</span></code> file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$PREFIX1</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;add&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        sudo ip -6 route add <span class="si">${</span><span class="nv">PREFIX1</span><span class="si">}</span>/64 via <span class="nv">$REMOTE_ADDR</span> dev <span class="nv">$IFACE</span>
    <span class="k">fi</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;delete&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        sudo ip -6 route del <span class="si">${</span><span class="nv">PREFIX1</span><span class="si">}</span>/64 via <span class="nv">$REMOTE_ADDR</span> dev <span class="nv">$IFACE</span>
    <span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
<p>The variables used in the script file above are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">$PREFIX1</span></code>
The prefix being added/deleted by the Dibbler server.</li>
<li><code class="docutils literal"><span class="pre">$1</span></code>
The operation being performed.</li>
<li><code class="docutils literal"><span class="pre">$REMOTE_ADDR</span></code>
The IP address of the requesting Dibbler client.</li>
<li><code class="docutils literal"><span class="pre">$IFACE</span></code>
The network interface upon which the request was received.</li>
</ul>
<p>The above is all you need in this scenario, but more information on
installing, configuring, and running Dibbler is available in the Dibbler user
guide, at <a class="reference external" href="http://klub.com.pl/dhcpv6/doc/dibbler-user.pdf">http://klub.com.pl/dhcpv6/doc/dibbler-user.pdf</a>.</p>
<p>To start your Dibbler server, run:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> dibbler-server run
</pre></div>
</div>
<p>Or to run in headless mode:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> dibbler-server start
</pre></div>
</div>
<p>When using DevStack, it is important to start your server after the
<code class="docutils literal"><span class="pre">stack.sh</span></code> script has finished to ensure that the required network
interfaces have been created.</p>
</div>
<div class="section" id="user-workflow">
<h3>User workflow<a class="headerlink" href="#user-workflow" title="Permalink to this headline">¶</a></h3>
<p>First, create a network and IPv6 subnet:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron net-create ipv6-pd

<span class="go">Created a new network:</span>
<span class="go">+-----------------+--------------------------------------+</span>
<span class="go">| Field           | Value                                |</span>
<span class="go">+-----------------+--------------------------------------+</span>
<span class="go">| admin_state_up  | True                                 |</span>
<span class="go">| id              | 31ef3e85-111f-4772-8172-8e4a404a7476 |</span>
<span class="go">| mtu             | 1450                                 |</span>
<span class="go">| name            | ipv6-pd                              |</span>
<span class="go">| router:external | False                                |</span>
<span class="go">| shared          | False                                |</span>
<span class="go">| status          | ACTIVE                               |</span>
<span class="go">| subnets         |                                      |</span>
<span class="go">| tenant_id       | 28b39bcce66e4a648f82e2362b958b60     |</span>
<span class="go">+-----------------+--------------------------------------+</span>

<span class="gp">$</span> neutron subnet-create ipv6-pd --name ipv6-pd-1 --ip_version <span class="m">6</span> <span class="se">\</span>
  --ipv6_ra_mode slaac --ipv6_address_mode slaac --use_default_subnetpool

<span class="go">Created a new subnet:</span>
<span class="go">+-------------------+--------------------------------------------------+</span>
<span class="go">| Field             | Value                                            |</span>
<span class="go">+-------------------+--------------------------------------------------+</span>
<span class="go">| allocation_pools  | {&quot;start&quot;: &quot;::2&quot;, &quot;end&quot;: &quot;::ffff:ffff:ffff:fffe&quot;} |</span>
<span class="go">| cidr              | ::/64                                            |</span>
<span class="go">| dns_nameservers   |                                                  |</span>
<span class="go">| enable_dhcp       | True                                             |</span>
<span class="go">| gateway_ip        | ::1                                              |</span>
<span class="go">| host_routes       |                                                  |</span>
<span class="go">| id                | ea139dcd-17a3-4f0a-8cca-dff8b4e03f8a             |</span>
<span class="go">| ip_version        | 6                                                |</span>
<span class="go">| ipv6_address_mode | slaac                                            |</span>
<span class="go">| ipv6_ra_mode      | slaac                                            |</span>
<span class="go">| name              | ipv6-pd-1                                        |</span>
<span class="go">| network_id        | 31ef3e85-111f-4772-8172-8e4a404a7476             |</span>
<span class="go">| subnetpool_id     | prefix_delegation                                |</span>
<span class="go">| tenant_id         | 28b39bcce66e4a648f82e2362b958b60                 |</span>
<span class="go">+-------------------+--------------------------------------------------+</span>
</pre></div>
</div>
<p>The subnet is initially created with a temporary CIDR before one can be
assigned by prefix delegation. Any number of subnets with this temporary CIDR
can exist without raising an overlap error. The subnetpool_id is automatically
set to <code class="docutils literal"><span class="pre">prefix_delegation</span></code>.</p>
<p>To trigger the prefix delegation process, create a router interface between
this subnet and a router with an active interface on the external network:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron router-interface-add cb9b7a2c-0ffa-412f-989a-1e6c60e1c02f <span class="se">\</span>
  ea139dcd-17a3-4f0a-8cca-dff8b4e03f8a
<span class="go">Added interface a7e4d663-e3fc-4b8f-909f-865c397a930e to router</span>
<span class="go">cb9b7a2c-0ffa-412f-989a-1e6c60e1c02f.</span>
</pre></div>
</div>
<p>The prefix delegation mechanism then sends a request via the external network
to your prefix delegation server, which replies with the delegated prefix. The
subnet is then updated with the new prefix, including issuing new IP addresses
to all ports:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron subnet-show ipv6-pd-1

<span class="go">+-------------------+-------------------------------------------------+</span>
<span class="go">| Field             | Value                                           |</span>
<span class="go">+-------------------+-------------------------------------------------+</span>
<span class="go">| allocation_pools  | {&quot;start&quot;: &quot;2001:db8:2222:6977::2&quot;,              |</span>
<span class="go">|                   | &quot;end&quot;:&quot;2001:db8:2222:6977:ffff:ffff:ffff:fffe&quot;} |</span>
<span class="go">| cidr              | 2001:db8:2222:6977::/64                         |</span>
<span class="go">| dns_nameservers   |                                                 |</span>
<span class="go">| enable_dhcp       | True                                            |</span>
<span class="go">| gateway_ip        | 2001:db8:2222:6977::1                           |</span>
<span class="go">| host_routes       |                                                 |</span>
<span class="go">| id                | ea139dcd-17a3-4f0a-8cca-dff8b4e03f8a            |</span>
<span class="go">| ip_version        | 6                                               |</span>
<span class="go">| ipv6_address_mode | slaac                                           |</span>
<span class="go">| ipv6_ra_mode      | slaac                                           |</span>
<span class="go">| name              | ipv6-pd-1                                       |</span>
<span class="go">| network_id        | 31ef3e85-111f-4772-8172-8e4a404a7476            |</span>
<span class="go">| subnetpool_id     | prefix_delegation                               |</span>
<span class="go">| tenant_id         | 28b39bcce66e4a648f82e2362b958b60                |</span>
<span class="go">+-------------------+-------------------------------------------------+</span>
</pre></div>
</div>
<p>If the prefix delegation server is configured to delegate globally routable
prefixes and setup routes, then any instance with a port on this subnet should
now have external network access.</p>
<p>Deleting the router interface causes the subnet to be reverted to the temporary
CIDR, and all ports have their IPs updated. Prefix leases are released and
renewed automatically as necessary.</p>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>The following link provides a great step by step tutorial on setting up IPv6
with OpenStack: <a class="reference external" href="http://www.debug-all.com/?p=52">http://www.debug-all.com/?p=52</a></p>
</div>
<div class="section" id="extra-configuration">
<span id="extra-driver-conf"></span><h3>Extra configuration<a class="headerlink" href="#extra-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="neutron-dhcpv6-pd-agent">
<h4>Neutron dhcpv6_pd_agent<a class="headerlink" href="#neutron-dhcpv6-pd-agent" title="Permalink to this headline">¶</a></h4>
<p>To enable the driver for the dhcpv6_pd_agent, set pd_dhcp_driver to this in
<code class="docutils literal"><span class="pre">/etc/neutron/neutron.conf</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">pd_dhcp_driver = neutron_pd_agent</span>
</pre></div>
</div>
<p>To allow the neutron-pd-agent to communicate with prefix delegation servers,
you must set which network interface to use for external communication. In
DevStack the default for this is <code class="docutils literal"><span class="pre">br-ex</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">pd_interface = br-ex</span>
</pre></div>
</div>
<p>Once you have stacked run the command below to start the neutron-pd-agent:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">neutron-pd-agent --config-file /etc/neutron/neutron.conf</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="config-ipam.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: IPAM configuration"></i></a>
          
          
            <a href="config-lbaas.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Load Balancer as a Service (LBaaS)"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 13:48</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="config.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config-ml2.html">ML2 plug-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-address-scopes.html">Address scopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-auto-allocation.html">Automatic allocation of network topologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-az.html">Availability zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-bgp-dynamic-routing.html">BGP dynamic routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dhcp-ha.html">High-availability for DHCP</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dns-int.html">DNS integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dns-res.html">Name resolution for instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-dvr-ha-snat.html">Distributed Virtual Routing with VRRP</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ipam.html">IPAM configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">IPv6</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-lbaas.html">Load Balancer as a Service (LBaaS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-macvtap.html">Macvtap mechanism driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-mtu.html">MTU considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ovs-dpdk.html">Open vSwitch with DPDK datapath</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-ovsfwdriver.html">Native Open vSwitch firewall driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-qos.html">Quality of Service (QoS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-rbac.html">Role-Based Access Control (RBAC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-routed-networks.html">Routed provider networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-sfc.html">Service function chaining</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-sriov.html">SR-IOV</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-subnet-pools.html">Subnet pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="config-service-subnets.html">Service subnets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deployment examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="ops.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "config-ipv6" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/networking-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: b8fd8c76e4ec1d07c2970cbd5770a38196b5b343";
        var bugProject = "openstack-manuals";
        var bugTitle = "IPv6 in Networking Guide";
    var fieldTags = "networking-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 13:48";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>