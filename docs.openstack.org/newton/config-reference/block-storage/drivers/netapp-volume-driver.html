<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: NetApp unified driver</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../../_static/css/combined.css" rel="stylesheet">
<link href="../../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>NetApp unified driver</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="lenovo-driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Lenovo Fibre Channel and iSCSI drivers"></i></a>
    
    
    <a href="nimble-volume-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Nimble Storage volume driver"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 13:49</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">NetApp unified driver</a><ul>
<li><a class="reference internal" href="#netapp-clustered-data-ontap-storage-family">NetApp clustered Data ONTAP storage family</a><ul>
<li><a class="reference internal" href="#netapp-iscsi-configuration-for-clustered-data-ontap">NetApp iSCSI configuration for clustered Data ONTAP</a></li>
<li><a class="reference internal" href="#netapp-nfs-configuration-for-clustered-data-ontap">NetApp NFS configuration for clustered Data ONTAP</a></li>
<li><a class="reference internal" href="#netapp-nfs-copy-offload-client">NetApp NFS Copy Offload client</a></li>
<li><a class="reference internal" href="#netapp-supported-extra-specs-for-clustered-data-ontap">NetApp-supported extra specs for clustered Data ONTAP</a></li>
</ul>
</li>
<li><a class="reference internal" href="#netapp-data-ontap-operating-in-7-mode-storage-family">NetApp Data ONTAP operating in 7-Mode storage family</a><ul>
<li><a class="reference internal" href="#netapp-iscsi-configuration-for-data-ontap-operating-in-7-mode">NetApp iSCSI configuration for Data ONTAP operating in 7-Mode</a></li>
<li><a class="reference internal" href="#netapp-nfs-configuration-for-data-ontap-operating-in-7-mode">NetApp NFS configuration for Data ONTAP operating in 7-Mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#netapp-e-series-storage-family">NetApp E-Series storage family</a><ul>
<li><a class="reference internal" href="#netapp-iscsi-configuration-for-e-series">NetApp iSCSI configuration for E-Series</a></li>
<li><a class="reference internal" href="#netapp-supported-extra-specs-for-e-series">NetApp-supported extra specs for E-Series</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-prior-netapp-drivers-to-the-netapp-unified-driver">Upgrading prior NetApp drivers to the NetApp unified driver</a><ul>
<li><a class="reference internal" href="#upgraded-netapp-drivers">Upgraded NetApp drivers</a></li>
<li><a class="reference internal" href="#deprecated-netapp-drivers">Deprecated NetApp drivers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="netapp-unified-driver">
<h1>NetApp unified driver<a class="headerlink" href="#netapp-unified-driver" title="Permalink to this headline">¶</a></h1>
<p>The NetApp unified driver is a Block Storage driver that supports
multiple storage families and protocols. A storage family corresponds to
storage systems built on different NetApp technologies such as clustered
Data ONTAP, Data ONTAP operating in 7-Mode, and E-Series. The storage
protocol refers to the protocol used to initiate data storage and access
operations on those storage systems like iSCSI and NFS. The NetApp
unified driver can be configured to provision and manage OpenStack
volumes on a given storage family using a specified storage protocol.
Also, the NetApp unified driver supports over subscription or over
provisioning when thin provisioned Block Storage volumes are in use
on an E-Series backend. The OpenStack volumes can then be used for
accessing and storing data using the storage protocol on the storage
family system. The NetApp unified driver is an extensible interface
that can support new storage families and protocols.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>With the Juno release of OpenStack, Block Storage has
introduced the concept of storage pools, in which a single
Block Storage back end may present one or more logical
storage resource pools from which Block Storage will
select a storage location when provisioning volumes.</p>
<p>In releases prior to Juno, the NetApp unified driver contained some
scheduling logic that determined which NetApp storage container
(namely, a FlexVol volume for Data ONTAP, or a dynamic disk pool for
E-Series) that a new Block Storage volume would be placed into.</p>
<p class="last">With the introduction of pools, all scheduling logic is performed
completely within the Block Storage scheduler, as each
NetApp storage container is directly exposed to the Block
Storage scheduler as a storage pool. Previously, the NetApp
unified driver presented an aggregated view to the scheduler and
made a final placement decision as to which NetApp storage container
the Block Storage volume would be provisioned into.</p>
</div>
<div class="section" id="netapp-clustered-data-ontap-storage-family">
<h2>NetApp clustered Data ONTAP storage family<a class="headerlink" href="#netapp-clustered-data-ontap-storage-family" title="Permalink to this headline">¶</a></h2>
<p>The NetApp clustered Data ONTAP storage family represents a
configuration group which provides Compute instances access to
clustered Data ONTAP storage systems. At present it can be configured in
Block Storage to work with iSCSI and NFS storage protocols.</p>
<div class="section" id="netapp-iscsi-configuration-for-clustered-data-ontap">
<h3>NetApp iSCSI configuration for clustered Data ONTAP<a class="headerlink" href="#netapp-iscsi-configuration-for-clustered-data-ontap" title="Permalink to this headline">¶</a></h3>
<p>The NetApp iSCSI configuration for clustered Data ONTAP is an interface
from OpenStack to clustered Data ONTAP storage systems. It provisions
and manages the SAN block storage entity, which is a NetApp LUN that
can be accessed using the iSCSI protocol.</p>
<p>The iSCSI configuration for clustered Data ONTAP is a direct interface
from Block Storage to the clustered Data ONTAP instance and as
such does not require additional management software to achieve the
desired functionality. It uses NetApp APIs to interact with the
clustered Data ONTAP instance.</p>
<p><strong>Configuration options</strong></p>
<p>Configure the volume driver, storage family, and storage protocol to the
NetApp unified driver, clustered Data ONTAP, and iSCSI respectively by
setting the <code class="docutils literal"><span class="pre">volume_driver</span></code>, <code class="docutils literal"><span class="pre">netapp_storage_family</span></code> and
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> options in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_cluster</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">iscsi</span>
<span class="na">netapp_vserver</span> <span class="o">=</span> <span class="s">openstack-vserver</span>
<span class="na">netapp_server_hostname</span> <span class="o">=</span> <span class="s">myhostname</span>
<span class="na">netapp_server_port</span> <span class="o">=</span> <span class="s">port</span>
<span class="na">netapp_login</span> <span class="o">=</span> <span class="s">username</span>
<span class="na">netapp_password</span> <span class="o">=</span> <span class="s">password</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To use the iSCSI protocol, you must override the default value of
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> with <code class="docutils literal"><span class="pre">iscsi</span></code>.</p>
</div>
<table border="1" class="config-ref-table docutils" id="id5">
<span id="cinder-netapp-cdot-iscsi"></span><caption><span class="caption-text">Description of NetApp cDOT iSCSI driver configuration options</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_login</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Administrative user account name used to access the storage system or proxy server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_lun_ostype</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option defines the type of operating system that will access a LUN exported from Data ONTAP; it is assigned to the LUN at the time it is created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_lun_space_reservation</span></code> = <code class="docutils literal"><span class="pre">enabled</span></code></td>
<td>(String) This option determines if storage space is reserved for LUN allocation. If enabled, LUNs are thick provisioned. If space reservation is disabled, storage space is allocated on demand.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_partner_backend_name</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the administrative user account specified in the netapp_login option.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_pool_name_search_pattern</span></code> = <code class="docutils literal"><span class="pre">(.+)</span></code></td>
<td>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_replication_aggregate_map</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,...</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_server_hostname</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The hostname (or IP address) for the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_server_port</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_size_multiplier</span></code> = <code class="docutils literal"><span class="pre">1.2</span></code></td>
<td>(Floating point) The quantity to be multiplied by the requested volume size to ensure enough space is available on the virtual storage server (Vserver) to fulfill the volume creation request. Note: this option is deprecated and will be removed in favor of &#8220;reserved_percentage&#8221; in the Mitaka release.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_snapmirror_quiesce_timeout</span></code> = <code class="docutils literal"><span class="pre">3600</span></code></td>
<td>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_storage_family</span></code> = <code class="docutils literal"><span class="pre">ontap_cluster</span></code></td>
<td>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The storage protocol to be used on the data path with the storage system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_transport_type</span></code> = <code class="docutils literal"><span class="pre">http</span></code></td>
<td>(String) The transport protocol used when communicating with the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_vserver</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option specifies the virtual storage server (Vserver) name on the storage cluster on which provisioning of block storage volumes should occur.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you specify an account in the <code class="docutils literal"><span class="pre">netapp_login</span></code> that only has
virtual storage server (Vserver) administration privileges (rather
than cluster-wide administration privileges), some advanced features
of the NetApp unified driver will not work and you may see warnings
in the Block Storage logs.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The driver supports iSCSI CHAP uni-directional authentication.
To enable it, set the <code class="docutils literal"><span class="pre">use_chap_auth</span></code> option to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information on these options and other deployment and
operational scenarios, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
Operations
Guide</a>.</p>
</div>
</div>
<div class="section" id="netapp-nfs-configuration-for-clustered-data-ontap">
<h3>NetApp NFS configuration for clustered Data ONTAP<a class="headerlink" href="#netapp-nfs-configuration-for-clustered-data-ontap" title="Permalink to this headline">¶</a></h3>
<p>The NetApp NFS configuration for clustered Data ONTAP is an interface from
OpenStack to a clustered Data ONTAP system for provisioning and managing
OpenStack volumes on NFS exports provided by the clustered Data ONTAP system
that are accessed using the NFS protocol.</p>
<p>The NFS configuration for clustered Data ONTAP is a direct interface from
Block Storage to the clustered Data ONTAP instance and as such does
not require any additional management software to achieve the desired
functionality. It uses NetApp APIs to interact with the clustered Data ONTAP
instance.</p>
<p><strong>Configuration options</strong></p>
<p>Configure the volume driver, storage family, and storage protocol to NetApp
unified driver, clustered Data ONTAP, and NFS respectively by setting the
<code class="docutils literal"><span class="pre">volume_driver</span></code>, <code class="docutils literal"><span class="pre">netapp_storage_family</span></code>, and <code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code>
options in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_cluster</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">nfs</span>
<span class="na">netapp_vserver</span> <span class="o">=</span> <span class="s">openstack-vserver</span>
<span class="na">netapp_server_hostname</span> <span class="o">=</span> <span class="s">myhostname</span>
<span class="na">netapp_server_port</span> <span class="o">=</span> <span class="s">port</span>
<span class="na">netapp_login</span> <span class="o">=</span> <span class="s">username</span>
<span class="na">netapp_password</span> <span class="o">=</span> <span class="s">password</span>
<span class="na">nfs_shares_config</span> <span class="o">=</span> <span class="s">/etc/cinder/nfs_shares</span>
</pre></div>
</div>
<table border="1" class="config-ref-table docutils" id="id6">
<span id="cinder-netapp-cdot-nfs"></span><caption><span class="caption-text">Description of NetApp cDOT NFS driver configuration options</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">expiry_thres_minutes</span></code> = <code class="docutils literal"><span class="pre">720</span></code></td>
<td>(Integer) This option specifies the threshold for last access time for images in the NFS image cache. When a cache cleaning cycle begins, images in the cache that have not been accessed in the last M minutes, where M is the value of this parameter, will be deleted from the cache to create free space on the NFS share.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_copyoffload_tool_path</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option specifies the path of the NetApp copy offload tool binary. Ensure that the binary has execute permissions set which allow the effective user of the cinder-volume process to execute the file.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_host_type</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_host_type</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_login</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Administrative user account name used to access the storage system or proxy server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_lun_ostype</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option defines the type of operating system that will access a LUN exported from Data ONTAP; it is assigned to the LUN at the time it is created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_partner_backend_name</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the administrative user account specified in the netapp_login option.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_pool_name_search_pattern</span></code> = <code class="docutils literal"><span class="pre">(.+)</span></code></td>
<td>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_replication_aggregate_map</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,...</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_server_hostname</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The hostname (or IP address) for the storage system or proxy server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_server_port</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_snapmirror_quiesce_timeout</span></code> = <code class="docutils literal"><span class="pre">3600</span></code></td>
<td>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_storage_family</span></code> = <code class="docutils literal"><span class="pre">ontap_cluster</span></code></td>
<td>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The storage protocol to be used on the data path with the storage system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_transport_type</span></code> = <code class="docutils literal"><span class="pre">http</span></code></td>
<td>(String) The transport protocol used when communicating with the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_vserver</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option specifies the virtual storage server (Vserver) name on the storage cluster on which provisioning of block storage volumes should occur.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">thres_avl_size_perc_start</span></code> = <code class="docutils literal"><span class="pre">20</span></code></td>
<td>(Integer) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">thres_avl_size_perc_stop</span></code> = <code class="docutils literal"><span class="pre">60</span></code></td>
<td>(Integer) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache that have not been accessed in the last M minutes, where M is the value of the expiry_thres_minutes configuration option.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Additional NetApp NFS configuration options are shared with the
generic NFS driver. These options can be found here:
<a class="reference internal" href="nfs-volume-driver.html#cinder-storage-nfs"><span>Description of NFS storage configuration options</span></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you specify an account in the <code class="docutils literal"><span class="pre">netapp_login</span></code> that only has
virtual storage server (Vserver) administration privileges (rather
than cluster-wide administration privileges), some advanced features
of the NetApp unified driver will not work and you may see warnings
in the Block Storage logs.</p>
</div>
</div>
<div class="section" id="netapp-nfs-copy-offload-client">
<h3>NetApp NFS Copy Offload client<a class="headerlink" href="#netapp-nfs-copy-offload-client" title="Permalink to this headline">¶</a></h3>
<p>A feature was added in the Icehouse release of the NetApp unified driver that
enables Image service images to be efficiently copied to a destination Block
Storage volume. When the Block Storage and Image service are configured to use
the NetApp NFS Copy Offload client, a controller-side copy will be attempted
before reverting to downloading the image from the Image service. This improves
image provisioning times while reducing the consumption of bandwidth and CPU
cycles on the host(s) running the Image and Block Storage services. This is due
to the copy operation being performed completely within the storage cluster.</p>
<p>The NetApp NFS Copy Offload client can be used in either of the following
scenarios:</p>
<ul class="simple">
<li>The Image service is configured to store images in an NFS share that is
exported from a NetApp FlexVol volume <em>and</em> the destination for the new Block
Storage volume will be on an NFS share exported from a different FlexVol
volume than the one used by the Image service. Both FlexVols must be located
within the same cluster.</li>
<li>The source image from the Image service has already been cached in an NFS
image cache within a Block Storage back end. The cached image resides on a
different FlexVol volume than the destination for the new Block Storage
volume. Both FlexVols must be located within the same cluster.</li>
</ul>
<p>To use this feature, you must configure the Image service, as follows:</p>
<ul class="simple">
<li>Set the <code class="docutils literal"><span class="pre">default_store</span></code> configuration option to <code class="docutils literal"><span class="pre">file</span></code>.</li>
<li>Set the <code class="docutils literal"><span class="pre">filesystem_store_datadir</span></code> configuration option to the path
to the Image service NFS export.</li>
<li>Set the <code class="docutils literal"><span class="pre">show_image_direct_url</span></code> configuration option to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li>Set the <code class="docutils literal"><span class="pre">show_multiple_locations</span></code> configuration option to <code class="docutils literal"><span class="pre">True</span></code>.</li>
<li>Set the <code class="docutils literal"><span class="pre">filesystem_store_metadata_file</span></code> configuration option to a metadata
file. The metadata file should contain a JSON object that contains the
correct information about the NFS export used by the Image service.</li>
</ul>
<p>To use this feature, you must configure the Block Storage service, as follows:</p>
<ul>
<li><p class="first">Set the <code class="docutils literal"><span class="pre">netapp_copyoffload_tool_path</span></code> configuration option to the path to
the NetApp Copy Offload binary.</p>
</li>
<li><p class="first">Set the <code class="docutils literal"><span class="pre">glance_api_version</span></code> configuration option to <code class="docutils literal"><span class="pre">2</span></code>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>This feature requires that:</p>
<ul class="last simple">
<li>The storage system must have Data ONTAP v8.2 or greater installed.</li>
<li>The vStorage feature must be enabled on each storage virtual machine
(SVM, also known as a Vserver) that is permitted to interact with the
copy offload client.</li>
<li>To configure the copy offload workflow, enable NFS v4.0 or greater and
export it from the SVM.</li>
</ul>
</div>
</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To download the NetApp copy offload binary to be utilized in conjunction
with the <code class="docutils literal"><span class="pre">netapp_copyoffload_tool_path</span></code> configuration option, please visit
the Utility Toolchest page at the <a class="reference external" href="http://mysupport.netapp.com/NOW/download/tools/ntap_openstack_nfs/">NetApp Support portal</a>
(login is required).</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information on these options and other deployment and operational
scenarios, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and Operations Guide</a>.</p>
</div>
</div>
<div class="section" id="netapp-supported-extra-specs-for-clustered-data-ontap">
<h3>NetApp-supported extra specs for clustered Data ONTAP<a class="headerlink" href="#netapp-supported-extra-specs-for-clustered-data-ontap" title="Permalink to this headline">¶</a></h3>
<p>Extra specs enable vendors to specify extra filter criteria.
The Block Storage scheduler uses the specs when the scheduler determines
which volume node should fulfill a volume provisioning request.
When you use the NetApp unified driver with a clustered Data ONTAP
storage system, you can leverage extra specs with Block Storage
volume types to ensure that Block Storage volumes are created
on storage back ends that have certain properties.
An example of this is when you configure QoS, mirroring,
or compression for a storage back end.</p>
<p>Extra specs are associated with Block Storage volume types.
When users request volumes of a particular volume type, the volumes
are created on storage back ends that meet the list of requirements.
An example of this is the back ends that have the available space or
extra specs. Use the specs in the following table to configure volumes.
Define Block Storage volume types by using the <strong class="command">cinder type-key</strong>
command.</p>
<table border="1" class="docutils" id="id7">
<caption><span class="caption-text">Description of extra specs options for NetApp Unified Driver with Clustered Data ONTAP</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Extra spec</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_raid_type</span></code></td>
<td>String</td>
<td>Limit the candidate volume list based on one of the following raid
types: <code class="docutils literal"><span class="pre">raid4,</span> <span class="pre">raid_dp</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_disk_type</span></code></td>
<td>String</td>
<td>Limit the candidate volume list based on one of the following disk
types: <code class="docutils literal"><span class="pre">ATA,</span> <span class="pre">BSAS,</span> <span class="pre">EATA,</span> <span class="pre">FCAL,</span> <span class="pre">FSAS,</span> <span class="pre">LUN,</span> <span class="pre">MSATA,</span> <span class="pre">SAS,</span> <span class="pre">SATA,</span> <span class="pre">SCSI,</span> <span class="pre">XATA,</span>
<span class="pre">XSAS,</span> <span class="pre">or</span> <span class="pre">SSD.</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp:qos_policy_group</span></code> <a class="footnote-reference" href="#id3" id="id1">[1]</a></td>
<td>String</td>
<td>Specify the name of a QoS policy group, which defines measurable Service
Level Objectives, that should be applied to the OpenStack Block Storage
volume at the time of volume creation. Ensure that the QoS policy group
object within Data ONTAP should be defined before an OpenStack Block
Storage volume is created, and that the QoS policy group is not
associated with the destination FlexVol volume.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_mirrored</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that are mirrored on
the storage controller.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_unmirrored</span></code> <a class="footnote-reference" href="#id4" id="id2">[2]</a></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that are not mirrored
on the storage controller.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_dedup</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that have deduplication
enabled on the storage controller.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_nodedup</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that have deduplication
disabled on the storage controller.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_compression</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that have compression
enabled on the storage controller.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_nocompression</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that have compression
disabled on the storage controller.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_thin_provisioned</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that support thin
provisioning on the storage controller.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_thick_provisioned</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that support thick
provisioning on the storage controller.</td>
</tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Please note that this extra spec has a colon (<code class="docutils literal"><span class="pre">:</span></code>) in its name
because it is used by the driver to assign the QoS policy group to
the OpenStack Block Storage volume after it has been provisioned.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>In the Juno release, these negative-assertion extra specs are
formally deprecated by the NetApp unified driver. Instead of using
the deprecated negative-assertion extra specs (for example,
<code class="docutils literal"><span class="pre">netapp_unmirrored</span></code>) with a value of <code class="docutils literal"><span class="pre">true</span></code>, use the
corresponding positive-assertion extra spec (for example,
<code class="docutils literal"><span class="pre">netapp_mirrored</span></code>) with a value of <code class="docutils literal"><span class="pre">false</span></code>.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="netapp-data-ontap-operating-in-7-mode-storage-family">
<h2>NetApp Data ONTAP operating in 7-Mode storage family<a class="headerlink" href="#netapp-data-ontap-operating-in-7-mode-storage-family" title="Permalink to this headline">¶</a></h2>
<p>The NetApp Data ONTAP operating in 7-Mode storage family represents a
configuration group which provides Compute instances access to 7-Mode
storage systems. At present it can be configured in Block Storage to
work with iSCSI and NFS storage protocols.</p>
<div class="section" id="netapp-iscsi-configuration-for-data-ontap-operating-in-7-mode">
<h3>NetApp iSCSI configuration for Data ONTAP operating in 7-Mode<a class="headerlink" href="#netapp-iscsi-configuration-for-data-ontap-operating-in-7-mode" title="Permalink to this headline">¶</a></h3>
<p>The NetApp iSCSI configuration for Data ONTAP operating in 7-Mode is an
interface from OpenStack to Data ONTAP operating in 7-Mode storage systems for
provisioning and managing the SAN block storage entity, that is, a LUN which
can be accessed using iSCSI protocol.</p>
<p>The iSCSI configuration for Data ONTAP operating in 7-Mode is a direct
interface from OpenStack to Data ONTAP operating in 7-Mode storage system and
it does not require additional management software to achieve the desired
functionality. It uses NetApp ONTAPI to interact with the Data ONTAP operating
in 7-Mode storage system.</p>
<p><strong>Configuration options</strong></p>
<p>Configure the volume driver, storage family and storage protocol to the NetApp
unified driver, Data ONTAP operating in 7-Mode, and iSCSI respectively by
setting the <code class="docutils literal"><span class="pre">volume_driver</span></code>, <code class="docutils literal"><span class="pre">netapp_storage_family</span></code> and
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> options in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_7mode</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">iscsi</span>
<span class="na">netapp_server_hostname</span> <span class="o">=</span> <span class="s">myhostname</span>
<span class="na">netapp_server_port</span> <span class="o">=</span> <span class="s">80</span>
<span class="na">netapp_login</span> <span class="o">=</span> <span class="s">username</span>
<span class="na">netapp_password</span> <span class="o">=</span> <span class="s">password</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To use the iSCSI protocol, you must override the default value of
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> with <code class="docutils literal"><span class="pre">iscsi</span></code>.</p>
</div>
<table border="1" class="config-ref-table docutils" id="id8">
<span id="cinder-netapp-7mode-iscsi"></span><caption><span class="caption-text">Description of NetApp 7-Mode iSCSI driver configuration options</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_login</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Administrative user account name used to access the storage system or proxy server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_partner_backend_name</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the administrative user account specified in the netapp_login option.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_pool_name_search_pattern</span></code> = <code class="docutils literal"><span class="pre">(.+)</span></code></td>
<td>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_replication_aggregate_map</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,...</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_server_hostname</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The hostname (or IP address) for the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_server_port</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_size_multiplier</span></code> = <code class="docutils literal"><span class="pre">1.2</span></code></td>
<td>(Floating point) The quantity to be multiplied by the requested volume size to ensure enough space is available on the virtual storage server (Vserver) to fulfill the volume creation request. Note: this option is deprecated and will be removed in favor of &#8220;reserved_percentage&#8221; in the Mitaka release.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_snapmirror_quiesce_timeout</span></code> = <code class="docutils literal"><span class="pre">3600</span></code></td>
<td>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_storage_family</span></code> = <code class="docutils literal"><span class="pre">ontap_cluster</span></code></td>
<td>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The storage protocol to be used on the data path with the storage system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_transport_type</span></code> = <code class="docutils literal"><span class="pre">http</span></code></td>
<td>(String) The transport protocol used when communicating with the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_vfiler</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The vFiler unit on which provisioning of block storage volumes will be done. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode. Only use this option when utilizing the MultiStore feature on the NetApp storage system.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The driver supports iSCSI CHAP uni-directional authentication.
To enable it, set the <code class="docutils literal"><span class="pre">use_chap_auth</span></code> option to <code class="docutils literal"><span class="pre">True</span></code>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information on these options and other deployment and
operational scenarios, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
Operations
Guide</a>.</p>
</div>
</div>
<div class="section" id="netapp-nfs-configuration-for-data-ontap-operating-in-7-mode">
<h3>NetApp NFS configuration for Data ONTAP operating in 7-Mode<a class="headerlink" href="#netapp-nfs-configuration-for-data-ontap-operating-in-7-mode" title="Permalink to this headline">¶</a></h3>
<p>The NetApp NFS configuration for Data ONTAP operating in 7-Mode is an interface
from OpenStack to Data ONTAP operating in 7-Mode storage system for
provisioning and managing OpenStack volumes on NFS exports provided by the Data
ONTAP operating in 7-Mode storage system which can then be accessed using NFS
protocol.</p>
<p>The NFS configuration for Data ONTAP operating in 7-Mode is a direct interface
from Block Storage to the Data ONTAP operating in 7-Mode instance and
as such does not require any additional management software to achieve the
desired functionality. It uses NetApp ONTAPI to interact with the Data ONTAP
operating in 7-Mode storage system.</p>
<p><strong>Configuration options</strong></p>
<p>Configure the volume driver, storage family, and storage protocol to the NetApp
unified driver, Data ONTAP operating in 7-Mode, and NFS respectively by setting
the <code class="docutils literal"><span class="pre">volume_driver</span></code>, <code class="docutils literal"><span class="pre">netapp_storage_family</span></code> and
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> options in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_7mode</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">nfs</span>
<span class="na">netapp_server_hostname</span> <span class="o">=</span> <span class="s">myhostname</span>
<span class="na">netapp_server_port</span> <span class="o">=</span> <span class="s">80</span>
<span class="na">netapp_login</span> <span class="o">=</span> <span class="s">username</span>
<span class="na">netapp_password</span> <span class="o">=</span> <span class="s">password</span>
<span class="na">nfs_shares_config</span> <span class="o">=</span> <span class="s">/etc/cinder/nfs_shares</span>
</pre></div>
</div>
<table border="1" class="config-ref-table docutils" id="id9">
<span id="cinder-netapp-7mode-nfs"></span><caption><span class="caption-text">Description of NetApp 7-Mode NFS driver configuration options</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">expiry_thres_minutes</span></code> = <code class="docutils literal"><span class="pre">720</span></code></td>
<td>(Integer) This option specifies the threshold for last access time for images in the NFS image cache. When a cache cleaning cycle begins, images in the cache that have not been accessed in the last M minutes, where M is the value of this parameter, will be deleted from the cache to create free space on the NFS share.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_login</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Administrative user account name used to access the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_partner_backend_name</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the administrative user account specified in the netapp_login option.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_pool_name_search_pattern</span></code> = <code class="docutils literal"><span class="pre">(.+)</span></code></td>
<td>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_replication_aggregate_map</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,...</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_server_hostname</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The hostname (or IP address) for the storage system or proxy server.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_server_port</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_snapmirror_quiesce_timeout</span></code> = <code class="docutils literal"><span class="pre">3600</span></code></td>
<td>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_storage_family</span></code> = <code class="docutils literal"><span class="pre">ontap_cluster</span></code></td>
<td>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The storage protocol to be used on the data path with the storage system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_transport_type</span></code> = <code class="docutils literal"><span class="pre">http</span></code></td>
<td>(String) The transport protocol used when communicating with the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_vfiler</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The vFiler unit on which provisioning of block storage volumes will be done. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode. Only use this option when utilizing the MultiStore feature on the NetApp storage system.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">thres_avl_size_perc_start</span></code> = <code class="docutils literal"><span class="pre">20</span></code></td>
<td>(Integer) If the percentage of available space for an NFS share has dropped below the value specified by this option, the NFS image cache will be cleaned.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">thres_avl_size_perc_stop</span></code> = <code class="docutils literal"><span class="pre">60</span></code></td>
<td>(Integer) When the percentage of available space on an NFS share has reached the percentage specified by this option, the driver will stop clearing files from the NFS image cache that have not been accessed in the last M minutes, where M is the value of the expiry_thres_minutes configuration option.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Additional NetApp NFS configuration options are shared with the
generic NFS driver. For a description of these, see
<a class="reference internal" href="nfs-volume-driver.html#cinder-storage-nfs"><span>Description of NFS storage configuration options</span></a>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information on these options and other deployment and
operational scenarios, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
Operations
Guide</a>.</p>
</div>
</div>
</div>
<div class="section" id="netapp-e-series-storage-family">
<h2>NetApp E-Series storage family<a class="headerlink" href="#netapp-e-series-storage-family" title="Permalink to this headline">¶</a></h2>
<p>The NetApp E-Series storage family represents a configuration group which
provides OpenStack compute instances access to E-Series storage systems. At
present it can be configured in Block Storage to work with the iSCSI
storage protocol.</p>
<div class="section" id="netapp-iscsi-configuration-for-e-series">
<h3>NetApp iSCSI configuration for E-Series<a class="headerlink" href="#netapp-iscsi-configuration-for-e-series" title="Permalink to this headline">¶</a></h3>
<p>The NetApp iSCSI configuration for E-Series is an interface from OpenStack to
E-Series storage systems. It provisions and manages the SAN block storage
entity, which is a NetApp LUN which can be accessed using the iSCSI protocol.</p>
<p>The iSCSI configuration for E-Series is an interface from Block
Storage to the E-Series proxy instance and as such requires the deployment of
the proxy instance in order to achieve the desired functionality. The driver
uses REST APIs to interact with the E-Series proxy instance, which in turn
interacts directly with the E-Series controllers.</p>
<p>The use of multipath and DM-MP are required when using the Block
Storage driver for E-Series. In order for Block Storage and OpenStack
Compute to take advantage of multiple paths, the following configuration
options must be correctly configured:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">use_multipath_for_image_xfer</span></code> option should be set to <code class="docutils literal"><span class="pre">True</span></code> in the
<code class="docutils literal"><span class="pre">cinder.conf</span></code> file within the driver-specific stanza (for example,
<code class="docutils literal"><span class="pre">[myDriver]</span></code>).</li>
<li>The <code class="docutils literal"><span class="pre">iscsi_use_multipath</span></code> option should be set to <code class="docutils literal"><span class="pre">True</span></code> in the
<code class="docutils literal"><span class="pre">nova.conf</span></code> file within the <code class="docutils literal"><span class="pre">[libvirt]</span></code> stanza.</li>
</ul>
<p><strong>Configuration options</strong></p>
<p>Configure the volume driver, storage family, and storage protocol to the
NetApp unified driver, E-Series, and iSCSI respectively by setting the
<code class="docutils literal"><span class="pre">volume_driver</span></code>, <code class="docutils literal"><span class="pre">netapp_storage_family</span></code> and
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> options in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">eseries</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">iscsi</span>
<span class="na">netapp_server_hostname</span> <span class="o">=</span> <span class="s">myhostname</span>
<span class="na">netapp_server_port</span> <span class="o">=</span> <span class="s">80</span>
<span class="na">netapp_login</span> <span class="o">=</span> <span class="s">username</span>
<span class="na">netapp_password</span> <span class="o">=</span> <span class="s">password</span>
<span class="na">netapp_controller_ips</span> <span class="o">=</span> <span class="s">1.2.3.4,5.6.7.8</span>
<span class="na">netapp_sa_password</span> <span class="o">=</span> <span class="s">arrayPassword</span>
<span class="na">netapp_storage_pools</span> <span class="o">=</span> <span class="s">pool1,pool2</span>
<span class="na">use_multipath_for_image_xfer</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To use the E-Series driver, you must override the default value of
<code class="docutils literal"><span class="pre">netapp_storage_family</span></code> with <code class="docutils literal"><span class="pre">eseries</span></code>.</p>
<p class="last">To use the iSCSI protocol, you must override the default value of
<code class="docutils literal"><span class="pre">netapp_storage_protocol</span></code> with <code class="docutils literal"><span class="pre">iscsi</span></code>.</p>
</div>
<table border="1" class="config-ref-table docutils" id="id10">
<span id="cinder-netapp-eseries-iscsi"></span><caption><span class="caption-text">Description of NetApp E-Series driver configuration options</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_controller_ips</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option is only utilized when the storage family is configured to eseries. This option is used to restrict provisioning to the specified controllers. Specify the value of this option to be a comma separated list of controller hostnames or IP addresses to be used for provisioning.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_enable_multiattach</span></code> = <code class="docutils literal"><span class="pre">False</span></code></td>
<td>(Boolean) This option specifies whether the driver should allow operations that require multiple attachments to a volume. An example would be live migration of servers that have volumes attached. When enabled, this backend is limited to 256 total volumes in order to guarantee volumes can be accessed by more than one host.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_host_type</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) This option defines the type of operating system for all initiators that can access a LUN. This information is used when mapping LUNs to individual hosts or groups of hosts.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_login</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Administrative user account name used to access the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_partner_backend_name</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The name of the config.conf stanza for a Data ONTAP (7-mode) HA partner. This option is only used by the driver when connecting to an instance with a storage family of Data ONTAP operating in 7-Mode, and it is required if the storage protocol selected is FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the administrative user account specified in the netapp_login option.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_pool_name_search_pattern</span></code> = <code class="docutils literal"><span class="pre">(.+)</span></code></td>
<td>(String) This option is used to restrict provisioning to the specified pools. Specify the value of this option to be a regular expression which will be applied to the names of objects from the storage backend which represent pools in Cinder. This option is only utilized when the storage protocol is configured to use iSCSI or FC.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_replication_aggregate_map</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Unknown) Multi opt of dictionaries to represent the aggregate mapping between source and destination back ends when using whole back end replication. For every source aggregate associated with a cinder pool (NetApp FlexVol), you would need to specify the destination aggregate on the replication target device. A replication target device is configured with the configuration option replication_device. Specify this option as many times as you have replication devices. Each entry takes the standard dict config form: netapp_replication_aggregate_map = backend_id:&lt;name_of_replication_device_section&gt;,src_aggr_name1:dest_aggr_name1,src_aggr_name2:dest_aggr_name2,...</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_sa_password</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) Password for the NetApp E-Series storage array.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_server_hostname</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(String) The hostname (or IP address) for the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_server_port</span></code> = <code class="docutils literal"><span class="pre">None</span></code></td>
<td>(Integer) The TCP port to use for communication with the storage system or proxy server. If not specified, Data ONTAP drivers will use 80 for HTTP and 443 for HTTPS; E-Series will use 8080 for HTTP and 8443 for HTTPS.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_snapmirror_quiesce_timeout</span></code> = <code class="docutils literal"><span class="pre">3600</span></code></td>
<td>(Integer) The maximum time in seconds to wait for existing SnapMirror transfers to complete before aborting during a failover.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_storage_family</span></code> = <code class="docutils literal"><span class="pre">ontap_cluster</span></code></td>
<td>(String) The storage family type used on the storage system; valid values are ontap_7mode for using Data ONTAP operating in 7-Mode, ontap_cluster for using clustered Data ONTAP, or eseries for using E-Series.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_transport_type</span></code> = <code class="docutils literal"><span class="pre">http</span></code></td>
<td>(String) The transport protocol used when communicating with the storage system or proxy server.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">netapp_webservice_path</span></code> = <code class="docutils literal"><span class="pre">/devmgr/v2</span></code></td>
<td>(String) This option is used to specify the path to the E-Series proxy application on a proxy server. The value is combined with the value of the netapp_transport_type, netapp_server_hostname, and netapp_server_port options to create the URL used by the driver to connect to the proxy application.</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information on these options and other deployment and
operational scenarios, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and
Operations
Guide</a>.</p>
</div>
</div>
<div class="section" id="netapp-supported-extra-specs-for-e-series">
<h3>NetApp-supported extra specs for E-Series<a class="headerlink" href="#netapp-supported-extra-specs-for-e-series" title="Permalink to this headline">¶</a></h3>
<p>Extra specs enable vendors to specify extra filter criteria.
The Block Storage scheduler uses the specs when the scheduler determines
which volume node should fulfill a volume provisioning request.
When you use the NetApp unified driver with an E-Series storage system,
you can leverage extra specs with Block Storage volume types to ensure
that Block Storage volumes are created on storage back ends that have
certain properties. An example of this is when you configure thin
provisioning for a storage back end.</p>
<p>Extra specs are associated with Block Storage volume types.
When users request volumes of a particular volume type, the volumes are
created on storage back ends that meet the list of requirements.
An example of this is the back ends that have the available space or
extra specs. Use the specs in the following table to configure volumes.
Define Block Storage volume types by using the <strong class="command">cinder type-key</strong>
command.</p>
<table border="1" class="docutils" id="id11">
<caption><span class="caption-text">Description of extra specs options for NetApp Unified Driver with E-Series</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Extra spec</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">netapp_thin_provisioned</span></code></td>
<td>Boolean</td>
<td>Limit the candidate volume list to only the ones that support thin
provisioning on the storage controller.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="upgrading-prior-netapp-drivers-to-the-netapp-unified-driver">
<h2>Upgrading prior NetApp drivers to the NetApp unified driver<a class="headerlink" href="#upgrading-prior-netapp-drivers-to-the-netapp-unified-driver" title="Permalink to this headline">¶</a></h2>
<p>NetApp introduced a new unified block storage driver in Havana for configuring
different storage families and storage protocols. This requires defining an
upgrade path for NetApp drivers which existed in releases prior to Havana. This
section covers the upgrade configuration for NetApp drivers to the new unified
configuration and a list of deprecated NetApp drivers.</p>
<div class="section" id="upgraded-netapp-drivers">
<h3>Upgraded NetApp drivers<a class="headerlink" href="#upgraded-netapp-drivers" title="Permalink to this headline">¶</a></h3>
<p>This section describes how to update Block Storage configuration from
a pre-Havana release to the unified driver format.</p>
<ul>
<li><p class="first">NetApp iSCSI direct driver for Clustered Data ONTAP in Grizzly (or earlier):</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.iscsi.NetAppDirectCmodeISCSIDriver</span>
</pre></div>
</div>
<p>NetApp unified driver configuration:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_cluster</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">iscsi</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp NFS direct driver for Clustered Data ONTAP in Grizzly (or
earlier):</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.nfs.NetAppDirectCmodeNfsDriver</span>
</pre></div>
</div>
<p>NetApp unified driver configuration:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_cluster</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">nfs</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp iSCSI direct driver for Data ONTAP operating in 7-Mode storage
controller in Grizzly (or earlier):</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.iscsi.NetAppDirect7modeISCSIDriver</span>
</pre></div>
</div>
<p>NetApp unified driver configuration:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_7mode</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">iscsi</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp NFS direct driver for Data ONTAP operating in 7-Mode storage
controller in Grizzly (or earlier):</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.nfs.NetAppDirect7modeNfsDriver</span>
</pre></div>
</div>
<p>NetApp unified driver configuration:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.common.NetAppDriver</span>
<span class="na">netapp_storage_family</span> <span class="o">=</span> <span class="s">ontap_7mode</span>
<span class="na">netapp_storage_protocol</span> <span class="o">=</span> <span class="s">nfs</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="deprecated-netapp-drivers">
<h3>Deprecated NetApp drivers<a class="headerlink" href="#deprecated-netapp-drivers" title="Permalink to this headline">¶</a></h3>
<p>This section lists the NetApp drivers in earlier releases that are
deprecated in Havana.</p>
<ul>
<li><p class="first">NetApp iSCSI driver for clustered Data ONTAP:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.iscsi.NetAppCmodeISCSIDriver</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp NFS driver for clustered Data ONTAP:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.nfs.NetAppCmodeNfsDriver</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp iSCSI driver for Data ONTAP operating in 7-Mode storage
controller:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.iscsi.NetAppISCSIDriver</span>
</pre></div>
</div>
</li>
<li><p class="first">NetApp NFS driver for Data ONTAP operating in 7-Mode storage
controller:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.netapp.nfs.NetAppNFSDriver</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For support information on deprecated NetApp drivers in the Havana
release, visit the <a class="reference external" href="http://netapp.github.io/openstack-deploy-ops-guide/">NetApp OpenStack Deployment and Operations
Guide</a>.</p>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="lenovo-driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Lenovo Fibre Channel and iSCSI drivers"></i></a>
          
          
            <a href="nimble-volume-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Nimble Storage volume driver"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 13:49</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../config-overview.html">OpenStack configuration overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common-configurations.html">Common configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application-catalog.html">Application Catalog service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bare-metal.html">Bare Metal service</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../block-storage.html">Block Storage service</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../block-storage-overview.html">Introduction to the Block Storage service</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../volume-drivers.html">Volume drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup-drivers.html">Backup drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedulers.html">Block Storage schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logs.html">Log files used by Block Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fc-zoning.html">Fibre Channel Zone Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nested-quota.html">Nested quotas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volume-encryption.html">Volume encryption supported by the key manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-options.html">Additional options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../samples/index.html">Block Storage service sample configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tables/conf-changes/cinder.html">New, updated, and deprecated options in Newton for Block Storage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../clustering.html">Clustering service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compute.html">Compute service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-processing.html">Data Processing service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../database.html">Database service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../identity.html">Identity service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../image.html">Image service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../message.html">Message service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking.html">Networking service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../object-storage.html">Object Storage service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../orchestration.html">Orchestration service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shared-file-systems.html">Shared File Systems service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry.html">Telemetry service</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../policy-json-file.html">The policy.json file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../firewalls-default-ports.html">Firewalls and default ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "block-storage/drivers/netapp-volume-driver" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/config-reference/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: b8fd8c76e4ec1d07c2970cbd5770a38196b5b343";
        var bugProject = "openstack-manuals";
        var bugTitle = "NetApp unified driver in Configuration Reference";
    var fieldTags = "config-reference";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 13:49";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>