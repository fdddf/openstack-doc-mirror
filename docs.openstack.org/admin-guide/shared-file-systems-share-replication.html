<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Share replication</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Share replication</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="shared-file-systems-cgroups.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Consistency groups"></i></a>
    
    
    <a href="shared-file-systems-multi-backend.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Multi-storage configuration"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 08:39</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Share replication</a><ul>
<li><a class="reference internal" href="#replication-types-supported">Replication types supported</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#health-of-a-share-replica">Health of a share replica</a></li>
<li><a class="reference internal" href="#promotion-or-failover">Promotion or failover</a></li>
<li><a class="reference internal" href="#share-replication-workflows">Share replication workflows</a><ul>
<li><a class="reference internal" href="#creating-a-share-that-supports-replication">Creating a share that supports replication</a></li>
<li><a class="reference internal" href="#creating-and-promoting-share-replicas">Creating and promoting share replicas</a></li>
<li><a class="reference internal" href="#access-rules">Access rules</a></li>
<li><a class="reference internal" href="#snapshots">Snapshots</a></li>
<li><a class="reference internal" href="#planned-failovers">Planned failovers</a></li>
<li><a class="reference internal" href="#updating-attributes">Updating attributes</a></li>
<li><a class="reference internal" href="#deleting-share-replicas">Deleting share replicas</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="share-replication">
<span id="shared-file-systems-share-replication"></span><h1>Share replication<a class="headerlink" href="#share-replication" title="Permalink to this headline">¶</a></h1>
<p>Replication of data has a number of use cases in the cloud. One use case is
High Availability of the data in a shared file system, used for example, to
support a production database. Another use case is ensuring Data Protection;
i.e being prepared for a disaster by having a replication location that will be
ready to back up your primary data source.</p>
<p>The Shared File System service supports user facing APIs that allow users to
create shares that support replication, add and remove share replicas and
manage their snapshots and access rules. Three replication types are currently
supported and they vary in the semantics associated with the primary share and
the secondary copies.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last"><strong>Share replication</strong> is an <strong>experimental</strong> Shared File Systems API in
the Mitaka release. Contributors can change or remove the experimental
part of the Shared File Systems API in further releases without maintaining
backward compatibility. Experimental APIs have an
<code class="docutils literal"><span class="pre">X-OpenStack-Manila-API-Experimental:</span> <span class="pre">true</span></code> header in their HTTP requests.</p>
</div>
<div class="section" id="replication-types-supported">
<h2>Replication types supported<a class="headerlink" href="#replication-types-supported" title="Permalink to this headline">¶</a></h2>
<p>Before using share replication, make sure the Shared File System driver that
you are running supports this feature. You can check it in the
<code class="docutils literal"><span class="pre">manila-scheduler</span></code> service reports. The <code class="docutils literal"><span class="pre">replication_type</span></code> capability
reported can have one of the following values:</p>
<dl class="docutils">
<dt>writable</dt>
<dd>The driver supports creating <code class="docutils literal"><span class="pre">writable</span></code> share replicas. All share replicas
can be accorded read/write access and would be synchronously mirrored.</dd>
<dt>readable</dt>
<dd>The driver supports creating <code class="docutils literal"><span class="pre">read-only</span></code> share replicas. All secondary
share replicas can be accorded read access. Only the primary (or <code class="docutils literal"><span class="pre">active</span></code>
share replica) can be written into.</dd>
<dt>dr</dt>
<dd>The driver supports creating <code class="docutils literal"><span class="pre">dr</span></code> (abbreviated from Disaster Recovery)
share replicas. A secondary share replica is inaccessible until after a
<code class="docutils literal"><span class="pre">promotion</span></code>.</dd>
<dt>None</dt>
<dd>The driver does not support Share Replication.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The term <code class="docutils literal"><span class="pre">active</span></code> share replica refers to the <code class="docutils literal"><span class="pre">primary</span></code> share. In
<code class="docutils literal"><span class="pre">writable</span></code> style of replication, all share replicas are <code class="docutils literal"><span class="pre">active</span></code>, and
there could be no distinction of a <code class="docutils literal"><span class="pre">primary</span></code> share. In <code class="docutils literal"><span class="pre">readable</span></code> and
<code class="docutils literal"><span class="pre">dr</span></code> styles of replication, a <code class="docutils literal"><span class="pre">secondary</span></code> share replica may be referred
to as <code class="docutils literal"><span class="pre">passive</span></code>, <code class="docutils literal"><span class="pre">non-active</span></code> or simply, <code class="docutils literal"><span class="pre">replica</span></code>.</p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Two new configuration options have been introduced to support Share
Replication.</p>
<dl class="docutils">
<dt>replica_state_update_interval</dt>
<dd>Specify this option in the <code class="docutils literal"><span class="pre">DEFAULT</span></code> section of your <code class="docutils literal"><span class="pre">manila.conf</span></code>.
The Shared File Systems service requests periodic update of the
<cite>replica_state</cite> of all <code class="docutils literal"><span class="pre">non-active</span></code> share replicas. The update occurs with
respect to an interval corresponding to this option. If it is not specified,
it defaults to 300 seconds.</dd>
<dt>replication_domain</dt>
<dd>Specify this option in the backend stanza when using a multi-backend style
configuration. The value can be any ASCII string. Two backends that can
replicate between each other would have the same <code class="docutils literal"><span class="pre">replication_domain</span></code>.
This comes from the premise that the Shared File Systems service expects
Share Replication to be performed between symmetric backends. This option
is <em>required</em> for using the Share Replication feature.</dd>
</dl>
</div>
<div class="section" id="health-of-a-share-replica">
<h2>Health of a share replica<a class="headerlink" href="#health-of-a-share-replica" title="Permalink to this headline">¶</a></h2>
<p>Apart from the <code class="docutils literal"><span class="pre">status</span></code> attribute, share replicas have the
<code class="docutils literal"><span class="pre">replica_state</span></code> attribute to denote the state of data replication on the
storage backend. The <code class="docutils literal"><span class="pre">primary</span></code> share replica will have it&#8217;s <cite>replica_state</cite>
attribute set to <cite>active</cite>. The <code class="docutils literal"><span class="pre">secondary</span></code> share replicas may have one of
the following as their <code class="docutils literal"><span class="pre">replica_state</span></code>:</p>
<dl class="docutils">
<dt>in_sync</dt>
<dd>The share replica is up to date with the <code class="docutils literal"><span class="pre">active</span></code> share replica (possibly
within a backend-specific <code class="docutils literal"><span class="pre">recovery</span> <span class="pre">point</span> <span class="pre">objective</span></code>).</dd>
<dt>out_of_sync</dt>
<dd>The share replica is out of date (all new share replicas start out in
this <code class="docutils literal"><span class="pre">replica_state</span></code>).</dd>
<dt>error</dt>
<dd>When the scheduler fails to schedule this share replica or some potentially
irrecoverable error occurred with regard to updating data for this replica.</dd>
</dl>
</div>
<div class="section" id="promotion-or-failover">
<h2>Promotion or failover<a class="headerlink" href="#promotion-or-failover" title="Permalink to this headline">¶</a></h2>
<p>For <code class="docutils literal"><span class="pre">readable</span></code> and <code class="docutils literal"><span class="pre">dr</span></code> types of replication, we refer to the task
of switching a <cite>non-active</cite> share replica with the <code class="docutils literal"><span class="pre">active</span></code> replica as
<cite>promotion</cite>. For the <code class="docutils literal"><span class="pre">writable</span></code> style of replication, promotion does
not make sense since all share replicas are <code class="docutils literal"><span class="pre">active</span></code> (or writable) at all
times.</p>
<p>The <cite>status</cite> attribute of the non-active replica being promoted will be
set to <code class="docutils literal"><span class="pre">replication_change</span></code> during its promotion. This has been classified as
a <code class="docutils literal"><span class="pre">busy</span></code> state and thus API interactions with the share are restricted
while one of its share replicas is in this state.</p>
</div>
<div class="section" id="share-replication-workflows">
<h2>Share replication workflows<a class="headerlink" href="#share-replication-workflows" title="Permalink to this headline">¶</a></h2>
<p>The following examples have been implemented with the ZFSonLinux driver that
is a reference implementation in the Shared File Systems service. It operates
in <code class="docutils literal"><span class="pre">driver_handles_share_servers=False</span></code> mode and supports the <code class="docutils literal"><span class="pre">readable</span></code>
type of replication. In the example, we assume a configuration of two
Availability Zones (configuration option: <code class="docutils literal"><span class="pre">storage_availability_zone</span></code>),
called <cite>availability_zone_1</cite> and <cite>availability_zone_2</cite>.</p>
<p>Multiple availability zones are not necessary to use the replication feature.
However, the use of an availability zone as a <code class="docutils literal"><span class="pre">failure</span> <span class="pre">domain</span></code> is encouraged.</p>
<p>Pay attention to the network configuration for the ZFS driver. Here, we assume
a configuration of <code class="docutils literal"><span class="pre">zfs_service_ip</span></code> and <code class="docutils literal"><span class="pre">zfs_share_export_ip</span></code> from two
separate networks. The service network is reachable from the host where the
<code class="docutils literal"><span class="pre">manila-share</span></code> service is running. The share export IP is from a network that
allows user access.</p>
<p>See <a class="reference external" href="https://docs.openstack.org/newton/config-reference/shared-file-systems/drivers/zfs-on-linux-driver.html">Configuring the ZFSonLinux driver</a>
for information on how to set up the ZFSonLinux driver.</p>
<div class="section" id="creating-a-share-that-supports-replication">
<h3>Creating a share that supports replication<a class="headerlink" href="#creating-a-share-that-supports-replication" title="Permalink to this headline">¶</a></h3>
<p>Create a new share type and specify the <cite>replication_type</cite> as an extra-spec
within the share-type being used.</p>
<p>Use the <strong class="command">manila type-create</strong> command to create a new share type.
Specify the name and the value for the extra-spec
<code class="docutils literal"><span class="pre">driver_handles_share_servers</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila type-create readable_type_replication False
<span class="go">+----------------------+--------------------------------------+</span>
<span class="go">| Property             | Value                                |</span>
<span class="go">+----------------------+--------------------------------------+</span>
<span class="go">| required_extra_specs | driver_handles_share_servers : False |</span>
<span class="go">| Name                 | readable_type_replication            |</span>
<span class="go">| Visibility           | public                               |</span>
<span class="go">| is_default           | -                                    |</span>
<span class="go">| ID                   | 3b3ee3f7-6e43-4aa1-859d-0b0511c43074 |</span>
<span class="go">| optional_extra_specs | snapshot_support : True              |</span>
<span class="go">+----------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Use the <strong class="command">manila type-key</strong> command to set an extra-spec to the
share type.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila type-key readable_type_replication <span class="nb">set</span> <span class="nv">replication_type</span><span class="o">=</span>readable
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output. To verify the extra-spec, use the
<strong class="command">manila extra-specs-list</strong> command and specify the share type&#8217;s name
or ID as a parameter.</p>
</div>
<p>Create a share with the share type</p>
<p>Use the <strong class="command">manila create</strong> command to create a share. Specify the share
protocol, size and the availability zone.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila create NFS <span class="m">1</span> --share_type readable_type_replication --name my_share --description <span class="s2">&quot;This share will have replicas&quot;</span> --az availability_zone_1
<span class="go">+-----------------------------+--------------------------------------+</span>
<span class="go">| Property                    | Value                                |</span>
<span class="go">+-----------------------------+--------------------------------------+</span>
<span class="go">| status                      | creating                             |</span>
<span class="go">| share_type_name             | readable_type_replication            |</span>
<span class="go">| description                 | This share will have replicas        |</span>
<span class="go">| availability_zone           | availability_zone_1                  |</span>
<span class="go">| share_network_id            | None                                 |</span>
<span class="go">| share_server_id             | None                                 |</span>
<span class="go">| host                        |                                      |</span>
<span class="go">| access_rules_status         | active                               |</span>
<span class="go">| snapshot_id                 | None                                 |</span>
<span class="go">| is_public                   | False                                |</span>
<span class="go">| task_state                  | None                                 |</span>
<span class="go">| snapshot_support            | True                                 |</span>
<span class="go">| id                          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| size                        | 1                                    |</span>
<span class="go">| name                        | my_share                             |</span>
<span class="go">| share_type                  | 3b3ee3f7-6e43-4aa1-859d-0b0511c43074 |</span>
<span class="go">| has_replicas                | False                                |</span>
<span class="go">| replication_type            | readable                             |</span>
<span class="go">| created_at                  | 2016-03-29T20:22:18.000000           |</span>
<span class="go">| share_proto                 | NFS                                  |</span>
<span class="go">| consistency_group_id        | None                                 |</span>
<span class="go">| source_cgsnapshot_member_id | None                                 |</span>
<span class="go">| project_id                  | 48a5ca76ac69405e99dc1c13c5195186     |</span>
<span class="go">| metadata                    | {}                                   |</span>
<span class="go">+-----------------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Use the <strong class="command">manila show</strong> command to retrieve details of the share.
Specify the share ID or name as a parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila show my_share
<span class="go">+-----------------------------+--------------------------------------------------------------------+</span>
<span class="go">| Property                    | Value                                                              |</span>
<span class="go">+-----------------------------+--------------------------------------------------------------------+</span>
<span class="go">| status                      | available                                                          |</span>
<span class="go">| share_type_name             | readable_type_replication                                          |</span>
<span class="go">| description                 | This share will have replicas                                      |</span>
<span class="go">| availability_zone           | availability_zone_1                                                |</span>
<span class="go">| share_network_id            | None                                                               |</span>
<span class="go">| export_locations            |                                                                    |</span>
<span class="go">|                             | path =                                                             |</span>
<span class="go">|                             |10.32.62.26:/alpha/manila_share_38efc042_50c2_4825_a6d8_cba2a8277b28|</span>
<span class="go">|                             | preferred = False                                                  |</span>
<span class="go">|                             | is_admin_only = False                                              |</span>
<span class="go">|                             | id = e1d754b5-ec06-42d2-afff-3e98c0013faf                          |</span>
<span class="go">|                             | share_instance_id = 38efc042-50c2-4825-a6d8-cba2a8277b28           |</span>
<span class="go">|                             | path =                                                             |</span>
<span class="go">|                             |172.21.0.23:/alpha/manila_share_38efc042_50c2_4825_a6d8_cba2a8277b28|</span>
<span class="go">|                             | preferred = False                                                  |</span>
<span class="go">|                             | is_admin_only = True                                               |</span>
<span class="go">|                             | id = 6f843ecd-a7ea-4939-86de-e1e01d9e8672                          |</span>
<span class="go">|                             | share_instance_id = 38efc042-50c2-4825-a6d8-cba2a8277b28           |</span>
<span class="go">| share_server_id             | None                                                               |</span>
<span class="go">| host                        | openstack4@zfsonlinux_1#alpha                                      |</span>
<span class="go">| access_rules_status         | active                                                             |</span>
<span class="go">| snapshot_id                 | None                                                               |</span>
<span class="go">| is_public                   | False                                                              |</span>
<span class="go">| task_state                  | None                                                               |</span>
<span class="go">| snapshot_support            | True                                                               |</span>
<span class="go">| id                          | e496ed61-8f2e-436b-b299-32c3e90991cc                               |</span>
<span class="go">| size                        | 1                                                                  |</span>
<span class="go">| name                        | my_share                                                           |</span>
<span class="go">| share_type                  | 3b3ee3f7-6e43-4aa1-859d-0b0511c43074                               |</span>
<span class="go">| has_replicas                | False                                                              |</span>
<span class="go">| replication_type            | readable                                                           |</span>
<span class="go">| created_at                  | 2016-03-29T20:22:18.000000                                         |</span>
<span class="go">| share_proto                 | NFS                                                                |</span>
<span class="go">| consistency_group_id        | None                                                               |</span>
<span class="go">| source_cgsnapshot_member_id | None                                                               |</span>
<span class="go">| project_id                  | 48a5ca76ac69405e99dc1c13c5195186                                   |</span>
<span class="go">| metadata                    | {}                                                                 |</span>
<span class="go">+-----------------------------+--------------------------------------------------------------------+</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When you create a share that supports replication, an <code class="docutils literal"><span class="pre">active</span></code> replica is
created for you. You can verify this with the
<strong class="command">manila share-replica-list</strong> command.</p>
</div>
</div>
<div class="section" id="creating-and-promoting-share-replicas">
<h3>Creating and promoting share replicas<a class="headerlink" href="#creating-and-promoting-share-replicas" title="Permalink to this headline">¶</a></h3>
<p>Create a share replica</p>
<p>Use the <strong class="command">manila share-replica-create</strong> command to create a share
replica. Specify the share ID or name as a parameter. You may
optionally provide the <cite>availability_zone</cite> and <cite>share_network_id</cite>. In the
example below, <cite>share_network_id</cite> is not used since the ZFSonLinux driver
does not support it.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-create my_share --az availability_zone_2
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| Property          | Value                                |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| status            | creating                             |</span>
<span class="go">| share_id          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| availability_zone | availability_zone_2                  |</span>
<span class="go">| created_at        | 2016-03-29T20:24:53.148992           |</span>
<span class="go">| updated_at        | None                                 |</span>
<span class="go">| share_network_id  | None                                 |</span>
<span class="go">| share_server_id   | None                                 |</span>
<span class="go">| host              |                                      |</span>
<span class="go">| replica_state     | None                                 |</span>
<span class="go">| id                | 78a5ef96-6c36-42e0-b50b-44efe7c1807e |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>See details of the newly created share replica</p>
<p>Use the <strong class="command">manila share-replica-show</strong> command to see details
of the newly created share replica. Specify the share replica&#8217;s ID as a
parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-show 78a5ef96-6c36-42e0-b50b-44efe7c1807e
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| Property          | Value                                |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| status            | available                            |</span>
<span class="go">| share_id          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| availability_zone | availability_zone_2                  |</span>
<span class="go">| created_at        | 2016-03-29T20:24:53.000000           |</span>
<span class="go">| updated_at        | 2016-03-29T20:24:58.000000           |</span>
<span class="go">| share_network_id  | None                                 |</span>
<span class="go">| share_server_id   | None                                 |</span>
<span class="go">| host              | openstack4@zfsonlinux_2#beta         |</span>
<span class="go">| replica_state     | in_sync                              |</span>
<span class="go">| id                | 78a5ef96-6c36-42e0-b50b-44efe7c1807e |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>See all replicas of the share</p>
<p>Use the <strong class="command">manila share-replica-list</strong> command to see all the replicas
of the share. Specify the share ID or name as an optional parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-list --share-id my_share
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| ID                                   | Status    | Replica State | Share ID                             | Host                          | Availability Zone   | Updated At                 |</span>
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| 38efc042-50c2-4825-a6d8-cba2a8277b28 | available | active        | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_1#alpha | availability_zone_1 | 2016-03-29T20:22:19.000000 |</span>
<span class="go">| 78a5ef96-6c36-42e0-b50b-44efe7c1807e | available | in_sync       | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_2#beta  | availability_zone_2 | 2016-03-29T20:24:58.000000 |</span>
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
</pre></div>
</div>
<p>Promote the secondary share replica to be the new active replica</p>
<p>Use the <strong class="command">manila share-replica-promote</strong> command to promote a
non-active share replica to become the <code class="docutils literal"><span class="pre">active</span></code> replica. Specify the
non-active replica&#8217;s ID as a parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-promote 78a5ef96-6c36-42e0-b50b-44efe7c1807e
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
<p>The promotion may take time. During the promotion, the <code class="docutils literal"><span class="pre">replica_state</span></code>
attribute of the share replica being promoted will be set to
<code class="docutils literal"><span class="pre">replication_change</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-list --share-id my_share
<span class="go">+--------------------------------------+-----------+--------------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| ID                                   | Status    |    Replica State   | Share ID                             | Host                          | Availability Zone   | Updated At                 |</span>
<span class="go">+--------------------------------------+-----------+--------------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| 38efc042-50c2-4825-a6d8-cba2a8277b28 | available |       active       | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_1#alpha | availability_zone_1 | 2016-03-29T20:32:19.000000 |</span>
<span class="go">| 78a5ef96-6c36-42e0-b50b-44efe7c1807e | available | replication_change | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_2#beta  | availability_zone_2 | 2016-03-29T20:32:19.000000 |</span>
<span class="go">+--------------------------------------+-----------+--------------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
</pre></div>
</div>
<p>Once the promotion is complete, the <code class="docutils literal"><span class="pre">replica_state</span></code> will be set to
<code class="docutils literal"><span class="pre">active</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-list --share-id my_share
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| ID                                   | Status    | Replica State | Share ID                             | Host                          | Availability Zone   | Updated At                 |</span>
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
<span class="go">| 38efc042-50c2-4825-a6d8-cba2a8277b28 | available | in_sync       | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_1#alpha | availability_zone_1 | 2016-03-29T20:32:19.000000 |</span>
<span class="go">| 78a5ef96-6c36-42e0-b50b-44efe7c1807e | available | active        | e496ed61-8f2e-436b-b299-32c3e90991cc | openstack4@zfsonlinux_2#beta  | availability_zone_2 | 2016-03-29T20:32:19.000000 |</span>
<span class="go">+--------------------------------------+-----------+---------------+--------------------------------------+-------------------------------+---------------------+----------------------------+</span>
</pre></div>
</div>
</div>
<div class="section" id="access-rules">
<h3>Access rules<a class="headerlink" href="#access-rules" title="Permalink to this headline">¶</a></h3>
<p>Create an IP access rule for the share</p>
<p>Use the <strong class="command">manila access-allow</strong> command to add an access rule.
Specify the share ID or name, protocol and the target as parameters.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila access-allow my_share ip <span class="m">0</span>.0.0.0/0 --access-level rw
<span class="go">+--------------+--------------------------------------+</span>
<span class="go">| Property     | Value                                |</span>
<span class="go">+--------------+--------------------------------------+</span>
<span class="go">| share_id     | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| access_type  | ip                                   |</span>
<span class="go">| access_to    | 0.0.0.0/0                            |</span>
<span class="go">| access_level | rw                                   |</span>
<span class="go">| state        | new                                  |</span>
<span class="go">| id           | 8b339cdc-c1e0-448f-bf6d-f068ee6e8f45 |</span>
<span class="go">+--------------+--------------------------------------+</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Access rules are not meant to be different across the replicas of the share.
However, as per the type of replication, drivers may choose to modify the
access level prescribed. In the above example, even though read/write access
was requested for the share, the driver will provide read-only access to
the non-active replica to the same target, because of the semantics of
the replication type: <code class="docutils literal"><span class="pre">readable</span></code>. However, the target will have read/write
access to the (currently) non-active replica when it is promoted to
become the <code class="docutils literal"><span class="pre">active</span></code> replica.</p>
</div>
<p>The <strong class="command">manila access-deny</strong> command can be used to remove a previously
applied access rule.</p>
<p>List the export locations of the share</p>
<p>Use the <strong class="command">manila share-export-locations-list</strong> command to list the
export locations of a share.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-export-location-list my_share
<span class="go">+--------------------------------------+---------------------------------------------------------------------------+-----------+</span>
<span class="go">| ID                                   | Path                                                                      | Preferred |</span>
<span class="go">+--------------------------------------+---------------------------------------------------------------------------+-----------+</span>
<span class="go">| 3ed3fbf5-2fa1-4dc0-8440-a0af72398cb6 | 10.32.62.21:/beta/subdir/manila_share_78a5ef96_6c36_42e0_b50b_44efe7c1807e| False     |</span>
<span class="go">| 6f843ecd-a7ea-4939-86de-e1e01d9e8672 | 172.21.0.23:/alpha/manila_share_38efc042_50c2_4825_a6d8_cba2a8277b28      | False     |</span>
<span class="go">| e1d754b5-ec06-42d2-afff-3e98c0013faf | 10.32.62.26:/alpha/manila_share_38efc042_50c2_4825_a6d8_cba2a8277b28      | False     |</span>
<span class="go">| f3c5585f-c2f7-4264-91a7-a4a1e754e686 | 172.21.0.29:/beta/subdir/manila_share_78a5ef96_6c36_42e0_b50b_44efe7c1807e| False     |</span>
<span class="go">+--------------------------------------+---------------------------------------------------------------------------+-----------+</span>
</pre></div>
</div>
<p>Identify the export location corresponding to the share replica on the user
accessible network and you may mount it on the target node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As an administrator, you can list the export locations for a particular
share replica by using the
<strong class="command">manila share-instance-export-location-list</strong> command and
specifying the share replica&#8217;s ID as a parameter.</p>
</div>
</div>
<div class="section" id="snapshots">
<h3>Snapshots<a class="headerlink" href="#snapshots" title="Permalink to this headline">¶</a></h3>
<p>Create a snapshot of the share</p>
<p>Use the <strong class="command">manila snapshot-create</strong> command to create a snapshot
of the share. Specify the share ID or name as a parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila snapshot-create my_share --name <span class="s2">&quot;my_snapshot&quot;</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| Property          | Value                                |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| status            | creating                             |</span>
<span class="go">| share_id          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| description       | None                                 |</span>
<span class="go">| created_at        | 2016-03-29T21:14:03.000000           |</span>
<span class="go">| share_proto       | NFS                                  |</span>
<span class="go">| provider_location | None                                 |</span>
<span class="go">| id                | 06cdccaf-93a0-4e57-9a39-79fb1929c649 |</span>
<span class="go">| size              | 1                                    |</span>
<span class="go">| share_size        | 1                                    |</span>
<span class="go">| name              | my_snapshot                          |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p>Show the details of the snapshot</p>
<p>Use the <strong class="command">manila snapshot-show</strong> to view details of a snapshot.
Specify the snapshot ID or name as a parameter.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila snapshot-show my_snapshot
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| Property          | Value                                |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| status            | available                            |</span>
<span class="go">| share_id          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| description       | None                                 |</span>
<span class="go">| created_at        | 2016-03-29T21:14:03.000000           |</span>
<span class="go">| share_proto       | NFS                                  |</span>
<span class="go">| provider_location | None                                 |</span>
<span class="go">| id                | 06cdccaf-93a0-4e57-9a39-79fb1929c649 |</span>
<span class="go">| size              | 1                                    |</span>
<span class="go">| share_size        | 1                                    |</span>
<span class="go">| name              | my_snapshot                          |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal"><span class="pre">status</span></code> attribute of a snapshot will transition from <code class="docutils literal"><span class="pre">creating</span></code>
to <code class="docutils literal"><span class="pre">available</span></code> only when it is present on all the share replicas that have
their <code class="docutils literal"><span class="pre">replica_state</span></code> attribute set to <code class="docutils literal"><span class="pre">active</span></code> or <code class="docutils literal"><span class="pre">in_sync</span></code>.</p>
<p class="last">Likewise, the <code class="docutils literal"><span class="pre">replica_state</span></code> attribute of a share replica will
transition from <code class="docutils literal"><span class="pre">out_of_sync</span></code> to <code class="docutils literal"><span class="pre">in_sync</span></code> only when all <code class="docutils literal"><span class="pre">available</span></code>
snapshots are present on it.</p>
</div>
</div>
<div class="section" id="planned-failovers">
<h3>Planned failovers<a class="headerlink" href="#planned-failovers" title="Permalink to this headline">¶</a></h3>
<p>As an administrator, you can use the <strong class="command">manila share-replica-resync</strong>
command to attempt to sync data between <code class="docutils literal"><span class="pre">active</span></code> and <code class="docutils literal"><span class="pre">non-active</span></code> share
replicas of a share before promotion. This will ensure that share replicas have
the most up-to-date data and their relationships can be safely switched.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-resync 38efc042-50c2-4825-a6d8-cba2a8277b28
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
</div>
<div class="section" id="updating-attributes">
<h3>Updating attributes<a class="headerlink" href="#updating-attributes" title="Permalink to this headline">¶</a></h3>
<p>If an error occurs while updating data or replication relationships (during
a <code class="docutils literal"><span class="pre">promotion</span></code>), the Shared File Systems service may not be able to determine
the consistency or health of a share replica. It may require administrator
intervention to make any fixes on the storage backend as necessary. In such a
situation, state correction within the Shared File Systems service is possible.</p>
<p>As an administrator, you can:</p>
<p>Reset the <code class="docutils literal"><span class="pre">status</span></code> attribute of a share replica</p>
<p>Use the <strong class="command">manila share-replica-reset-state</strong> command to reset
the <code class="docutils literal"><span class="pre">status</span></code> attribute. Specify the share replica&#8217;s ID as a parameter
and use the <code class="docutils literal"><span class="pre">--state</span></code> option to specify the state intended.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-reset-state 38efc042-50c2-4825-a6d8-cba2a8277b28 --state<span class="o">=</span>available
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
<p>Reset the <code class="docutils literal"><span class="pre">replica_state</span></code> attribute</p>
<p>Use the <strong class="command">manila share-replica-reset-replica-state</strong> command to
reset the <code class="docutils literal"><span class="pre">replica_state</span></code> attribute. Specify the share replica&#8217;s ID
and use the <code class="docutils literal"><span class="pre">--state</span></code> option to specify the state intended.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-reset-replica-state 38efc042-50c2-4825-a6d8-cba2a8277b28 --state<span class="o">=</span>out_of_sync
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
<p>Force delete a specified share replica in any state</p>
<p>Use the <strong class="command">manila share-replica-delete</strong> command with the
&#8216;&#8211;force&#8217; key to remove the share replica, regardless of the state it is in.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-show 9513de5d-0384-4528-89fb-957dd9b57680
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| Property          | Value                                |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| status            | error                                |</span>
<span class="go">| share_id          | e496ed61-8f2e-436b-b299-32c3e90991cc |</span>
<span class="go">| availability_zone | availability_zone_1                  |</span>
<span class="go">| created_at        | 2016-03-30T01:32:47.000000           |</span>
<span class="go">| updated_at        | 2016-03-30T01:34:25.000000           |</span>
<span class="go">| share_network_id  | None                                 |</span>
<span class="go">| share_server_id   | None                                 |</span>
<span class="go">| host              | openstack4@zfsonlinux_1#alpha        |</span>
<span class="go">| replica_state     | out_of_sync                          |</span>
<span class="go">| id                | 38efc042-50c2-4825-a6d8-cba2a8277b28 |</span>
<span class="go">+-------------------+--------------------------------------+</span>

<span class="gp">$</span> manila share-replica-delete --force 38efc042-50c2-4825-a6d8-cba2a8277b28
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
<p>Use the <code class="docutils literal"><span class="pre">policy.json</span></code> file to grant permissions for these actions to other
roles.</p>
</div>
<div class="section" id="deleting-share-replicas">
<h3>Deleting share replicas<a class="headerlink" href="#deleting-share-replicas" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong class="command">manila share-replica-delete</strong> command with the share
replica&#8217;s ID to delete a share replica.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> manila share-replica-delete 38efc042-50c2-4825-a6d8-cba2a8277b28
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command has no output.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You cannot delete the last <code class="docutils literal"><span class="pre">active</span></code> replica with this command. You should
use the <strong class="command">manila delete</strong> command to remove the share.</p>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="shared-file-systems-cgroups.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Consistency groups"></i></a>
          
          
            <a href="shared-file-systems-multi-backend.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Multi-storage configuration"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 08:39</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get-started-with-openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity-management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="shared-file-systems.html">Shared File Systems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-key-concepts.html">Key concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-share-management.html">Share management</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-manage-shares-cli.html">Migrate shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-share-types.html">Share types</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-snapshots.html">Share snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-security-services.html">Security services</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-cgroups.html">Consistency groups</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Share replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-multi-backend.html">Multi-storage configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-networking.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared-file-systems-troubleshoot.html">Troubleshoot Shared File Systems service</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">OpenStack command-line clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross-project.html">Cross-project features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="firewalls-default-ports.html">Firewalls and default ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "shared-file-systems-share-replication" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/admin-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 0719207c6d82d2c215b9c13234f3a27478e0c0f3";
        var bugProject = "openstack-manuals";
        var bugTitle = "Share replication in Administrator Guide";
    var fieldTags = "admin-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 08:39";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>