<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Consistency groups</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Consistency groups</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="blockstorage-volume-number-weigher.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configure and use volume number weigher"></i></a>
    
    
    <a href="blockstorage-driver-filter-weighing.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure and use driver filter and weighing for scheduler"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 13:52</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Consistency groups</a></li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="consistency-groups">
<h1>Consistency groups<a class="headerlink" href="#consistency-groups" title="Permalink to this headline">¶</a></h1>
<p>Consistency group support is available in OpenStack Block Storage. The
support is added for creating snapshots of consistency groups. This
feature leverages the storage level consistency technology. It allows
snapshots of multiple volumes in the same consistency group to be taken
at the same point-in-time to ensure data consistency. The consistency
group operations can be performed using the Block Storage command line.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only Block Storage V2 API supports consistency groups. You can
specify <code class="docutils literal"><span class="pre">--os-volume-api-version</span> <span class="pre">2</span></code> when using Block Storage
command line for consistency group operations.</p>
</div>
<p>Before using consistency groups, make sure the Block Storage driver that
you are running has consistency group support by reading the Block
Storage manual or consulting the driver maintainer. There are a small
number of drivers that have implemented this feature. The default LVM
driver does not support consistency groups yet because the consistency
technology is not available at the storage level.</p>
<p>Before using consistency groups, you must change policies for the
consistency group APIs in the <code class="docutils literal"><span class="pre">/etc/cinder/policy.json</span></code> file.
By default, the consistency group APIs are disabled.
Enable them before running consistency group operations.</p>
<p>Here are existing policy entries for consistency groups:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;consistencygroup:create&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span>
<span class="s2">&quot;consistencygroup:delete&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:update&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_all&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:create_cgsnapshot&quot;</span> <span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:delete_cgsnapshot&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_cgsnapshot&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_all_cgsnapshots&quot;</span><span class="p">:</span> <span class="s2">&quot;group:nobody&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Remove <code class="docutils literal"><span class="pre">group:nobody</span></code> to enable these APIs:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">&quot;consistencygroup:create&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:delete&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:update&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_all&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:create_cgsnapshot&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:delete_cgsnapshot&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_cgsnapshot&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;consistencygroup:get_all_cgsnapshots&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Restart Block Storage API service after changing policies.</p>
<p>The following consistency group operations are supported:</p>
<ul>
<li><p class="first">Create a consistency group, given volume types.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A consistency group can support more than one volume type. The
scheduler is responsible for finding a back end that can support
all given volume types.</p>
<p>A consistency group can only contain volumes hosted by the same
back end.</p>
<p class="last">A consistency group is empty upon its creation. Volumes need to
be created and added to it later.</p>
</div>
</li>
<li><p class="first">Show a consistency group.</p>
</li>
<li><p class="first">List consistency groups.</p>
</li>
<li><p class="first">Create a volume and add it to a consistency group, given volume type
and consistency group id.</p>
</li>
<li><p class="first">Create a snapshot for a consistency group.</p>
</li>
<li><p class="first">Show a snapshot of a consistency group.</p>
</li>
<li><p class="first">List consistency group snapshots.</p>
</li>
<li><p class="first">Delete a snapshot of a consistency group.</p>
</li>
<li><p class="first">Delete a consistency group.</p>
</li>
<li><p class="first">Modify a consistency group.</p>
</li>
<li><p class="first">Create a consistency group from the snapshot of another consistency
group.</p>
</li>
<li><p class="first">Create a consistency group from a source consistency group.</p>
</li>
</ul>
<p>The following operations are not allowed if a volume is in a consistency
group:</p>
<ul>
<li><p class="first">Volume migration.</p>
</li>
<li><p class="first">Volume retype.</p>
</li>
<li><p class="first">Volume deletion.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A consistency group has to be deleted as a whole with all the
volumes.</p>
</div>
</li>
</ul>
<p>The following operations are not allowed if a volume snapshot is in a
consistency group snapshot:</p>
<ul>
<li><p class="first">Volume snapshot deletion.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A consistency group snapshot has to be deleted as a whole with
all the volume snapshots.</p>
</div>
</li>
</ul>
<p>The details of consistency group operations are shown in the following.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, no OpenStack client command is available to run in
place of the cinder consistency group creation commands. Use the
cinder commands detailed in the following examples.</p>
</div>
</div></blockquote>
<p><strong>Create a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-create</span>
<span class="go">[--name name]</span>
<span class="go">[--description description]</span>
<span class="go">[--availability-zone availability-zone]</span>
<span class="go">volume-types</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The parameter <code class="docutils literal"><span class="pre">volume-types</span></code> is required. It can be a list of
names or UUIDs of volume types separated by commas without spaces in
between. For example, <code class="docutils literal"><span class="pre">volumetype1,volumetype2,volumetype3.</span></code>.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create --name bronzeCG2 volume_type_1

<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">|      Property     |                Value                 |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| availability_zone |                 nova                 |</span>
<span class="go">|     created_at    |      2014-12-29T12:59:08.000000      |</span>
<span class="go">|    description    |                 None                 |</span>
<span class="go">|         id        | 1de80c27-3b2f-47a6-91a7-e867cbe36462 |</span>
<span class="go">|        name       |              bronzeCG2               |</span>
<span class="go">|       status      |               creating               |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p><strong>Show a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-show 1de80c27-3b2f-47a6-91a7-e867cbe36462

<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">|      Property     |                Value                 |</span>
<span class="go">+-------------------+--------------------------------------+</span>
<span class="go">| availability_zone |                 nova                 |</span>
<span class="go">|     created_at    |      2014-12-29T12:59:08.000000      |</span>
<span class="go">|    description    |                 None                 |</span>
<span class="go">|         id        | 2a6b2bda-1f43-42ce-9de8-249fa5cbae9a |</span>
<span class="go">|        name       |              bronzeCG2               |</span>
<span class="go">|       status      |              available               |</span>
<span class="go">|     volume_types  |              volume_type_1           |</span>
<span class="go">+-------------------+--------------------------------------+</span>
</pre></div>
</div>
<p><strong>List consistency groups</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-list

<span class="go">+--------------------------------------+-----------+-----------+</span>
<span class="go">|                  ID                  |   Status  |    Name   |</span>
<span class="go">+--------------------------------------+-----------+-----------+</span>
<span class="go">| 1de80c27-3b2f-47a6-91a7-e867cbe36462 | available | bronzeCG2 |</span>
<span class="go">| 3a2b3c42-b612-479a-91eb-1ed45b7f2ad5 |   error   |  bronzeCG |</span>
<span class="go">+--------------------------------------+-----------+-----------+</span>
</pre></div>
</div>
<p><strong>Create a volume and add it to a consistency group</strong>:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating a volume and adding it to a consistency group, a
volume type and a consistency group id must be provided. This is
because a consistency group can support more than one volume type.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --type volume_type_1 --consistency-group <span class="se">\</span>
  1de80c27-3b2f-47a6-91a7-e867cbe36462 --size <span class="m">1</span> cgBronzeVol

<span class="go">+---------------------------------------+--------------------------------------+</span>
<span class="go">| Field                                 | Value                                |</span>
<span class="go">+---------------------------------------+--------------------------------------+</span>
<span class="go">|              attachments              |                  []                  |</span>
<span class="go">|           availability_zone           |                 nova                 |</span>
<span class="go">|                bootable               |                false                 |</span>
<span class="go">|          consistencygroup_id          | 1de80c27-3b2f-47a6-91a7-e867cbe36462 |</span>
<span class="go">|               created_at              |      2014-12-29T13:16:47.000000      |</span>
<span class="go">|              description              |                 None                 |</span>
<span class="go">|               encrypted               |                False                 |</span>
<span class="go">|                   id                  | 5e6d1386-4592-489f-a56b-9394a81145fe |</span>
<span class="go">|                metadata               |                  {}                  |</span>
<span class="go">|                  name                 |             cgBronzeVol              |</span>
<span class="go">|         os-vol-host-attr:host         |      server-1@backend-1#pool-1       |</span>
<span class="go">|     os-vol-mig-status-attr:migstat    |                 None                 |</span>
<span class="go">|     os-vol-mig-status-attr:name_id    |                 None                 |</span>
<span class="go">|      os-vol-tenant-attr:tenant_id     |   1349b21da2a046d8aa5379f0ed447bed   |</span>
<span class="go">|   os-volume-replication:driver_data   |                 None                 |</span>
<span class="go">| os-volume-replication:extended_status |                 None                 |</span>
<span class="go">|           replication_status          |               disabled               |</span>
<span class="go">|                  size                 |                  1                   |</span>
<span class="go">|              snapshot_id              |                 None                 |</span>
<span class="go">|              source_volid             |                 None                 |</span>
<span class="go">|                 status                |               creating               |</span>
<span class="go">|                user_id                |   93bdea12d3e04c4b86f9a9f172359859   |</span>
<span class="go">|              volume_type              |            volume_type_1             |</span>
<span class="go">+---------------------------------------+--------------------------------------+</span>
</pre></div>
</div>
<p><strong>Create a snapshot for a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-create 1de80c27-3b2f-47a6-91a7-e867cbe36462

<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">|       Property      |                Value                 |</span>
<span class="go">+---------------------+--------------------------------------+</span>
<span class="go">| consistencygroup_id | 1de80c27-3b2f-47a6-91a7-e867cbe36462 |</span>
<span class="go">|      created_at     |      2014-12-29T13:19:44.000000      |</span>
<span class="go">|     description     |                 None                 |</span>
<span class="go">|          id         | d4aff465-f50c-40b3-b088-83feb9b349e9 |</span>
<span class="go">|         name        |                 None                 |</span>
<span class="go">|        status       |               creating               |</span>
<span class="go">+---------------------+-------------------------------------+</span>
</pre></div>
</div>
<p><strong>Show a snapshot of a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-show d4aff465-f50c-40b3-b088-83feb9b349e9
</pre></div>
</div>
<p><strong>List consistency group snapshots</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-list

<span class="go">+--------------------------------------+--------+----------+</span>
<span class="go">|                  ID                  | Status | Name     |</span>
<span class="go">+--------------------------------------+--------+----------+</span>
<span class="go">| 6d9dfb7d-079a-471e-b75a-6e9185ba0c38 | available  | None |</span>
<span class="go">| aa129f4d-d37c-4b97-9e2d-7efffda29de0 | available  | None |</span>
<span class="go">| bb5b5d82-f380-4a32-b469-3ba2e299712c | available  | None |</span>
<span class="go">| d4aff465-f50c-40b3-b088-83feb9b349e9 | available  | None |</span>
<span class="go">+--------------------------------------+--------+----------+</span>
</pre></div>
</div>
<p><strong>Delete a snapshot of a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-delete d4aff465-f50c-40b3-b088-83feb9b349e9
</pre></div>
</div>
<p><strong>Delete a consistency group</strong>:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The force flag is needed when there are volumes in the consistency
group:</p>
<div class="last highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-delete --force 1de80c27-3b2f-47a6-91a7-e867cbe36462
</pre></div>
</div>
</div>
<p><strong>Modify a consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-update</span>
<span class="go">[--name NAME]</span>
<span class="go">[--description DESCRIPTION]</span>
<span class="go">[--add-volumes UUID1,UUID2,......]</span>
<span class="go">[--remove-volumes UUID3,UUID4,......]</span>
<span class="go">CG</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal"><span class="pre">CG</span></code> is required. It can be a name or UUID of a consistency
group. UUID1,UUID2,...... are UUIDs of one or more volumes to be added
to the consistency group, separated by commas. Default is None.
UUID3,UUID4,...... are UUIDs of one or more volumes to be removed from
the consistency group, separated by commas. Default is None.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-update --name <span class="s1">&#39;new name&#39;</span> <span class="se">\</span>
  --description <span class="s1">&#39;new description&#39;</span> <span class="se">\</span>
  --add-volumes 0b3923f5-95a4-4596-a536-914c2c84e2db,1c02528b-3781-4e32-929c-618d81f52cf3 <span class="se">\</span>
  --remove-volumes 8c0f6ae4-efb1-458f-a8fc-9da2afcc5fb1,a245423f-bb99-4f94-8c8c-02806f9246d8 <span class="se">\</span>
  1de80c27-3b2f-47a6-91a7-e867cbe36462
</pre></div>
</div>
<p><strong>Create a consistency group from the snapshot of another consistency
group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src
<span class="go">[--cgsnapshot CGSNAPSHOT]</span>
<span class="go">[--name NAME]</span>
<span class="go">[--description DESCRIPTION]</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal"><span class="pre">CGSNAPSHOT</span></code> is a name or UUID of a snapshot of a
consistency group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src <span class="se">\</span>
  --cgsnapshot 6d9dfb7d-079a-471e-b75a-6e9185ba0c38 <span class="se">\</span>
  --name <span class="s1">&#39;new cg&#39;</span> --description <span class="s1">&#39;new cg from cgsnapshot&#39;</span>
</pre></div>
</div>
<p><strong>Create a consistency group from a source consistency group</strong>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src
<span class="go">[--source-cg SOURCECG]</span>
<span class="go">[--name NAME]</span>
<span class="go">[--description DESCRIPTION]</span>
</pre></div>
</div>
<p>The parameter <code class="docutils literal"><span class="pre">SOURCECG</span></code> is a name or UUID of a source
consistency group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src <span class="se">\</span>
  --source-cg 6d9dfb7d-079a-471e-b75a-6e9185ba0c38 <span class="se">\</span>
  --name <span class="s1">&#39;new cg&#39;</span> --description <span class="s1">&#39;new cloned cg&#39;</span>
</pre></div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="blockstorage-volume-number-weigher.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configure and use volume number weigher"></i></a>
          
          
            <a href="blockstorage-driver-filter-weighing.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure and use driver filter and weighing for scheduler"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 13:52</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get-started-with-openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity-management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="blockstorage.html">Block Storage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="blockstorage-api-throughput.html">Increase Block Storage API service throughput</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="blockstorage-manage-volumes.html">Manage volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="blockstorage-troubleshoot.html">Troubleshoot your installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shared-file-systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">OpenStack command-line clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross-project.html">Cross-project features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="firewalls-default-ports.html">Firewalls and default ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "blockstorage-consistency-groups" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/admin-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 3993c81360ea23a2e599faf5f3de0d288b10c20a";
        var bugProject = "openstack-manuals";
        var bugTitle = "Consistency groups in Administrator Guide";
    var fieldTags = "admin-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 13:52";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>