<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Alarms</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Alarms</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="telemetry-data-retrieval.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Data retrieval"></i></a>
    
    
    <a href="telemetry-measurements.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Measurements"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 08:39</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Alarms</a><ul>
<li><a class="reference internal" href="#alarm-definitions">Alarm definitions</a><ul>
<li><a class="reference internal" href="#threshold-rule-alarms">Threshold rule alarms</a></li>
<li><a class="reference internal" href="#combination-rule-alarms">Combination rule alarms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alarm-dimensioning">Alarm dimensioning</a></li>
<li><a class="reference internal" href="#alarm-evaluation">Alarm evaluation</a><ul>
<li><a class="reference internal" href="#alarm-actions">Alarm actions</a></li>
<li><a class="reference internal" href="#workload-partitioning">Workload partitioning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-alarms">Using alarms</a><ul>
<li><a class="reference internal" href="#alarm-creation">Alarm creation</a></li>
<li><a class="reference internal" href="#alarm-retrieval">Alarm retrieval</a></li>
<li><a class="reference internal" href="#alarm-update">Alarm update</a></li>
<li><a class="reference internal" href="#alarm-deletion">Alarm deletion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="alarms">
<span id="telemetry-alarms"></span><h1>Alarms<a class="headerlink" href="#alarms" title="Permalink to this headline">¶</a></h1>
<p>Alarms provide user-oriented Monitoring-as-a-Service for resources
running on OpenStack. This type of monitoring ensures you can
automatically scale in or out a group of instances through the
Orchestration service, but you can also use alarms for general-purpose
awareness of your cloud resources&#8217; health.</p>
<p>These alarms follow a tri-state model:</p>
<dl class="docutils">
<dt>ok</dt>
<dd>The rule governing the alarm has been evaluated as <code class="docutils literal"><span class="pre">False</span></code>.</dd>
<dt>alarm</dt>
<dd>The rule governing the alarm have been evaluated as <code class="docutils literal"><span class="pre">True</span></code>.</dd>
<dt>insufficient data</dt>
<dd>There are not enough datapoints available in the evaluation periods
to meaningfully determine the alarm state.</dd>
</dl>
<div class="section" id="alarm-definitions">
<h2>Alarm definitions<a class="headerlink" href="#alarm-definitions" title="Permalink to this headline">¶</a></h2>
<p>The definition of an alarm provides the rules that govern when a state
transition should occur, and the actions to be taken thereon. The
nature of these rules depend on the alarm type.</p>
<div class="section" id="threshold-rule-alarms">
<h3>Threshold rule alarms<a class="headerlink" href="#threshold-rule-alarms" title="Permalink to this headline">¶</a></h3>
<p>For conventional threshold-oriented alarms, state transitions are
governed by:</p>
<ul class="simple">
<li>A static threshold value with a comparison operator such as greater
than or less than.</li>
<li>A statistic selection to aggregate the data.</li>
<li>A sliding time window to indicate how far back into the recent past
you want to look.</li>
</ul>
</div>
<div class="section" id="combination-rule-alarms">
<h3>Combination rule alarms<a class="headerlink" href="#combination-rule-alarms" title="Permalink to this headline">¶</a></h3>
<p>The Telemetry service also supports the concept of a meta-alarm, which
aggregates over the current state of a set of underlying basic alarms
combined via a logical operator (AND or OR).</p>
</div>
</div>
<div class="section" id="alarm-dimensioning">
<h2>Alarm dimensioning<a class="headerlink" href="#alarm-dimensioning" title="Permalink to this headline">¶</a></h2>
<p>A key associated concept is the notion of <em>dimensioning</em> which
defines the set of matching meters that feed into an alarm
evaluation. Recall that meters are per-resource-instance, so in the
simplest case an alarm might be defined over a particular meter
applied to all resources visible to a particular user. More useful
however would be the option to explicitly select which specific
resources you are interested in alarming on.</p>
<p>At one extreme you might have narrowly dimensioned alarms where this
selection would have only a single target (identified by resource
ID). At the other extreme, you could have widely dimensioned alarms
where this selection identifies many resources over which the
statistic is aggregated. For example all instances booted from a
particular image or all instances with matching user metadata (the
latter is how the Orchestration service identifies autoscaling
groups).</p>
</div>
<div class="section" id="alarm-evaluation">
<h2>Alarm evaluation<a class="headerlink" href="#alarm-evaluation" title="Permalink to this headline">¶</a></h2>
<p>Alarms are evaluated by the <code class="docutils literal"><span class="pre">alarm-evaluator</span></code> service on a periodic
basis, defaulting to once every minute.</p>
<div class="section" id="alarm-actions">
<h3>Alarm actions<a class="headerlink" href="#alarm-actions" title="Permalink to this headline">¶</a></h3>
<p>Any state transition of individual alarm (to <code class="docutils literal"><span class="pre">ok</span></code>, <code class="docutils literal"><span class="pre">alarm</span></code>, or
<code class="docutils literal"><span class="pre">insufficient</span> <span class="pre">data</span></code>) may have one or more actions associated with
it. These actions effectively send a signal to a consumer that the
state transition has occurred, and provide some additional context.
This includes the new and previous states, with some reason data
describing the disposition with respect to the threshold, the number
of datapoints involved and most recent of these. State transitions
are detected by the <code class="docutils literal"><span class="pre">alarm-evaluator</span></code>, whereas the
<code class="docutils literal"><span class="pre">alarm-notifier</span></code> effects the actual notification action.</p>
<p><strong>Webhooks</strong></p>
<p>These are the <em>de facto</em> notification type used by Telemetry alarming
and simply involve an HTTP POST request being sent to an endpoint,
with a request body containing a description of the state transition
encoded as a JSON fragment.</p>
<p><strong>Log actions</strong></p>
<p>These are a lightweight alternative to webhooks, whereby the state
transition is simply logged by the <code class="docutils literal"><span class="pre">alarm-notifier</span></code>, and are
intended primarily for testing purposes.</p>
</div>
<div class="section" id="workload-partitioning">
<h3>Workload partitioning<a class="headerlink" href="#workload-partitioning" title="Permalink to this headline">¶</a></h3>
<p>The alarm evaluation process uses the same mechanism for workload
partitioning as the central and compute agents. The
<a class="reference external" href="https://pypi.python.org/pypi/tooz">Tooz</a> library provides the
coordination within the groups of service instances. For further
information about this approach, see the section called
<a class="reference internal" href="telemetry-data-collection.html#ha-deploy-services"><span class="std std-ref">Support for HA deployment of the central and compute agent services</span></a>.</p>
<p>To use this workload partitioning solution set the
<code class="docutils literal"><span class="pre">evaluation_service</span></code> option to <code class="docutils literal"><span class="pre">default</span></code>. For more
information, see the alarm section in the
<a class="reference external" href="https://docs.openstack.org/newton/config-reference/telemetry.html">OpenStack Configuration Reference</a>.</p>
</div>
</div>
<div class="section" id="using-alarms">
<h2>Using alarms<a class="headerlink" href="#using-alarms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="alarm-creation">
<h3>Alarm creation<a class="headerlink" href="#alarm-creation" title="Permalink to this headline">¶</a></h3>
<p>An example of creating a threshold-oriented alarm, based on an upper
bound on the CPU utilization for a particular instance:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-threshold-create --name cpu_hi <span class="se">\</span>
  --description <span class="s1">&#39;instance running hot&#39;</span> <span class="se">\</span>
  --meter-name cpu_util --threshold <span class="m">70</span>.0 <span class="se">\</span>
  --comparison-operator gt --statistic avg <span class="se">\</span>
  --period <span class="m">600</span> --evaluation-periods <span class="m">3</span> <span class="se">\</span>
  --alarm-action <span class="s1">&#39;log://&#39;</span> <span class="se">\</span>
  --query <span class="nv">resource_id</span><span class="o">=</span>INSTANCE_ID
</pre></div>
</div>
<p>This creates an alarm that will fire when the average CPU utilization
for an individual instance exceeds 70% for three consecutive 10
minute periods. The notification in this case is simply a log message,
though it could alternatively be a webhook URL.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Alarm names must be unique for the alarms associated with an
individual project. Administrator can limit the maximum
resulting actions for three different states, and the
ability for a normal user to create <code class="docutils literal"><span class="pre">log://</span></code> and <code class="docutils literal"><span class="pre">test://</span></code>
notifiers is disabled. This prevents unintentional
consumption of disk and memory resources by the
Telemetry service.</p>
</div>
<p>The sliding time window over which the alarm is evaluated is 30
minutes in this example. This window is not clamped to wall-clock
time boundaries, rather it&#8217;s anchored on the current time for each
evaluation cycle, and continually creeps forward as each evaluation
cycle rolls around (by default, this occurs every minute).</p>
<p>The period length is set to 600s in this case to reflect the
out-of-the-box default cadence for collection of the associated
meter. This period matching illustrates an important general
principal to keep in mind for alarms:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The alarm period should be a whole number multiple (1 or more)
of the interval configured in the pipeline corresponding to the
target meter.</p>
</div>
<p>Otherwise the alarm will tend to flit in and out of the
<code class="docutils literal"><span class="pre">insufficient</span> <span class="pre">data</span></code> state due to the mismatch between the actual
frequency of datapoints in the metering store and the statistics
queries used to compare against the alarm threshold. If a shorter
alarm period is needed, then the corresponding interval should be
adjusted in the <code class="docutils literal"><span class="pre">pipeline.yaml</span></code> file.</p>
<p>Other notable alarm attributes that may be set on creation, or via a
subsequent update, include:</p>
<dl class="docutils">
<dt>state</dt>
<dd>The initial alarm state (defaults to <code class="docutils literal"><span class="pre">insufficient</span> <span class="pre">data</span></code>).</dd>
<dt>description</dt>
<dd>A free-text description of the alarm (defaults to a synopsis of the
alarm rule).</dd>
<dt>enabled</dt>
<dd>True if evaluation and actioning is to be enabled for this alarm
(defaults to <code class="docutils literal"><span class="pre">True</span></code>).</dd>
<dt>repeat-actions</dt>
<dd>True if actions should be repeatedly notified while the alarm
remains in the target state (defaults to <code class="docutils literal"><span class="pre">False</span></code>).</dd>
<dt>ok-action</dt>
<dd>An action to invoke when the alarm state transitions to <code class="docutils literal"><span class="pre">ok</span></code>.</dd>
<dt>insufficient-data-action</dt>
<dd>An action to invoke when the alarm state transitions to
<code class="docutils literal"><span class="pre">insufficient</span> <span class="pre">data</span></code>.</dd>
<dt>time-constraint</dt>
<dd>Used to restrict evaluation of the alarm to certain times of the
day or days of the week (expressed as <code class="docutils literal"><span class="pre">cron</span></code> expression with an
optional timezone).</dd>
</dl>
<p>An example of creating a combination alarm, based on the combined
state of two underlying alarms:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-combination-create --name meta <span class="se">\</span>
  --alarm_ids ALARM_ID1 <span class="se">\</span>
  --alarm_ids ALARM_ID2 <span class="se">\</span>
  --operator or <span class="se">\</span>
  --alarm-action <span class="s1">&#39;http://example.org/notify&#39;</span>
</pre></div>
</div>
<p>This creates an alarm that will fire when either one of two underlying
alarms transition into the alarm state. The notification in this case
is a webhook call. Any number of underlying alarms can be combined in
this way, using either <code class="docutils literal"><span class="pre">and</span></code> or <code class="docutils literal"><span class="pre">or</span></code>.</p>
</div>
<div class="section" id="alarm-retrieval">
<h3>Alarm retrieval<a class="headerlink" href="#alarm-retrieval" title="Permalink to this headline">¶</a></h3>
<p>You can display all your alarms via (some attributes are omitted for
brevity):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-list
<span class="go">+----------+--------+-------------------+---------------------------------+</span>
<span class="go">| Alarm ID | Name   | State             | Alarm condition                 |</span>
<span class="go">+----------+--------+-------------------+---------------------------------+</span>
<span class="go">| ALARM_ID | cpu_hi | insufficient data | cpu_util &gt; 70.0 during 3 x 600s |</span>
<span class="go">+----------+--------+-------------------+---------------------------------+</span>
</pre></div>
</div>
<p>In this case, the state is reported as <code class="docutils literal"><span class="pre">insufficient</span> <span class="pre">data</span></code> which
could indicate that:</p>
<ul class="simple">
<li>meters have not yet been gathered about this instance over the
evaluation window into the recent past (for example a brand-new
instance)</li>
<li><em>or</em>, that the identified instance is not visible to the
user/project owning the alarm</li>
<li><em>or</em>, simply that an alarm evaluation cycle hasn&#8217;t kicked off since
the alarm was created (by default, alarms are evaluated once per
minute).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The visibility of alarms depends on the role and project
associated with the user issuing the query:</p>
<ul class="last simple">
<li>admin users see <em>all</em> alarms, regardless of the owner</li>
<li>non-admin users see only the alarms associated with their project
(as per the normal project segregation in OpenStack)</li>
</ul>
</div>
</div>
<div class="section" id="alarm-update">
<h3>Alarm update<a class="headerlink" href="#alarm-update" title="Permalink to this headline">¶</a></h3>
<p>Once the state of the alarm has settled down, we might decide that we
set that bar too low with 70%, in which case the threshold (or most
any other alarm attribute) can be updated thusly:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-update --threshold <span class="m">75</span> ALARM_ID
</pre></div>
</div>
<p>The change will take effect from the next evaluation cycle, which by
default occurs every minute.</p>
<p>Most alarm attributes can be changed in this way, but there is also
a convenient short-cut for getting and setting the alarm state:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-state-get ALARM_ID
<span class="gp">$</span> ceilometer alarm-state-set --state ok -a ALARM_ID
</pre></div>
</div>
<p>Over time the state of the alarm may change often, especially if the
threshold is chosen to be close to the trending value of the
statistic. You can follow the history of an alarm over its lifecycle
via the audit API:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-history ALARM_ID
<span class="go">+------------------+-----------+---------------------------------------+</span>
<span class="go">| Type             | Timestamp | Detail                                |</span>
<span class="go">+------------------+-----------+---------------------------------------+</span>
<span class="go">| creation         | time0     | name: cpu_hi                          |</span>
<span class="go">|                  |           | description: instance running hot     |</span>
<span class="go">|                  |           | type: threshold                       |</span>
<span class="go">|                  |           | rule: cpu_util &gt; 70.0 during 3 x 600s |</span>
<span class="go">| state transition | time1     | state: ok                             |</span>
<span class="go">| rule change      | time2     | rule: cpu_util &gt; 75.0 during 3 x 600s |</span>
<span class="go">+------------------+-----------+---------------------------------------+</span>
</pre></div>
</div>
</div>
<div class="section" id="alarm-deletion">
<h3>Alarm deletion<a class="headerlink" href="#alarm-deletion" title="Permalink to this headline">¶</a></h3>
<p>An alarm that is no longer required can be disabled so that it is no
longer actively evaluated:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-update --enabled False -a ALARM_ID
</pre></div>
</div>
<p>or even deleted permanently (an irreversible step):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ceilometer alarm-delete ALARM_ID
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, alarm history is retained for deleted alarms.</p>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="telemetry-data-retrieval.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Data retrieval"></i></a>
          
          
            <a href="telemetry-measurements.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Measurements"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 08:39</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get-started-with-openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity-management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared-file-systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="telemetry.html">Telemetry</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="telemetry-system-architecture.html">System architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-data-collection.html">Data collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-data-pipelines.html">Data collection, processing, and pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-data-retrieval.html">Data retrieval</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Alarms</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-measurements.html">Measurements</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-troubleshooting-guide.html">Troubleshoot Telemetry</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry-best-practices.html">Telemetry best practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">OpenStack command-line clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross-project.html">Cross-project features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="firewalls-default-ports.html">Firewalls and default ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "telemetry-alarms" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/admin-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 0719207c6d82d2c215b9c13234f3a27478e0c0f3";
        var bugProject = "openstack-manuals";
        var bugTitle = "Alarms in Administrator Guide";
    var fieldTags = "admin-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.9 on 2017-02-14 08:39";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>