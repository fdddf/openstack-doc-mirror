<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nova-manage &mdash; nova 15.0.0.0rc2.dev69 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/support-matrix.css" type="text/css" />
    <link rel="stylesheet" href="../_static/feature-matrix.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '15.0.0.0rc2.dev69',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="nova 15.0.0.0rc2.dev69 documentation" href="../index.html" />
    <link rel="up" title="Command-line Utilities" href="index.html" />
    <link rel="next" title="nova-network" href="nova-network.html" />
    <link rel="prev" title="nova-idmapshift" href="nova-idmapshift.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="nova-manage">
<h1>nova-manage<a class="headerlink" href="#nova-manage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="control-and-manage-cloud-computer-instances">
<h2>control and manage cloud computer instances<a class="headerlink" href="#control-and-manage-cloud-computer-instances" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body"><a class="reference external" href="mailto:openstack&#37;&#52;&#48;lists&#46;openstack&#46;org">openstack<span>&#64;</span>lists<span>&#46;</span>openstack<span>&#46;</span>org</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">2017-01-15</td>
</tr>
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body">OpenStack Foundation</td>
</tr>
<tr class="field-even field"><th class="field-name">Version:</th><td class="field-body">15.0.0</td>
</tr>
<tr class="field-odd field"><th class="field-name">Manual section:</th><td class="field-body">1</td>
</tr>
<tr class="field-even field"><th class="field-name">Manual group:</th><td class="field-body">cloud computing</td>
</tr>
</tbody>
</table>
<div class="section" id="synopsis">
<h3>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>nova-manage &lt;category&gt; &lt;action&gt; [&lt;args&gt;]</div></blockquote>
</div>
<div class="section" id="description">
<h3>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>nova-manage controls cloud computing instances by managing shell selection, vpn connections, and floating IP address configuration. More information about OpenStack Nova is at <a class="reference external" href="http://nova.openstack.org">http://nova.openstack.org</a>.</p>
</div>
<div class="section" id="options">
<h3>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>The standard pattern for executing a nova-manage command is:
<code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">&lt;category&gt;</span> <span class="pre">&lt;command&gt;</span> <span class="pre">[&lt;args&gt;]</span></code></p>
<p>Run without arguments to see a list of available command categories:
<code class="docutils literal"><span class="pre">nova-manage</span></code></p>
<p>You can also run with a category argument such as user to see a list of all commands in that category:
<code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">db</span></code></p>
<p>These sections describe the available categories and arguments for nova-manage.</p>
<div class="section" id="nova-database">
<h4>Nova Database<a class="headerlink" href="#nova-database" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">db</span> <span class="pre">version</span></code></p>
<blockquote>
<div>Print the current main database version.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">db</span> <span class="pre">sync</span> <span class="pre">[--version</span> <span class="pre">&lt;version&gt;]</span> <span class="pre">[--local_cell]</span></code></p>
<blockquote>
<div>Upgrade the main database schema up to the most recent version or
<code class="docutils literal"><span class="pre">--version</span></code> if specified. By default, this command will also attempt to
upgrade the schema for the cell0 database if it is mapped (see the
<code class="docutils literal"><span class="pre">map_cell0</span></code> or <code class="docutils literal"><span class="pre">simple_cell_setup</span></code> commands for more details on mapping
the cell0 database). If <code class="docutils literal"><span class="pre">--local_cell</span></code> is specified, then only the main
database in the current cell is upgraded. The local database connection is
determined by <code class="docutils literal"><span class="pre">[database]/connection</span></code> in the configuration file passed to
nova-manage.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">db</span> <span class="pre">archive_deleted_rows</span> <span class="pre">[--max_rows</span> <span class="pre">&lt;number&gt;]</span> <span class="pre">[--verbose]</span></code></p>
<blockquote>
<div>Move deleted rows from production tables to shadow tables. Specifying
&#8211;verbose will print the results of the archive operation for any tables
that were changed.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">db</span> <span class="pre">null_instance_uuid_scan</span> <span class="pre">[--delete]</span></code></p>
<blockquote>
<div>Lists and optionally deletes database records where instance_uuid is NULL.</div></blockquote>
</div>
<div class="section" id="nova-api-database">
<h4>Nova API Database<a class="headerlink" href="#nova-api-database" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">api_db</span> <span class="pre">version</span></code></p>
<blockquote>
<div>Print the current cells api database version.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">api_db</span> <span class="pre">sync</span></code></p>
<blockquote>
<div>Sync the api cells database up to the most recent version. This is the standard way to create the db as well.</div></blockquote>
</div>
<div class="section" id="nova-cells-v2">
<h4>Nova Cells v2<a class="headerlink" href="#nova-cells-v2" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">simple_cell_setup</span> <span class="pre">[--transport-url</span> <span class="pre">&lt;transport_url&gt;]</span></code></p>
<blockquote>
<div>Setup a fresh cells v2 environment; this should not be used if you
currently have a cells v1 environment. Returns 0 if setup is completed
(or has already been done), 1 if no hosts are reporting (and cannot be
mapped), 1 if no transport url is provided for the cell message queue,
and 2 if run in a cells v1 environment.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">map_cell0</span> <span class="pre">[--database_connection</span> <span class="pre">&lt;database_connection&gt;]</span></code></p>
<blockquote>
<div>Create a cell mapping to the database connection for the cell0 database.
If a database_connection is not specified, it will use the one defined by
<code class="docutils literal"><span class="pre">[database]/connection</span></code> in the configuration file passed to nova-manage.
The cell0 database is used for instances that have not been scheduled to
any cell. This generally applies to instances that have encountered an
error before they have been scheduled. Returns 0 if cell0 is created
successfully or already setup.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">map_instances</span> <span class="pre">--cell_uuid</span> <span class="pre">&lt;cell_uuid&gt;</span> <span class="pre">[--max-count</span> <span class="pre">&lt;max_count&gt;]</span></code></p>
<blockquote>
<div>Map instances to the provided cell. Instances in the nova database will
be queried from oldest to newest and mapped to the provided cell. A
max_count can be set on the number of instance to map in a single run.
Repeated runs of the command will start from where the last run finished
so it is not necessary to increase max-count to finish. Returns 0 if all
instances have been mapped, and 1 if there are still instances to be
mapped.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">map_cell_and_hosts</span> <span class="pre">[--name</span> <span class="pre">&lt;cell_name&gt;]</span> <span class="pre">[--transport-url</span> <span class="pre">&lt;transport_url&gt;]</span> <span class="pre">[--verbose]</span></code></p>
<blockquote>
<div>Create a cell mapping to the database connection and message queue
transport url, and map hosts to that cell. The database connection
comes from the <code class="docutils literal"><span class="pre">[database]/connection</span></code> defined in the configuration
file passed to nova-manage. If a transport_url is not specified, it will
use the one defined by <code class="docutils literal"><span class="pre">[DEFAULT]/transport_url</span></code> in the configuration
file. This command is idempotent (can be run multiple times), and the
verbose option will print out the resulting cell mapping uuid. Returns 0
on successful completion, and 1 if the transport url is missing.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">verify_instance</span> <span class="pre">--uuid</span> <span class="pre">&lt;instance_uuid&gt;</span> <span class="pre">[--quiet]</span></code></p>
<blockquote>
<div>Verify instance mapping to a cell. This command is useful to determine if
the cells v2 environment is properly setup, specifically in terms of the
cell, host, and instance mapping records required. Returns 0 when the
instance is successfully mapped to a cell, 1 if the instance is not
mapped to a cell (see the <code class="docutils literal"><span class="pre">map_instances</span></code> command), and 2 if the cell
mapping is missing (see the <code class="docutils literal"><span class="pre">map_cell_and_hosts</span></code> command if you are
upgrading from a cells v1 environment, and the <code class="docutils literal"><span class="pre">simple_cell_setup</span></code> if
you are upgrading from a non-cells v1 environment).</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">create_cell</span> <span class="pre">[--name</span> <span class="pre">&lt;cell_name&gt;]</span> <span class="pre">[--transport-url</span> <span class="pre">&lt;transport_url&gt;]</span> <span class="pre">[--database_connection</span> <span class="pre">&lt;database_connection&gt;]</span> <span class="pre">[--verbose]</span></code></p>
<blockquote>
<div>Create a cell mapping to the database connection and message queue
transport url. If a database_connection is not specified, it will use
the one defined by <code class="docutils literal"><span class="pre">[database]/connection</span></code> in the configuration file
passed to nova-manage. If a transport_url is not specified, it will use
the one defined by <code class="docutils literal"><span class="pre">[DEFAULT]/transport_url</span></code> in the configuration file.
The verbose option will print out the resulting cell mapping uuid.
Returns 0 if the cell mapping was successfully created, 1 if the
transport url or database connection was missing, and 2 if a cell is
already using that transport url and database connection combination.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">discover_hosts</span> <span class="pre">[--cell_uuid</span> <span class="pre">&lt;cell_uuid&gt;]</span> <span class="pre">[--verbose]</span></code></p>
<blockquote>
<div>Searches cells, or a single cell, and maps found hosts. This command will
check the database for each cell (or a single one if passed in) and map
any hosts which are not currently mapped. If a host is already mapped
nothing will be done. You need to re-run this command each time you add
more compute hosts to a cell (otherwise the scheduler will never place
instances there).</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">list_cells</span> <span class="pre">[--verbose]</span></code></p>
<blockquote>
<div>Lists the v2 cells in the deployment. By default only the cell name and
uuid are shown. Use the &#8211;verbose option to see transport url and
database connection details.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">delete_cell</span> <span class="pre">--cell_uuid</span> <span class="pre">&lt;cell_uuid&gt;</span></code></p>
<blockquote>
<div>Delete an empty cell by the given uuid. Returns 0 if the empty cell is
found and deleted successfully, 1 if a cell with that uuid could not be
found, 2 if host mappings were found for the cell (cell not empty), and
3 if there are instances mapped to the cell (cell not empty).</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">cell_v2</span> <span class="pre">update_cell</span> <span class="pre">--cell_uuid</span> <span class="pre">&lt;cell_uuid&gt;</span> <span class="pre">[--name</span> <span class="pre">&lt;cell_name&gt;]</span> <span class="pre">[--transport-url</span> <span class="pre">&lt;transport_url&gt;]</span> <span class="pre">[--database_connection</span> <span class="pre">&lt;database_connection&gt;]</span></code></p>
<blockquote>
<div><p>Updates the properties of a cell by the given uuid. If the cell is not
found by uuid, this command will return an exit code of 1. If the
properties cannot be set, this will return 2. Otherwise, the exit code
will be 0.</p>
<p>NOTE: Updating the transport_url or database_connection fields on
a running system will NOT result in all nodes immediately using the
new values. Use caution when changing these values.</p>
</div></blockquote>
</div>
<div class="section" id="nova-logs">
<h4>Nova Logs<a class="headerlink" href="#nova-logs" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">logs</span> <span class="pre">errors</span></code></p>
<blockquote>
<div>Displays nova errors from log files.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">logs</span> <span class="pre">syslog</span> <span class="pre">&lt;number&gt;</span></code></p>
<blockquote>
<div>Displays nova alerts from syslog.</div></blockquote>
</div>
<div class="section" id="nova-shell">
<h4>Nova Shell<a class="headerlink" href="#nova-shell" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">shell</span> <span class="pre">bpython</span></code></p>
<blockquote>
<div>Starts a new bpython shell.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">shell</span> <span class="pre">ipython</span></code></p>
<blockquote>
<div>Starts a new ipython shell.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">shell</span> <span class="pre">python</span></code></p>
<blockquote>
<div>Starts a new python shell.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">shell</span> <span class="pre">run</span></code></p>
<blockquote>
<div>Starts a new shell using python.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">shell</span> <span class="pre">script</span> <span class="pre">&lt;path/scriptname&gt;</span></code></p>
<blockquote>
<div>Runs the named script from the specified path with flags set.</div></blockquote>
</div>
<div class="section" id="nova-project">
<h4>Nova Project<a class="headerlink" href="#nova-project" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">project</span> <span class="pre">quota</span> <span class="pre">&lt;project_id&gt;</span> <span class="pre">[--user</span> <span class="pre">&lt;user_id&gt;]</span> <span class="pre">[--key</span> <span class="pre">&lt;key&gt;]</span> <span class="pre">[--value</span> <span class="pre">&lt;value&gt;]</span></code></p>
<blockquote>
<div>Create, update or display quotas for project/user.  If a key is
not specified then the current usages are displayed.</div></blockquote>
<p><code class="docutils literal"><span class="pre">nova-manage</span> <span class="pre">project</span> <span class="pre">quota_usage_refresh</span> <span class="pre">&lt;project_id&gt;</span> <span class="pre">[--user</span> <span class="pre">&lt;user_id&gt;]</span> <span class="pre">[--key</span> <span class="pre">&lt;key&gt;]</span></code></p>
<blockquote>
<div>Refresh the quota usages for the project/user so that the
usage record matches the actual used.  If a key is not specified
then all quota usages relevant to the project/user are refreshed.</div></blockquote>
</div>
</div>
<div class="section" id="see-also">
<h3>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://nova.openstack.org">OpenStack Nova</a></li>
</ul>
</div>
<div class="section" id="bugs">
<h3>BUGS<a class="headerlink" href="#bugs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Nova bugs are managed at Launchpad <a class="reference external" href="https://bugs.launchpad.net/nova">Bugs : Nova</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">nova-manage</a><ul>
<li><a class="reference internal" href="#control-and-manage-cloud-computer-instances">control and manage cloud computer instances</a><ul>
<li><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li><a class="reference internal" href="#options">OPTIONS</a><ul>
<li><a class="reference internal" href="#nova-database">Nova Database</a></li>
<li><a class="reference internal" href="#nova-api-database">Nova API Database</a></li>
<li><a class="reference internal" href="#nova-cells-v2">Nova Cells v2</a></li>
<li><a class="reference internal" href="#nova-logs">Nova Logs</a></li>
<li><a class="reference internal" href="#nova-shell">Nova Shell</a></li>
<li><a class="reference internal" href="#nova-project">Nova Project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
<li><a class="reference internal" href="#bugs">BUGS</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="nova-idmapshift.html"
                                  title="previous chapter">nova-idmapshift</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="nova-network.html"
                                  title="next chapter">nova-network</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/nova
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/man/nova-manage.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="nova-network.html" title="nova-network"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nova-idmapshift.html" title="nova-idmapshift"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">nova 15.0.0.0rc2.dev69 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Command-line Utilities</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-present, OpenStack Foundation.
      Last updated on &#39;Tue Feb 14 09:22:31 2017, commit 159bf6e&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/nova");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>