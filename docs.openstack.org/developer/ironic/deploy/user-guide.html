<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction to Ironic &mdash; Ironic 6.3.0.dev823 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/toggle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.3.0.dev823',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/toggle.js"></script>
    <link rel="top" title="Ironic 6.3.0.dev823 documentation" href="../index.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-to-ironic">
<span id="user-guide"></span><h1>Introduction to Ironic<a class="headerlink" href="#introduction-to-ironic" title="Permalink to this headline">¶</a></h1>
<p>Ironic is an OpenStack project which provisions bare metal (as opposed to
virtual) machines. It may be used independently or as part of an OpenStack
Cloud, and integrates with the OpenStack Identity (keystone), Compute (nova),
Network (neutron), Image (glance) and Object (swift) services.</p>
<p>When the Bare Metal service is appropriately configured with the Compute and
Network services, it is possible to provision both virtual and physical
machines through the Compute service&#8217;s API. However, the set of instance
actions is limited, arising from the different characteristics of physical
servers and switch hardware. For example, live migration can not be performed
on a bare metal instance.</p>
<p>The community maintains reference drivers that leverage open-source
technologies (eg. PXE and IPMI) to cover a wide range of hardware. Ironic&#8217;s
pluggable driver architecture also allows hardware vendors to write and
contribute drivers that may improve performance or add functionality not
provided by the community drivers.</p>
<div class="section" id="why-provision-bare-metal">
<h2>Why Provision Bare Metal<a class="headerlink" href="#why-provision-bare-metal" title="Permalink to this headline">¶</a></h2>
<p>Here are a few use-cases for bare metal (physical server) provisioning in
cloud; there are doubtless many more interesting ones:</p>
<ul class="simple">
<li>High-performance computing clusters</li>
<li>Computing tasks that require access to hardware devices which can&#8217;t be
virtualized</li>
<li>Database hosting (some databases run poorly in a hypervisor)</li>
<li>Single tenant, dedicated hardware for performance, security, dependability
and other regulatory requirements</li>
<li>Or, rapidly deploying a cloud infrastructure</li>
</ul>
</div>
<div class="section" id="conceptual-architecture">
<h2>Conceptual Architecture<a class="headerlink" href="#conceptual-architecture" title="Permalink to this headline">¶</a></h2>
<p>The following diagram shows the relationships and how all services come into
play during the provisioning of a physical server. (Note that Ceilometer and
Swift can be used with Ironic, but are missing from this diagram.)</p>
<div class="figure">
<img alt="ConceptualArchitecture" src="../_images/conceptual_architecture.png" />
</div>
</div>
<div class="section" id="logical-architecture">
<h2>Logical Architecture<a class="headerlink" href="#logical-architecture" title="Permalink to this headline">¶</a></h2>
<p>The diagram below shows the logical architecture. It shows the basic
components that form the Ironic service, the relation of Ironic service with
other OpenStack services and the logical flow of a boot instance request
resulting in the provisioning of a physical server.</p>
<div class="figure">
<img alt="Logical Architecture" src="../_images/logical_architecture.png" />
</div>
<p>The Ironic service is composed of the following components:</p>
<ol class="arabic simple">
<li>a RESTful API service, by which operators and other services may interact
with the managed bare metal servers.</li>
<li>a Conductor service, which does the bulk of the work. Functionality is
exposed via the API service. The Conductor and API services communicate
via RPC.</li>
<li>various Drivers that support heterogeneous hardware</li>
<li>a Message Queue</li>
<li>a Database for storing information about the resources. Among other things,
this includes the state of the conductors, nodes (physical servers), and
drivers.</li>
</ol>
<p>As in Figure 1.2. Logical Architecture, a user request to boot an instance is
passed to the Nova Compute service via Nova API and Nova Scheduler. The Compute
service hands over this request to the Ironic service, where the request passes
from the Ironic API, to the Conductor, to a Driver to successfully provision a
physical server for the user.</p>
<p>Just as the Nova Compute service talks to various OpenStack services like
Glance, Neutron, Swift etc to provision a virtual machine instance, here the
Ironic service talks to the same OpenStack services for image, network and
other resource needs to provision a bare metal instance.</p>
</div>
<div class="section" id="key-technologies-for-bare-metal-hosting">
<h2>Key Technologies for Bare Metal Hosting<a class="headerlink" href="#key-technologies-for-bare-metal-hosting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="preboot-execution-environment-pxe">
<h3>Preboot Execution Environment (PXE)<a class="headerlink" href="#preboot-execution-environment-pxe" title="Permalink to this headline">¶</a></h3>
<p>PXE is part of the Wired for Management (WfM) specification developed by Intel
and Microsoft. The PXE enables system&#8217;s BIOS and network interface card (NIC)
to bootstrap a computer from the network in place of a disk. Bootstrapping is
the process by which a system loads the OS into local memory so that it can be
executed by the processor. This capability of allowing a system to boot over a
network simplifies server deployment and server management for administrators.</p>
</div>
<div class="section" id="dynamic-host-configuration-protocol-dhcp">
<h3>Dynamic Host Configuration Protocol (DHCP)<a class="headerlink" href="#dynamic-host-configuration-protocol-dhcp" title="Permalink to this headline">¶</a></h3>
<p>DHCP is a standardized networking protocol used on Internet Protocol (IP)
networks for dynamically distributing network configuration parameters, such
as IP addresses for interfaces and services. Using PXE, the BIOS uses DHCP to
obtain an IP address for the network interface and to locate the server that
stores the network bootstrap program (NBP).</p>
</div>
<div class="section" id="network-bootstrap-program-nbp">
<h3>Network Bootstrap Program (NBP)<a class="headerlink" href="#network-bootstrap-program-nbp" title="Permalink to this headline">¶</a></h3>
<p>NBP is equivalent to GRUB (GRand Unified Bootloader) or LILO (LInux LOader) -
loaders which are traditionally used in local booting. Like the boot program
in a hard drive environment, the NBP is responsible for loading the OS kernel
into memory so that the OS can be bootstrapped over a network.</p>
</div>
<div class="section" id="trivial-file-transfer-protocol-tftp">
<h3>Trivial File Transfer Protocol (TFTP)<a class="headerlink" href="#trivial-file-transfer-protocol-tftp" title="Permalink to this headline">¶</a></h3>
<p>TFTP is a simple file transfer protocol that is generally used for automated
transfer of configuration or boot files between machines in a local
environment.  In a PXE environment, TFTP is used to download NBP over the
network using information from the DHCP server.</p>
</div>
<div class="section" id="intelligent-platform-management-interface-ipmi">
<h3>Intelligent Platform Management Interface (IPMI)<a class="headerlink" href="#intelligent-platform-management-interface-ipmi" title="Permalink to this headline">¶</a></h3>
<p>IPMI is a standardized computer system interface used by system administrators
for out-of-band management of computer systems and monitoring of their
operation. It is a method to manage systems that may be unresponsive or powered
off by using only a network connection to the hardware rather than to an
operating system.</p>
</div>
</div>
<div class="section" id="ironic-deployment-architecture">
<h2>Ironic Deployment Architecture<a class="headerlink" href="#ironic-deployment-architecture" title="Permalink to this headline">¶</a></h2>
<p>The Ironic RESTful API service is used to enroll hardware that Ironic will
manage. A cloud administrator usually registers the hardware, specifying their
attributes such as MAC addresses and IPMI credentials. There can be multiple
instances of the API service.</p>
<p>The Ironic conductor service does the bulk of the work.
For security reasons, it is advisable to place the conductor service on
an isolated host, since it is the only service that requires access to both
the data plane and IPMI control plane.</p>
<p>There can be multiple instances of the conductor service to support
various class of drivers and also to manage fail over. Instances of the
conductor service should be on separate nodes. Each conductor can itself run
many drivers to operate heterogeneous hardware. This is depicted in the
following figure.</p>
<p>The API exposes a list of supported drivers and the names of conductor hosts
servicing them.</p>
<div class="figure">
<img alt="Deployment Architecture 2" src="../_images/deployment_architecture_2.png" />
</div>
</div>
<div class="section" id="understanding-bare-metal-deployment">
<h2>Understanding Bare Metal Deployment<a class="headerlink" href="#understanding-bare-metal-deployment" title="Permalink to this headline">¶</a></h2>
<p>What happens when a boot instance request comes in? The below diagram walks
through the steps involved during the provisioning of a bare metal instance.</p>
<p>These pre-requisites must be met before the deployment process:</p>
<ul>
<li><p class="first">Dependent packages to be configured on the Bare Metal service node(s)
where ironic-conductor is running like tftp-server, ipmi, syslinux etc for
bare metal provisioning.</p>
</li>
<li><p class="first">Nova must be configured to make use of the bare metal service endpoint
and compute driver should be configured to use ironic driver on the Nova
compute node(s).</p>
</li>
<li><p class="first">Flavors to be created for the available hardware. Nova must know the flavor
to boot from.</p>
</li>
<li><p class="first">Images to be made available in Glance. Listed below are some image types
required for successful bare metal deployment:</p>
<blockquote>
<div><ul class="simple">
<li>bm-deploy-kernel</li>
<li>bm-deploy-ramdisk</li>
<li>user-image</li>
<li>user-image-vmlinuz</li>
<li>user-image-initrd</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Hardware to be enrolled via Ironic RESTful API service.</p>
</li>
</ul>
<div class="figure">
<img alt="Deployment Steps" src="../_images/deployment_steps.png" />
</div>
<div class="section" id="deploy-process">
<h3>Deploy Process<a class="headerlink" href="#deploy-process" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">A boot instance request comes in via the Nova API, through the message
queue to the Nova scheduler.</p>
</li>
<li><p class="first">Nova scheduler applies filter and finds the eligible compute node. Nova
scheduler uses flavor extra_specs detail such as &#8216;cpu_arch&#8217;,
&#8216;baremetal:deploy_kernel_id&#8217;, &#8216;baremetal:deploy_ramdisk_id&#8217; etc to match
the target physical node.</p>
</li>
<li><p class="first">A spawn task is placed by the driver which contains all information such
as which image to boot from etc. It invokes the driver.spawn from the
virt layer of Nova compute.</p>
</li>
<li><p class="first">Information about the bare metal node is retrieved from the bare metal
database and the node is reserved.</p>
</li>
<li><p class="first">Images from Glance are pulled down to the local disk of the Ironic
conductor servicing the bare metal node.</p>
<ol class="arabic simple">
<li>For pxe_* drivers these include all images: both the deploy ramdisk and
user instance images.</li>
<li>For agent_* drivers only the deploy ramdisk is stored locally. Temporary
URLs in OpenStack&#8217;s Object Storage service are created for user instance
images.</li>
</ol>
</li>
<li><p class="first">Virtual interfaces are plugged in and Neutron API updates DHCP port to
support PXE/TFTP options.</p>
</li>
<li><p class="first">Nova&#8217;s ironic driver issues a deploy request via the Ironic API to the
Ironic conductor servicing the bare metal node.</p>
</li>
<li><p class="first">PXE driver prepares tftp bootloader.</p>
</li>
<li><p class="first">The IPMI driver issues command to enable network boot of a node and power
it on.</p>
</li>
<li><p class="first">The DHCP boots the deploy ramdisk. Next, depending on the exact driver
used, either the conductor copies the image over iSCSI to the physical node
(pxe_* group of drivers) or the deploy ramdisk downloads the image from
a temporary URL (agent_* group of drivers), which can be generated by
a variety of object stores, e.g. <em>swift</em>, <em>radosgw</em>, etc, and uploaded
to OpenStack&#8217;s Object Storage service. In the former case, the conductor
connects to the iSCSI end point, partitions volume, &#8220;dd&#8221; the image and
closes the iSCSI connection.</p>
<p>The deployment is done. The Ironic conductor will switch pxe config to service
mode and notify ramdisk agent on the successful deployment.</p>
</li>
<li><p class="first">The IPMI driver reboots the bare metal node. Note that there are 2 power
cycles during bare metal deployment; the first time when powered-on, the
images get deployed as mentioned in step 9. The second time as in this case,
after the images are deployed, the node is powered up.</p>
</li>
<li><p class="first">The bare metal node status is updated and the node instance is made
available.</p>
</li>
</ol>
</div>
<div class="section" id="example-1-pxe-boot-and-iscsi-deploy-process">
<h3>Example 1: PXE Boot and iSCSI Deploy Process<a class="headerlink" href="#example-1-pxe-boot-and-iscsi-deploy-process" title="Permalink to this headline">¶</a></h3>
<p>This process is used with pxe_* family of drivers.</p>
<div><svg height="1025.6" viewBox="0 0 1506 1282" width="1204.8" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc />
  <polygon fill="rgb(0,0,0)" points="397,48 512,48 520,56 520,82 397,82 397,48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="317" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="567" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="817" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1067" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1317" y="7" />
  <path d="M 128 41 L 128 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 378 41 L 378 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 628 41 L 628 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 878 41 L 878 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 1128 41 L 1128 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 1378 41 L 1378 1289" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="28">Nova</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="314" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="378" y="28">API</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="564" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="628" y="28">Conductor</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="814" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="53" x="878" y="28">Neutron</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1064" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="1128" y="28">TFTP/HTTPd</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1314" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="1378" y="28">Node</text>
  <path d="M 136 59 L 370 59" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="362,55 370,59 362,63" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(255,255,255)" points="394,42 509,42 517,50 517,76 394,76 394,42" stroke="rgb(0,0,0)" />
  <path d="M 509 42 L 509 50" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 509 50 L 517 50" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="447" y="58">image_source</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="451" y="74">,root_gb,etc.</text>
  <path d="M 136 95 L 370 95" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="362,91 370,95 362,99" stroke="rgb(0,0,0)" />
  <path d="M 386 136 L 620 136" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,132 620,136 612,140" stroke="rgb(0,0,0)" />
  <path d="M 636 177 L 753 177" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 177 L 753 193" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 193 L 636 193" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,189 636,193 644,197" stroke="rgb(0,0,0)" />
  <path d="M 636 238 L 753 238" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 238 L 753 254" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 254 L 636 254" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,250 636,254 644,258" stroke="rgb(0,0,0)" />
  <path d="M 636 283 L 870 283" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="862,279 870,283 862,287" stroke="rgb(0,0,0)" />
  <path d="M 636 324 L 1370 324" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,320 1370,324 1362,328" stroke="rgb(0,0,0)" />
  <path d="M 886 365 L 1370 365" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="894,361 886,365 894,369" stroke="rgb(0,0,0)" />
  <path d="M 886 406 L 1370 406" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,402 1370,406 1362,410" stroke="rgb(0,0,0)" />
  <path d="M 636 447 L 1370 447" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,443 636,447 644,451" stroke="rgb(0,0,0)" />
  <path d="M 1136 504 L 1370 504" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,500 1370,504 1362,508" stroke="rgb(0,0,0)" />
  <path d="M 1386 549 L 1466 549" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 549 L 1466 565" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 565 L 1386 565" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1394,561 1386,565 1394,569" stroke="rgb(0,0,0)" />
  <path d="M 386 594 L 1370 594" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="394,590 386,594 394,598" stroke="rgb(0,0,0)" />
  <path d="M 386 635 L 620 635" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,631 620,635 612,639" stroke="rgb(0,0,0)" />
  <path d="M 636 676 L 1370 676" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,672 1370,676 1362,680" stroke="rgb(0,0,0)" />
  <path d="M 386 717 L 1370 717" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="394,713 386,717 394,721" stroke="rgb(0,0,0)" />
  <path d="M 386 758 L 620 758" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,754 620,758 612,762" stroke="rgb(0,0,0)" />
  <path d="M 636 799 L 1370 799" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,795 1370,799 1362,803" stroke="rgb(0,0,0)" />
  <path d="M 1386 872 L 1466 872" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 872 L 1466 888" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 888 L 1386 888" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1394,884 1386,888 1394,892" stroke="rgb(0,0,0)" />
  <path d="M 636 917 L 1370 917" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,913 1370,917 1362,921" stroke="rgb(0,0,0)" />
  <path d="M 636 958 L 1370 958" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,954 1370,958 1362,962" stroke="rgb(0,0,0)" />
  <path d="M 636 999 L 1370 999" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,995 1370,999 1362,1003" stroke="rgb(0,0,0)" />
  <path d="M 636 1056 L 753 1056" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 1056 L 753 1072" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 1072 L 636 1072" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,1068 636,1072 644,1076" stroke="rgb(0,0,0)" />
  <path d="M 636 1101 L 870 1101" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="862,1097 870,1101 862,1105" stroke="rgb(0,0,0)" />
  <path d="M 636 1142 L 1370 1142" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,1138 1370,1142 1362,1146" stroke="rgb(0,0,0)" />
  <path d="M 1386 1231 L 1466 1231" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 1231 L 1466 1247" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 1247 L 1386 1247" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1394,1243 1386,1247 1394,1251" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="129" x="204" y="57">Set instance_info</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="145" x="212" y="93">Set provision_state</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="451" y="134">do_node_deploy()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="681" y="175">Cache images</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="129" x="700" y="228">Build TFTP config</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="697" y="281">Update DHCPBOOT</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="689" y="322">IPMI power-on</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="1324" y="363">DHCP request</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="175" x="977" y="404">next-server = Conductor</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="267" x="1236" y="445">Attempts to tftpboot from Conductor</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="229" x="1254" y="486">Send deploy kernel, ramdisk an</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="1170" y="502">d config</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="1424" y="531">Runs agent</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="53" x="1412" y="547">ramdisk</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="1339" y="592">lookup()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="401" y="633">...</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="674" y="674">Pass UUID</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="1309" y="715">Heartbeat (UUID)</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="424" y="756">Heartbeat</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="290" x="785" y="797">Continue deploy: Pass image, disk info</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="1435" y="846">Exposes disks</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="1420" y="862">via iSCSI</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="685" y="915">iSCSI attach</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="129" x="704" y="956">Copies user image</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="685" y="997">iSCSI detach</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="681" y="1038">Mark node as</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="45" x="658" y="1054">ACTIVE</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="106" x="693" y="1099">Clear DHCPBOOT</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="45" x="662" y="1140">Reboot</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="1431" y="1197">Reboots into</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="1435" y="1213">user instance</text>
</svg>
</div>
<p>(From a <a class="reference external" href="https://www.openstack.org/summit/vancouver-2015/summit-videos/presentation/isn-and-039t-it-ironic-the-bare-metal-cloud">talk</a>  and <a class="reference external" href="http://www.slideshare.net/devananda1/isnt-it-ironic-managing-a-bare-metal-cloud-osl-tes-2015">slides</a>)</p>
</div>
<div class="section" id="example-2-pxe-boot-and-direct-deploy-process">
<h3>Example 2: PXE Boot and Direct Deploy Process<a class="headerlink" href="#example-2-pxe-boot-and-direct-deploy-process" title="Permalink to this headline">¶</a></h3>
<p>This process is used with agent_* family of drivers.</p>
<div><svg height="1046.4" viewBox="0 0 1506 1308" width="1204.8" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc />
  <polygon fill="rgb(0,0,0)" points="397,48 512,48 520,56 520,82 397,82 397,48" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="317" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="567" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="817" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1067" y="7" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="1317" y="7" />
  <path d="M 128 41 L 128 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 378 41 L 378 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 628 41 L 628 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 878 41 L 878 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 1128 41 L 1128 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <path d="M 1378 41 L 1378 1315" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="128" y="28">Nova</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="314" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="378" y="28">API</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="564" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="628" y="28">Conductor</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="814" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="53" x="878" y="28">Neutron</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1064" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="1128" y="28">TFTP/HTTPd</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="1314" y="1" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="1378" y="28">Node</text>
  <path d="M 136 59 L 370 59" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="362,55 370,59 362,63" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(255,255,255)" points="394,42 509,42 517,50 517,76 394,76 394,42" stroke="rgb(0,0,0)" />
  <path d="M 509 42 L 509 50" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 509 50 L 517 50" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="447" y="58">image_source</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="451" y="74">,root_gb,etc.</text>
  <path d="M 136 95 L 370 95" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="362,91 370,95 362,99" stroke="rgb(0,0,0)" />
  <path d="M 386 136 L 620 136" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,132 620,136 612,140" stroke="rgb(0,0,0)" />
  <path d="M 636 177 L 753 177" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 177 L 753 193" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 193 L 636 193" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,189 636,193 644,197" stroke="rgb(0,0,0)" />
  <path d="M 636 238 L 753 238" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 238 L 753 254" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 753 254 L 636 254" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,250 636,254 644,258" stroke="rgb(0,0,0)" />
  <path d="M 636 283 L 870 283" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="862,279 870,283 862,287" stroke="rgb(0,0,0)" />
  <path d="M 636 324 L 1370 324" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,320 1370,324 1362,328" stroke="rgb(0,0,0)" />
  <path d="M 886 365 L 1370 365" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="894,361 886,365 894,369" stroke="rgb(0,0,0)" />
  <path d="M 886 406 L 1370 406" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,402 1370,406 1362,410" stroke="rgb(0,0,0)" />
  <path d="M 636 447 L 1370 447" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,443 636,447 644,451" stroke="rgb(0,0,0)" />
  <path d="M 1136 504 L 1370 504" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,500 1370,504 1362,508" stroke="rgb(0,0,0)" />
  <path d="M 1386 549 L 1466 549" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 549 L 1466 565" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 565 L 1386 565" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1394,561 1386,565 1394,569" stroke="rgb(0,0,0)" />
  <path d="M 386 594 L 1370 594" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="394,590 386,594 394,598" stroke="rgb(0,0,0)" />
  <path d="M 386 635 L 620 635" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,631 620,635 612,639" stroke="rgb(0,0,0)" />
  <path d="M 636 676 L 1370 676" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,672 1370,676 1362,680" stroke="rgb(0,0,0)" />
  <path d="M 386 717 L 1370 717" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="394,713 386,717 394,721" stroke="rgb(0,0,0)" />
  <path d="M 386 758 L 620 758" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,754 620,758 612,762" stroke="rgb(0,0,0)" />
  <path d="M 636 799 L 1370 799" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,795 1370,799 1362,803" stroke="rgb(0,0,0)" />
  <path d="M 386 881 L 1370 881" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="394,877 386,881 394,885" stroke="rgb(0,0,0)" />
  <path d="M 386 922 L 620 922" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="612,918 620,922 612,926" stroke="rgb(0,0,0)" />
  <path d="M 636 963 L 1370 963" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,959 1370,963 1362,967" stroke="rgb(0,0,0)" />
  <path d="M 636 1004 L 1370 1004" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="644,1000 636,1004 644,1008" stroke="rgb(0,0,0)" />
  <path d="M 636 1086 L 870 1086" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="862,1082 870,1086 862,1090" stroke="rgb(0,0,0)" />
  <path d="M 636 1127 L 1370 1127" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,1123 1370,1127 1362,1131" stroke="rgb(0,0,0)" />
  <path d="M 636 1168 L 1370 1168" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1362,1164 1370,1168 1362,1172" stroke="rgb(0,0,0)" />
  <path d="M 1386 1257 L 1466 1257" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 1257 L 1466 1273" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 1466 1273 L 1386 1273" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="1394,1269 1386,1273 1394,1277" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="129" x="204" y="57">Set instance_info</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="145" x="212" y="93">Set provision_state</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="451" y="134">do_node_deploy()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="681" y="175">Cache images</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="84" x="678" y="220">Update pxe,</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="681" y="236">tftp configs</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="697" y="281">Update DHCPBOOT</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="670" y="322">power on</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="1324" y="363">DHCP request</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="175" x="977" y="404">next-server = Conductor</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="129" x="1305" y="445">Attempts tftpboot</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="229" x="1254" y="486">Send deploy kernel, ramdisk an</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="1170" y="502">d config</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="76" x="1424" y="531">Runs agent</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="53" x="1412" y="547">ramdisk</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="61" x="1339" y="592">lookup()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="401" y="633">...</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="674" y="674">Pass UUID</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="1309" y="715">Heartbeat (UUID)</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="68" x="424" y="756">Heartbeat</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="290" x="785" y="797">Continue deploy: Pass image, disk info</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="168" x="1286" y="879">Heartbeat periodically</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="22" x="401" y="920">...</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="145" x="712" y="961">Is deploy done yet?</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="122" x="1309" y="1002">Still working...</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="106" x="693" y="1084">Clear DHCPBOOT</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="697" y="1125">Set bootdev HDD</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="45" x="662" y="1166">Reboot</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="91" x="1431" y="1223">Reboots into</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="14" font-style="normal" font-weight="normal" text-anchor="middle" textLength="99" x="1435" y="1239">user instance</text>
  <path d="M 40 839 L 635 839" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 843 L 635 843" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 871 839 L 1466 839" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 871 843 L 1466 843" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="19" stroke="rgb(0,0,0)" width="236" x="635" y="832" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="216" x="753" y="847">Node downloads image, writes to disk</text>
  <path d="M 40 1044 L 686 1044" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 40 1048 L 686 1048" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 820 1044 L 1466 1044" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 820 1048 L 1466 1048" fill="none" stroke="rgb(0,0,0)" />
  <rect fill="rgb(208,208,208)" height="19" stroke="rgb(0,0,0)" width="134" x="686" y="1037" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="753" y="1052">When deploy is done</text>
</svg>
</div>
<p>(From a <a class="reference external" href="https://www.openstack.org/summit/vancouver-2015/summit-videos/presentation/isn-and-039t-it-ironic-the-bare-metal-cloud">talk</a>  and <a class="reference external" href="http://www.slideshare.net/devananda1/isnt-it-ironic-managing-a-bare-metal-cloud-osl-tes-2015">slides</a>)</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Introduction to Ironic</a><ul>
<li><a class="reference internal" href="#why-provision-bare-metal">Why Provision Bare Metal</a></li>
<li><a class="reference internal" href="#conceptual-architecture">Conceptual Architecture</a></li>
<li><a class="reference internal" href="#logical-architecture">Logical Architecture</a></li>
<li><a class="reference internal" href="#key-technologies-for-bare-metal-hosting">Key Technologies for Bare Metal Hosting</a><ul>
<li><a class="reference internal" href="#preboot-execution-environment-pxe">Preboot Execution Environment (PXE)</a></li>
<li><a class="reference internal" href="#dynamic-host-configuration-protocol-dhcp">Dynamic Host Configuration Protocol (DHCP)</a></li>
<li><a class="reference internal" href="#network-bootstrap-program-nbp">Network Bootstrap Program (NBP)</a></li>
<li><a class="reference internal" href="#trivial-file-transfer-protocol-tftp">Trivial File Transfer Protocol (TFTP)</a></li>
<li><a class="reference internal" href="#intelligent-platform-management-interface-ipmi">Intelligent Platform Management Interface (IPMI)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ironic-deployment-architecture">Ironic Deployment Architecture</a></li>
<li><a class="reference internal" href="#understanding-bare-metal-deployment">Understanding Bare Metal Deployment</a><ul>
<li><a class="reference internal" href="#deploy-process">Deploy Process</a></li>
<li><a class="reference internal" href="#example-1-pxe-boot-and-iscsi-deploy-process">Example 1: PXE Boot and iSCSI Deploy Process</a></li>
<li><a class="reference internal" href="#example-2-pxe-boot-and-direct-deploy-process">Example 2: PXE Boot and Direct Deploy Process</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/ironic
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/deploy/user-guide.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Ironic 6.3.0.dev823 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Ironic");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>