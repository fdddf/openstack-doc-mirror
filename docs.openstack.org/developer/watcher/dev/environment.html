<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Set up a development environment manually &mdash; Watcher 1.0.1.dev10 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/toggle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.1.dev10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/toggle.js"></script>
    <link rel="top" title="Watcher 1.0.1.dev10 documentation" href="../index.html" />
    <link rel="next" title="Set up a development environment via DevStack" href="devstack.html" />
    <link rel="prev" title="Contributing to Watcher" href="contributing.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="set-up-a-development-environment-manually">
<span id="watcher-developement-environment"></span><h1>Set up a development environment manually<a class="headerlink" href="#set-up-a-development-environment-manually" title="Permalink to this headline">¶</a></h1>
<p>This document describes getting the source from watcher <a class="reference external" href="http://git.openstack.org/cgit/openstack/watcher">Git repository</a>
for development purposes.</p>
<p>To install Watcher from packaging, refer instead to Watcher <a class="reference external" href="http://docs.openstack.org/developer/watcher/">User
Documentation</a>.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>This document assumes you are using Ubuntu or Fedora, and that you have the
following tools available on your system:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.python.org/">Python</a> 2.7 and 3.4</li>
<li><a class="reference external" href="http://git-scm.com/">git</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/setuptools">setuptools</a></li>
<li><a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a></li>
<li>msgfmt (part of the gettext package)</li>
<li>virtualenv and <a class="reference external" href="https://virtualenvwrapper.readthedocs.org/en/latest/install.html">virtualenvwrapper</a></li>
</ul>
<p><strong>Reminder</strong>: If you&#8217;re successfully using a different platform, or a
different version of the above, please document your configuration here!</p>
</div>
<div class="section" id="getting-the-latest-code">
<h2>Getting the latest code<a class="headerlink" href="#getting-the-latest-code" title="Permalink to this headline">¶</a></h2>
<p>Make a clone of the code from our <cite>Git repository</cite>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git clone https://git.openstack.org/openstack/watcher.git
</pre></div>
</div>
<p>When that is complete, you can:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> watcher
</pre></div>
</div>
</div>
<div class="section" id="installing-dependencies">
<h2>Installing dependencies<a class="headerlink" href="#installing-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Watcher maintains two lists of dependencies:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">test</span><span class="o">-</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The first is the list of dependencies needed for running Watcher, the second
list includes dependencies used for active development and testing of Watcher
itself.</p>
<p>These dependencies can be installed from <a class="reference external" href="http://pypi.python.org/">PyPi</a> using the Python tool <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a>.</p>
<p>However, your system <em>may</em> need additional dependencies that <cite>pip</cite> (and by
extension, PyPi) cannot satisfy. These dependencies should be installed
prior to using <cite>pip</cite>, and the installation method may vary depending on
your platform.</p>
<ul>
<li><p class="first">Ubuntu 14.04:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ sudo apt-get install python-dev libssl-dev libmysqlclient-dev libffi-dev
</pre></div>
</div>
</li>
<li><p class="first">Fedora 19+:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ sudo yum install openssl-devel libffi-devel mysql-devel
</pre></div>
</div>
</li>
<li><p class="first">CentOS 7:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ sudo yum install gcc python-devel libxml2-devel libxslt-devel mariadb-devel
</pre></div>
</div>
</li>
</ul>
<div class="section" id="pypi-packages-and-virtualenv">
<h3>PyPi Packages and VirtualEnv<a class="headerlink" href="#pypi-packages-and-virtualenv" title="Permalink to this headline">¶</a></h3>
<p>We recommend establishing a virtualenv to run Watcher within. virtualenv
limits the Python environment to just what you&#8217;re installing as dependencies,
useful to keep a clean environment for working on Watcher.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkvirtualenv watcher
$ git clone https://git.openstack.org/openstack/watcher

<span class="c1"># Use &#39;python setup.py&#39; to link Watcher into Python&#39;s site-packages</span>
$ <span class="nb">cd</span> watcher <span class="o">&amp;&amp;</span> python setup.py install

<span class="c1"># Install the dependencies for running Watcher</span>
$ pip install -r ./requirements.txt

<span class="c1"># Install the dependencies for developing, testing, and running Watcher</span>
$ pip install -r ./test-requirements.txt
</pre></div>
</div>
<p>This will create a local virtual environment in the directory <code class="docutils literal"><span class="pre">$WORKON_HOME</span></code>.
The virtual environment can be disabled using the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ deactivate
</pre></div>
</div>
<p>You can re-activate this virtualenv for your current shell using:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher
</pre></div>
</div>
<p>For more information on virtual environments, see <a class="reference external" href="http://www.virtualenv.org/">virtualenv</a>.</p>
</div>
</div>
<div class="section" id="verifying-watcher-is-set-up">
<h2>Verifying Watcher is set up<a class="headerlink" href="#verifying-watcher-is-set-up" title="Permalink to this headline">¶</a></h2>
<p>Once set up, either directly or within a virtualenv, you should be able to
invoke Python and import the libraries. If you&#8217;re using a virtualenv, don&#8217;t
forget to activate it:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher
</pre></div>
</div>
<p>You should then be able to <cite>import watcher</cite> using Python without issue:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python -c <span class="s2">&quot;import watcher&quot;</span>
</pre></div>
</div>
<p>If you can import watcher without a traceback, you should be ready to develop.</p>
</div>
<div class="section" id="run-watcher-tests">
<h2>Run Watcher tests<a class="headerlink" href="#run-watcher-tests" title="Permalink to this headline">¶</a></h2>
<p>Watcher provides both <a class="reference internal" href="testing.html#unit-tests"><span>unit tests</span></a> and
<a class="reference internal" href="testing.html#tempest-tests"><span>functional/tempest tests</span></a>. Please refer to <a class="reference internal" href="testing.html"><em>Testing</em></a>
to understand how to run them.</p>
</div>
<div class="section" id="build-the-watcher-documentation">
<h2>Build the Watcher documentation<a class="headerlink" href="#build-the-watcher-documentation" title="Permalink to this headline">¶</a></h2>
<p>You can easily build the HTML documentation from <code class="docutils literal"><span class="pre">doc/source</span></code> files, by using
<code class="docutils literal"><span class="pre">tox</span></code>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher

<span class="o">(</span>watcher<span class="o">)</span> $ <span class="nb">cd</span> watcher
<span class="o">(</span>watcher<span class="o">)</span> $ tox -edocs
</pre></div>
</div>
<p>The HTML files are available into <code class="docutils literal"><span class="pre">doc/build</span></code> directory.</p>
</div>
<div class="section" id="configure-the-watcher-services">
<h2>Configure the Watcher services<a class="headerlink" href="#configure-the-watcher-services" title="Permalink to this headline">¶</a></h2>
<p>Watcher services require a configuration file. There is a sample configuration
file that can be used to get started:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ cp etc/watcher.conf.sample etc/watcher.conf
</pre></div>
</div>
<p>Most of the default configuration should be enough to get you going, but you
still need to configure the following sections:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">[database]</span></code> section to configure the
<a class="reference internal" href="../deploy/configuration.html#watcher-db-configuration"><span>Watcher database</span></a></li>
<li>The  <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> section to configure the
<a class="reference internal" href="../deploy/configuration.html#identity-service-configuration"><span>Identity service</span></a> i.e. Keystone</li>
<li>The <code class="docutils literal"><span class="pre">[watcher_messaging]</span></code> section to configure the OpenStack AMQP-based
message bus</li>
</ul>
<p>So if you need some more details on how to configure one or more of these
sections, please do have a look at <a class="reference internal" href="../deploy/configuration.html"><em>Configuring Watcher</em></a> before
continuing.</p>
</div>
<div class="section" id="create-watcher-sql-database">
<h2>Create Watcher SQL database<a class="headerlink" href="#create-watcher-sql-database" title="Permalink to this headline">¶</a></h2>
<p>When initially getting set up, after you&#8217;ve configured which databases to use,
you&#8217;re probably going to need to run the following to your database schema in
place:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher

<span class="o">(</span>watcher<span class="o">)</span> $ watcher-db-manage create_schema
</pre></div>
</div>
</div>
<div class="section" id="running-watcher-services">
<h2>Running Watcher services<a class="headerlink" href="#running-watcher-services" title="Permalink to this headline">¶</a></h2>
<p>To run the Watcher API service, use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher

<span class="o">(</span>watcher<span class="o">)</span> $ watcher-api
</pre></div>
</div>
<p>To run the Watcher Decision Engine service, use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher

<span class="o">(</span>watcher<span class="o">)</span> $ watcher-decision-engine
</pre></div>
</div>
<p>To run the Watcher Applier service, use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ workon watcher

<span class="o">(</span>watcher<span class="o">)</span> $ watcher-applier
</pre></div>
</div>
<p>Default configuration of these services are available into <code class="docutils literal"><span class="pre">/etc/watcher</span></code>
directory. See <a class="reference internal" href="../deploy/configuration.html"><em>Configuring Watcher</em></a> for details on how Watcher is
configured. By default, Watcher is configured with SQL backends.</p>
</div>
<div class="section" id="interact-with-watcher">
<h2>Interact with Watcher<a class="headerlink" href="#interact-with-watcher" title="Permalink to this headline">¶</a></h2>
<p>You can also interact with Watcher through its REST API. There is a Python
Watcher client library <a class="reference external" href="https://github.com/openstack/python-watcherclient">python-watcherclient</a> which interacts exclusively
through the REST API, and which Watcher itself uses to provide its command-line
interface.</p>
<p>There is also an Horizon plugin for Watcher <a class="reference external" href="https://github.com/openstack/watcher-dashboard">watcher-dashboard</a> which
allows to interact with Watcher through a web-based interface.</p>
</div>
<div class="section" id="exercising-the-watcher-services-locally">
<h2>Exercising the Watcher Services locally<a class="headerlink" href="#exercising-the-watcher-services-locally" title="Permalink to this headline">¶</a></h2>
<p>If you would like to exercise the Watcher services in isolation within a local
virtual environment, you can do this without starting any other OpenStack
services. For example, this is useful for rapidly prototyping and debugging
interactions over the RPC channel, testing database migrations, and so forth.</p>
<p>You will find in the <a class="reference external" href="https://github.com/b-com/watcher-tools">watcher-tools</a> project, Ansible playbooks and Docker
template files to easily play with Watcher services within a minimal OpenStack
isolated environment (Identity, Message Bus, SQL database, Horizon, ...).</p>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Set up a development environment manually</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#getting-the-latest-code">Getting the latest code</a></li>
<li><a class="reference internal" href="#installing-dependencies">Installing dependencies</a><ul>
<li><a class="reference internal" href="#pypi-packages-and-virtualenv">PyPi Packages and VirtualEnv</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verifying-watcher-is-set-up">Verifying Watcher is set up</a></li>
<li><a class="reference internal" href="#run-watcher-tests">Run Watcher tests</a></li>
<li><a class="reference internal" href="#build-the-watcher-documentation">Build the Watcher documentation</a></li>
<li><a class="reference internal" href="#configure-the-watcher-services">Configure the Watcher services</a></li>
<li><a class="reference internal" href="#create-watcher-sql-database">Create Watcher SQL database</a></li>
<li><a class="reference internal" href="#running-watcher-services">Running Watcher services</a></li>
<li><a class="reference internal" href="#interact-with-watcher">Interact with Watcher</a></li>
<li><a class="reference internal" href="#exercising-the-watcher-services-locally">Exercising the Watcher Services locally</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="contributing.html"
                                  title="previous chapter">Contributing to Watcher</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="devstack.html"
                                  title="next chapter">Set up a development environment via DevStack</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/watcher
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/dev/environment.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="devstack.html" title="Set up a development environment via DevStack"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="contributing.html" title="Contributing to Watcher"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Watcher 1.0.1.dev10 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Watcher");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>