<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>V2 Web API &mdash; Ceilometer 8.0.1.dev11 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/toggle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.0.1.dev11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/toggle.js"></script>
    <link rel="top" title="Ceilometer 8.0.1.dev11 documentation" href="../index.html" />
    <link rel="up" title="Web API" href="index.html" />
    <link rel="next" title="Installing Ceilometer" href="../install/index.html" />
    <link rel="prev" title="Web API" href="index.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="v2-web-api">
<h1>V2 Web API<a class="headerlink" href="#v2-web-api" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Ceilometer API is deprecated.  Use the APIs from <a class="reference external" href="http://docs.openstack.org/developer/aodh/">Aodh</a> (alarms),
<a class="reference external" href="http://docs.openstack.org/developer/gnocchi/">Gnocchi</a> (metrics), and/or <a class="reference external" href="http://docs.openstack.org/developer/panko/">Panko</a> (events).</p>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--v2-resources">
<tt class="descname">GET </tt><tt class="descname">/v2/resources</tt><a class="headerlink" href="#get--v2-resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve definitions of all of the resources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (list(<a class="reference internal" href="#Query" title="Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>)) &#8211; Filter rules for the resources to be returned.</li>
<li><strong>meter_links</strong> (<tt class="xref py py-class docutils literal"><span class="pre">int</span></tt>) &#8211; option to include related meter links</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#Resource" title="Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="get">
<dt id="get--v2-resources-(resource_id)">
<tt class="descname">GET </tt><tt class="descname">/v2/resources/</tt><big>(</big><em>resource_id</em><big>)</big><a class="headerlink" href="#get--v2-resources-(resource_id)" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve details about one resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>resource_id</strong> (<tt class="xref py py-class docutils literal"><span class="pre">unicode</span></tt>) &#8211; The UUID of the resource.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#Resource" title="Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="Resource">
<em class="property">type </em><tt class="descname">Resource</tt><a class="headerlink" href="#Resource" title="Permalink to this definition">¶</a></dt>
<dd><p>An externally defined object for which samples have been received.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;links&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;http://localhost:8777/v2/resources/bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rel&quot;</span><span class="o">:</span> <span class="s2">&quot;self&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;http://localhost:8777/v2/meters/volume?q.field=resource_id&amp;q.value=bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rel&quot;</span><span class="o">:</span> <span class="s2">&quot;volume&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;metadata&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name1&quot;</span><span class="o">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name2&quot;</span><span class="o">:</span> <span class="s2">&quot;value2&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;35b17138-b364-4e6a-a131-8f3099c5be68&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resource_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;openstack&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;efd87807-12d2-4b38-9c70-5f5c2ac427ff&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;resource_id&gt;</span>bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/resource_id&gt;</span>
  <span class="nt">&lt;project_id&gt;</span>35b17138-b364-4e6a-a131-8f3099c5be68<span class="nt">&lt;/project_id&gt;</span>
  <span class="nt">&lt;user_id&gt;</span>efd87807-12d2-4b38-9c70-5f5c2ac427ff<span class="nt">&lt;/user_id&gt;</span>
  <span class="nt">&lt;metadata&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name2<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value2<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name1<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/metadata&gt;</span>
  <span class="nt">&lt;links&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;href&gt;</span>http://localhost:8777/v2/resources/bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/href&gt;</span>
      <span class="nt">&lt;rel&gt;</span>self<span class="nt">&lt;/rel&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;href&gt;</span>http://localhost:8777/v2/meters/volume?q.field=resource_id<span class="ni">&amp;amp;</span>q.value=bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/href&gt;</span>
      <span class="nt">&lt;rel&gt;</span>volume<span class="nt">&lt;/rel&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/links&gt;</span>
  <span class="nt">&lt;source&gt;</span>openstack<span class="nt">&lt;/source&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.first_sample_timestamp">
<tt class="descname">first_sample_timestamp</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.first_sample_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date &amp; time not later than the first sample known for this resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.last_sample_timestamp">
<tt class="descname">last_sample_timestamp</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.last_sample_timestamp" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date &amp; time not earlier than the last sample known for this resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.links">
<tt class="descname">links</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.links" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">list(Link)</td>
</tr>
</tbody>
</table>
<p>A list containing a self link and associated meter links</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.metadata">
<tt class="descname">metadata</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.metadata" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: unicode)</td>
</tr>
</tbody>
</table>
<p>Arbitrary metadata associated with the resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.project_id">
<tt class="descname">project_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.project_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the owning project or tenant</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.resource_id">
<tt class="descname">resource_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.resource_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unique identifier for the resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.source">
<tt class="descname">source</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.source" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The source where the resource come from</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.resources.Resource.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.resources.Resource.user_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the user who created the resource or updated it last</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="meters">
<h2>Meters<a class="headerlink" href="#meters" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--v2-meters">
<tt class="descname">GET </tt><tt class="descname">/v2/meters</tt><a class="headerlink" href="#get--v2-meters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all known meters, based on the data recorded so far.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (list(<a class="reference internal" href="#Query" title="Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>)) &#8211; Filter rules for the meters to be returned.</li>
<li><strong>unique</strong> (<tt class="xref py py-class docutils literal"><span class="pre">str</span></tt>) &#8211; flag to indicate unique meters to be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#Meter" title="Meter"><tt class="xref py py-class docutils literal"><span class="pre">Meter</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="get">
<dt id="get--v2-meters-(meter_name)">
<tt class="descname">GET </tt><tt class="descname">/v2/meters/</tt><big>(</big><em>meter_name</em><big>)</big><a class="headerlink" href="#get--v2-meters-(meter_name)" title="Permalink to this definition">¶</a></dt>
<dd><p>Return samples for the meter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (list(<a class="reference internal" href="#Query" title="Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>)) &#8211; Filter rules for the data to be returned.</li>
<li><strong>limit</strong> (<tt class="xref py py-class docutils literal"><span class="pre">int</span></tt>) &#8211; Maximum number of samples to return.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#OldSample" title="OldSample"><tt class="xref py py-class docutils literal"><span class="pre">OldSample</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="post">
<dt id="post--v2-meters-(meter_name)">
<tt class="descname">POST </tt><tt class="descname">/v2/meters/</tt><big>(</big><em>meter_name</em><big>)</big><a class="headerlink" href="#post--v2-meters-(meter_name)" title="Permalink to this definition">¶</a></dt>
<dd><p>Post a list of new Samples to Telemetry.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>direct</strong> (<tt class="xref py py-class docutils literal"><span class="pre">str</span></tt>) &#8211; a flag indicates whether the samples will be posted
directly to storage or not.</li>
<li><strong>samples</strong> (list(<a class="reference internal" href="#OldSample" title="OldSample"><tt class="xref py py-class docutils literal"><span class="pre">OldSample</span></tt></a>)) &#8211; a list of samples within the request body.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#OldSample" title="OldSample"><tt class="xref py py-class docutils literal"><span class="pre">OldSample</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="get">
<dt id="get--v2-meters-(meter_name)-statistics">
<tt class="descname">GET </tt><tt class="descname">/v2/meters/</tt><big>(</big><em>meter_name</em><big>)</big><tt class="descname">/statistics</tt><a class="headerlink" href="#get--v2-meters-(meter_name)-statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the statistics of the samples in the time range given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (list(<a class="reference internal" href="#Query" title="Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>)) &#8211; Filter rules for the data to be returned.</li>
<li><strong>groupby</strong> (list(<tt class="xref py py-class docutils literal"><span class="pre">unicode</span></tt>)) &#8211; Fields for group by aggregation</li>
<li><strong>period</strong> (<tt class="xref py py-class docutils literal"><span class="pre">int</span></tt>) &#8211; Returned result will be an array of statistics for a
period long of that number of seconds.</li>
<li><strong>aggregate</strong> (list(<a class="reference internal" href="#Aggregate" title="Aggregate"><tt class="xref py py-class docutils literal"><span class="pre">Aggregate</span></tt></a>)) &#8211; The selectable aggregation functions to be applied.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#Statistics" title="Statistics"><tt class="xref py py-class docutils literal"><span class="pre">Statistics</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="Meter">
<em class="property">type </em><tt class="descname">Meter</tt><a class="headerlink" href="#Meter" title="Permalink to this definition">¶</a></dt>
<dd><p>One category of measurements.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;meter_id&quot;</span><span class="o">:</span> <span class="s2">&quot;YmQ5NDMxYzEtOGQ2OS00YWQzLTgwM2EtOGQ0YTZiODlmZDM2K2luc3RhbmNl&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;35b17138-b364-4e6a-a131-8f3099c5be68&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resource_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;openstack&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;gauge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unit&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;efd87807-12d2-4b38-9c70-5f5c2ac427ff&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;name&gt;</span>instance<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;type&gt;</span>gauge<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;unit&gt;</span>instance<span class="nt">&lt;/unit&gt;</span>
  <span class="nt">&lt;resource_id&gt;</span>bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/resource_id&gt;</span>
  <span class="nt">&lt;project_id&gt;</span>35b17138-b364-4e6a-a131-8f3099c5be68<span class="nt">&lt;/project_id&gt;</span>
  <span class="nt">&lt;user_id&gt;</span>efd87807-12d2-4b38-9c70-5f5c2ac427ff<span class="nt">&lt;/user_id&gt;</span>
  <span class="nt">&lt;source&gt;</span>openstack<span class="nt">&lt;/source&gt;</span>
  <span class="nt">&lt;meter_id&gt;</span>YmQ5NDMxYzEtOGQ2OS00YWQzLTgwM2EtOGQ0YTZiODlmZDM2K2luc3RhbmNl<span class="nt">&lt;/meter_id&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.meter_id">
<tt class="descname">meter_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.meter_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unique identifier for the meter</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.name">
<tt class="descname">name</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.name" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unique name for the meter</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.project_id">
<tt class="descname">project_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.project_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the project or tenant that owns the resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.resource_id">
<tt class="descname">resource_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.resource_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the <a class="reference internal" href="#Resource" title="Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> for which the measurements are taken</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.source">
<tt class="descname">source</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.source" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the source that identifies where the meter comes from</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.type">
<tt class="descname">type</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">Enum(gauge, delta, cumulative)</td>
</tr>
</tbody>
</table>
<p>The meter type (see <a class="reference internal" href="../measurements.html#measurements"><em>Measurements</em></a>)</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.unit">
<tt class="descname">unit</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.unit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unit of measure</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Meter.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Meter.user_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the user who last triggered an update to the resource</p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="OldSample">
<em class="property">type </em><tt class="descname">OldSample</tt><a class="headerlink" href="#OldSample" title="Permalink to this definition">¶</a></dt>
<dd><p>A single measurement for a given meter and resource.</p>
<p>This class is deprecated in favor of Sample.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;counter_name&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;counter_type&quot;</span><span class="o">:</span> <span class="s2">&quot;gauge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;counter_unit&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;counter_volume&quot;</span><span class="o">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s2">&quot;message_id&quot;</span><span class="o">:</span> <span class="s2">&quot;5460acce-4fd6-480d-ab18-9735ec7b1996&quot;</span><span class="p">,</span>
    <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;35b17138-b364-4e6a-a131-8f3099c5be68&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recorded_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-01-01T12:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resource_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resource_metadata&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name1&quot;</span><span class="o">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name2&quot;</span><span class="o">:</span> <span class="s2">&quot;value2&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;openstack&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-01-01T12:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;efd87807-12d2-4b38-9c70-5f5c2ac427ff&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;source&gt;</span>openstack<span class="nt">&lt;/source&gt;</span>
  <span class="nt">&lt;counter_name&gt;</span>instance<span class="nt">&lt;/counter_name&gt;</span>
  <span class="nt">&lt;counter_type&gt;</span>gauge<span class="nt">&lt;/counter_type&gt;</span>
  <span class="nt">&lt;counter_unit&gt;</span>instance<span class="nt">&lt;/counter_unit&gt;</span>
  <span class="nt">&lt;counter_volume&gt;</span>1.0<span class="nt">&lt;/counter_volume&gt;</span>
  <span class="nt">&lt;user_id&gt;</span>efd87807-12d2-4b38-9c70-5f5c2ac427ff<span class="nt">&lt;/user_id&gt;</span>
  <span class="nt">&lt;project_id&gt;</span>35b17138-b364-4e6a-a131-8f3099c5be68<span class="nt">&lt;/project_id&gt;</span>
  <span class="nt">&lt;resource_id&gt;</span>bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/resource_id&gt;</span>
  <span class="nt">&lt;timestamp&gt;</span>2015-01-01T12:00:00<span class="nt">&lt;/timestamp&gt;</span>
  <span class="nt">&lt;recorded_at&gt;</span>2015-01-01T12:00:00<span class="nt">&lt;/recorded_at&gt;</span>
  <span class="nt">&lt;resource_metadata&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name2<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value2<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name1<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/resource_metadata&gt;</span>
  <span class="nt">&lt;message_id&gt;</span>5460acce-4fd6-480d-ab18-9735ec7b1996<span class="nt">&lt;/message_id&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.counter_name">
<tt class="descname">counter_name</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.counter_name" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The name of the meter</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.counter_type">
<tt class="descname">counter_type</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.counter_type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The type of the meter (see <a class="reference internal" href="../measurements.html#measurements"><em>Measurements</em></a>)</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.counter_unit">
<tt class="descname">counter_unit</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.counter_unit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unit of measure for the value in counter_volume</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.counter_volume">
<tt class="descname">counter_volume</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.counter_volume" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The actual measured value</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.message_id">
<tt class="descname">message_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.message_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>A unique identifier for the sample</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.project_id">
<tt class="descname">project_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.project_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the project or tenant that owns the resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.recorded_at">
<tt class="descname">recorded_at</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.recorded_at" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>When the sample has been recorded.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.resource_id">
<tt class="descname">resource_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.resource_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the <a class="reference internal" href="#Resource" title="Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> for which the measurements are taken</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.resource_metadata">
<tt class="descname">resource_metadata</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.resource_metadata" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: unicode)</td>
</tr>
</tbody>
</table>
<p>Arbitrary metadata associated with the resource</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.source">
<tt class="descname">source</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.source" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the source that identifies where the sample comes from</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date and time when the measurement was made</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.OldSample.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.OldSample.user_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The ID of the user who last triggered an update to the resource</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="samples-and-statistics">
<h2>Samples and Statistics<a class="headerlink" href="#samples-and-statistics" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--v2-samples">
<tt class="descname">GET </tt><tt class="descname">/v2/samples</tt><a class="headerlink" href="#get--v2-samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all known samples, based on the data recorded so far.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> (list(<a class="reference internal" href="#Query" title="Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>)) &#8211; Filter rules for the samples to be returned.</li>
<li><strong>limit</strong> (<tt class="xref py py-class docutils literal"><span class="pre">int</span></tt>) &#8211; Maximum number of samples to be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#Sample" title="Sample"><tt class="xref py py-class docutils literal"><span class="pre">Sample</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="get">
<dt id="get--v2-samples-(sample_id)">
<tt class="descname">GET </tt><tt class="descname">/v2/samples/</tt><big>(</big><em>sample_id</em><big>)</big><a class="headerlink" href="#get--v2-samples-(sample_id)" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a sample.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sample_id</strong> (<tt class="xref py py-class docutils literal"><span class="pre">unicode</span></tt>) &#8211; the id of the sample.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#Sample" title="Sample"><tt class="xref py py-class docutils literal"><span class="pre">Sample</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="Sample">
<em class="property">type </em><tt class="descname">Sample</tt><a class="headerlink" href="#Sample" title="Permalink to this definition">¶</a></dt>
<dd><p>One measurement.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;4a7e170c-f24a-11e6-ba1d-fa163e7089d1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;metadata&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name1&quot;</span><span class="o">:</span> <span class="s2">&quot;value1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;name2&quot;</span><span class="o">:</span> <span class="s2">&quot;value2&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;meter&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;35b17138-b364-4e6a-a131-8f3099c5be68&quot;</span><span class="p">,</span>
    <span class="s2">&quot;recorded_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-01-01T12:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;resource_id&quot;</span><span class="o">:</span> <span class="s2">&quot;bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
    <span class="s2">&quot;source&quot;</span><span class="o">:</span> <span class="s2">&quot;openstack&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-01-01T12:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;gauge&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unit&quot;</span><span class="o">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="s2">&quot;user_id&quot;</span><span class="o">:</span> <span class="s2">&quot;efd87807-12d2-4b38-9c70-5f5c2ac427ff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;volume&quot;</span><span class="o">:</span> <span class="mf">1.0</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;id&gt;</span>4a7e170c-f24a-11e6-ba1d-fa163e7089d1<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;meter&gt;</span>instance<span class="nt">&lt;/meter&gt;</span>
  <span class="nt">&lt;type&gt;</span>gauge<span class="nt">&lt;/type&gt;</span>
  <span class="nt">&lt;unit&gt;</span>instance<span class="nt">&lt;/unit&gt;</span>
  <span class="nt">&lt;volume&gt;</span>1.0<span class="nt">&lt;/volume&gt;</span>
  <span class="nt">&lt;user_id&gt;</span>efd87807-12d2-4b38-9c70-5f5c2ac427ff<span class="nt">&lt;/user_id&gt;</span>
  <span class="nt">&lt;project_id&gt;</span>35b17138-b364-4e6a-a131-8f3099c5be68<span class="nt">&lt;/project_id&gt;</span>
  <span class="nt">&lt;resource_id&gt;</span>bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/resource_id&gt;</span>
  <span class="nt">&lt;source&gt;</span>openstack<span class="nt">&lt;/source&gt;</span>
  <span class="nt">&lt;timestamp&gt;</span>2015-01-01T12:00:00<span class="nt">&lt;/timestamp&gt;</span>
  <span class="nt">&lt;recorded_at&gt;</span>2015-01-01T12:00:00<span class="nt">&lt;/recorded_at&gt;</span>
  <span class="nt">&lt;metadata&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name2<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value2<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>name1<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>value1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/metadata&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.id">
<tt class="descname">id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unique identifier for the sample.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.metadata">
<tt class="descname">metadata</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.metadata" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: unicode)</td>
</tr>
</tbody>
</table>
<p>Arbitrary metadata associated with the sample.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.meter">
<tt class="descname">meter</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.meter" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The meter name this sample is for.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.project_id">
<tt class="descname">project_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.project_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The project this sample was taken for.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.recorded_at">
<tt class="descname">recorded_at</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.recorded_at" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>When the sample has been recorded.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.resource_id">
<tt class="descname">resource_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.resource_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The <a class="reference internal" href="#Resource" title="Resource"><tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt></a> this sample was taken for.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.source">
<tt class="descname">source</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.source" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The source that identifies where the sample comes from.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.timestamp">
<tt class="descname">timestamp</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>When the sample has been generated.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.type">
<tt class="descname">type</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">Enum(gauge, delta, cumulative)</td>
</tr>
</tbody>
</table>
<p>The meter type (see <a class="reference internal" href="../new_meters.html#meter-types"><em>Types</em></a>)</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.unit">
<tt class="descname">unit</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.unit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unit of measure.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.user_id">
<tt class="descname">user_id</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.user_id" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The user this sample was taken for.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.samples.Sample.volume">
<tt class="descname">volume</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.samples.Sample.volume" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The metered value.</p>
</dd></dl>

</dd></dl>

<dl class="type">
<dt id="Statistics">
<em class="property">type </em><tt class="descname">Statistics</tt><a class="headerlink" href="#Statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Computed statistics for a query.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;avg&quot;</span><span class="o">:</span> <span class="mf">4.5</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;duration&quot;</span><span class="o">:</span> <span class="mf">300.0</span><span class="p">,</span>
    <span class="s2">&quot;duration_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2013-01-04T16:47:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;duration_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2013-01-04T16:42:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max&quot;</span><span class="o">:</span> <span class="mf">9.0</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="o">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s2">&quot;period&quot;</span><span class="o">:</span> <span class="mi">7200</span><span class="p">,</span>
    <span class="s2">&quot;period_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2013-01-04T18:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;period_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2013-01-04T16:00:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="o">:</span> <span class="mf">45.0</span><span class="p">,</span>
    <span class="s2">&quot;unit&quot;</span><span class="o">:</span> <span class="s2">&quot;GiB&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;unit&gt;</span>GiB<span class="nt">&lt;/unit&gt;</span>
  <span class="nt">&lt;min&gt;</span>1.0<span class="nt">&lt;/min&gt;</span>
  <span class="nt">&lt;max&gt;</span>9.0<span class="nt">&lt;/max&gt;</span>
  <span class="nt">&lt;avg&gt;</span>4.5<span class="nt">&lt;/avg&gt;</span>
  <span class="nt">&lt;sum&gt;</span>45.0<span class="nt">&lt;/sum&gt;</span>
  <span class="nt">&lt;count&gt;</span>10<span class="nt">&lt;/count&gt;</span>
  <span class="nt">&lt;duration&gt;</span>300.0<span class="nt">&lt;/duration&gt;</span>
  <span class="nt">&lt;duration_start&gt;</span>2013-01-04T16:42:00<span class="nt">&lt;/duration_start&gt;</span>
  <span class="nt">&lt;duration_end&gt;</span>2013-01-04T16:47:00<span class="nt">&lt;/duration_end&gt;</span>
  <span class="nt">&lt;period&gt;</span>7200<span class="nt">&lt;/period&gt;</span>
  <span class="nt">&lt;period_start&gt;</span>2013-01-04T16:00:00<span class="nt">&lt;/period_start&gt;</span>
  <span class="nt">&lt;period_end&gt;</span>2013-01-04T18:00:00<span class="nt">&lt;/period_end&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.aggregate">
<tt class="descname">aggregate</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: float)</td>
</tr>
</tbody>
</table>
<p>The selectable aggregate value(s)</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.avg">
<tt class="descname">avg</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.avg" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The average of all of the volume values seen in the data</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.count">
<tt class="descname">count</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.count" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
<p>The number of samples seen</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.duration">
<tt class="descname">duration</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.duration" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The difference, in seconds, between the oldest and newest timestamp</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.duration_end">
<tt class="descname">duration_end</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.duration_end" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date and time of the oldest timestamp, or the query end time</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.duration_start">
<tt class="descname">duration_start</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.duration_start" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date and time of the earliest timestamp, or the query start time</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.groupby">
<tt class="descname">groupby</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.groupby" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: unicode)</td>
</tr>
</tbody>
</table>
<p>Dictionary of field names for group, if groupby statistics are requested</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.max">
<tt class="descname">max</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.max" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The maximum volume seen in the data</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.min">
<tt class="descname">min</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.min" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The minimum volume seen in the data</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.period">
<tt class="descname">period</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.period" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
<p>The difference, in seconds, between the period start and end</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.period_end">
<tt class="descname">period_end</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.period_end" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date and time of the period end</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.period_start">
<tt class="descname">period_start</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.period_start" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">datetime</td>
</tr>
</tbody>
</table>
<p>UTC date and time of the period start</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.sum">
<tt class="descname">sum</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.sum" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
<p>The total of all of the volume values seen in the data</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Statistics.unit">
<tt class="descname">unit</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Statistics.unit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The unit type of the data set</p>
</dd></dl>

</dd></dl>

<p>When a simple statistics request is invoked (using GET /v2/meters/&lt;meter_name&gt;/statistics),
it will return the standard set of <em>Statistics</em>: <em>avg</em>, <em>sum</em>, <em>min</em>, <em>max</em>, and <em>count</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If using Ceilometer data for statistics, it&#8217;s recommended to use a backend
such as <a class="reference external" href="http://docs.openstack.org/developer/gnocchi/">Gnocchi</a> rather than Ceilometer&#8217;s interface. Gnocchi is designed
specifically for this use case by providing a light-weight, aggregated model.
As they manage data differently, the API models returned by Ceilometer and Gnocchi
are different. The Gnocchi API can be found <a class="reference external" href="http://docs.openstack.org/developer/gnocchi/rest.html">here</a>.</p>
</div>
<div class="section" id="selectable-aggregates">
<h3>Selectable Aggregates<a class="headerlink" href="#selectable-aggregates" title="Permalink to this headline">¶</a></h3>
<p>The Statistics API has been extended to include the aggregate functions
<em>stddev</em> and <em>cardinality</em>. You can explicitly select these functions or any
from the standard set by specifying an aggregate function in the statistics
query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/&lt;meter_name&gt;/statistics?aggregate.func=&lt;name&gt;&amp;aggregate.param=&lt;value&gt;
</pre></div>
</div>
<p>(where aggregate.param is optional).</p>
<p>Duplicate aggregate function and parameter pairs are silently discarded from the statistics query. Partial duplicates, in the sense of the same function but differing parameters, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/&lt;meter_name&gt;/statistics?aggregate.func=cardinality&amp;aggregate.param=resource_id&amp;aggregate.func=cardinality&amp;aggregate.param=project_id
</pre></div>
</div>
<p>are, on the other hand, both allowed by the API and supported by the storage drivers.  See the <a class="reference internal" href="#functional-examples"><em>Functional examples</em></a> section for more detail.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently only <em>cardinality</em> needs aggregate.param to be specified.</p>
</div>
<dl class="type">
<dt id="Aggregate">
<em class="property">type </em><tt class="descname">Aggregate</tt><a class="headerlink" href="#Aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;func&quot;</span><span class="o">:</span> <span class="s2">&quot;cardinality&quot;</span><span class="p">,</span>
    <span class="s2">&quot;param&quot;</span><span class="o">:</span> <span class="s2">&quot;resource_id&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;func&gt;</span>cardinality<span class="nt">&lt;/func&gt;</span>
  <span class="nt">&lt;param&gt;</span>resource_id<span class="nt">&lt;/param&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Aggregate.func">
<tt class="descname">func</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Aggregate.func" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The aggregation function name</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.meters.Aggregate.param">
<tt class="descname">param</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.meters.Aggregate.param" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The paramter to the aggregation function</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="capabilities">
<h2>Capabilities<a class="headerlink" href="#capabilities" title="Permalink to this headline">¶</a></h2>
<p>The Capabilities API allows you to directly discover which functions from the
V2 API functionality, including the selectable aggregate functions, are
supported by the currently configured storage driver. A capabilities query
returns a flattened dictionary of properties with associated boolean values -
a &#8216;False&#8217; or absent value means that the corresponding feature is not
available in the backend.</p>
<dl class="get">
<dt id="get--v2-capabilities">
<tt class="descname">GET </tt><tt class="descname">/v2/capabilities</tt><a class="headerlink" href="#get--v2-capabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a flattened dictionary of API capabilities.</p>
<p>Capabilities supported by the currently configured storage driver.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#Capabilities" title="Capabilities"><tt class="xref py py-class docutils literal"><span class="pre">Capabilities</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="Capabilities">
<em class="property">type </em><tt class="descname">Capabilities</tt><a class="headerlink" href="#Capabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of the API and storage capabilities.</p>
<p>Usually constrained by restrictions imposed by the storage driver.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;api&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;meters:query:metadata&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;meters:query:simple&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;resources:query:metadata&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;resources:query:simple&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;samples:query:complex&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;samples:query:metadata&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;samples:query:simple&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:avg&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:cardinality&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:count&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:max&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:min&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:quartile&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:stddev&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:selectable:sum&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:aggregation:standard&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:groupby&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:query:metadata&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;statistics:query:simple&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="s2">&quot;storage&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;storage:production_ready&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;api&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:count<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>samples:query:metadata<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>samples:query:complex<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:standard<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:sum<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:avg<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>meters:query:metadata<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>resources:query:simple<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>samples:query:simple<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>meters:query:simple<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>resources:query:metadata<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:groupby<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:quartile<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>false<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:query:simple<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:stddev<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:cardinality<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:min<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:aggregation:selectable:max<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>statistics:query:metadata<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/api&gt;</span>
  <span class="nt">&lt;storage&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;key&gt;</span>storage:production_ready<span class="nt">&lt;/key&gt;</span>
      <span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/storage&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.capabilities.Capabilities.api">
<tt class="descname">api</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.capabilities.Capabilities.api" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: bool)</td>
</tr>
</tbody>
</table>
<p>A flattened dictionary of API capabilities</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.capabilities.Capabilities.storage">
<tt class="descname">storage</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.capabilities.Capabilities.storage" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">dict(unicode: bool)</td>
</tr>
</tbody>
</table>
<p>A flattened dictionary of storage capabilities</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="filtering-queries">
<h2>Filtering Queries<a class="headerlink" href="#filtering-queries" title="Permalink to this headline">¶</a></h2>
<p>Ceilometer&#8217;s REST API currently supports two types of queries. The Simple
Query functionality provides simple filtering on several fields of the
<em>Sample</em> type. Complex Query provides the possibility to specify queries
with logical and comparison operators on the fields of <em>Sample</em>.</p>
<p>You may also apply filters based on the values of one or more of the
<em>resource_metadata</em> field, which you can identify by using <em>metadata.&lt;field&gt;</em>
syntax in either type of query. Note, however, that given the free-form
nature of <em>resource_metadata</em> field, there is no practical or consistent way
to validate the query fields under <em>metadata</em> domain like it is done for
all other fields.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The API call will return HTTP 200 OK status for both of the
following cases: when a query with <em>metadata.&lt;field&gt;</em> does not match its
value, and when <em>&lt;field&gt;</em> itself does not exist in any of the records being
queried.</p>
</div>
<div class="section" id="simple-query">
<h3>Simple Query<a class="headerlink" href="#simple-query" title="Permalink to this headline">¶</a></h3>
<p>Many of the endpoints above accept a query filter argument, which
should be a list of Query data structures. Whatever the endpoint you
want to apply a filter on, you always filter on the fields of the <em>Sample</em>
type (for example, if you apply a filter on a query for statistics,
you won&#8217;t target <em>duration_start</em> field of <em>Statistics</em>, but <em>timestamp</em>
field of <em>Sample</em>). See <a class="reference internal" href="#api-queries"><em>API Queries</em></a> for how to query the API.</p>
<dl class="type">
<dt id="Query">
<em class="property">type </em><tt class="descname">Query</tt><a class="headerlink" href="#Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query filter.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;field&quot;</span><span class="o">:</span> <span class="s2">&quot;resource_id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;op&quot;</span><span class="o">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;field&gt;</span>resource_id<span class="nt">&lt;/field&gt;</span>
  <span class="nt">&lt;op&gt;</span>eq<span class="nt">&lt;/op&gt;</span>
  <span class="nt">&lt;value&gt;</span>bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;type&gt;</span>string<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Query.field">
<tt class="descname">field</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Query.field" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The name of the field to test</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Query.op">
<tt class="descname">op</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Query.op" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">Enum(lt, le, eq, ne, ge, gt)</td>
</tr>
</tbody>
</table>
<p>The comparison operator. Defaults to &#8216;eq&#8217;.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Query.type">
<tt class="descname">type</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Query.type" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The data type of value to compare against the stored data</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Query.value">
<tt class="descname">value</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Query.value" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The value to compare against the stored data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="complex-query">
<h3>Complex Query<a class="headerlink" href="#complex-query" title="Permalink to this headline">¶</a></h3>
<p>The filter expressions of the Complex Query feature operate on the fields
of <em>Sample</em>. The following comparison operators are
supported: <em>=</em>, <em>!=</em>, <em>&lt;</em>, <em>&lt;=</em>, <em>&gt;</em>, <em>&gt;=</em> and <em>in</em>; and the following logical
operators can be used: <em>and</em> <em>or</em> and <em>not</em>. The field names are validated
against the database models. See <a class="reference internal" href="#api-queries"><em>API Queries</em></a> for how to query the API.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>not</em> operator has different meaning in MongoDB and in SQL DB engine.
If the <em>not</em> operator is applied on a non existent metadata field then
the result depends on the DB engine. For example, if
{&#8220;not&#8221;: {&#8220;metadata.nonexistent_field&#8221; : &#8220;some value&#8221;}} filter is used in a query
the MongoDB will return every Sample object as <em>not</em> operator evaluated true
for every Sample where the given field does not exists. See more in the MongoDB doc.
On the other hand, SQL based DB engine will return empty result as the join operation
on the metadata table will return zero rows as the on clause of the join which
tries to match on the metadata field name is never fulfilled.</p>
</div>
<p>Complex Query supports defining the list of orderby expressions in the form
of [{&#8220;field_name&#8221;: &#8220;asc&#8221;}, {&#8220;field_name2&#8221;: &#8220;desc&#8221;}, ...].</p>
<p>The number of the returned items can be bounded using the <em>limit</em> option.</p>
<p>The <em>filter</em>, <em>orderby</em> and <em>limit</em> are all optional fields in a query.</p>
<dl class="post">
<dt id="post--v2-query-samples">
<tt class="descname">POST </tt><tt class="descname">/v2/query/samples</tt><a class="headerlink" href="#post--v2-query-samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Define query for retrieving Sample data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>body</strong> (<a class="reference internal" href="#ComplexQuery" title="ComplexQuery"><tt class="xref py py-class docutils literal"><span class="pre">ComplexQuery</span></tt></a>) &#8211; Query rules for the samples to be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list(<a class="reference internal" href="#Sample" title="Sample"><tt class="xref py py-class docutils literal"><span class="pre">Sample</span></tt></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="type">
<dt id="ComplexQuery">
<em class="property">type </em><tt class="descname">ComplexQuery</tt><a class="headerlink" href="#ComplexQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds a sample query encoded in json.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;filter&quot;</span><span class="o">:</span> <span class="s2">&quot;{\&quot;and\&quot;: [{\&quot;and\&quot;: [{\&quot;=\&quot;: {\&quot;counter_name\&quot;: \&quot;cpu_util\&quot;}}, {\&quot;&gt;\&quot;: {\&quot;counter_volume\&quot;: 0.23}}, {\&quot;&lt;\&quot;: {\&quot;counter_volume\&quot;: 0.26}}]}, {\&quot;or\&quot;: [{\&quot;and\&quot;: [{\&quot;&gt;\&quot;: {\&quot;timestamp\&quot;: \&quot;2013-12-01T18:00:00\&quot;}}, {\&quot;&lt;\&quot;: {\&quot;timestamp\&quot;: \&quot;2013-12-01T18:15:00\&quot;}}]}, {\&quot;and\&quot;: [{\&quot;&gt;\&quot;: {\&quot;timestamp\&quot;: \&quot;2013-12-01T18:30:00\&quot;}}, {\&quot;&lt;\&quot;: {\&quot;timestamp\&quot;: \&quot;2013-12-01T18:45:00\&quot;}}]}]}]}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;limit&quot;</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="s2">&quot;orderby&quot;</span><span class="o">:</span> <span class="s2">&quot;[{\&quot;counter_volume\&quot;: \&quot;ASC\&quot;}, {\&quot;timestamp\&quot;: \&quot;DESC\&quot;}]&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;filter&gt;</span>{&quot;and&quot;: [{&quot;and&quot;: [{&quot;=&quot;: {&quot;counter_name&quot;: &quot;cpu_util&quot;}}, {&quot;<span class="ni">&amp;gt;</span>&quot;: {&quot;counter_volume&quot;: 0.23}}, {&quot;<span class="ni">&amp;lt;</span>&quot;: {&quot;counter_volume&quot;: 0.26}}]}, {&quot;or&quot;: [{&quot;and&quot;: [{&quot;<span class="ni">&amp;gt;</span>&quot;: {&quot;timestamp&quot;: &quot;2013-12-01T18:00:00&quot;}}, {&quot;<span class="ni">&amp;lt;</span>&quot;: {&quot;timestamp&quot;: &quot;2013-12-01T18:15:00&quot;}}]}, {&quot;and&quot;: [{&quot;<span class="ni">&amp;gt;</span>&quot;: {&quot;timestamp&quot;: &quot;2013-12-01T18:30:00&quot;}}, {&quot;<span class="ni">&amp;lt;</span>&quot;: {&quot;timestamp&quot;: &quot;2013-12-01T18:45:00&quot;}}]}]}]}<span class="nt">&lt;/filter&gt;</span>
  <span class="nt">&lt;orderby&gt;</span>[{&quot;counter_volume&quot;: &quot;ASC&quot;}, {&quot;timestamp&quot;: &quot;DESC&quot;}]<span class="nt">&lt;/orderby&gt;</span>
  <span class="nt">&lt;limit&gt;</span>42<span class="nt">&lt;/limit&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.query.ComplexQuery.filter">
<tt class="descname">filter</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.query.ComplexQuery.filter" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The filter expression encoded in json.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.query.ComplexQuery.limit">
<tt class="descname">limit</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.query.ComplexQuery.limit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
<p>The maximum number of results to be returned.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.query.ComplexQuery.orderby">
<tt class="descname">orderby</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.query.ComplexQuery.orderby" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>List of single-element dicts for specifying the ordering of the results.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<dl class="type">
<dt id="Link">
<em class="property">type </em><tt class="descname">Link</tt><a class="headerlink" href="#Link" title="Permalink to this definition">¶</a></dt>
<dd><p>A link representation.</p>
<p>Data samples:</p>
<dl class="toggle docutils">
<dt>Json</dt>
<dd><div class="first last highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;href&quot;</span><span class="o">:</span> <span class="s2">&quot;http://localhost:8777/v2/meters/volume?q.field=resource_id&amp;q.value=bd9431c1-8d69-4ad3-803a-8d4a6b89fd36&quot;</span><span class="p">,</span>
    <span class="s2">&quot;rel&quot;</span><span class="o">:</span> <span class="s2">&quot;volume&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>XML</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;value&gt;</span>
  <span class="nt">&lt;href&gt;</span>http://localhost:8777/v2/meters/volume?q.field=resource_id<span class="ni">&amp;amp;</span>q.value=bd9431c1-8d69-4ad3-803a-8d4a6b89fd36<span class="nt">&lt;/href&gt;</span>
  <span class="nt">&lt;rel&gt;</span>volume<span class="nt">&lt;/rel&gt;</span>
<span class="nt">&lt;/value&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Link.href">
<tt class="descname">href</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Link.href" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The url of a link</p>
</dd></dl>

<dl class="attribute">
<dt id="ceilometer.api.controllers.v2.base.Link.rel">
<tt class="descname">rel</tt><a class="headerlink" href="#ceilometer.api.controllers.v2.base.Link.rel" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">unicode</td>
</tr>
</tbody>
</table>
<p>The name of a link</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="api-and-cli-query-examples">
<h2>API and CLI query examples<a class="headerlink" href="#api-and-cli-query-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cli-queries">
<h3>CLI Queries<a class="headerlink" href="#cli-queries" title="Permalink to this headline">¶</a></h3>
<p>Ceilometer CLI Commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ ceilometer --debug --os-username &lt;username_here&gt; --os-password &lt;password_here&gt; --os-auth-url http://localhost:5000/v2.0/ --os-tenant-name admin  meter-list
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>username</em>, <em>password</em>, and <em>tenant-name</em> options are required to be
present in these arguments or specified via environment variables. Note that
the in-line arguments will override the environment variables.</p>
</div>
</div>
<div class="section" id="api-queries">
<span id="id1"></span><h3>API Queries<a class="headerlink" href="#api-queries" title="Permalink to this headline">¶</a></h3>
<p>Ceilometer API calls:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To successfully query Ceilometer you must first get a project-specific
token from the Keystone service and add it to any API calls that you
execute against that project. See the
<a class="reference external" href="http://docs.openstack.org/api/quick-start/content/index.html#getting-credentials-a00665">OpenStack credentials documentation</a></p>
<blockquote class="last">
<div>for additional details.</div></blockquote>
</div>
<p>A simple query to return a list of available meters:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters&quot;
</pre></div>
</div>
<p>A query to return the list of resources:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/resources&quot;
</pre></div>
</div>
<p>A query to return the list of samples, limited to a specific meter type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/disk.root.size&quot;
</pre></div>
</div>
<p>A query using filters (see: <a class="reference external" href="http://docs.openstack.org/developer/ceilometer/webapi/v2.html#filtering-queries">query filter section</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/instance?q.field=metadata.event_type&amp;q.value=compute.instance.delete.start&quot;
</pre></div>
</div>
<p>Additional examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/disk.root.size?q.field=resource_id&amp;q.op=eq&amp;q.value=&lt;resource_id_here&gt;&quot;
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/instance?q.field=metadata.event_type&amp;q.value=compute.instance.exists&quot;
</pre></div>
</div>
<p>You can specify multiple filters by using an array of queries (order matters):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/instance&quot;\
  &quot;?q.field=metadata.event_type&amp;q.value=compute.instance.exists&quot;\
  &quot;&amp;q.field=timestamp&amp;q.op=gt&amp;q.value=2013-07-03T13:34:17&quot;
</pre></div>
</div>
<p>A query to find the maximum value and standard deviation (<em>max</em>, <em>stddev</em>) of
the CPU utilization for a given instance (identified by <em>resource_id</em>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; \
  &quot;http://localhost:8777/v2/meters/cpu_util/statistics?aggregate.func=max&amp;aggregate.func=stddev&quot;\
  &quot;&amp;q.field=resource_id&amp;q.op=eq&amp;q.value=64da755c-9120-4236-bee1-54acafe24980&quot;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If any of the requested aggregates are not supported by the storage driver,
a HTTP 400 error code will be returned along with an appropriate error
message.</p>
</div>
<p>JSON based example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -X GET -H &quot;X-Auth-Token: &lt;inserttokenhere&gt;&quot; -H &quot;Content-Type: application/json&quot;
-d &#39;{&quot;q&quot;: [{&quot;field&quot;: &quot;timestamp&quot;, &quot;op&quot;: &quot;ge&quot;, &quot;value&quot;: &quot;2014-04-01T13:34:17&quot;}]}&#39;
  http://localhost:8777/v2/meters/instance
</pre></div>
</div>
<p>JSON based example with multiple filters:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -X GET -H &quot;X-Auth-Token: &lt;inserttokenhere&gt;&quot; -H &quot;Content-Type: application/json&quot;
 -d &#39;{&quot;q&quot;: [{&quot;field&quot;: &quot;timestamp&quot;, &quot;op&quot;: &quot;ge&quot;, &quot;value&quot;: &quot;2014-04-01T13:34:17&quot;},
   {&quot;field&quot;: &quot;resource_id&quot;, &quot;op&quot;: &quot;eq&quot;, &quot;value&quot;: &quot;4da2b992-0dc3-4a7c-a19a-d54bf918de41&quot;}]}&#39;
   http://localhost:8777/v2/meters/instance
</pre></div>
</div>
</div>
<div class="section" id="functional-examples">
<span id="id2"></span><h3>Functional examples<a class="headerlink" href="#functional-examples" title="Permalink to this headline">¶</a></h3>
<p>The examples below are meant to help you understand how to query the
Ceilometer API to build custom meters report. The query parameters should
be encoded using one of the above methods, e.g. as the URL parameters or
as JSON encoded data passed to the GET request.</p>
<p>Get the list of samples about instances running for June 2013:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/instance
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
      &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;}]
</pre></div>
</div>
<p>Get the list of samples about instances running for June 2013 for a particular
project:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/instance
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;project_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;8d6057bc-5b90-4296-afe0-84acaa2ef909&quot;}]
</pre></div>
</div>
<p>Now you may want to have statistics on the meters you are targeting.
Consider the following example where you are getting the list of samples
about CPU utilization of a given instance (identified by its <em>resource_id</em>)
running for June 2013:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/cpu_util
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;resource_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;64da755c-9120-4236-bee1-54acafe24980&quot;}]
</pre></div>
</div>
<p>You can have statistics on the list of samples requested (<em>avg</em>, <em>sum</em>, <em>max</em>,
<em>min</em>, <em>count</em>) computed on the full duration:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/cpu_util/statistics
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;resource_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;64da755c-9120-4236-bee1-54acafe24980&quot;}]
</pre></div>
</div>
<p>You may want to aggregate samples over a given period (10 minutes for
example) in order to get an array of the statistics computed on smaller
durations:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/cpu_util/statistics
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;resource_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;64da755c-9120-4236-bee1-54acafe24980&quot;}]
period: 600
</pre></div>
</div>
<p>The <em>period</em> parameter aggregates by time range. You can also aggregate by
field using the <em>groupby</em> parameter. Currently, the <em>user_id</em>, <em>resource_id</em>,
<em>project_id</em>, and <em>source</em> fields are supported. Below is an example that uses
a query filter and group by aggregation on <em>project_id</em> and <em>resource_id</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/instance/statistics
q: [{&quot;field&quot;: &quot;user_id&quot;,
    &quot;op&quot;: &quot;eq&quot;,
    &quot;value&quot;: &quot;user-2&quot;},
    {&quot;field&quot;: &quot;source&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;source-1&quot;}]
groupby: [&quot;project_id&quot;, &quot;resource_id&quot;]
</pre></div>
</div>
<p>The statistics will be returned in a list, and each entry of the list will be
labeled with the group name. For the previous example, the first entry might
have <em>project_id</em> be &#8220;project-1&#8221; and <em>resource_id</em> be &#8220;resource-1&#8221;, the second
entry have <em>project_id</em> be &#8220;project-1&#8221; and <em>resource_id</em> be &#8220;resource-2&#8221;, and
so on.</p>
<p>You can request both period and group by aggregation in the same query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/instance/statistics
q: [{&quot;field&quot;: &quot;source&quot;,
    &quot;op&quot;: &quot;eq&quot;,
    &quot;value&quot;: &quot;source-1&quot;}]
groupby: [&quot;project_id&quot;]
period: 7200
</pre></div>
</div>
<p>Note that period aggregation is applied first, followed by group by
aggregation. Order matters because the period aggregation determines the time
ranges for the statistics.</p>
<p>Below is a real-life query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/image/statistics
groupby: [&quot;project_id&quot;, &quot;resource_id&quot;]
</pre></div>
</div>
<p>With the return values:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:33&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">1137.0</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:33&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c2334f175d8b4cb8b1db49d83cecde78&quot;</span><span class="p">,</span>
              <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;551f495f-7f49-4624-a34c-c422f2c5f90b&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:36&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">1134.0</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:36&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c2334f175d8b4cb8b1db49d83cecde78&quot;</span><span class="p">,</span>
              <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;7c1157ed-cf30-48af-a868-6c7c3ad7b531&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:34&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;sum&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span> <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:27:30&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">1136.0</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-09-18T19:08:34&quot;</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;c2334f175d8b4cb8b1db49d83cecde78&quot;</span><span class="p">,</span>
              <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;eaed9cf4-fc99-4115-93ae-4a5c37a1a7d7&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>You can request specific aggregate functions as well. For example, if you only
want the average CPU utilization, the GET request would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/cpu_util/statistics?aggregate.func=avg
</pre></div>
</div>
<p>Use the same syntax to access the aggregate functions not in the standard set,
e.g. <em>stddev</em> and <em>cardinality</em>. A request for the standard deviation of CPU utilization would take the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/cpu_util/statistics?aggregate.func=stddev
</pre></div>
</div>
<p>And would give a response such as the example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;stddev&quot;</span><span class="p">:</span><span class="mf">0.6858829535841072</span><span class="p">},</span>
  <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-30T11:13:23&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T16:07:13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">104030.0</span><span class="p">,</span>
  <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-30T11:13:23&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T16:07:13&quot;</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;%&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>The request syntax is similar for <em>cardinality</em> but with the aggregate.param
option provided. So, for example, if you want to know the number of distinct
tenants with images, you would do:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/image/statistics?aggregate.func=cardinality
                                  &amp;aggregate.param=project_id
</pre></div>
</div>
<p>For a more involved example, consider a requirement for determining, for some
tenant, the number of distinct instances (<em>cardinality</em>) as well as the total
number of instance samples (<em>count</em>). You might also want to see this
information with 15 minute long intervals. Then, using the <em>period</em> and
<em>groupby</em> options, a query would look like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meters/instance/statistics?aggregate.func=cardinality
                                  &amp;aggregate.param=resource_id
                                  &amp;aggregate.func=count
                                  &amp;groupby=project_id&amp;period=900
</pre></div>
</div>
<p>This would give an example response of the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span>
  <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mf">19.0</span><span class="p">,</span> <span class="s2">&quot;cardinality/resource_id&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">},</span>
  <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">328.478029</span><span class="p">,</span>
  <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:00:41.823919&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:06:10.301948&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:00:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:15:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;061a5c91811e4044b7dc86c6136c4f99&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
  <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mf">22.0</span><span class="p">,</span> <span class="s2">&quot;cardinality/resource_id&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">},</span>
  <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">808.00384</span><span class="p">,</span>
  <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:15:15&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:28:43.003840&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:15:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:30:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;061a5c91811e4044b7dc86c6136c4f99&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;aggregate&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s2">&quot;cardinality/resource_id&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">},</span>
  <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
  <span class="s2">&quot;duration_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:35:15&quot;</span><span class="p">,</span>
  <span class="s2">&quot;duration_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:35:15&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mi">900</span><span class="p">,</span>
  <span class="s2">&quot;period_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:30:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;period_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-31T10:45:00&quot;</span><span class="p">,</span>
  <span class="s2">&quot;groupby&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;061a5c91811e4044b7dc86c6136c4f99&quot;</span><span class="p">},</span>
  <span class="s2">&quot;unit&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>If you want to retrieve all the instances (not the list of samples, but the
resource itself) that have been run during this month for a given project,
you should ask the resource endpoint for the list of resources (all types:
including storage, images, networking, ...):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/resources
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;project_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;8d6057bc-5b90-4296-afe0-84acaa2ef909&quot;}]
</pre></div>
</div>
<p>Then look for resources that have an <em>instance</em> meter linked to them. That
will indicate resources that have been measured as being instance. You can
then request their samples to have more detailed information, like their
state or their flavor:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meter/instance
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;resource_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;64da755c-9120-4236-bee1-54acafe24980&quot;},
    {&quot;field&quot;: &quot;project_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;8d6057bc-5b90-4296-afe0-84acaa2ef909&quot;}]
</pre></div>
</div>
<p>This will return a list of samples that have been recorded on this
particular resource. You can inspect them to retrieve information, such as
the instance state (check the <em>metadata.vm_state</em> field) or the instance
flavor (check the <em>metadata.flavor</em> field).
You can request nested metadata fields by using a dot to delimit the fields
(e.g. <em>metadata.weighted_host.host</em> for <em>instance.scheduled</em> meter)</p>
<p>To retrieve only the 3 last samples of a meters, you can pass the <em>limit</em>
parameter to the query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>GET /v2/meter/instance
q: [{&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;ge&quot;,
     &quot;value&quot;: &quot;2013-06-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;timestamp&quot;,
     &quot;op&quot;: &quot;lt&quot;,
     &quot;value&quot;: &quot;2013-07-01T00:00:00&quot;},
    {&quot;field&quot;: &quot;resource_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;64da755c-9120-4236-bee1-54acafe24980&quot;},
    {&quot;field&quot;: &quot;project_id&quot;,
     &quot;op&quot;: &quot;eq&quot;,
     &quot;value&quot;: &quot;8d6057bc-5b90-4296-afe0-84acaa2ef909&quot;}]
limit: 3
</pre></div>
</div>
<p>This query would only return the last 3 samples.</p>
</div>
<div class="section" id="functional-example-for-complex-query">
<h3>Functional example for Complex Query<a class="headerlink" href="#functional-example-for-complex-query" title="Permalink to this headline">¶</a></h3>
<p>This example demonstrates how complex query filter expressions can be generated and sent
to the /v2/query/samples endpoint of Ceilometer API using POST request.</p>
<p>To check for <em>cpu_util</em> samples reported between 18:00-18:15 or between 18:30 - 18:45
on a particular date (2013-12-01), where the utilization is between 23 and 26 percent,
but not exactly 25.12 percent, the following filter expression can be created:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">:</span>
 <span class="p">[{</span><span class="s2">&quot;and&quot;</span><span class="p">:</span>
  <span class="p">[{</span><span class="s2">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;counter_name&quot;</span><span class="p">:</span> <span class="s2">&quot;cpu_util&quot;</span><span class="p">}},</span>
   <span class="p">{</span><span class="s2">&quot;&gt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;counter_volume&quot;</span><span class="p">:</span> <span class="mf">0.23</span><span class="p">}},</span>
   <span class="p">{</span><span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;counter_volume&quot;</span><span class="p">:</span> <span class="mf">0.26</span><span class="p">}},</span>
   <span class="p">{</span><span class="s2">&quot;not&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;counter_volume&quot;</span><span class="p">:</span> <span class="mf">0.2512</span><span class="p">}}}]},</span>
  <span class="p">{</span><span class="s2">&quot;or&quot;</span><span class="p">:</span>
   <span class="p">[{</span><span class="s2">&quot;and&quot;</span><span class="p">:</span>
    <span class="p">[{</span><span class="s2">&quot;&gt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-12-01T18:00:00&quot;</span><span class="p">}},</span>
     <span class="p">{</span><span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-12-01T18:15:00&quot;</span><span class="p">}}]},</span>
    <span class="p">{</span><span class="s2">&quot;and&quot;</span><span class="p">:</span>
     <span class="p">[{</span><span class="s2">&quot;&gt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-12-01T18:30:00&quot;</span><span class="p">}},</span>
      <span class="p">{</span><span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2013-12-01T18:45:00&quot;</span><span class="p">}}]}]}]}</span>
</pre></div>
</div>
<p>Different sorting criteria can be defined for the query filter, for example the results
can be ordered in an ascending order by the <em>counter_volume</em> and descending order based on
the <em>timestamp</em>. The following order by expression has to be created for specifying this
criteria:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s2">&quot;counter_volume&quot;</span><span class="p">:</span> <span class="s2">&quot;ASC&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;DESC&quot;</span><span class="p">}]</span>
</pre></div>
</div>
<p>As the current implementation accepts only string values as query filter and order by
definitions, the above defined expressions have to be converted to string values.
By adding a limit criteria to the request, which maximizes the number of returned samples
to four, the query looks like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s2">&quot;filter&quot;</span> <span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">and</span><span class="se">\&quot;</span><span class="s2">:[{</span><span class="se">\&quot;</span><span class="s2">and</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">=</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">counter_name</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">cpu_util</span><span class="se">\&quot;</span><span class="s2">}}, {</span><span class="se">\&quot;</span><span class="s2">&gt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">counter_volume</span><span class="se">\&quot;</span><span class="s2">: 0.23}}, {</span><span class="se">\&quot;</span><span class="s2">&lt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">counter_volume</span><span class="se">\&quot;</span><span class="s2">: 0.26}}, {</span><span class="se">\&quot;</span><span class="s2">not</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">=</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">counter_volume</span><span class="se">\&quot;</span><span class="s2">: 0.2512}}}]}, {</span><span class="se">\&quot;</span><span class="s2">or</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">and</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">&gt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2013-12-01T18:00:00</span><span class="se">\&quot;</span><span class="s2">}}, {</span><span class="se">\&quot;</span><span class="s2">&lt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2013-12-01T18:15:00</span><span class="se">\&quot;</span><span class="s2">}}]}, {</span><span class="se">\&quot;</span><span class="s2">and</span><span class="se">\&quot;</span><span class="s2">: [{</span><span class="se">\&quot;</span><span class="s2">&gt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2013-12-01T18:30:00</span><span class="se">\&quot;</span><span class="s2">}}, {</span><span class="se">\&quot;</span><span class="s2">&lt;</span><span class="se">\&quot;</span><span class="s2">: {</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">2013-12-01T18:45:00</span><span class="se">\&quot;</span><span class="s2">}}]}]}]}&quot;</span><span class="p">,</span>
<span class="s2">&quot;orderby&quot;</span> <span class="p">:</span> <span class="s2">&quot;[{</span><span class="se">\&quot;</span><span class="s2">counter_volume</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">ASC</span><span class="se">\&quot;</span><span class="s2">}, {</span><span class="se">\&quot;</span><span class="s2">timestamp</span><span class="se">\&quot;</span><span class="s2">: </span><span class="se">\&quot;</span><span class="s2">DESC</span><span class="se">\&quot;</span><span class="s2">}]&quot;</span><span class="p">,</span>
<span class="s2">&quot;limit&quot;</span> <span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A query request looks like the following with curl:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -X POST -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; -H &#39;Content-Type: application/json&#39; \
  -d &#39;&lt;insertyourqueryexpressionhere&gt;&#39; \
   http://localhost:8777/v2/query/samples
</pre></div>
</div>
</div>
<div class="section" id="user-defined-data">
<span id="id3"></span><h3>User-defined data<a class="headerlink" href="#user-defined-data" title="Permalink to this headline">¶</a></h3>
<p>It is possible to add your own samples (created from data retrieved in any
way like monitoring agents on your instances) in Ceilometer to store
them and query on them. You can even get <em>Statistics</em> on your own inserted data.
By adding a <em>Sample</em> to a <em>Resource</em>, you create automatically the corresponding
<em>Meter</em> if it does not exist already. To achieve this, you have to POST a list
of one to many samples in JSON format:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>$ curl -X POST -H &#39;X-Auth-Token: &lt;inserttokenhere&gt;&#39; -H &#39;Content-Type: application/json&#39; \
  -d &#39;&lt;insertyoursampleslisthere&gt;&#39; \
  http://localhost:8777/v2/meters/&lt;insertyourmeternamehere&gt;
</pre></div>
</div>
<p>Fields <em>source</em>, <em>timestamp</em>, <em>project_id</em> and <em>user_id</em> are automatically
added if not present in the samples. Field <em>message_id</em> is not taken into
account if present and an internal value will be set.</p>
<p>By default, samples posted via API will be placed on the notification bus and
processed by the notification agent.</p>
<p>To avoid re-queuing the data, samples posted via API can be stored directly to
the storage backend verbatim by specifying a boolean flag &#8216;direct&#8217; in the
request URL, like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>POST /v2/meters/ram_util?direct=True
</pre></div>
</div>
<p>Samples posted this way will bypass pipeline processing.</p>
<p>Here is an example showing how to add a sample for a <em>ram_util</em> meter (already
existing or not):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>POST /v2/meters/ram_util
body: [
        {
          &quot;counter_name&quot;: &quot;ram_util&quot;,
          &quot;user_id&quot;: &quot;4790fbafad2e44dab37b1d7bfc36299b&quot;,
          &quot;resource_id&quot;: &quot;87acaca4-ae45-43ae-ac91-846d8d96a89b&quot;,
          &quot;resource_metadata&quot;: {
            &quot;display_name&quot;: &quot;my_instance&quot;,
            &quot;my_custom_metadata_1&quot;: &quot;value1&quot;,
            &quot;my_custom_metadata_2&quot;: &quot;value2&quot;
           },
          &quot;counter_unit&quot;: &quot;%&quot;,
          &quot;counter_volume&quot;: 8.57762938230384,
          &quot;project_id&quot;: &quot;97f9a6aaa9d842fcab73797d3abb2f53&quot;,
          &quot;counter_type&quot;: &quot;gauge&quot;
        }
      ]
</pre></div>
</div>
<p>You get back the same list containing your example completed with the missing
fields : <em>source</em> and <em>timestamp</em> in this case.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">V2 Web API</a><ul>
<li><a class="reference internal" href="#resources">Resources</a></li>
<li><a class="reference internal" href="#meters">Meters</a></li>
<li><a class="reference internal" href="#samples-and-statistics">Samples and Statistics</a><ul>
<li><a class="reference internal" href="#selectable-aggregates">Selectable Aggregates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#capabilities">Capabilities</a></li>
<li><a class="reference internal" href="#filtering-queries">Filtering Queries</a><ul>
<li><a class="reference internal" href="#simple-query">Simple Query</a></li>
<li><a class="reference internal" href="#complex-query">Complex Query</a></li>
</ul>
</li>
<li><a class="reference internal" href="#links">Links</a></li>
<li><a class="reference internal" href="#api-and-cli-query-examples">API and CLI query examples</a><ul>
<li><a class="reference internal" href="#cli-queries">CLI Queries</a></li>
<li><a class="reference internal" href="#api-queries">API Queries</a></li>
<li><a class="reference internal" href="#functional-examples">Functional examples</a></li>
<li><a class="reference internal" href="#functional-example-for-complex-query">Functional example for Complex Query</a></li>
<li><a class="reference internal" href="#user-defined-data">User-defined data</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">Web API</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../install/index.html"
                                  title="next chapter">Installing Ceilometer</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/ceilometer
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/webapi/v2.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../http-routingtable.html" title="HTTP Routing Table"
             >routing table</a> |</li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../install/index.html" title="Installing Ceilometer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Web API"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Ceilometer 8.0.1.dev11 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Web API</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2012-2015, OpenStack Foundation.
      Last updated on &#39;Mon Feb 13 17:56:46 2017, commit ec508a1&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Ceilometer");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>