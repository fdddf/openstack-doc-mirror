<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Quick Start</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/videos/summits">Summit Videos</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
    <h2>Quick Start</h2>
  </div>
  <div class="docs-actions">
    
    <a href="index.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Developer Documentation"></i></a>
    
    
    <a href="installation-hosts-limited-connectivity.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Installation on hosts with limited connectivity"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 13:56</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Quick Start</a><ul>
<li><a class="reference internal" href="#building-an-aio">Building an AIO</a></li>
<li><a class="reference internal" href="#rebooting-an-aio">Rebooting an AIO</a></li>
<li><a class="reference internal" href="#rebuilding-an-aio">Rebuilding an AIO</a></li>
<li><a class="reference internal" href="#reference-diagram-for-an-aio-build">Reference Diagram for an AIO Build</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="quick-start">
<h1>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<p>All-in-one (AIO) builds are a great way to perform an OpenStack-Ansible build
for:</p>
<ul class="simple">
<li>a development environment</li>
<li>an overview of how all of the OpenStack services fit together</li>
<li>a simple lab deployment</li>
</ul>
<p>Although AIO builds aren&#8217;t recommended for large production deployments,
they&#8217;re great for smaller proof-of-concept deployments.</p>
<p>Absolute minimum server resources (currently used for gate checks):</p>
<ul class="simple">
<li>8 vCPU&#8217;s</li>
<li>50GB free disk space on the root partition</li>
<li>8GB RAM</li>
</ul>
<p>Recommended server resources:</p>
<ul class="simple">
<li>CPU/motherboard that supports <a class="reference external" href="https://en.wikipedia.org/wiki/Hardware-assisted_virtualization">hardware-assisted virtualization</a></li>
<li>8 CPU Cores</li>
<li>80GB free disk space on the root partition, or 60GB+ on a blank
secondary disk. Using a secondary disk requires the use of the
<tt class="docutils literal"><span class="pre">bootstrap_host_data_disk_device</span></tt> parameter. Please see
<a class="reference internal" href="#building-an-aio">Building an AIO</a> for more details.</li>
<li>16GB RAM</li>
</ul>
<p>It&#8217;s <cite>possible</cite> to perform AIO builds within a virtual machine for
demonstration and evaluation, but your virtual machines will perform poorly.
For production workloads, multiple nodes for specific roles are recommended.</p>
<div class="section" id="building-an-aio">
<h2>Building an AIO<a class="headerlink" href="#building-an-aio" title="Permalink to this headline">¶</a></h2>
<p>There are three steps to running an AIO build, with an optional first step
should you need to customize your build:</p>
<ul class="simple">
<li>Configuration <em>(this step is optional)</em></li>
<li>Install and bootstrap Ansible</li>
<li>Initial host bootstrap</li>
<li>Run playbooks</li>
</ul>
<p>When building an AIO on a new server, it is recommended that all
system packages are upgraded and then reboot into the new kernel:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get dist-upgrade
<span class="gp">#</span> reboot
</pre></div>
</div>
<p>Start by cloning the OpenStack-Ansible repository and changing into the
repository root directory:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> git clone https://git.openstack.org/openstack/openstack-ansible <span class="se">\</span>
<span class="go">    /opt/openstack-ansible</span>
<span class="gp">#</span> <span class="nb">cd</span> /opt/openstack-ansible
</pre></div>
</div>
<p>Next switch the applicable branch/tag to be deployed from. Note that
deploying from the head of a branch may result in an unstable build due to
changes in flight and upstream OpenStack changes. For a test (ie not a
development) build it is usually best to checkout the latest tagged version.</p>
<pre class="literal-block">
# # List all existing tags.
# git tag -l

# # Checkout the stable branch and find just the latest tag
# git checkout stable/mitaka
# git describe --abbrev=0 --tags

# # Checkout the latest tag from either method of retrieving the tag.
# git checkout 14.0.7
</pre>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Mitaka release is only compatible with Ubuntu 14.04 (Trusy Tahr).</p>
</div>
<p>By default the scripts deploy all OpenStack services with sensible defaults
for the purpose of a gate check, development or testing system.</p>
<p>Review the <a class="reference external" href="https://git.openstack.org/cgit/openstack/openstack-ansible/tree/tests/roles/bootstrap-host/defaults/main.yml">bootstrap-host role defaults</a> file to see
various configuration options.  Deployers have the option to change how the
host is bootstrapped. This is useful when you wish the AIO to make use of
a secondary data disk, or when using this role to bootstrap a multi-node
development environment.</p>
<p>The bootstrap script is pre-set to pass the environment variable
<tt class="docutils literal"><span class="pre">BOOTSTRAP_OPTS</span></tt> as an additional option to the bootstrap process. For
example, if you wish to set the bootstrap to re-partition a specific
secondary storage device (/dev/sdb), which will erase all of the data on the
device, then execute:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">export</span> <span class="nv">BOOTSTRAP_OPTS</span><span class="o">=</span><span class="s2">&quot;bootstrap_host_data_disk_device=sdb&quot;</span>
</pre></div>
</div>
<p>Additional options may be implemented by simply concatenating them with
a space between each set of options, for example:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">export</span> <span class="nv">BOOTSTRAP_OPTS</span><span class="o">=</span><span class="s2">&quot;bootstrap_host_data_disk_device=sdb&quot;</span>
<span class="gp">#</span> <span class="nb">export</span> <span class="nv">BOOTSTRAP_OPTS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BOOTSTRAP_OPTS</span><span class="si">}</span><span class="s2"> bootstrap_host_ubuntu_repo=http://mymirror.example.com/ubuntu&quot;</span>
</pre></div>
</div>
<p>You may wish to change the role fetch mode. Options are &#8220;galaxy&#8221; and
&#8220;git-clone&#8221;. The default for this option is &#8220;galaxy&#8221;.</p>
<dl class="docutils">
<dt>options:</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">galaxy:</th><td class="field-body">Resolve all role dependencies using the <tt class="docutils literal"><span class="pre">ansible-galaxy</span></tt> resolver</td>
</tr>
<tr class="field-even field"><th class="field-name">git-clone:</th><td class="field-body">Clone all of the role dependencies using native git</td>
</tr>
</tbody>
</table>
</dd>
<dt>Notes:</dt>
<dd>When doing role development it may be useful to set
<tt class="docutils literal"><span class="pre">ANSIBLE_ROLE_FETCH_MODE</span></tt> to <em>git-clone</em>. This will provide you the
ability to develop roles within the environment by modifying, patching, or
committing changes using an intact git tree while the <em>galaxy</em> option scrubs
the <tt class="docutils literal"><span class="pre">.git</span></tt> directory when it resolves a dependency.</dd>
</dl>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">ANSIBLE_ROLE_FETCH_MODE</span><span class="o">=</span>git-clone
</pre></div>
</div>
<p>The next step is to bootstrap Ansible and the Ansible roles for the
development environment.  Deployers can customize roles by adding variables to
override the defaults in each role (see <a class="reference internal" href="extending.html#adding-galaxy-roles"><em>Adding Galaxy roles</em></a>).  Run the
following to bootstrap Ansible:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> scripts/bootstrap-ansible.sh
</pre></div>
</div>
<p>In order for all the services to run, the host must be prepared with the
appropriate disks, packages, network configuration and a base configuration
for the OpenStack Deployment. This preparation is completed by executing:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> scripts/bootstrap-aio.sh
</pre></div>
</div>
<p>If you wish to add any additional configuration entries for the OpenStack
configuration then this can be done now by editing
<tt class="docutils literal"><span class="pre">/etc/openstack_deploy/user_variables.yml</span></tt>. Please see the <a class="reference external" href="http://docs.openstack.org/project-deploy-guide/openstack-ansible/newton/">Install Guide</a>
for more details.</p>
<p>Finally, run the playbooks by executing:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> scripts/run-playbooks.sh
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not execute the <tt class="docutils literal"><span class="pre">run-playbooks.sh</span></tt> more than once. If something goes
wrong, it is necessary to start over as described below in the
<a class="reference internal" href="#rebuilding-an-aio">Rebuilding an AIO</a> section. Alternatively, it may be possible to
individually run each playbook rather than starting over. If any playbooks
need to be re-run after the initial deploy, they should be run from the
playbooks directory with the openstack-ansible command. Executing
<tt class="docutils literal"><span class="pre">run-playbooks.sh</span></tt> a second time results in an inconsistent state for LXC
IPtables rules and causes network connectivity issues from within containers.</p>
</div>
<p>The installation process will take a while to complete, but here are some
general estimates:</p>
<ul class="simple">
<li>Bare metal systems with SSD storage: ~ 30-50 minutes</li>
<li>Virtual machines with SSD storage: ~ 45-60 minutes</li>
<li>Systems with traditional hard disks: ~ 90-120 minutes</li>
</ul>
<p>Once the playbooks have fully executed, it is possible to experiment with
various settings changes in <tt class="docutils literal"><span class="pre">/etc/openstack_deploy/user_variables.yml</span></tt> and
only run individual playbooks. For example, to run the playbook for the
Keystone service, execute:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> /opt/openstack-ansible/playbooks
<span class="gp">#</span> openstack-ansible os-keystone-install.yml
</pre></div>
</div>
<p><strong>Note:</strong> The AIO bootstrap playbook will still build containers for services
that are not requested for deployment, but the service will not be deployed
in that container.</p>
</div>
<div class="section" id="rebooting-an-aio">
<h2>Rebooting an AIO<a class="headerlink" href="#rebooting-an-aio" title="Permalink to this headline">¶</a></h2>
<p>As the AIO includes all three cluster members of MariaDB/Galera, the cluster
has to be re-initialized after the host is rebooted.</p>
<p>This is done by executing the following:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> /opt/openstack-ansible/playbooks
<span class="gp">#</span> openstack-ansible -e <span class="nv">galera_ignore_cluster_state</span><span class="o">=</span><span class="nb">true</span> galera-install.yml
</pre></div>
</div>
<p>If this fails to get the database cluster back into a running state, then
please make use of the <a class="reference external" href="http://docs.openstack.org/developer/openstack-ansible/newton/developer-docs/ops-galera-recovery.html">Galera Cluster Recovery</a> page in the Install Guide.</p>
</div>
<div class="section" id="rebuilding-an-aio">
<h2>Rebuilding an AIO<a class="headerlink" href="#rebuilding-an-aio" title="Permalink to this headline">¶</a></h2>
<p>Sometimes it may be useful to destroy all the containers and rebuild the AIO.
While it is preferred that the AIO is entirely destroyed and rebuilt, this
isn&#8217;t always practical. As such the following may be executed instead:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="c1"># Move to the playbooks directory.</span>
<span class="gp">#</span> <span class="nb">cd</span> /opt/openstack-ansible/playbooks

<span class="gp">#</span> <span class="c1"># Destroy all of the running containers.</span>
<span class="gp">#</span> openstack-ansible lxc-containers-destroy.yml

<span class="gp">#</span> <span class="c1"># On the host stop all of the services that run locally and not</span>
<span class="gp">#</span> <span class="c1">#  within a container.</span>
<span class="gp">#</span> <span class="k">for</span> i in <span class="se">\</span>
<span class="gp">       $</span><span class="o">(</span>ls /etc/init <span class="se">\</span>
<span class="go">         | grep -e &quot;nova\|swift\|neutron\|cinder&quot; \</span>
<span class="go">         | awk -F&#39;.&#39; &#39;{print $1}&#39;); do \</span>
<span class="go">    service $i stop; \</span>
<span class="go">  done</span>

<span class="gp">#</span> <span class="c1"># Uninstall the core services that were installed.</span>
<span class="gp">#</span> <span class="k">for</span> i in <span class="k">$(</span>pip freeze <span class="p">|</span> grep -e <span class="s2">&quot;nova\|neutron\|keystone\|swift\|cinder&quot;</span><span class="k">)</span><span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
<span class="go">    pip uninstall -y $i; done</span>

<span class="gp">#</span> <span class="c1"># Remove crusty directories.</span>
<span class="gp">#</span> rm -rf /openstack /etc/<span class="o">{</span>neutron,nova,swift,cinder<span class="o">}</span> <span class="se">\</span>
<span class="go">         /var/log/{neutron,nova,swift,cinder}</span>

<span class="gp">#</span> <span class="c1"># Remove the pip configuration files on the host</span>
<span class="gp">#</span> rm -rf /root/.pip

<span class="gp">#</span> <span class="c1"># Remove the apt package manager proxy</span>
<span class="gp">#</span> rm /etc/apt/apt.conf.d/00apt-cacher-proxy
</pre></div>
</div>
<p>Should an existing AIO environment need to be reinstalled, the most efficient
method is to destroy the host operating system and start over. For this reason,
AIOs are best run inside of some form of virtual machine or cloud guest.</p>
</div>
<div class="section" id="reference-diagram-for-an-aio-build">
<h2>Reference Diagram for an AIO Build<a class="headerlink" href="#reference-diagram-for-an-aio-build" title="Permalink to this headline">¶</a></h2>
<p>Here is a basic diagram that attempts to illustrate what the resulting AIO
deployment looks like.</p>
<p>This diagram is not to scale and is not even 100% accurate, this diagram was
built for informational purposes only and should <strong>ONLY</strong> be used as such.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>          -------&gt;[ ETH0 == Public Network ]
          |
          V                        [  *   ] Socket Connections
[ HOST MACHINE ]                   [ &lt;&gt;v^ ] Network Connections
  *       ^  *
  |       |  |-------------------------------------------------------
  |       |                                                         |
  |       |----------------&gt;[ HAProxy ]                             |
  |                                 ^                               |
  |                                 |                               |
  |                                 V                               |
  |                          (BR-Interfaces)&lt;-------                |
  |                                  ^     *      |                 |
  *-[ LXC ]*--*----------------------|-----|------|----|            |
  |           |                      |     |      |  | |            |
  |           |                      |     |      |  | |            |
  |           |                      |     |      |  | |            |
  |           |                      |     |      V  * |            |
  |           *                      |     |   [ Galera x3 ]        |
  |        [ Memcached ]&lt;------------|     |           |            |
  *-------*[ Rsyslog ]&lt;--------------|--|  |           *            |
  |        [ Repos Server x3 ]&lt;------|  ---|--&gt;[ RabbitMQ x3 ]      |
  |        [ Horizon x2 ]&lt;-----------|  |  |                        |
  |        [ Nova api ec2 ]&lt;---------|--|  |                        |
  |        [ Nova api os ]&lt;----------|-&gt;|  |                        |
  |        [ Nova console ]&lt;---------|  |  |                        |
  |        [ Nova Cert ]&lt;------------|-&gt;|  |                        |
  |        [ Ceilometer api ]&lt;-------|-&gt;|  |                        |
  |        [ Ceilometer collector ]&lt;-|-&gt;|  |                        |
  |        [ Cinder api ]&lt;-----------|-&gt;|  |                        |
  |        [ Glance api ]&lt;-----------|-&gt;|  |                        |
  |        [ Heat apis ]&lt;------------|-&gt;|  | [ Loop back devices ]*-*
  |        [ Heat engine ]&lt;----------|-&gt;|  |    \        \          |
  | ------&gt;[ Nova api metadata ]     |  |  |    { LVM }  { XFS x3 } |
  | |      [ Nova conductor ]&lt;-------|  |  |       *         *      |
  | |-----&gt;[ Nova scheduler ]--------|-&gt;|  |       |         |      |
  | |      [ Keystone x3 ]&lt;----------|-&gt;|  |       |         |      |
  | | |---&gt;[ Neutron agents ]*-------|--|---------------------------*
  | | |    [ Neutron server ]&lt;-------|-&gt;|          |         |      |
  | | | |-&gt;[ Swift proxy ]&lt;-----------  |          |         |      |
  *-|-|-|-*[ Cinder volume ]*----------------------*         |      |
  | | | |                               |                    |      |
  | | | -----------------------------------------            |      |
  | | ----------------------------------------- |            |      |
  | |          -------------------------|     | |            |      |
  | |          |                              | |            |      |
  | |          V                              | |            *      |
  ----&gt;[ Compute ]*[ Neutron linuxbridge ]&lt;---| |-&gt;[ Swift storage ]-
</pre></div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="index.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Developer Documentation"></i></a>
          
          
            <a href="installation-hosts-limited-connectivity.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Installation on hosts with limited connectivity"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 13:56</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../upgrade-guide/index.html">Upgrade Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation-hosts-limited-connectivity.html">Installation on hosts with limited connectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">Included Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks.html">Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending.html">Extending OpenStack-Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops.html">Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html">Contributor Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="bug-triage.html">OpenStack-Ansible Bug Triage</a></li>
<li class="toctree-l2"><a class="reference internal" href="core-reviewers.html">Core Reviewers</a></li>
<li class="toctree-l2"><a class="reference internal" href="role-services.html">Roles and Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="inventory.html">OpenStack-Ansible Inventory</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.11.3.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "developer-docs/quickstart-aio" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/openstack-ansible/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: da2a8c349892471b0c8ae109fd44b04fd7a28f43";
        var bugProject = "openstack-ansible";
        var bugTitle = "Documentation bug";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 14.0.8.dev20 on 2017-02-14 13:56";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>