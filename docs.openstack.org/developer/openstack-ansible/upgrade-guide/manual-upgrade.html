<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Upgrading manually</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Upgrading manually</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="script-upgrade.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Upgrading by using a script"></i></a>
    
    
    <a href="reference.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Reference information for the upgrades"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 17:57</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Upgrading manually</a><ul>
<li><a class="reference internal" href="#check-out-the-current-release-formal-name-release">Check out the Ocata release</a></li>
<li><a class="reference internal" href="#prepare-the-shell-variables">Prepare the shell variables</a></li>
<li><a class="reference internal" href="#bootstrap-ansible-again">Bootstrap Ansible again</a></li>
<li><a class="reference internal" href="#change-to-the-playbooks-directory">Change to the playbooks directory</a></li>
<li><a class="reference internal" href="#preflight-checks">Preflight checks</a></li>
<li><a class="reference internal" href="#clean-up-old-facts">Clean up old facts</a></li>
<li><a class="reference internal" href="#update-configuration-and-environment-files">Update configuration and environment files</a></li>
<li><a class="reference internal" href="#update-user-secrets-file">Update user secrets file</a></li>
<li><a class="reference internal" href="#clean-up-the-pip-conf-file">Clean up the pip.conf file</a></li>
<li><a class="reference internal" href="#upgrade-hosts">Upgrade hosts</a></li>
<li><a class="reference internal" href="#update-galera-lxc-container-configuration">Update Galera LXC container configuration</a></li>
<li><a class="reference internal" href="#perform-a-controlled-rolling-restart-of-the-galera-containers">Perform a controlled rolling restart of the Galera containers</a></li>
<li><a class="reference internal" href="#update-haproxy-configuration">Update HAProxy configuration</a></li>
<li><a class="reference internal" href="#update-repository-servers">Update repository servers</a></li>
<li><a class="reference internal" href="#upgrade-the-mariadb-version">Upgrade the MariaDB version</a></li>
<li><a class="reference internal" href="#upgrade-the-infrastructure">Upgrade the infrastructure</a></li>
<li><a class="reference internal" href="#flush-memcached-cache">Flush Memcached cache</a></li>
<li><a class="reference internal" href="#upgrade-openstack">Upgrade OpenStack</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="upgrading-manually">
<span id="id1"></span><h1>Upgrading manually<a class="headerlink" href="#upgrading-manually" title="Permalink to this headline">¶</a></h1>
<p>Deployers can run the upgrade steps manually. Manual upgrades are useful for
scoping the changes in the upgrade process (for example, in very large
deployments with strict SLA requirements), or performing other upgrade
automations beyond what is provided by OpenStack-Ansible.</p>
<p>The steps detailed here match those performed by the <code class="docutils literal"><span class="pre">run-upgrade.sh</span></code>
script. You can safely run these steps multiple times.</p>
<div class="section" id="check-out-the-current-release-formal-name-release">
<h2>Check out the Ocata release<a class="headerlink" href="#check-out-the-current-release-formal-name-release" title="Permalink to this headline">¶</a></h2>
<p>Ensure that your OpenStack-Ansible code is on the latest
Ocata tagged release.</p>
<pre class="literal-block">
# git checkout 15.0.0.0rc1
</pre>
</div>
<div class="section" id="prepare-the-shell-variables">
<h2>Prepare the shell variables<a class="headerlink" href="#prepare-the-shell-variables" title="Permalink to this headline">¶</a></h2>
<p>Define these variables to reduce typing when running the remaining upgrade
tasks. Because these environments variables are shortcuts, this step is
optional. If you prefer, you can reference the files directly during the
upgrade.</p>
<p>From the <code class="docutils literal"><span class="pre">openstack-ansible</span></code> root directory, run the following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">export</span> <span class="nv">MAIN_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="gp">#</span> <span class="nb">export</span> <span class="nv">SCRIPTS_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MAIN_PATH</span><span class="si">}</span><span class="s2">/scripts&quot;</span>
<span class="gp">#</span> <span class="nb">export</span> <span class="nv">UPGRADE_PLAYBOOKS</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SCRIPTS_PATH</span><span class="si">}</span><span class="s2">/upgrade-utilities/playbooks&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="bootstrap-ansible-again">
<h2>Bootstrap Ansible again<a class="headerlink" href="#bootstrap-ansible-again" title="Permalink to this headline">¶</a></h2>
<p>Bootstrap Ansible again to ensure that all OpenStack-Ansible role
dependencies are in place before you run playbooks from the
Ocata release.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="si">${</span><span class="nv">SCRIPTS_PATH</span><span class="si">}</span>/bootstrap-ansible.sh
</pre></div>
</div>
</div>
<div class="section" id="change-to-the-playbooks-directory">
<h2>Change to the playbooks directory<a class="headerlink" href="#change-to-the-playbooks-directory" title="Permalink to this headline">¶</a></h2>
<p>Change to the playbooks directory so that the OpenStack-Ansible dynamic
inventory is found automatically.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> playbooks
</pre></div>
</div>
</div>
<div class="section" id="preflight-checks">
<h2>Preflight checks<a class="headerlink" href="#preflight-checks" title="Permalink to this headline">¶</a></h2>
<p>Before starting with the upgraded version, perform preflight checks to ensure
your environment is stable. If any of those checks fail, the upgrade should
stop to let the deployer chose what to do.</p>
</div>
<div class="section" id="clean-up-old-facts">
<h2>Clean up old facts<a class="headerlink" href="#clean-up-old-facts" title="Permalink to this headline">¶</a></h2>
<p>Some configurations have changed, so purge old facts before
the upgrade. For more information, see <a class="reference internal" href="reference-upgrade-playbooks.html#fact-cleanup-playbook"><span>ansible_fact_cleanup.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/ansible_fact_cleanup.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="update-configuration-and-environment-files">
<h2>Update configuration and environment files<a class="headerlink" href="#update-configuration-and-environment-files" title="Permalink to this headline">¶</a></h2>
<p>The user configuration files in the <code class="docutils literal"><span class="pre">/etc/openstack_deploy/</span></code> directory and
the environment layout in the <code class="docutils literal"><span class="pre">/etc/openstack_deploy/env.d</span></code> directory have
new name values added in Ocata. Update the files as
follows. For more information, see <a class="reference internal" href="reference-upgrade-playbooks.html#config-change-playbook"><span>deploy-config-changes.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/deploy-config-changes.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="update-user-secrets-file">
<h2>Update user secrets file<a class="headerlink" href="#update-user-secrets-file" title="Permalink to this headline">¶</a></h2>
<p>Ocata introduces new user secrets to the stack.
These secrets are populated automatically when you run the following playbook.
For more information, see <a class="reference internal" href="reference-upgrade-playbooks.html#user-secrets-playbook"><span>user-secrets-adjustment.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/user-secrets-adjustment.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="clean-up-the-pip-conf-file">
<h2>Clean up the pip.conf file<a class="headerlink" href="#clean-up-the-pip-conf-file" title="Permalink to this headline">¶</a></h2>
<p>The presence of the <code class="docutils literal"><span class="pre">pip.conf</span></code> file can cause build failures during the
upgrade to Ocata. This playbook removes the
<code class="docutils literal"><span class="pre">pip.conf</span></code> file on all the physical servers and on the repo containers.
For more information, see <a class="reference internal" href="reference-upgrade-playbooks.html#pip-conf-removal"><span>pip-conf-removal.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/pip-conf-removal.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrade-hosts">
<h2>Upgrade hosts<a class="headerlink" href="#upgrade-hosts" title="Permalink to this headline">¶</a></h2>
<p>Before installing the infrastructure and OpenStack, update the host machines.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible setup-hosts.yml --limit <span class="s1">&#39;!galera_all&#39;</span>
</pre></div>
</div>
<p>This command is the same setting up hosts on a new installation. The
<code class="docutils literal"><span class="pre">galera_all</span></code> host group is excluded to prevent reconfiguration and
restarting of any Galera containers.</p>
</div>
<div class="section" id="update-galera-lxc-container-configuration">
<h2>Update Galera LXC container configuration<a class="headerlink" href="#update-galera-lxc-container-configuration" title="Permalink to this headline">¶</a></h2>
<p>Update the Galera container configuration independently.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible lxc-containers-create.yml -e <span class="se">\</span>
<span class="s1">&#39;lxc_container_allow_restarts=false&#39;</span> --limit galera_all
</pre></div>
</div>
<p>This command is a subset of the host setup playbook, limited to the
<code class="docutils literal"><span class="pre">galera_all</span></code> host group. The configuration of those containers is
updated but a restart for any changes to take effect is deferred to another
playbook (see the next section).</p>
</div>
<div class="section" id="perform-a-controlled-rolling-restart-of-the-galera-containers">
<h2>Perform a controlled rolling restart of the Galera containers<a class="headerlink" href="#perform-a-controlled-rolling-restart-of-the-galera-containers" title="Permalink to this headline">¶</a></h2>
<p>Restart containers one at a time, ensuring that each is started, responding,
and synchronized with the other nodes in the cluster before moving on to the
next. This step allows the LXC container configuration that you applied earlier
to take effect, ensuring that the containers are restarted in a controlled
fashion.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/galera-cluster-rolling-restart.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="update-haproxy-configuration">
<h2>Update HAProxy configuration<a class="headerlink" href="#update-haproxy-configuration" title="Permalink to this headline">¶</a></h2>
<p>Install and update any new or changed HAProxy service configurations.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible haproxy-install.yml
</pre></div>
</div>
</div>
<div class="section" id="update-repository-servers">
<h2>Update repository servers<a class="headerlink" href="#update-repository-servers" title="Permalink to this headline">¶</a></h2>
<p>Update the configuration of the repository servers and build new packages
required by the Ocata release.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible repo-install.yml
</pre></div>
</div>
</div>
<div class="section" id="upgrade-the-mariadb-version">
<h2>Upgrade the MariaDB version<a class="headerlink" href="#upgrade-the-mariadb-version" title="Permalink to this headline">¶</a></h2>
<p>Upgrade MariaDB to the most recent 10.x minor release across the cluster.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible galera-install.yml -e <span class="s1">&#39;galera_upgrade=true&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrade-the-infrastructure">
<h2>Upgrade the infrastructure<a class="headerlink" href="#upgrade-the-infrastructure" title="Permalink to this headline">¶</a></h2>
<p>The following commands perform all of the steps from the setup-infrastructure
playbook, except for <code class="docutils literal"><span class="pre">repo-install.yml</span></code>, <code class="docutils literal"><span class="pre">haproxyinstall.yml</span></code>, and
<code class="docutils literal"><span class="pre">galera-install.yml</span></code> which you ran earlier.
Running these playbook applies the relevant Ocata
settings and packages.</p>
<p>For certain versions of Newton, you must upgrade
the RabbitMQ service.</p>
<p>For more information, see <a class="reference internal" href="reference-upgrade-playbooks.html#setup-infra-playbook"><span>setup-infrastructure.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible unbound-install.yml
<span class="gp">#</span> openstack-ansible memcached-install.yml
<span class="gp">#</span> openstack-ansible rabbitmq-install.yml -e <span class="s1">&#39;rabbitmq_upgrade=true&#39;</span>
<span class="gp">#</span> openstack-ansible etcd-install.yml
<span class="gp">#</span> openstack-ansible utility-install.yml
<span class="gp">#</span> openstack-ansible rsyslog-install.yml
</pre></div>
</div>
</div>
<div class="section" id="flush-memcached-cache">
<h2>Flush Memcached cache<a class="headerlink" href="#flush-memcached-cache" title="Permalink to this headline">¶</a></h2>
<p>Flush all of the caches in Memcached. For more information,
see <a class="reference internal" href="reference-upgrade-playbooks.html#memcached-flush"><span>memcached-flush.yml</span></a>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible <span class="s2">&quot;</span><span class="si">${</span><span class="nv">UPGRADE_PLAYBOOKS</span><span class="si">}</span><span class="s2">/memcached-flush.yml&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrade-openstack">
<h2>Upgrade OpenStack<a class="headerlink" href="#upgrade-openstack" title="Permalink to this headline">¶</a></h2>
<p>Upgrade the OpenStack components with the same installation
playbook, without any additional options.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openstack-ansible setup-openstack.yml
</pre></div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="script-upgrade.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Upgrading by using a script"></i></a>
          
          
            <a href="reference.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Reference information for the upgrades"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 17:57</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../draft-operations-guide/index.html">Operations guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Upgrade Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="minor-upgrade.html">Executing a minor version upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="script-upgrade.html">Upgrading by using a script</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Upgrading manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference information for the upgrades</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer-docs/index.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inventory/index.html">Inventory</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "upgrade-guide/manual-upgrade" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-ansible/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 55cab808b67095e989137cf8816c323575fc43ad";
        var bugProject = "openstack-ansible";
        var bugTitle = "Documentation bug";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 15.0.0.0rc2.dev43 on 2017-02-14 17:57";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>