<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Usage &mdash; networking-bgpvpn 5.0.1.dev77 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.0.1.dev77',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="networking-bgpvpn 5.0.1.dev77 documentation" href="index.html" />
    <link rel="next" title="Heat" href="heat.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="use-from-neutron-api-cli">
<h2>Use from Neutron API CLI<a class="headerlink" href="#use-from-neutron-api-cli" title="Permalink to this headline">¶</a></h2>
<p>Example commands to use by the admin to create a BGPVPN resource:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>neutron bgpvpn-create --route-targets <span class="m">64512</span>:1 --tenant-id b954279e1e064dc9b8264474cb3e6bd2
neutron bgpvpn-list
neutron bgpvpn-update 1009a0f326b6403180c18f3caa1430de --name myBGPVPN --tenant 4a75e08c45f14aa9afc5da081c9bb534
</pre></div>
</div>
<p>Example commands to use by the tenant owning the BGPVPN to associate a Network to it:</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>neutron bgpvpn-net-assoc-create myBGPVPN --network 828cddad3b834e79b79abc1b87b6cca0
<span class="c1"># returns &lt;net-assoc-uuid&gt;</span>
neutron bgpvpn-net-assoc-list myBGPVPN
neutron bgpvpn-net-assoc-show &lt;net-assoc-uuid&gt; myBGPVPN

neutron bgpvpn-net-assoc-delete &lt;net-assoc-uuid&gt; myBGPVPN
</pre></div>
</div>
</div>
<div class="section" id="use-from-horizon">
<h2>Use from Horizon<a class="headerlink" href="#use-from-horizon" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="horizon.html"><em>Horizon</em></a>.</p>
</div>
<div class="section" id="use-from-heat">
<h2>Use from Heat<a class="headerlink" href="#use-from-heat" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="heat.html"><em>Heat</em></a>.</p>
</div>
<div class="section" id="use-from-python">
<h2>Use from Python<a class="headerlink" href="#use-from-python" title="Permalink to this headline">¶</a></h2>
<p>The BGPVPN API is dynamically loaded by Neutron. There is the same behaviour with the Python lib &#8220;neutronclient&#8221; use.
This allows to programmatically handle BGPVPN resources as well as Network association resources and Router association resources.</p>
<div class="section" id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bgpvpn-resources">
<h4>BGPVPN Resources<a class="headerlink" href="#bgpvpn-resources" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">API methods for BGPVPN resources</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method Name</th>
<th class="head">Description</th>
<th class="head">Input parameter(s)</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list_bgpvpns()</td>
<td>Get the list of defined BGPVPN resources for the current tenant. An optional list of BGPVPN parameters can be used as filter.</td>
<td><ol class="first last arabic simple">
<li>Use **kwargs as filter, e.g. list_bgpvpn(param1=val1, param2=val2,...) (Optional)</li>
</ol>
</td>
<td>Dictionary of BGPVPN attributes</td>
</tr>
<tr class="row-odd"><td>create_bgpvpn()</td>
<td>Create a BGPVPN resource for the current tenant. Extra information about the BGPVPN resource can be provided as input.</td>
<td><ol class="first last arabic simple">
<li>Dictionary of BGPVPN attributes (Optional)</li>
</ol>
</td>
<td>Dictionary of BGPVPN attributes</td>
</tr>
<tr class="row-even"><td>show_bgpvpn()</td>
<td>Get all information for a given BGPVPN.</td>
<td><ol class="first last arabic simple">
<li>UUID of the said BGPVPN</li>
</ol>
</td>
<td>Dictionary of BGPVPN attributes related to the BGPVPN provided as input</td>
</tr>
<tr class="row-odd"><td>update_bgpvpn()</td>
<td>Update the BGPVPN resource with the parameters provided as input.</td>
<td><ol class="first last arabic simple">
<li>UUID of the said BGPVPN</li>
<li>Dictionary of BGPVPN attributes to be updated</li>
</ol>
</td>
<td>Dictionary of  BGPVPN attributes</td>
</tr>
<tr class="row-even"><td>delete_bgpvpn()</td>
<td>Delete a given BGPVPN resource of which the UUID is provided as input.</td>
<td><ol class="first last arabic simple">
<li>UUID of the said BGPVPN</li>
</ol>
</td>
<td>Boolean</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="network-association-resources">
<h4>Network Association Resources<a class="headerlink" href="#network-association-resources" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">API methods for Network association resources</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method Name</th>
<th class="head">Description</th>
<th class="head">Input parameter(s)</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list_network_associations()</td>
<td>Get the list of defined NETWORK ASSOCIATION resources for a given BGPVPN. An optional list of NETWORK ASSOCIATION parameters can be used as filter.</td>
<td><ol class="first last arabic simple">
<li>UUID of the BGPVPN</li>
<li>Use **kwargs as filter, e.g. list_network_associations( BGPVPN UUID, param1=val1, param2=val2,...) (Optional)</li>
</ol>
</td>
<td>List of dictionaries of NETWORK ASSOCIATION attributes, one of each related to a given BGPVPN</td>
</tr>
<tr class="row-odd"><td>create_network_association()</td>
<td>Create a NETWORK ASSOCIATION resource for a given BGPVPN.
Network UUID must be defined, provided in a NETWORK ASSOCIATION resource as input parameter.</td>
<td><ol class="first last arabic simple">
<li>UUID of the said BGPVPN</li>
<li>Dictionary of NETWORK ASSOCIATION parameters</li>
</ol>
</td>
<td>Dictionary of NETWORK ASSOCIATION attributes</td>
</tr>
<tr class="row-even"><td>show_network_association()</td>
<td>Get all parameters for a given NETWORK ASSOCIATION.</td>
<td><ol class="first last arabic simple">
<li>UUID of the NETWORK ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
</ol>
</td>
<td>Dictionary of NETWORK ASSOCIATION parameters</td>
</tr>
<tr class="row-odd"><td>update_network_association()</td>
<td>Update the parameters of the NETWORK ASSOCIATION resource provided as input.</td>
<td><ol class="first last arabic simple">
<li>UUID of the NETWORK ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
<li>Dictionary of NETWORK ASSOCIATION parameters</li>
</ol>
</td>
<td>Dictionary of NETWORK ASSOCIATION parameters</td>
</tr>
<tr class="row-even"><td>delete_network_association()</td>
<td>Delete a given NETWORK ASSOCIATION resource of which the UUID is provided as input.</td>
<td><ol class="first last arabic simple">
<li>UUID of the NETWORK ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
</ol>
</td>
<td>Boolean</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="router-association-resources">
<h4>Router Association Resources<a class="headerlink" href="#router-association-resources" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-text">API methods for Router associations</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method Name</th>
<th class="head">Description</th>
<th class="head">Input parameter(s)</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>list_router_associations()</td>
<td>Get the list of defined ROUTER ASSOCIATION resources for a given BGPVPN. An optional list of ROUTER ASSOCIATION parameters can be used as filter</td>
<td><ol class="first last arabic simple">
<li>UUID of the BGPVPN</li>
<li>Use **kwargs as filter, e.g. list_router_associations( BGPVPN UUID, param1=val1, param2=val2,...) (Optional)</li>
</ol>
</td>
<td>List of dictionaries of ROUTER ASSOCIATION attributes, one of each related to a given BGPVPN</td>
</tr>
<tr class="row-odd"><td>create_router_association()</td>
<td>Create a ROUTER ASSOCIATION resource for a given BGPVPN UUID.
Router UUID must be defined, provided in a ROUTER ASSOCIATION resource as input parameter.</td>
<td><ol class="first last arabic simple">
<li>UUID of the said BGPVPN</li>
<li>Dictionary of ROUTER ASSOCIATION parameters (Optional)</li>
</ol>
</td>
<td>Dictionary of ROUTER ASSOCIATION parameters</td>
</tr>
<tr class="row-even"><td>show_router_association()</td>
<td>Get all parameters for a given ROUTER ASSOCIATION.</td>
<td><ol class="first last arabic simple">
<li>UUID of the ROUTER ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
</ol>
</td>
<td>Dictionary of ROUTER ASSOCIATION parameters</td>
</tr>
<tr class="row-odd"><td>update_router_association()</td>
<td>Update the parameters of the ROUTER ASSOCIATION resource provided as input.</td>
<td><ol class="first last arabic simple">
<li>UUID of the ROUTER ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
<li>Dictionary of ROUTER ASSOCIATION parameters</li>
</ol>
</td>
<td>Dictionary of ROUTER ASSOCIATION parameters</td>
</tr>
<tr class="row-even"><td>delete_router_association()</td>
<td>Delete a given ROUTER ASSOCIATION resource.</td>
<td><ol class="first last arabic simple">
<li>UUID of the ROUTER ASSOCIATION resource</li>
<li>UUID of the BGPVPN resource</li>
</ol>
</td>
<td>Boolean</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bgpvpn-network-association-resources">
<h4>BGPVPN + Network Association Resources<a class="headerlink" href="#bgpvpn-network-association-resources" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Copyright (c) 2016 Orange.</span>
<span class="c1"># All Rights Reserved.</span>
<span class="c1">#</span>
<span class="c1">#    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may</span>
<span class="c1">#    not use this file except in compliance with the License. You may obtain</span>
<span class="c1">#    a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#         http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1">#    Unless required by applicable law or agreed to in writing, software</span>
<span class="c1">#    distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span>
<span class="c1">#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span>
<span class="c1">#    License for the specific language governing permissions and limitations</span>
<span class="c1">#    under the License.</span>

<span class="kn">from</span> <span class="nn">neutronclient.v2_0</span> <span class="kn">import</span> <span class="n">client</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># Parameter for subnet neutron object</span>
<span class="n">SUBNET_IP</span> <span class="o">=</span> <span class="s2">&quot;192.168.24.0/24&quot;</span>

<span class="c1"># Parameters for bgpvpn neutron object</span>
<span class="n">BGPVPN_RT</span> <span class="o">=</span> <span class="s2">&quot;64512:2&quot;</span>


<span class="c1"># Function to obtain stack parameters from system vars</span>
<span class="k">def</span> <span class="nf">get_keystone_creds</span><span class="p">():</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;OS_USERNAME&#39;</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;OS_PASSWORD&#39;</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;auth_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;OS_AUTH_URL&#39;</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;tenant_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;OS_TENANT_NAME&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;ERROR: Stack environment variables type &quot;</span>
              <span class="s2">&quot;OS_* are not properly set&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">d</span>


<span class="c1"># Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Call function that imports (dev)stack vars</span>
    <span class="n">creds</span> <span class="o">=</span> <span class="n">get_keystone_creds</span><span class="p">()</span>

    <span class="c1"># Neutron object</span>
    <span class="c1"># It dynamically loads the BGPVPN API</span>
    <span class="n">neutron</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="o">**</span><span class="n">creds</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Network object creation. This dummy network will be used to bind the</span>
        <span class="c1"># attached subnet to the BGPVPN object.</span>

        <span class="c1"># Creation of the Network</span>
        <span class="n">net_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">create_network</span><span class="p">({</span><span class="s1">&#39;network&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;dummyNet&quot;</span><span class="p">}})</span>
        <span class="c1"># Verify creation</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Network created</span><span class="se">\t</span><span class="s1">[network-id:</span><span class="si">%s</span><span class="s1">]...&#39;</span> <span class="o">%</span>
              <span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>

        <span class="c1"># Creation of the subnet, is attached to the created network</span>
        <span class="n">subnet_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">create_subnet</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;subnet&#39;</span><span class="p">:</span>
                <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;dummySubnet&quot;</span><span class="p">,</span>
                 <span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="n">SUBNET_IP</span><span class="p">,</span>
                 <span class="s1">&#39;network_id&#39;</span><span class="p">:</span> <span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                 <span class="s1">&#39;ip_version&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}})</span>
        <span class="c1"># Verify</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Subnet created</span><span class="se">\t</span><span class="s2">[subnet-id:</span><span class="si">%s</span><span class="s2">]...&quot;</span> <span class="o">%</span>
              <span class="n">subnet_obj</span><span class="p">[</span><span class="s1">&#39;subnet&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>

        <span class="c1"># Creation of a BGPVPN object. This object is created with the</span>
        <span class="c1"># required parameter &#39;routes_targets&#39;.</span>
        <span class="c1"># This object can be created with others parameters or be updated with</span>
        <span class="c1"># them by calling the update function on the object.</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">BGPVPN object handling.&quot;</span><span class="p">)</span>
        <span class="c1"># Creation of the BGPVPN object</span>
        <span class="n">bgpvpn_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">create_bgpvpn</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;route_targets&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">BGPVPN_RT</span><span class="p">]}})</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BGPVPN object created</span><span class="se">\t</span><span class="s2">[bgpvpn-id:</span><span class="si">%s</span><span class="s2">]...&quot;</span> <span class="o">%</span>
              <span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="c1"># Update the BGPVPN object</span>
        <span class="n">bgpvpn_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">update_bgpvpn</span><span class="p">(</span>
            <span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;dummyBGPVPN&quot;</span><span class="p">}})</span>
        <span class="c1"># List all BGPVPN objects</span>
        <span class="n">list_bgpvpn_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">list_bgpvpns</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;List of all BGPVPN object</span><span class="se">\t</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">list_bgpvpn_obj</span><span class="p">)</span>
        <span class="c1"># List of all BGPVPN objects filtered on the type parameter set to l3</span>
        <span class="c1"># value</span>
        <span class="n">list_bgpvpn_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">list_bgpvpns</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;l3&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;List of all BGPVPN object with type=l3</span><span class="se">\t</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span>
              <span class="n">list_bgpvpn_obj</span><span class="p">)</span>

        <span class="c1"># Creation of a BGPVPN Network association.</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">BGPVPN Network Association object handling.&quot;</span><span class="p">)</span>
        <span class="c1"># Creation of a Network Association bound on the created BGPVPN object</span>
        <span class="n">bgpvpn_net_assoc_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">create_network_association</span><span class="p">(</span>
            <span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
            <span class="p">{</span><span class="s1">&#39;network_association&#39;</span><span class="p">:</span>
                <span class="p">{</span><span class="s1">&#39;network_id&#39;</span><span class="p">:</span>
                    <span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]}})</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;BGPVPN Network Association created</span><span class="se">\t</span><span class="s2">&quot;</span>
              <span class="s2">&quot;[network_association:</span><span class="si">%s</span><span class="s2">]...&quot;</span> <span class="o">%</span>
              <span class="n">bgpvpn_net_assoc_obj</span><span class="p">[</span><span class="s1">&#39;network_association&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="c1"># List all NETWORK ASSOCIATION object filtered on the network created</span>
        <span class="c1"># above</span>
        <span class="n">list_bgpvpn_net_assoc_obj</span> <span class="o">=</span> <span class="n">neutron</span><span class="o">.</span><span class="n">list_network_associations</span><span class="p">(</span>
            <span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
            <span class="n">network_id</span><span class="o">=</span><span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;List of NETWORK ASSOCIATION objects using network_id&quot;</span>
              <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]</span><span class="se">\t</span><span class="s2">[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span>
              <span class="p">(</span><span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">list_bgpvpn_net_assoc_obj</span><span class="p">))</span>

        <span class="c1"># Deletion of all objects created in this example</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Deletion of all created objects&quot;</span><span class="p">)</span>
        <span class="c1"># First declared associations related of the created BGPVPN object in</span>
        <span class="c1"># this example</span>
        <span class="n">neutron</span><span class="o">.</span><span class="n">delete_network_association</span><span class="p">(</span>
            <span class="n">bgpvpn_net_assoc_obj</span><span class="p">[</span><span class="s1">&#39;network_association&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
            <span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="c1"># Then the BGPVPN object</span>
        <span class="n">neutron</span><span class="o">.</span><span class="n">delete_bgpvpn</span><span class="p">(</span><span class="n">bgpvpn_obj</span><span class="p">[</span><span class="s1">&#39;bgpvpn&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="c1"># Subnet</span>
        <span class="n">neutron</span><span class="o">.</span><span class="n">delete_subnet</span><span class="p">(</span><span class="n">subnet_obj</span><span class="p">[</span><span class="s1">&#39;subnet&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
        <span class="c1"># And finally the Network</span>
        <span class="n">neutron</span><span class="o">.</span><span class="n">delete_network</span><span class="p">(</span><span class="n">net_obj</span><span class="p">[</span><span class="s1">&#39;network&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[ERROR][</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;[Done]&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#use-from-neutron-api-cli">Use from Neutron API CLI</a></li>
<li><a class="reference internal" href="#use-from-horizon">Use from Horizon</a></li>
<li><a class="reference internal" href="#use-from-heat">Use from Heat</a></li>
<li><a class="reference internal" href="#use-from-python">Use from Python</a><ul>
<li><a class="reference internal" href="#methods">Methods</a><ul>
<li><a class="reference internal" href="#bgpvpn-resources">BGPVPN Resources</a></li>
<li><a class="reference internal" href="#network-association-resources">Network Association Resources</a></li>
<li><a class="reference internal" href="#router-association-resources">Router Association Resources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#bgpvpn-network-association-resources">BGPVPN + Network Association Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="installation.html"
                                  title="previous chapter">Installation</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="heat.html"
                                  title="next chapter">Heat</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/networking-bgpvpn
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/usage.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="heat.html" title="Heat"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">networking-bgpvpn 5.0.1.dev77 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2013, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/networking-bgpvpn");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>