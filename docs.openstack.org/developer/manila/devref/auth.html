<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Authentication and Authorization</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Authentication and Authorization</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="share_hooks.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Manila share driver hooks"></i></a>
    
    
    <a href="scheduler.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Scheduler"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Authentication and Authorization</a><ul>
<li><a class="reference internal" href="#the-manila-quota-module">The <code class="docutils literal"><span class="pre">manila.quota</span></code> Module</a></li>
<li><a class="reference internal" href="#the-manila-policy-module">The <code class="docutils literal"><span class="pre">manila.policy</span></code> Module</a></li>
<li><a class="reference internal" href="#tests">Tests</a><ul>
<li><a class="reference internal" href="#the-test-quota-module">The <code class="docutils literal"><span class="pre">test_quota</span></code> Module</a></li>
<li><a class="reference internal" href="#the-test-policy-module">The <code class="docutils literal"><span class="pre">test_policy</span></code> Module</a></li>
</ul>
</li>
<li><a class="reference internal" href="#system-limits">System limits</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="authentication-and-authorization">
<span id="auth"></span><h1>Authentication and Authorization<a class="headerlink" href="#authentication-and-authorization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-manila-quota-module">
<h2>The <code class="xref py py-mod docutils literal"><span class="pre">manila.quota</span></code> Module<a class="headerlink" href="#the-manila-quota-module" title="Permalink to this headline">¶</a></h2>
<p>Quotas for shares.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">AbsoluteResource</code><span class="sig-paren">(</span><em>name</em>, <em>flag=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.quota.BaseResource</span></code></p>
<p>Describe a non-reservable resource.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">BaseResource</code><span class="sig-paren">(</span><em>name</em>, <em>flag=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Describe a single resource for quota checking.</p>
<dl class="attribute">
<dt>
<code class="descname">default</code></dt>
<dd><p>Return the default value of the quota.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">quota</code><span class="sig-paren">(</span><em>driver</em>, <em>context</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Obtain quota for a resource.</p>
<p>Given a driver and context, obtain the quota for this
resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>driver</strong> &#8211; A quota driver.</li>
<li><strong>context</strong> &#8211; The request context.</li>
<li><strong>project_id</strong> &#8211; The project to obtain the quota value for.
If not provided, it is taken from the
context.  If it is given as None, no
project-specific quota will be searched
for.</li>
<li><strong>quota_class</strong> &#8211; The quota class corresponding to the
project, or for which the quota is to be
looked up.  If not provided, it is taken
from the context.  If it is given as None,
no quota class-specific quota will be
searched for.  Note that the quota class
defaults to the value in the context,
which may not correspond to the project if
project_id is not the same as the one in
the context.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">CountableResource</code><span class="sig-paren">(</span><em>name</em>, <em>count</em>, <em>flag=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.quota.AbsoluteResource</span></code></p>
<p>Describe a countable resource.</p>
<p>Describe a resource where the counts aren&#8217;t based solely on the
project ID.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">DbQuotaDriver</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Database Quota driver.</p>
<p>Driver to perform necessary checks to enforce quotas and obtain
quota information.  The default driver utilizes the local
database.</p>
<dl class="method">
<dt>
<code class="descname">commit</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Commit reservations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>reservations</strong> &#8211; A list of the reservation UUIDs, as
returned by the reserve() method.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
<li><strong>user_id</strong> &#8211; Specify the user_id if current context
is admin and admin wants to impact on
common user. (Special case: user operates on
resource, owned/created by different user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em><span class="sig-paren">)</span></dt>
<dd><p>Destroy metadata associated with a project.</p>
<p>Destroy all quotas, usages, and reservations associated with a
project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project being deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project_and_user</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em><span class="sig-paren">)</span></dt>
<dd><p>Destroy metadata associated with a project and user.</p>
<p>Destroy all quotas, usages, and reservations associated with a
project and user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project being deleted.</li>
<li><strong>user_id</strong> &#8211; The ID of the user being deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">expire</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>Expire reservations.</p>
<p>Explores all currently existing reservations and rolls back
any that have expired.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; The request context, for access checks.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_class</code><span class="sig-paren">(</span><em>context</em>, <em>quota_class</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by quota class.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by project.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_project_and_user</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by project and user.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_class_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>quota_class</em>, <em>defaults=True</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve quotas for a quota class.</p>
<p>Given a list of resources, retrieve the quotas for the given
quota class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>quota_class</strong> &#8211; The name of the quota class to return
quotas for.</li>
<li><strong>defaults</strong> &#8211; If True, the default value will be reported
if there is no specific value for the
resource.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_defaults</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em><span class="sig-paren">)</span></dt>
<dd><p>Given a list of resources, retrieve the default quotas.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_project_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>project_id</em>, <em>quota_class=None</em>, <em>defaults=True</em>, <em>usages=True</em>, <em>remains=False</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve quotas for project.</p>
<p>Given a list of resources, retrieve the quotas for the given
project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>quota_class</strong> &#8211; If project_id != context.project_id, the
quota class cannot be determined.  This
parameter allows it to be specified.  It
will be ignored if project_id ==
context.project_id.</li>
<li><strong>defaults</strong> &#8211; If True, the quota class value (or the
default value, if there is no value from the
quota class) will be reported if there is no
specific value for the resource.</li>
<li><strong>usages</strong> &#8211; If True, the current in_use and reserved counts
will also be returned.</li>
<li><strong>remains</strong> &#8211; If True, the current remains of the project will
will be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_settable_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>project_id</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve range of settable quotas.</p>
<p>Given a list of resources, retrieve the range of settable quotas for
the given user or project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>user_id</strong> &#8211; The ID of the user to return quotas for.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_user_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>project_id</em>, <em>user_id</em>, <em>quota_class=None</em>, <em>defaults=True</em>, <em>usages=True</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve quotas for user and project.</p>
<p>Given a list of resources, retrieve the quotas for the given
user and project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>user_id</strong> &#8211; The ID of the user to return quotas for.</li>
<li><strong>quota_class</strong> &#8211; If project_id != context.project_id, the
quota class cannot be determined.  This
parameter allows it to be specified.  It
will be ignored if project_id ==
context.project_id.</li>
<li><strong>defaults</strong> &#8211; If True, the quota class value (or the
default value, if there is no value from the
quota class) will be reported if there is no
specific value for the resource.</li>
<li><strong>usages</strong> &#8211; If True, the current in_use and reserved counts
will also be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">limit_check</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>values</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Check simple quota limits.</p>
<p>For limits&#8211;those quotas for which there is no usage
synchronization function&#8211;this method checks that a set of
proposed values are permitted by the limit restriction.</p>
<p>This method will raise a QuotaResourceUnknown exception if a
given resource is unknown or if it is not a simple limit
resource.</p>
<p>If any of the proposed values is over the defined quota, an
OverQuota exception will be raised with the sorted list of the
resources which are too high.  Otherwise, the method returns
nothing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>values</strong> &#8211; A dictionary of the values to check against the
quota.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
<li><strong>user_id</strong> &#8211; Specify the user_id if current context
is admin and admin wants to impact on
common user. (Special case: user operates on
resource, owned/created by different user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">reserve</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>deltas</em>, <em>expire=None</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Check quotas and reserve resources.</p>
<p>For counting quotas&#8211;those quotas for which there is a usage
synchronization function&#8211;this method checks quotas against
current usage and the desired deltas.</p>
<p>This method will raise a QuotaResourceUnknown exception if a
given resource is unknown or if it does not have a usage
synchronization function.</p>
<p>If any of the proposed values is over the defined quota, an
OverQuota exception will be raised with the sorted list of the
resources which are too high.  Otherwise, the method returns a
list of reservation UUIDs which were created.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>deltas</strong> &#8211; A dictionary of the proposed delta changes.</li>
<li><strong>expire</strong> &#8211; An optional parameter specifying an expiration
time for the reservations.  If it is a simple
number, it is interpreted as a number of
seconds and added to the current time; if it is
a datetime.timedelta object, it will also be
added to the current time.  A datetime.datetime
object will be interpreted as the absolute
expiration time.  If None is specified, the
default expiration time set by
&#8211;default-reservation-expire will be used (this
value will be treated as a number of seconds).</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
<li><strong>user_id</strong> &#8211; Specify the user_id if current context
is admin and admin wants to impact on
common user. (Special case: user operates on
resource, owned/created by different user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">rollback</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Roll back reservations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>reservations</strong> &#8211; A list of the reservation UUIDs, as
returned by the reserve() method.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
<li><strong>user_id</strong> &#8211; Specify the user_id if current context
is admin and admin wants to impact on
common user. (Special case: user operates on
resource, owned/created by different user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">usage_reset</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em><span class="sig-paren">)</span></dt>
<dd><p>Reset usage records.</p>
<p>Reset the usage records for a particular user on a list of
resources.  This will force that user&#8217;s usage records to be
refreshed the next time a reservation is made.</p>
<p>Note: this does not affect the currently outstanding
reservations the user has; those reservations must be
committed or rolled back (or expired).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A list of the resource names for which the
usage must be reset.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">QuotaEngine</code><span class="sig-paren">(</span><em>quota_driver_class=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Represent the set of recognized quotas.</p>
<dl class="method">
<dt>
<code class="descname">commit</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Commit reservations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>reservations</strong> &#8211; A list of the reservation UUIDs, as
returned by the reserve() method.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">count</code><span class="sig-paren">(</span><em>context</em>, <em>resource</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Count a resource.</p>
<p>For countable resources, invokes the count() function and
returns its result.  Arguments following the context and
resource are passed directly to the count function declared by
the resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resource</strong> &#8211; The name of the resource, as a string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em><span class="sig-paren">)</span></dt>
<dd><p>Destroy metadata associated with a project.</p>
<p>Destroy all quotas, usages, and reservations associated with a
project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project being deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project_and_user</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em><span class="sig-paren">)</span></dt>
<dd><p>Destroy metadata associated with a project and user.</p>
<p>Destroy all quotas, usages, and reservations associated with a
project and user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project being deleted.</li>
<li><strong>user_id</strong> &#8211; The ID of the user being deleted.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">expire</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>Expire reservations.</p>
<p>Explores all currently existing reservations and rolls back
any that have expired.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; The request context, for access checks.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_class</code><span class="sig-paren">(</span><em>context</em>, <em>quota_class</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by quota class.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by project.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_project_and_user</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Get a specific quota by project and user.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_class_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>quota_class</em>, <em>defaults=True</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve the quotas for the given quota class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>quota_class</strong> &#8211; The name of the quota class to return
quotas for.</li>
<li><strong>defaults</strong> &#8211; If True, the default value will be reported
if there is no specific value for the
resource.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_defaults</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve the default quotas.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; The request context, for access checks.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_project_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>quota_class=None</em>, <em>defaults=True</em>, <em>usages=True</em>, <em>remains=False</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve the quotas for the given project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>quota_class</strong> &#8211; If project_id != context.project_id, the
quota class cannot be determined.  This
parameter allows it to be specified.</li>
<li><strong>defaults</strong> &#8211; If True, the quota class value (or the
default value, if there is no value from the
quota class) will be reported if there is no
specific value for the resource.</li>
<li><strong>usages</strong> &#8211; If True, the current in_use and reserved counts
will also be returned.</li>
<li><strong>remains</strong> &#8211; If True, the current remains of the project will
will be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_settable_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Get settable quotas.</p>
<p>Given a list of resources, retrieve the range of settable quotas for
the given user or project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A dictionary of the registered resources.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>user_id</strong> &#8211; The ID of the user to return quotas for.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_user_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em>, <em>quota_class=None</em>, <em>defaults=True</em>, <em>usages=True</em><span class="sig-paren">)</span></dt>
<dd><p>Retrieve the quotas for the given user and project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; The ID of the project to return quotas for.</li>
<li><strong>user_id</strong> &#8211; The ID of the user to return quotas for.</li>
<li><strong>quota_class</strong> &#8211; If project_id != context.project_id, the
quota class cannot be determined.  This
parameter allows it to be specified.</li>
<li><strong>defaults</strong> &#8211; If True, the quota class value (or the
default value, if there is no value from the
quota class) will be reported if there is no
specific value for the resource.</li>
<li><strong>usages</strong> &#8211; If True, the current in_use and reserved counts
will also be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">limit_check</code><span class="sig-paren">(</span><em>context</em>, <em>project_id=None</em>, <em>user_id=None</em>, <em>**values</em><span class="sig-paren">)</span></dt>
<dd><p>Check simple quota limits.</p>
<p>For limits&#8211;those quotas for which there is no usage
synchronization function&#8211;this method checks that a set of
proposed values are permitted by the limit restriction.  The
values to check are given as keyword arguments, where the key
identifies the specific quota limit to check, and the value is
the proposed value.</p>
<p>This method will raise a QuotaResourceUnknown exception if a
given resource is unknown or if it is not a simple limit
resource.</p>
<p>If any of the proposed values is over the defined quota, an
OverQuota exception will be raised with the sorted list of the
resources which are too high.  Otherwise, the method returns
nothing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
<li><strong>user_id</strong> &#8211; Specify the user_id if current context
is admin and admin wants to impact on
common user. (Special case: user operates on
resource, owned/created by different user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">register_resource</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Register a resource.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">register_resources</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span></dt>
<dd><p>Register a list of resources.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">reserve</code><span class="sig-paren">(</span><em>context</em>, <em>expire=None</em>, <em>project_id=None</em>, <em>user_id=None</em>, <em>**deltas</em><span class="sig-paren">)</span></dt>
<dd><p>Check quotas and reserve resources.</p>
<p>For counting quotas&#8211;those quotas for which there is a usage
synchronization function&#8211;this method checks quotas against
current usage and the desired deltas.  The deltas are given as
keyword arguments, and current usage and other reservations
are factored into the quota check.</p>
<p>This method will raise a QuotaResourceUnknown exception if a
given resource is unknown or if it does not have a usage
synchronization function.</p>
<p>If any of the proposed values is over the defined quota, an
OverQuota exception will be raised with the sorted list of the
resources which are too high.  Otherwise, the method returns a
list of reservation UUIDs which were created.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>expire</strong> &#8211; An optional parameter specifying an expiration
time for the reservations.  If it is a simple
number, it is interpreted as a number of
seconds and added to the current time; if it is
a datetime.timedelta object, it will also be
added to the current time.  A datetime.datetime
object will be interpreted as the absolute
expiration time.  If None is specified, the
default expiration time set by
&#8211;default-reservation-expire will be used (this
value will be treated as a number of seconds).</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">resources</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">rollback</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Roll back reservations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>reservations</strong> &#8211; A list of the reservation UUIDs, as
returned by the reserve() method.</li>
<li><strong>project_id</strong> &#8211; Specify the project_id if current context
is admin and admin wants to impact on
common user&#8217;s tenant.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">usage_reset</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em><span class="sig-paren">)</span></dt>
<dd><p>Reset usage records.</p>
<p>Reset the usage records for a particular user on a list of
resources.  This will force that user&#8217;s usage records to be
refreshed the next time a reservation is made.</p>
<p>Note: this does not affect the currently outstanding
reservations the user has; those reservations must be
committed or rolled back (or expired).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The request context, for access checks.</li>
<li><strong>resources</strong> &#8211; A list of the resource names for which the
usage must be reset.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">ReservableResource</code><span class="sig-paren">(</span><em>name</em>, <em>sync</em>, <em>flag=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.quota.BaseResource</span></code></p>
<p>Describe a reservable resource.</p>
</dd></dl>

</div>
<div class="section" id="the-manila-policy-module">
<h2>The <code class="xref py py-mod docutils literal"><span class="pre">manila.policy</span></code> Module<a class="headerlink" href="#the-manila-policy-module" title="Permalink to this headline">¶</a></h2>
<p>Policy Engine For Manila</p>
<dl class="function">
<dt>
<code class="descname">check_is_admin</code><span class="sig-paren">(</span><em>roles</em><span class="sig-paren">)</span></dt>
<dd><p>Whether or not roles contains &#8216;admin&#8217; role according to policy setting.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">check_policy</code><span class="sig-paren">(</span><em>context</em>, <em>resource</em>, <em>action</em>, <em>target_obj=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="descname">enforce</code><span class="sig-paren">(</span><em>context</em>, <em>action</em>, <em>target</em>, <em>do_raise=True</em><span class="sig-paren">)</span></dt>
<dd><p>Verifies that the action is valid on the target in this context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; manila context</li>
<li><strong>action</strong> &#8211; string representing the action to be checked
this should be colon separated for clarity.
i.e. <code class="docutils literal"><span class="pre">compute:create_instance</span></code>,
<code class="docutils literal"><span class="pre">compute:attach_volume</span></code>,
<code class="docutils literal"><span class="pre">volume:attach_volume</span></code></li>
<li><strong>target</strong> &#8211; dictionary representing the object of the action
for object creation this should be a dictionary representing the
location of the object e.g. <code class="docutils literal"><span class="pre">{'project_id':</span> <span class="pre">context.project_id}</span></code></li>
<li><strong>do_raise</strong> &#8211; Whether to raise an exception if check fils.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">When <code class="docutils literal"><span class="pre">do_raise</span></code> is <code class="docutils literal"><span class="pre">False</span></code>, returns a value that
evaluates as <code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">False</span></code> depending on whether
the policy allows action on the target.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">manila.exception.PolicyNotAuthorized if verification fails
and <code class="docutils literal"><span class="pre">do_raise</span></code> is <code class="docutils literal"><span class="pre">True</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">init</code><span class="sig-paren">(</span><em>policy_path=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="function">
<dt>
<code class="descname">wrap_check_policy</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span></dt>
<dd><p>Check policy corresponding to the wrapped methods prior to execution.</p>
</dd></dl>

</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-test-quota-module">
<h3>The <code class="xref py py-mod docutils literal"><span class="pre">test_quota</span></code> Module<a class="headerlink" href="#the-test-quota-module" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">BaseResourceTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">test_no_flag</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_no_project_no_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_no_project_with_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_override_project_with_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_with_project_no_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_with_project_override_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_with_project_with_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_with_flag</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_with_flag_no_quota</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">DbQuotaDriverTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="attribute">
<dt>
<code class="descname">expected_all_context</code><em class="property"> = {'shares': {'limit': 10, 'in_use': 2, 'reserved': 0}, 'share_networks': {'limit': 10, 'in_use': 0, 'reserved': 0}, 'gigabytes': {'limit': 50, 'in_use': 10, 'reserved': 0}, 'snapshots': {'limit': 10, 'in_use': 4, 'reserved': 0}, 'snapshot_gigabytes': {'limit': 50, 'in_use': 20, 'reserved': 0}}</em></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_delete_by_project</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_class_quotas</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_class_quotas_no_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas_alt_context_no_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas_alt_context_with_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas_no_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas_no_usages</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas_with_remains</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_quotas_has_sync</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_quotas_has_sync_no_sync_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_quotas_has_sync_unknown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_quotas_no_sync_has_sync_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_quotas_no_sync_unknown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_settable_quotas_with_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_settable_quotas_without_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_user_quotas</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_user_quotas_alt_context_no_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_user_quotas_alt_context_with_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_user_quotas_no_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_user_quotas_no_usages</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_bad_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_datetime_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_default_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_int_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_max_age</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_timedelta_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve_until_refresh</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">FakeContext</code><span class="sig-paren">(</span><em>project_id</em>, <em>quota_class</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt>
<code class="descname">elevated</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">FakeDriver</code><span class="sig-paren">(</span><em>by_project=None</em>, <em>by_class=None</em>, <em>reservations=None</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt>
<code class="descname">commit</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">destroy_all_by_project_and_user</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>user_id</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">expire</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_class</code><span class="sig-paren">(</span><em>context</em>, <em>quota_class</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_by_project</code><span class="sig-paren">(</span><em>context</em>, <em>project_id</em>, <em>resource</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_class_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>quota_class</em>, <em>defaults=True</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_defaults</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_project_quotas</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>project_id</em>, <em>quota_class=None</em>, <em>defaults=True</em>, <em>usages=True</em>, <em>remains=False</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">limit_check</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>values</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">reserve</code><span class="sig-paren">(</span><em>context</em>, <em>resources</em>, <em>deltas</em>, <em>expire=None</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">rollback</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>project_id=None</em>, <em>user_id=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">FakeSession</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt>
<code class="descname">add</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">begin</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">FakeUsage</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.db.sqlalchemy.models.QuotaUsage</span></code></p>
<dl class="attribute">
<dt>
<code class="descname">created_at</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">deleted</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">deleted_at</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">id</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">in_use</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">project_id</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">reserved</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">resource</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">save</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">until_refresh</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">updated_at</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">user_id</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">QuotaEngineTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">test_commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_count_no_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_count_wrong_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_destroy_all_by_project</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_destroy_all_by_project_and_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_expire</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_by_class</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_by_project</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_class_quotas</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_defaults</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_get_project_quotas</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_init</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_init_override_obj</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_init_override_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_limit_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_register_resource</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_register_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_reserve</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_rollback</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_sync_multi</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_sync_predeclared</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">QuotaIntegrationTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_too_many_gigabytes</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_too_many_shares</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">QuotaReserveSqlAlchemyTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">compare_reservation</code><span class="sig-paren">(</span><em>reservations</em>, <em>expected</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">compare_usage</code><span class="sig-paren">(</span><em>usage_dict</em>, <em>expected</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">init_usage</code><span class="sig-paren">(</span><em>project_id</em>, <em>user_id</em>, <em>resource</em>, <em>in_use</em>, <em>reserved</em>, <em>until_refresh=None</em>, <em>created_at=None</em>, <em>updated_at=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_create_usages</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_max_age</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_negative_in_use</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_no_refresh</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_overs</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_reduction</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_unders</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_quota_reserve_until_refresh</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="the-test-policy-module">
<h3>The <code class="xref py py-mod docutils literal"><span class="pre">test_policy</span></code> Module<a class="headerlink" href="#the-test-policy-module" title="Permalink to this headline">¶</a></h3>
<p>Test of Policy Engine For Manila.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">ContextIsAdminPolicyTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_context_is_admin_undefined</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_custom_admin_role_is_admin</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_default_admin_role_is_admin</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">DefaultPolicyTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_default_not_found</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_not_found_policy_calls_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_policy_called</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">PolicyFileTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_modified_policy_reloads</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">PolicyTestCase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.test.TestCase</span></code></p>
<dl class="method">
<dt>
<code class="descname">setUp</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">tearDown</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_early_AND_enforcement</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_early_OR_enforcement</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_enforce_bad_action_throws</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_enforce_good_action</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_enforce_nonexistent_action_throws</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_ignore_case_role_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">test_templatized_enforcement</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="system-limits">
<h2>System limits<a class="headerlink" href="#system-limits" title="Permalink to this headline">¶</a></h2>
<p>The following limits need to be defined and enforced:</p>
<ul class="simple">
<li>Maximum cumulative size of shares and snapshots (GB)</li>
<li>Total number of shares</li>
<li>Total number of snapshots</li>
<li>Total number of share networks</li>
</ul>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="share_hooks.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Manila share driver hooks"></i></a>
          
          
            <a href="scheduler.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Scheduler"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#programming-howtos-and-tutorials">Programming HowTos and Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#background-concepts-for-manila">Background Concepts for manila</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-resources">Other Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#api-reference">API Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#module-reference">Module Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#capabilities-and-extra-specs">Capabilities and Extra-Specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends-feature-support-mapping">Share backends feature support mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends">Share backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-Line Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adminref/index.html">Admin Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "devref/auth" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/manila/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 610baa2fdb702fa4cc2c12eb5c61599bdcad21ce";
        var bugProject = "manila";
        var bugTitle = "Authentication and Authorization in manila";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 4.0.0.0rc2.dev25 on 'Tue Feb 14 14:25:27 2017, commit 610baa2'";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>