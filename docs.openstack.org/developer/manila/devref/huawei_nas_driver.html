<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Huawei Driver</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Huawei Driver</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="gpfs_driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: GPFS Driver"></i></a>
    
    
    <a href="hdfs_native_driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: HDFS native driver"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Huawei Driver</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#supported-operations">Supported Operations</a></li>
<li><a class="reference internal" href="#pre-configurations-on-huawei">Pre-Configurations on Huawei</a></li>
<li><a class="reference internal" href="#backend-configuration">Backend Configuration</a></li>
<li><a class="reference internal" href="#share-types">Share Types</a></li>
<li><a class="reference internal" href="#restrictions">Restrictions</a><ul>
<li><a class="reference internal" href="#the-manila-share-drivers-huawei-huawei-nas-module">The <code class="docutils literal"><span class="pre">manila.share.drivers.huawei.huawei_nas</span></code> Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="huawei-driver">
<h1>Huawei Driver<a class="headerlink" href="#huawei-driver" title="Permalink to this headline">¶</a></h1>
<p>Huawei NAS Driver is a plugin based the OpenStack manila service. The Huawei NAS
Driver can be used to provide functions such as the share and snapshot for virtual
machines(instances) in OpenStack. Huawei NAS Driver enables the OceanStor V3 series
V300R002 storage system to provide only network filesystems for OpenStack.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The OceanStor V3 series V300R002 storage system.</li>
<li>The following licenses should be activated on V3 for File:<ul>
<li>CIFS</li>
<li>NFS</li>
<li>HyperSnap License (for snapshot)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="supported-operations">
<h2>Supported Operations<a class="headerlink" href="#supported-operations" title="Permalink to this headline">¶</a></h2>
<p>The following operations is supported on V3 storage:</p>
<ul class="simple">
<li>Create CIFS/NFS Share</li>
<li>Delete CIFS/NFS Share</li>
<li>Allow CIFS/NFS Share access<ul>
<li>IP and USER access types are supported for NFS(ro/rw).</li>
<li>Only USER access type is supported for CIFS(ro/rw).</li>
</ul>
</li>
<li>Deny CIFS/NFS Share access</li>
<li>Create snapshot</li>
<li>Delete snapshot</li>
<li>Manage CIFS/NFS share</li>
<li>Support pools in one backend</li>
<li>Extend share</li>
<li>Shrink share</li>
<li>Support multi RestURLs(&lt;RestURL&gt;)</li>
<li>Support multi-tenancy</li>
<li>Ensure share</li>
<li>Create share from snapshot</li>
<li>Support QoS</li>
</ul>
</div>
<div class="section" id="pre-configurations-on-huawei">
<h2>Pre-Configurations on Huawei<a class="headerlink" href="#pre-configurations-on-huawei" title="Permalink to this headline">¶</a></h2>
<p>1. Create a driver configuration file. The driver configuration file name must
be the same as the manila_huawei_conf_file item in the manila_conf configuration
file.</p>
<p>2. Configure Product.
Product indicates the storage system type. For the OceanStor V3 series V300R002
storage systems, the driver configuration file is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;
&lt;Config&gt;
    &lt;Storage&gt;
        &lt;Product&gt;V3&lt;/Product&gt;
        &lt;LogicalPortIP&gt;x.x.x.x&lt;/LogicalPortIP&gt;
        &lt;Port&gt;abc;CTE0.A.H1&lt;/Port&gt;
        &lt;RestURL&gt;https://x.x.x.x:8088/deviceManager/rest/;
        https://x.x.x.x:8088/deviceManager/rest/&lt;/RestURL&gt;
        &lt;UserName&gt;xxxxxxxxx&lt;/UserName&gt;
        &lt;UserPassword&gt;xxxxxxxxx&lt;/UserPassword&gt;
    &lt;/Storage&gt;
    &lt;Filesystem&gt;
        &lt;StoragePool&gt;xxxxxxxxx&lt;/StoragePool&gt;
        &lt;SectorSize&gt;64&lt;/SectorSize&gt;
        &lt;WaitInterval&gt;3&lt;/WaitInterval&gt;
        &lt;Timeout&gt;60&lt;/Timeout&gt;
        &lt;NFSClient&gt;
            &lt;IP&gt;x.x.x.x&lt;/IP&gt;
        &lt;/NFSClient&gt;
        &lt;CIFSClient&gt;
            &lt;UserName&gt;xxxxxxxxx&lt;/UserName&gt;
            &lt;UserPassword&gt;xxxxxxxxx&lt;/UserPassword&gt;
        &lt;/CIFSClient&gt;
    &lt;/Filesystem&gt;
&lt;/Config&gt;
</pre></div>
</div>
<ul class="simple">
<li><cite>Product</cite> is a type of a storage product. Set it to <cite>V3</cite>.</li>
<li><cite>LogicalPortIP</cite> is an IP address of the logical port.</li>
<li><cite>Port</cite> is a port name list of bond port or ETH port, used to
create vlan and logical port. Multi Ports can be configured in
&lt;Port&gt;(separated by &#8221;;&#8221;). If &lt;Port&gt; is not configured, then will choose
an online port on the array.</li>
<li><cite>RestURL</cite> is an access address of the REST interface. Multi RestURLs
can be configured in &lt;RestURL&gt;(separated by &#8221;;&#8221;). When one of the RestURL
failed to connect, driver will retry another automatically.</li>
<li><cite>UserName</cite> is a user name of an administrator.</li>
<li><cite>UserPassword</cite> is a password of an administrator.</li>
<li><cite>StoragePool</cite> is a name of a storage pool to be used.</li>
<li><cite>SectorSize</cite> is the size of the disk blocks, optional value can be &#8220;4&#8221;, &#8220;8&#8221;, &#8220;16&#8221;, &#8220;32&#8221; or &#8220;64&#8221;,
and the units is KB. If &#8220;sectorsize&#8221; is configured in both share_type and xml file, the value
of sectorsize in the share_type will be used. If &#8220;sectorsize&#8221; is configured in neither
share_type nor xml file, huawei storage backends will provide a default value(64) when creating
a new share.</li>
<li><cite>WaitInterval</cite> is the interval time of querying the file system status.</li>
<li><cite>Timeout</cite> is the timeout period for waiting command execution of a device to
complete.</li>
<li><cite>NFSClientIP</cite> is the backend IP in admin network to use for mounting NFS share.</li>
<li><cite>CIFSClientUserName</cite> is the backend user name in admin network to use for mounting CIFS share.</li>
<li><cite>CIFSClientUserPassword</cite> is the backend password in admin network to use for mounting CIFS share.</li>
</ul>
</div>
<div class="section" id="backend-configuration">
<h2>Backend Configuration<a class="headerlink" href="#backend-configuration" title="Permalink to this headline">¶</a></h2>
<p>Modify the <cite>manila.conf</cite> manila configuration file and add share_driver and
manila_huawei_conf_file items.
Example for configuring a storage system:</p>
<ul class="simple">
<li><cite>share_driver</cite> = manila.share.drivers.huawei.huawei_nas.HuaweiNasDriver</li>
<li><cite>manila_huawei_conf_file</cite> = /etc/manila/manila_huawei_conf.xml</li>
<li><cite>driver_handles_share_servers</cite> = True or False</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If <cite>driver_handles_share_servers</cite> is True, the driver will choose a port
in &lt;Port&gt; to create vlan and logical port for each tenant network.
And the share type with the DHSS extra spec should be set to True when
creating shares.</li>
<li>If <cite>driver_handles_share_servers</cite> is False, then will use the IP in
&lt;LogicalPortIP&gt;. Also the share type with the DHSS extra spec should be
set to False when creating shares.</li>
</ul>
</div>
<p>Restart of manila-share service is needed for the configuration changes to take
effect.</p>
</div>
<div class="section" id="share-types">
<h2>Share Types<a class="headerlink" href="#share-types" title="Permalink to this headline">¶</a></h2>
<p>When creating a share, a share type can be specified to determine where and
how the share will be created. If a share type is not specified, the
<cite>default_share_type</cite> set in the manila configuration file is used.</p>
<p>Manila requires that the share type includes the <cite>driver_handles_share_servers</cite>
extra-spec. This ensures that the share will be created on a backend that
supports the requested driver_handles_share_servers (share networks) capability.
For the Huawei driver, this must be set to False.</p>
<p>To create a share on a backend with a specific type of disks, include the
<cite>huawei_disk_type</cite> extra-spec in the share type. Valid values for this
extra-spec are &#8216;ssd&#8217;, &#8216;sas&#8217;, &#8216;nl_sas&#8217; or &#8216;mix&#8217;. This share will be created
on a backend with a matching disk type.</p>
<p>Another common manila extra-spec used to determine where a share is created
is <cite>share_backend_name</cite>. When this extra-spec is defined in the share type,
the share will be created on a backend with a matching share_backend_name.</p>
<p>Manila &#8220;share types&#8221; may contain qualified extra-specs, -extra-specs that
have significance for the backend driver and the CapabilityFilter. This
commit makes the Huawei driver report the following boolean capabilities:</p>
<ul class="simple">
<li>capabilities:dedupe</li>
<li>capabilities:compression</li>
<li>capabilities:thin_provisioning</li>
<li>capabilities:huawei_smartcache<ul>
<li>huawei_smartcache:cachename</li>
</ul>
</li>
<li>capabilities:huawei_smartpartition<ul>
<li>huawei_smartpartition:partitionname</li>
</ul>
</li>
<li>capabilities:qos<ul>
<li>qos:maxIOPS</li>
<li>qos:minIOPS</li>
<li>qos:minbandwidth</li>
<li>qos:maxbandwidth</li>
<li>qos:latency</li>
<li>qos:iotype</li>
</ul>
</li>
<li>capabilities:huawei_sectorsize</li>
</ul>
<p>The scheduler will choose a host that supports the needed
capability when the CapabilityFilter is used and a share
type uses one or more of the following extra-specs:</p>
<ul class="simple">
<li>capabilities:dedupe=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;</li>
<li>capabilities:compression=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;</li>
<li>capabilities:thin_provisioning=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;</li>
<li>capabilities:huawei_smartcache=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;<ul>
<li>huawei_smartcache:cachename=test_cache_name</li>
</ul>
</li>
<li>capabilities:huawei_smartpartition=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;<ul>
<li>huawei_smartpartition:partitionname=test_partition_name</li>
</ul>
</li>
<li>capabilities:qos=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;<ul>
<li>qos:maxIOPS=100</li>
<li>qos:minIOPS=10</li>
<li>qos:maxbandwidth=100</li>
<li>qos:minbandwidth=10</li>
<li>qos:latency=10</li>
<li>qos:iotype=0</li>
</ul>
</li>
<li>capabilities:huawei_sectorsize=&#8217;&lt;is&gt; True&#8217; or &#8216;&lt;is&gt; False&#8217;<ul>
<li>huawei_sectorsize:sectorsize=4</li>
</ul>
</li>
<li>huawei_disk_type=&#8217;ssd&#8217; or &#8216;sas&#8217; or &#8216;nl_sas&#8217; or &#8216;mix&#8217;</li>
</ul>
<p><cite>thin_provisioning</cite> will be reported as [True, False] for Huawei backends.</p>
<p><cite>dedupe</cite> will be reported as [True, False] for Huawei backends.</p>
<p><cite>compression</cite> will be reported as [True, False] for Huawei backends.</p>
<p><cite>huawei_smartcache</cite> will be reported as [True, False] for Huawei backends.
Adds SSDs into a high-speed cache pool and divides the pool into
multiple cache partitions to cache hotspot data in random and small read I/Os.</p>
<p><cite>huawei_smartpartition</cite> will be reported as [True, False] for Huawei backends.
Add share to the smartpartition named &#8216;test_partition_name&#8217;.
Allocates cache resources based on service characteristics,
ensuring the quality of critical services.</p>
<p><cite>qos</cite> will be reported as True for backends that use QoS (Quality of Service)
specification.</p>
<p><cite>huawei_sectorsize</cite> will be reported as [True, False] for Huawei backends.</p>
<p><cite>huawei_disk_type</cite> will be reported as &#8220;ssd&#8221;, &#8220;sas&#8221;, &#8220;nl_sas&#8221; or &#8220;mix&#8221; for
Huawei backends.</p>
</div>
<div class="section" id="restrictions">
<h2>Restrictions<a class="headerlink" href="#restrictions" title="Permalink to this headline">¶</a></h2>
<p>The Huawei driver has the following restrictions:</p>
<ul class="simple">
<li>IP and USER access types are supported for NFS.</li>
<li>Only LDAP domain is supported for NFS.</li>
<li>Only USER access type is supported for CIFS.</li>
<li>Only AD domain is supported for CIFS.</li>
</ul>
<div class="section" id="the-manila-share-drivers-huawei-huawei-nas-module">
<h3>The <code class="xref py py-mod docutils literal"><span class="pre">manila.share.drivers.huawei.huawei_nas</span></code> Module<a class="headerlink" href="#the-manila-share-drivers-huawei-huawei-nas-module" title="Permalink to this headline">¶</a></h3>
<p>Huawei Nas Driver for Huawei storage arrays.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">HuaweiNasDriver</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <a class="reference internal" href="share_replication.html#manila.share.driver.ShareDriver" title="manila.share.driver.ShareDriver"><code class="xref py py-class docutils literal"><span class="pre">manila.share.driver.ShareDriver</span></code></a></p>
<p>Huawei Share Driver.</p>
<p>Executes commands relating to Shares.
Driver version history:</p>
<blockquote>
<div><p>1.0 - Initial version.
1.1 - Add shrink share.</p>
<blockquote>
<div>Add extend share.
Add manage share.
Add share level(ro).
Add smartx capabilities.
Support multi pools in one backend.</div></blockquote>
<dl class="docutils">
<dt>1.2 - Add share server support.</dt>
<dd>Add ensure share.
Add QoS support.
Add create share from snapshot.</dd>
<dt>1.3 - Add manage snapshot.</dt>
<dd>Support reporting disk type of pool.
Add replication support.</dd>
</dl>
</div></blockquote>
<dl class="method">
<dt>
<code class="descname">allow_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Allow access to the share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">check_for_setup_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns an error if prerequisites aren&#8217;t met.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>new_replica</em>, <em>access_rules</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Replicate the active replica to a new replica on this backend.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_from_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a share from snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica_snapshots</em>, <em>replica</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a replica.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">deny_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Deny access to the share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">do_setup</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>Any initialization the huawei nas driver does while starting.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">ensure_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Ensure that share is exported.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">extend_share</code><span class="sig-paren">(</span><em>share</em>, <em>new_size</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_backend_driver</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_network_allocations_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get number of network interfaces to be created.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_pool</code><span class="sig-paren">(</span><em>share</em><span class="sig-paren">)</span></dt>
<dd><p>Return pool name where the share resides on.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_existing</code><span class="sig-paren">(</span><em>share</em>, <em>driver_options</em><span class="sig-paren">)</span></dt>
<dd><p>Manage existing share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_existing_snapshot</code><span class="sig-paren">(</span><em>snapshot</em>, <em>driver_options</em><span class="sig-paren">)</span></dt>
<dd><p>Manage existing snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">promote_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica</em>, <em>access_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Promote a replica to &#8216;active&#8217; replica state..</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">shrink_share</code><span class="sig-paren">(</span><em>share</em>, <em>new_size</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Shrinks size of existing share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access_rules</em>, <em>add_rules</em>, <em>delete_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update access rules list.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_replica_state</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica</em>, <em>access_rules</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update the replica_state of a replica.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="gpfs_driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: GPFS Driver"></i></a>
          
          
            <a href="hdfs_native_driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: HDFS native driver"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#programming-howtos-and-tutorials">Programming HowTos and Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#background-concepts-for-manila">Background Concepts for manila</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-resources">Other Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#api-reference">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-reference">Module Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#capabilities-and-extra-specs">Capabilities and Extra-Specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends-feature-support-mapping">Share backends feature support mapping</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#share-backends">Share backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-Line Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adminref/index.html">Admin Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "devref/huawei_nas_driver" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/manila/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 610baa2fdb702fa4cc2c12eb5c61599bdcad21ce";
        var bugProject = "manila";
        var bugTitle = "Huawei Driver in manila";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 4.0.0.0rc2.dev25 on 'Tue Feb 14 14:25:27 2017, commit 610baa2'";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>