<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Shared Filesystems</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Shared Filesystems</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="database.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: The Database Layer"></i></a>
    
    
    <a href="share_hooks.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Manila share driver hooks"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Shared Filesystems</a><ul>
<li><a class="reference internal" href="#the-manila-share-manager-module">The <code class="docutils literal"><span class="pre">manila.share.manager</span></code> Module</a></li>
<li><a class="reference internal" href="#the-manila-share-driver-module">The <code class="docutils literal"><span class="pre">manila.share.driver</span></code> Module</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="shared-filesystems">
<h1>Shared Filesystems<a class="headerlink" href="#shared-filesystems" title="Permalink to this headline">¶</a></h1>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">rework</p>
</div>
<div class="section" id="the-manila-share-manager-module">
<h2>The <code class="xref py py-mod docutils literal"><span class="pre">manila.share.manager</span></code> Module<a class="headerlink" href="#the-manila-share-manager-module" title="Permalink to this headline">¶</a></h2>
<p>NAS share manager managers creating shares and access rights.</p>
<p><strong>Related Flags</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">share_driver:</th><td class="field-body">Used by <code class="xref py py-class docutils literal"><span class="pre">ShareManager</span></code>.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">ShareManager</code><span class="sig-paren">(</span><em>share_driver=None</em>, <em>service_name=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">manila.manager.SchedulerDependentManager</span></code></p>
<p>Manages NAS storages.</p>
<dl class="attribute">
<dt>
<code class="descname">RPC_API_VERSION</code><em class="property"> = '1.17'</em></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">connection_get_info</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">create_replicated_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_group</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_group_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_instance</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Creates a share instance.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_replica</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_server</code><span class="sig-paren">(</span><em>context</em>, <em>share_server_id</em><span class="sig-paren">)</span></dt>
<dd><p>Invoked to create a share server in this backend.</p>
<p>This method is invoked to create the share server defined in the model
obtained by the supplied id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>share_server_id</strong> &#8211; The id of the server to be created.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Create snapshot for share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_free_share_servers</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_replicated_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_group</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_group_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_instance</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a share instance.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_replica</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_server</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Delete share snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">extend_share</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">init_host</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Initialization for a standalone service.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_share</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_cancel</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_complete</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_driver_continue</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Invokes driver to continue migration of shares.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_get_progress</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_start</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Migrates a share from current host to another host.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">periodic_share_replica_snapshot_update</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">periodic_share_replica_update</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">promote_share_replica</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">provide_share_server</code><span class="sig-paren">(</span><em>context</em>, <em>share_instance_id</em>, <em>share_network_id</em>, <em>snapshot_id=None</em><span class="sig-paren">)</span></dt>
<dd><p>Invoked to provide a compatible share server.</p>
<p>This method is invoked to find a compatible share server among the
existing ones or create a share server database instance with the share
server properties that will be used to create the share server later.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>share_instance_id</strong> &#8211; The id of the share instance whose model
attributes will be used to provide the share server.</li>
<li><strong>share_network_id</strong> &#8211; The id of the share network the share server
to be provided has to be related to.</li>
<li><strong>snapshot_id</strong> &#8211; The id of the snapshot to be used to obtain the
share server if applicable.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The id of the share server that is being provided.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">publish_service_capabilities</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Collect driver status and then publish it.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">revert_to_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">shrink_share</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">snapshot_update_access</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_instance_id</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">unmanage_share</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">unmanage_snapshot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">update_access</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Allow/Deny access to some share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_share_replica</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Initiated by the force_update API.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="descname">add_hooks</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span></dt>
<dd><p>Hook decorator to perform action before and after a share method call</p>
<p>The hook decorator can perform actions before some share driver methods
calls and after a call with results of driver call and preceding hook call.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">locked_share_replica_operation</code><span class="sig-paren">(</span><em>operation</em><span class="sig-paren">)</span></dt>
<dd><p>Lock decorator for share replica operations.</p>
<p>Takes a named lock prior to executing the operation. The lock is named with
the id of the share to which the replica belongs.</p>
<p>Intended use:
If a replica operation uses this decorator, it will block actions on
all share replicas of the share until the named lock is free. This is
used to protect concurrent operations on replicas of the same share e.g.
promote ReplicaA while deleting ReplicaB, both belonging to the same share.</p>
</dd></dl>

</div>
<div class="section" id="the-manila-share-driver-module">
<h2>The <code class="xref py py-mod docutils literal"><span class="pre">manila.share.driver</span></code> Module<a class="headerlink" href="#the-manila-share-driver-module" title="Permalink to this headline">¶</a></h2>
<p>Drivers for shares.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descname">ExecuteMixin</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Provides an executable functionality to a driver class.</p>
<dl class="method">
<dt>
<code class="descname">init_execute_mixin</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">set_execute</code><span class="sig-paren">(</span><em>execute</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">GaneshaMixin</code></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Augment derived classes with Ganesha configuration.</p>
<dl class="method">
<dt>
<code class="descname">init_ganesha_mixin</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">ShareDriver</code><span class="sig-paren">(</span><em>driver_handles_share_servers</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class defines interface of NAS driver.</p>
<dl class="attribute">
<dt>
<code class="descname">admin_network_api</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">allocate_admin_network</code><span class="sig-paren">(</span><em>context</em>, <em>share_server</em>, <em>count=None</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Allocate admin network resources using given network information.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">allocate_network</code><span class="sig-paren">(</span><em>context</em>, <em>share_server</em>, <em>share_network</em>, <em>count=None</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Allocate network resources using given network information.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">allow_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Allow access to the share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">check_for_setup_error</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Check for setup error.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">choose_share_server_compatible_with_share</code><span class="sig-paren">(</span><em>context</em>, <em>share_servers</em>, <em>share</em>, <em>snapshot=None</em>, <em>share_group=None</em><span class="sig-paren">)</span></dt>
<dd><p>Method that allows driver to choose share server for provided share.</p>
<p>If compatible share-server is not found, method should return None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>share_servers</strong> &#8211; list with share-server models</li>
<li><strong>share</strong> &#8211; share model</li>
<li><strong>snapshot</strong> &#8211; snapshot model</li>
<li><strong>share_group</strong> &#8211; ConsistencyGroup model with shares</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">share-server or None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">choose_share_server_compatible_with_share_group</code><span class="sig-paren">(</span><em>context</em>, <em>share_servers</em>, <em>share_group_ref</em>, <em>share_group_snapshot=None</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">connection_get_info</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to provide necessary generic migration logic.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>share</strong> &#8211; Reference to the share being migrated.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary with migration information.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>new_replica</em>, <em>access_rules</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Replicate the active replica to a new replica on this backend.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the host that the new replica is being created
upon.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share.
This list also contains the replica to be created. The &#8216;active&#8217;
replica will have its &#8216;replica_state&#8217; attr set to &#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;07574742-67ea-4dfd-9844-9fbd8ada3d87&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>new_replica</strong> &#8211; The share replica dictionary.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;deleted&#39;: False,
    &#39;host&#39;: &#39;openstack2@cmodeSSVMNFS2&#39;,
    &#39;status&#39;: &#39;creating&#39;,
    &#39;scheduled_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;launched_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;terminated_at&#39;: None,
    &#39;replica_state&#39;: &#39;out_of_sync&#39;,
    &#39;availability_zone_id&#39;: &#39;f6e146d0-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;export_locations&#39;: [
        models.ShareInstanceExportLocations,
    ],
    &#39;access_rules_status&#39;: &#39;out_of_sync&#39;,
    &#39;share_network_id&#39;: &#39;4ccd5318-65f1-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_server_id&#39;: &#39;e6155221-ea00-49ef-abf9-9f89b7dd900a&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>access_rules</strong> &#8211; A list of access rules.
These are rules that other instances of the share already obey.
Drivers are expected to apply access rules to the new replica or
disregard access rules that don&#8217;t apply.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
 {
    &#39;id&#39;: &#39;f0875f6f-766b-4865-8b41-cccb4cdf1676&#39;,
    &#39;deleted&#39; = False,
    &#39;share_id&#39; = &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;access_type&#39; = &#39;ip&#39;,
    &#39;access_to&#39; = &#39;172.16.20.1&#39;,
    &#39;access_level&#39; = &#39;rw&#39;,
 }
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
This includes snapshot instances of every snapshot of the share
whose &#8216;aggregate_status&#8217; property was reported to be &#8216;available&#8217;
when the share manager initiated this request. Each list member
will have two sub dictionaries: &#8216;active_replica_snapshot&#8217; and
&#8216;share_replica_snapshot&#8217;. The &#8216;active&#8217; replica snapshot corresponds
to the instance of the snapshot on any of the &#8216;active&#8217; replicas of
the share while share_replica_snapshot corresponds to the snapshot
instance for the specific replica that will need to exist on the
new share replica that is being created. The driver needs to ensure
that this snapshot instance is truly available before transitioning
the replica from &#8216;out_of_sync&#8217; to &#8216;in_sync&#8217;. Snapshots instances
for snapshots that have an &#8216;aggregate_status&#8217; of &#8216;creating&#8217; or
&#8216;deleting&#8217; will be polled for in the <code class="docutils literal"><span class="pre">update_replicated_snapshot</span></code>
method.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
 {
 &#39;active_replica_snapshot&#39;: {
    &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
    &#39;share_instance_id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;status&#39;: &#39;available&#39;,
    &#39;provider_location&#39;: &#39;/newton/share-snapshot-10e49c3e-aca9&#39;,
    ...
    },
 &#39;share_replica_snapshot&#39;: {
    &#39;id&#39;: &#39;&#39;,
    &#39;share_instance_id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;status&#39;: &#39;available&#39;,
    &#39;provider_location&#39;: None,
        ...
    },
 }
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None
Share server of the replica being created.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None or a dictionary.
The dictionary can contain export_locations replica_state and
access_rules_status. export_locations is a list of paths and
replica_state is one of &#8216;active&#8217;, &#8216;in_sync&#8217;, &#8216;out_of_sync&#8217; or
&#8216;error&#8217;.</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">A backend supporting &#8216;writable&#8217; type replication should return
&#8216;active&#8217; as the replica_state.</p>
</div>
<p>Export locations should be in the same format as returned during the
<code class="docutils literal"><span class="pre">create_share</span></code> call.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;172.16.20.22/sample/export/path&#39;</span><span class="p">,</span>
             <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;some_key&#39;</span><span class="p">:</span> <span class="s1">&#39;some_value&#39;</span><span class="p">},</span>
        <span class="p">},</span>
    <span class="p">],</span>
     <span class="s1">&#39;replica_state&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
     <span class="s1">&#39;access_rules_status&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_replicated_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a snapshot on active instance and update across the replicas.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the &#8216;active&#8217; replica&#8217;s host. Drivers are
expected to transfer the snapshot created to the respective
replicas.</p>
</div>
<p>The driver is expected to return model updates to the share manager.
If it was able to confirm the creation of any number of the snapshot
instances passed in this interface, it can set their status to
&#8216;available&#8217; as a cue for the share manager to set the progress attr
to &#8216;100%&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
The &#8216;active&#8217; replica will have its &#8216;replica_state&#8217; attr set to
&#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
These snapshot instances track the snapshot across the replicas.
All the instances will have their status attribute set to
&#8216;creating&#8217;.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span> [
    {
    &#39;id&#39;: &#39;d3931a93-3984-421e-a9e7-d9f71895450a&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;status: &#39;creating&#39;,
    &#39;progress&#39;: &#39;0%&#39;,
        ...
    },
    {
    &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;status: &#39;creating&#39;,
    &#39;progress&#39;: &#39;0%&#39;,
        ...
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of dictionaries of snapshot instances.
The dictionaries can contain values that need to be updated on the
database for the snapshot instances being created.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">Exception.
Any exception in this method will set all instances to &#8216;error&#8217;.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to create share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_from_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to create share from snapshot.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_group</code><span class="sig-paren">(</span><em>context</em>, <em>share_group_dict</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a share group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; </li>
<li><strong>share_group_dict</strong> &#8211; The share group details
EXAMPLE:
{
&#8216;status&#8217;: &#8216;creating&#8217;,
&#8216;project_id&#8217;: &#8216;13c0be6290934bd98596cfa004650049&#8217;,
&#8216;user_id&#8217;: &#8216;a0314a441ca842019b0952224aa39192&#8217;,
&#8216;description&#8217;: None,
&#8216;deleted&#8217;: &#8216;False&#8217;,
&#8216;created_at&#8217;: datetime.datetime(2015, 8, 10, 15, 14, 6),
&#8216;updated_at&#8217;: None,
&#8216;source_share_group_snapshot_id&#8217;: &#8216;some_fake_uuid&#8217;,
&#8216;share_group_type_id&#8217;: &#8216;some_fake_uuid&#8217;,
&#8216;host&#8217;: <a class="reference external" href="mailto:'hostname&#37;&#52;&#48;backend_name">'hostname<span>&#64;</span>backend_name</a>&#8216;,
&#8216;share_network_id&#8217;: None,
&#8216;share_server_id&#8217;: None,
&#8216;deleted_at&#8217;: None,
&#8216;share_types&#8217;: [&lt;models.ShareGroupShareTypeMapping&gt;],
&#8216;id&#8217;: &#8216;some_fake_uuid&#8217;,
&#8216;name&#8217;: None
}</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(share_group_model_update, share_update_list)
share_group_model_update - a dict containing any values to be
updated for the SG in the database. This value may be None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_group_from_share_group_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>share_group_dict</em>, <em>share_group_snapshot_dict</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a share group from a share group snapshot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; </li>
<li><strong>share_group_dict</strong> &#8211; <p>The share group details
EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;status&#39;: &#39;creating&#39;,
&#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
&#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
&#39;description&#39;: None,
&#39;deleted&#39;: &#39;False&#39;,
&#39;created_at&#39;: datetime.datetime(2015, 8, 10, 15, 14, 6),
&#39;updated_at&#39;: None,
&#39;source_share_group_snapshot_id&#39;:
    &#39;f6aa3b59-57eb-421e-965c-4e182538e36a&#39;,
&#39;host&#39;: &#39;hostname@backend_name&#39;,
&#39;deleted_at&#39;: None,
&#39;shares&#39;: [&lt;models.Share&gt;], # The new shares being created
&#39;share_types&#39;: [&lt;models.ShareGroupShareTypeMapping&gt;],
&#39;id&#39;: &#39;some_fake_uuid&#39;,
&#39;name&#39;: None
}
</pre></div>
</div>
</li>
<li><strong>share_group_snapshot_dict</strong> &#8211; <p>The share group snapshot details
EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;status&#39;: &#39;available&#39;,
&#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
&#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
&#39;description&#39;: None,
&#39;deleted&#39;: &#39;0&#39;,
&#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;share_group_id&#39;: &#39;some_fake_uuid&#39;,
&#39;share_share_group_snapshot_members&#39;: [
    {
     &#39;status&#39;: &#39;available&#39;,
     &#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
     &#39;deleted&#39;: &#39;False&#39;,
     &#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share&#39;: &lt;models.Share&gt;,
     &#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share_proto&#39;: &#39;NFS&#39;,
     &#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
     &#39;share_group_snapshot_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;deleted_at&#39;: None,
     &#39;id&#39;: &#39;some_fake_uuid&#39;,
     &#39;size&#39;: 1
    }
],
&#39;deleted_at&#39;: None,
&#39;id&#39;: &#39;f6aa3b59-57eb-421e-965c-4e182538e36a&#39;,
&#39;name&#39;: None
}
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(share_group_model_update, share_update_list)
share_group_model_update - a dict containing any values to be
updated for the share group in the database. This value may be None</p>
<p>share_update_list - a list of dictionaries containing dicts for
every share created in the share group. Any share dicts should at a
minimum contain the &#8216;id&#8217; key and &#8216;export_locations&#8217;.
Export locations should be in the same format as returned by
a share_create. This list may be empty or None. EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">,</span> <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="o">...</span><span class="p">},</span> <span class="p">{</span><span class="o">...</span><span class="p">}]}]</span>
</pre></div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_share_group_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snap_dict</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Create a share group snapshot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; </li>
<li><strong>snap_dict</strong> &#8211; <p>The share group snapshot details
EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;status&#39;: &#39;available&#39;,
&#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
&#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
&#39;description&#39;: None,
&#39;deleted&#39;: &#39;0&#39;,
&#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;share_group_id&#39;: &#39;some_fake_uuid&#39;,
&#39;share_group_snapshot_members&#39;: [
    {
     &#39;status&#39;: &#39;available&#39;,
     &#39;share_type_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
     &#39;deleted&#39;: &#39;False&#39;,
     &#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share&#39;: &lt;models.Share&gt;,
     &#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share_proto&#39;: &#39;NFS&#39;,
     &#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
     &#39;share_group_snapshot_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;deleted_at&#39;: None,
     &#39;share_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;id&#39;: &#39;some_fake_uuid&#39;,
     &#39;size&#39;: 1,
     &#39;provider_location&#39;: None,
    }
],
&#39;deleted_at&#39;: None,
&#39;id&#39;: &#39;some_fake_uuid&#39;,
&#39;name&#39;: None
}
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>(share_group_snapshot_update, member_update_list)
share_group_snapshot_update - a dict containing any values to be
updated for the CGSnapshot in the database. This value may be None.</p>
<p>member_update_list -  a list of dictionaries containing for every
member of the share group snapshot. Each dict should contains
values to be updated for the ShareGroupSnapshotMember in
the database. This list may be empty or None.</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">create_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to create snapshot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>snapshot</strong> &#8211; Snapshot model. Share model could be
retrieved through snapshot[&#8216;share&#8217;].</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None or a dictionary with key &#8216;export_locations&#8217; containing
a list of export locations, if snapshots can be mounted.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">creating_shares_from_snapshots_is_supported</code></dt>
<dd><p>Calculate default value for create_share_from_snapshot_support.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">deallocate_network</code><span class="sig-paren">(</span><em>context</em>, <em>share_server_id</em><span class="sig-paren">)</span></dt>
<dd><p>Deallocate network resources for the given share server.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica_snapshots</em>, <em>replica</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a replica.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the host that hosts the replica being
deleted.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
This list also contains the replica to be deleted. The &#8216;active&#8217;
replica will have its &#8216;replica_state&#8217; attr set to &#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;07574742-67ea-4dfd-9844-9fbd8ada3d87&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica</strong> &#8211; Dictionary of the share replica being deleted.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;deleted&#39;: False,
    &#39;host&#39;: &#39;openstack2@cmodeSSVMNFS2&#39;,
    &#39;status&#39;: &#39;available&#39;,
    &#39;scheduled_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;launched_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;terminated_at&#39;: None,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
    &#39;availability_zone_id&#39;: &#39;f6e146d0-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;export_locations&#39;: [
        models.ShareInstanceExportLocations
    ],
    &#39;access_rules_status&#39;: &#39;out_of_sync&#39;,
    &#39;share_network_id&#39;: &#39;4ccd5318-65f1-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_server_id&#39;: &#39;53099868-65f1-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
The dict contains snapshot instances that are associated with the
share replica being deleted.
No model updates to snapshot instances are possible in this method.
The driver should return when the cleanup is completed on the
backend for both, the snapshots and the replica itself. Drivers
must handle situations where the snapshot may not yet have
finished &#8216;creating&#8217; on this replica.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;89dafd00-0999-4d23-8614-13eaa6b02a3b&#39;,
    &#39;snapshot_id&#39;: &#39;3ce1caf7-0945-45fd-a320-714973e949d3&#39;,
    &#39;status: &#39;available&#39;,
    &#39;share_instance_id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;
        ...
    },
    {
    &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;status: &#39;creating&#39;,
    &#39;share_instance_id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;
        ...
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None
Share server of the replica to be deleted.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">Exception.
Any exception raised will set the share replica&#8217;s &#8216;status&#8217; and
&#8216;replica_state&#8217; attributes to &#8216;error_deleting&#8217;. It will not affect
snapshots belonging to this replica.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_replicated_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a snapshot by deleting its instances across the replicas.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the &#8216;active&#8217; replica&#8217;s host, since
drivers may not be able to delete the snapshot from an individual
replica.</p>
</div>
<p>The driver is expected to return model updates to the share manager.
If it was able to confirm the removal of any number of the snapshot
instances passed in this interface, it can set their status to
&#8216;deleted&#8217; as a cue for the share manager to clean up that instance
from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
The &#8216;active&#8217; replica will have its &#8216;replica_state&#8217; attr set to
&#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
These snapshot instances track the snapshot across the replicas.
All the instances will have their status attribute set to
&#8216;deleting&#8217;.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span> [
    {
    &#39;id&#39;: &#39;d3931a93-3984-421e-a9e7-d9f71895450a&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;status&#39;: &#39;deleting&#39;,
    &#39;progress&#39;: &#39;100%&#39;,
        ...
    },
    {
    &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;status: &#39;deleting&#39;,
    &#39;progress&#39;: &#39;100%&#39;,
        ...
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of dictionaries of snapshot instances.
The dictionaries can contain values that need to be updated on the
database for the snapshot instances being deleted. To confirm the
deletion of the snapshot instance, set the &#8216;status&#8217; attribute of
the instance to &#8216;deleted&#8217; (constants.STATUS_DELETED)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">Exception.
Any exception in this method will set the status attribute of all
snapshot instances to &#8216;error_deleting&#8217;.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to remove share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_group</code><span class="sig-paren">(</span><em>context</em>, <em>share_group_dict</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a share group</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The request context</li>
<li><strong>share_group_dict</strong> &#8211; <p>The share group details
EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;status&#39;: &#39;creating&#39;,
&#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
&#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
&#39;description&#39;: None,
&#39;deleted&#39;: &#39;False&#39;,
&#39;created_at&#39;: datetime.datetime(2015, 8, 10, 15, 14, 6),
&#39;updated_at&#39;: None,
&#39;source_share_group_snapshot_id&#39;: &#39;some_fake_uuid&#39;,
&#39;share_share_group_type_id&#39;: &#39;some_fake_uuid&#39;,
&#39;host&#39;: &#39;hostname@backend_name&#39;,
&#39;deleted_at&#39;: None,
&#39;shares&#39;: [&lt;models.Share&gt;], # The new shares being created
&#39;share_types&#39;: [&lt;models.ShareGroupShareTypeMapping&gt;],
&#39;id&#39;: &#39;some_fake_uuid&#39;,
&#39;name&#39;: None
}
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">share_group_model_update
share_group_model_update - a dict containing any values to be
updated for the group in the database. This value may be None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_share_group_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snap_dict</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Delete a share group snapshot</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; </li>
<li><strong>snap_dict</strong> &#8211; <p>The share group snapshot details
EXAMPLE:
.. code:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;status&#39;: &#39;available&#39;,
&#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
&#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
&#39;description&#39;: None,
&#39;deleted&#39;: &#39;0&#39;,
&#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
&#39;share_group_id&#39;: &#39;some_fake_uuid&#39;,
&#39;share_group_snapshot_members&#39;: [
    {
     &#39;status&#39;: &#39;available&#39;,
     &#39;share_type_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;share_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;user_id&#39;: &#39;a0314a441ca842019b0952224aa39192&#39;,
     &#39;deleted&#39;: &#39;False&#39;,
     &#39;created_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share&#39;: &lt;models.Share&gt;,
     &#39;updated_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
     &#39;share_proto&#39;: &#39;NFS&#39;,
     &#39;project_id&#39;: &#39;13c0be6290934bd98596cfa004650049&#39;,
     &#39;share_group_snapshot_id&#39;: &#39;some_fake_uuid&#39;,
     &#39;deleted_at&#39;: None,
     &#39;id&#39;: &#39;some_fake_uuid&#39;,
     &#39;size&#39;: 1,
     &#39;provider_location&#39;: &#39;fake_provider_location_value&#39;,
    }
],
&#39;deleted_at&#39;: None,
&#39;id&#39;: &#39;f6aa3b59-57eb-421e-965c-4e182538e36a&#39;,
&#39;name&#39;: None
}
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(share_group_snapshot_update, member_update_list)
share_group_snapshot_update - a dict containing any values
to be updated for the ShareGroupSnapshot in the database.
This value may be None.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">delete_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Is called to remove snapshot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>snapshot</strong> &#8211; Snapshot model. Share model could be
retrieved through snapshot[&#8216;share&#8217;].</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">deny_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Deny access to the share.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">do_setup</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>Any initialization the share driver does while starting.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">driver_handles_share_servers</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">ensure_share</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Invoked to ensure that share is exported.</p>
<p>Driver can use this method to update the list of export locations of
the share if it changes. To do that, you should return list with
export locations.</p>
<p>:return None or list with export locations</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">extend_share</code><span class="sig-paren">(</span><em>share</em>, <em>new_size</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Extends size of existing share.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>share</strong> &#8211; Share model</li>
<li><strong>new_size</strong> &#8211; New size of share (new_size &gt; share[&#8216;size&#8217;])</li>
<li><strong>share_server</strong> &#8211; Optional &#8211; Share server model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_admin_network_allocations_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">get_default_filter_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the default filter_function string.</p>
<p>Each driver could overwrite the method to return a well-known
default string if it is available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_default_goodness_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get the default goodness_function string.</p>
<p>Each driver could overwrite the method to return a well-known
default string if it is available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_filter_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get filter_function string.</p>
<p>Returns either the string from the driver instance or global section
in manila.conf. If nothing is specified in manila.conf, then try to
find the default filter_function. When None is returned the scheduler
will always pass the driver instance.</p>
<p>:return a filter_function string or None</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_goodness_function</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Get good_function string.</p>
<p>Returns either the string from the driver instance or global section
in manila.conf. If nothing is specified in manila.conf, then try to
find the default goodness_function. When None is returned the scheduler
will give the lowest score to the driver instance.</p>
<p>:return a goodness_function string or None</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_network_allocations_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Returns number of network allocations for creating VIFs.</p>
<p>Drivers that use Nova for share servers should return zero (0) here
same as Generic driver does.
Because Nova will handle network resources allocation.
Drivers that handle networking itself should calculate it according
to their own requirements. It can have 1+ network interfaces.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_periodic_hook_data</code><span class="sig-paren">(</span><em>context</em>, <em>share_instances</em><span class="sig-paren">)</span></dt>
<dd><p>Dedicated for update/extend of data for existing share instances.</p>
<p>Redefine this method in share driver to be able to update/change/extend
share instances data that will be used by periodic hook action.
One of possible updates is add-on of &#8220;automount&#8221; CLI commands for each
share instance for case of notification is enabled using &#8216;hook&#8217;
approach.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>share_instances</strong> &#8211; share instances list provided by share manager</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">list of share instances.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_pool</code><span class="sig-paren">(</span><em>share</em><span class="sig-paren">)</span></dt>
<dd><p>Return pool name where the share resides on.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share</strong> &#8211; The share hosted by the driver.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_share_server_pools</code><span class="sig-paren">(</span><em>share_server</em><span class="sig-paren">)</span></dt>
<dd><p>Return list of pools related to a particular share server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; ShareServer class instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_share_stats</code><span class="sig-paren">(</span><em>refresh=False</em><span class="sig-paren">)</span></dt>
<dd><p>Get share status.</p>
<p>If &#8216;refresh&#8217; is True, run update the stats first.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_existing</code><span class="sig-paren">(</span><em>share</em>, <em>driver_options</em><span class="sig-paren">)</span></dt>
<dd><p>Brings an existing share under Manila management.</p>
<p>If the provided share is not valid, then raise a
ManageInvalidShare exception, specifying a reason for the failure.</p>
<p>If the provided share is not in a state that can be managed, such as
being replicated on the backend, the driver <em>MUST</em> raise
ManageInvalidShare exception with an appropriate message.</p>
<p>The share has a share_type, and the driver can inspect that and
compare against the properties of the referenced backend share.
If they are incompatible, raise a
ManageExistingShareTypeMismatch, specifying a reason for the failure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>share</strong> &#8211; Share model</li>
<li><strong>driver_options</strong> &#8211; Driver-specific options provided by admin.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">share_update dictionary with required key &#8216;size&#8217;,
which should contain size of the share.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">manage_existing_snapshot</code><span class="sig-paren">(</span><em>snapshot</em>, <em>driver_options</em><span class="sig-paren">)</span></dt>
<dd><p>Brings an existing snapshot under Manila management.</p>
<p>If provided snapshot is not valid, then raise a
ManageInvalidShareSnapshot exception, specifying a reason for
the failure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>snapshot</strong> &#8211; ShareSnapshotInstance model with ShareSnapshot data.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Example::</dt>
<dd>{
&#8216;id&#8217;: &lt;instance id&gt;,
&#8216;snapshot_id&#8217;: &lt; snapshot id&gt;,
&#8216;provider_location&#8217;: &lt;location&gt;,
...
}</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>driver_options</strong> &#8211; Optional driver-specific options provided
by admin.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
&#39;key&#39;: &#39;value&#39;,
...
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">model_update dictionary with required key &#8216;size&#8217;,
which should contain size of the share snapshot, and key
&#8216;export_locations&#8217; containing a list of export locations, if
snapshots can be mounted.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_cancel</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>source_snapshots</em>, <em>snapshot_mappings</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Cancels migration of a given share to another host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called in source share&#8217;s backend to cancel migration.</p>
</div>
<p>If possible, driver can implement a way to cancel an in-progress
migration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the original share model.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>source_snapshots</strong> &#8211; List of snapshots owned by the source share.</li>
<li><strong>snapshot_mappings</strong> &#8211; Mapping of source snapshot IDs to
destination snapshot models.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_check_compatibility</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Checks destination compatibility for migration of a given share.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called to test compatibility with destination backend.</p>
</div>
<p>Driver should check if it is compatible with destination backend so
driver-assisted migration can proceed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the share to be migrated.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>A dictionary containing values indicating if destination
backend is compatible, if share can remain writable during
migration, if it can preserve all file metadata and if it can
perform migration of given share non-disruptively.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;compatible&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;writable&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;preserve_metadata&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;nondisruptive&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s1">&#39;preserve_snapshots&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_complete</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>source_snapshots</em>, <em>snapshot_mappings</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Completes migration of a given share to another host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called in source share&#8217;s backend to complete migration.</p>
</div>
<p>If driver is implementing 2-phase migration, this method should
perform the disruptive tasks related to the 2nd phase of migration,
thus completing it. Driver should also delete all original share data
from source backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the original share model.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>source_snapshots</strong> &#8211; List of snapshots owned by the source share.</li>
<li><strong>snapshot_mappings</strong> &#8211; Mapping of source snapshot IDs to
destination snapshot models.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>If the migration changes the share export locations, snapshot
provider locations or snapshot export locations, this method should
return a dictionary with the relevant info. In such case, a
dictionary containing a list of export locations and a list of
model updates for each snapshot indexed by their IDs.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span>
    <span class="p">[</span>
        <span class="p">{</span>
        <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;1.2.3.4:/foo&#39;</span><span class="p">,</span>
        <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">False</span>
        <span class="p">},</span>
        <span class="p">{</span>
        <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;5.6.7.8:/foo&#39;</span><span class="p">,</span>
        <span class="s1">&#39;metadata&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">True</span>
        <span class="p">},</span>
    <span class="p">],</span>
    <span class="s1">&#39;snapshot_updates&#39;</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="s1">&#39;bc4e3b28-0832-4168-b688-67fdc3e9d408&#39;</span><span class="p">:</span>
        <span class="p">{</span>
        <span class="s1">&#39;provider_location&#39;</span><span class="p">:</span> <span class="s1">&#39;/snapshots/foo/bar_1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span>
        <span class="p">[</span>
            <span class="p">{</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;1.2.3.4:/snapshots/foo/bar_1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;5.6.7.8:/snapshots/foo/bar_1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">],</span>
        <span class="p">},</span>
        <span class="s1">&#39;2e62b7ea-4e30-445f-bc05-fd523ca62941&#39;</span><span class="p">:</span>
        <span class="p">{</span>
        <span class="s1">&#39;provider_location&#39;</span><span class="p">:</span> <span class="s1">&#39;/snapshots/foo/bar_2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span>
        <span class="p">[</span>
            <span class="p">{</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;1.2.3.4:/snapshots/foo/bar_2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
            <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="s1">&#39;5.6.7.8:/snapshots/foo/bar_2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;is_admin_only&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_continue</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>source_snapshots</em>, <em>snapshot_mappings</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Continues migration of a given share to another host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called in source share&#8217;s backend to continue migration.</p>
</div>
<p>Driver should implement this method to continue monitor the migration
progress in storage and perform following steps until 1st phase is
completed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the original share model.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>source_snapshots</strong> &#8211; List of snapshots owned by the source share.</li>
<li><strong>snapshot_mappings</strong> &#8211; Mapping of source snapshot IDs to
destination snapshot models.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Boolean value to indicate if 1st phase is finished.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_get_progress</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>source_snapshots</em>, <em>snapshot_mappings</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Obtains progress of migration of a given share to another host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called in source share&#8217;s backend to obtain migration progress.</p>
</div>
<p>If possible, driver can implement a way to return migration progress
information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the original share model.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>source_snapshots</strong> &#8211; List of snapshots owned by the source share.</li>
<li><strong>snapshot_mappings</strong> &#8211; Mapping of source snapshot IDs to
destination snapshot models.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary with at least &#8216;total_progress&#8217; field containing
the percentage value.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">migration_start</code><span class="sig-paren">(</span><em>context</em>, <em>source_share</em>, <em>destination_share</em>, <em>source_snapshots</em>, <em>snapshot_mappings</em>, <em>share_server=None</em>, <em>destination_share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Starts migration of a given share to another host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Is called in source share&#8217;s backend to start migration.</p>
</div>
<p>Driver should implement this method if willing to perform migration
in a driver-assisted way, useful for when source share&#8217;s backend driver
is compatible with destination backend driver. This method should
start the migration procedure in the backend and end. Following steps
should be done in &#8216;migration_continue&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; The &#8216;context.RequestContext&#8217; object for the request.</li>
<li><strong>source_share</strong> &#8211; Reference to the original share model.</li>
<li><strong>destination_share</strong> &#8211; Reference to the share model to be used by
migrated share.</li>
<li><strong>source_snapshots</strong> &#8211; List of snapshots owned by the source share.</li>
<li><strong>snapshot_mappings</strong> &#8211; Mapping of source snapshot IDs to
destination snapshot models.</li>
<li><strong>share_server</strong> &#8211; Share server model or None.</li>
<li><strong>destination_share_server</strong> &#8211; Destination Share server model or
None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">promote_replica</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica</em>, <em>access_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Promote a replica to &#8216;active&#8217; replica state.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the host that hosts the replica being
promoted.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
This list also contains the replica to be promoted. The &#8216;active&#8217;
replica will have its &#8216;replica_state&#8217; attr set to &#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;07574742-67ea-4dfd-9844-9fbd8ada3d87&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica</strong> &#8211; Dictionary of the replica to be promoted.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;deleted&#39;: False,
    &#39;host&#39;: &#39;openstack2@cmodeSSVMNFS2&#39;,
    &#39;status&#39;: &#39;available&#39;,
    &#39;scheduled_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;launched_at&#39;: datetime.datetime(2015, 8, 10, 0, 5, 58),
    &#39;terminated_at&#39;: None,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
    &#39;availability_zone_id&#39;: &#39;f6e146d0-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;export_locations&#39;: [
        models.ShareInstanceExportLocations
    ],
    &#39;access_rules_status&#39;: &#39;in_sync&#39;,
    &#39;share_network_id&#39;: &#39;4ccd5318-65f1-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_server_id&#39;: &#39;07574742-67ea-4dfd-9844-9fbd8ada3d87&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>access_rules</strong> &#8211; A list of access rules
These access rules are obeyed by other instances of the share</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
 {
    &#39;id&#39;: &#39;f0875f6f-766b-4865-8b41-cccb4cdf1676&#39;,
    &#39;deleted&#39; = False,
    &#39;share_id&#39; = &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;access_type&#39; = &#39;ip&#39;,
    &#39;access_to&#39; = &#39;172.16.20.1&#39;,
    &#39;access_level&#39; = &#39;rw&#39;,
 }
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None
Share server of the replica to be promoted.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">updated_replica_list or None.
The driver can return the updated list as in the request
parameter. Changes that will be updated to the Database are:
&#8216;export_locations&#8217;, &#8216;access_rules_status&#8217; and &#8216;replica_state&#8217;.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">Exception.
This can be any exception derived from BaseException. This is
re-raised by the manager after some necessary cleanup. If the
driver raises an exception during promotion, it is assumed that
all of the replicas of the share are in an inconsistent state.
Recovery is only possible through the periodic update call and/or
administrator intervention to correct the &#8216;status&#8217; of the affected
replicas if they become healthy again.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">replication_domain</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">revert_to_replicated_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>active_replica</em>, <em>replica_list</em>, <em>active_replica_snapshot</em>, <em>replica_snapshots</em>, <em>access_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Reverts a replicated share (in place) to the specified snapshot.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the &#8216;active&#8217; replica&#8217;s host, since drivers may
not be able to revert snapshots on individual replicas.</p>
</div>
<p>Does not delete the share snapshot.  The share and snapshot must both
be &#8216;available&#8217; for the restore to be attempted.  The snapshot must be
the most recent one taken by Manila; the API layer performs this check
so the driver doesn&#8217;t have to.</p>
<p>The share must be reverted in place to the contents of the snapshot.
Application admins should quiesce or otherwise prepare the application
for the shared file system contents to change suddenly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>active_replica</strong> &#8211; The current active replica</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
The &#8216;active&#8217; replica will have its &#8216;replica_state&#8217; attr set to
&#8216;active&#8217; and its &#8216;status&#8217; set to &#8216;reverting&#8217;.</li>
<li><strong>active_replica_snapshot</strong> &#8211; snapshot to be restored</li>
<li><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
These snapshot instances track the snapshot across the replicas.
The snapshot of the active replica to be restored with have its
status attribute set to &#8216;restoring&#8217;.</li>
<li><strong>access_rules</strong> &#8211; List of access rules for the affected share.</li>
<li><strong>share_server</strong> &#8211; Optional &#8211; Share server model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">revert_to_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>access_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Reverts a share (in place) to the specified snapshot.</p>
<p>Does not delete the share snapshot.  The share and snapshot must both
be &#8216;available&#8217; for the restore to be attempted.  The snapshot must be
the most recent one taken by Manila; the API layer performs this check
so the driver doesn&#8217;t have to.</p>
<p>The share must be reverted in place to the contents of the snapshot.
Application admins should quiesce or otherwise prepare the application
for the shared file system contents to change suddenly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>snapshot</strong> &#8211; The snapshot to be restored</li>
<li><strong>access_rules</strong> &#8211; List of all access rules for the affected share</li>
<li><strong>share_server</strong> &#8211; Optional &#8211; Share server model or None</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">setup_server</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">shrink_share</code><span class="sig-paren">(</span><em>share</em>, <em>new_size</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Shrinks size of existing share.</p>
<p>If consumed space on share larger than new_size driver should raise
ShareShrinkingPossibleDataLoss exception:
raise ShareShrinkingPossibleDataLoss(share_id=share[&#8216;id&#8217;])</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>share</strong> &#8211; Share model</li>
<li><strong>new_size</strong> &#8211; New size of share (new_size &lt; share[&#8216;size&#8217;])</li>
<li><strong>share_server</strong> &#8211; Optional &#8211; Share server model</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:raises ShareShrinkingPossibleDataLoss, NotImplementedError</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">snapshot_update_access</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>access_rules</em>, <em>add_rules</em>, <em>delete_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update access rules for given snapshot.</p>
<p><code class="docutils literal"><span class="pre">access_rules</span></code> contains all access_rules that need to be on the
share. If the driver can make bulk access rule updates, it can
safely ignore the <code class="docutils literal"><span class="pre">add_rules</span></code> and <code class="docutils literal"><span class="pre">delete_rules</span></code> parameters.</p>
<p>If the driver cannot make bulk access rule changes, it can rely on
new rules to be present in <code class="docutils literal"><span class="pre">add_rules</span></code> and rules that need to be
removed to be present in <code class="docutils literal"><span class="pre">delete_rules</span></code>.</p>
<p>When a rule in <code class="docutils literal"><span class="pre">add_rules</span></code> already exists in the back end, drivers
must not raise an exception. When a rule in <code class="docutils literal"><span class="pre">delete_rules</span></code> was never
applied, drivers must not raise an exception, or attempt to set the
rule to <code class="docutils literal"><span class="pre">error</span></code> state.</p>
<p><code class="docutils literal"><span class="pre">add_rules</span></code> and <code class="docutils literal"><span class="pre">delete_rules</span></code> can be empty lists, in this
situation, drivers should ensure that the rules present in
<code class="docutils literal"><span class="pre">access_rules</span></code> are the same as those on the back end.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>snapshot</strong> &#8211; Snapshot model with snapshot data.</li>
<li><strong>access_rules</strong> &#8211; All access rules for given snapshot</li>
<li><strong>add_rules</strong> &#8211; Empty List or List of access rules which should be
added. access_rules already contains these rules.</li>
<li><strong>delete_rules</strong> &#8211; Empty List or List of access rules which should be
removed. access_rules doesn&#8217;t contain these rules.</li>
<li><strong>share_server</strong> &#8211; None or Share server model</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">snapshots_are_supported</code></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">teardown_server</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">unmanage</code><span class="sig-paren">(</span><em>share</em><span class="sig-paren">)</span></dt>
<dd><p>Removes the specified share from Manila management.</p>
<p>Does not delete the underlying backend share.</p>
<p>For most drivers, this will not need to do anything.  However, some
drivers might use this call as an opportunity to clean up any
Manila-specific configuration that they have associated with the
backend share.</p>
<p>If provided share cannot be unmanaged, then raise an
UnmanageInvalidShare exception, specifying a reason for the failure.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">unmanage_snapshot</code><span class="sig-paren">(</span><em>snapshot</em><span class="sig-paren">)</span></dt>
<dd><p>Removes the specified snapshot from Manila management.</p>
<p>Does not delete the underlying backend share snapshot.</p>
<p>For most drivers, this will not need to do anything.  However, some
drivers might use this call as an opportunity to clean up any
Manila-specific configuration that they have associated with the
backend share snapshot.</p>
<p>If provided share snapshot cannot be unmanaged, then raise an
UnmanageInvalidShareSnapshot exception, specifying a reason for
the failure.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_access</code><span class="sig-paren">(</span><em>context</em>, <em>share</em>, <em>access_rules</em>, <em>add_rules</em>, <em>delete_rules</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update access rules for given share.</p>
<p><code class="docutils literal"><span class="pre">access_rules</span></code> contains all access_rules that need to be on the
share. If the driver can make bulk access rule updates, it can
safely ignore the <code class="docutils literal"><span class="pre">add_rules</span></code> and <code class="docutils literal"><span class="pre">delete_rules</span></code> parameters.</p>
<p>If the driver cannot make bulk access rule changes, it can rely on
new rules to be present in <code class="docutils literal"><span class="pre">add_rules</span></code> and rules that need to be
removed to be present in <code class="docutils literal"><span class="pre">delete_rules</span></code>.</p>
<p>When a rule in <code class="docutils literal"><span class="pre">delete_rules</span></code> was never applied, drivers must not
raise an exception, or attempt to set the rule to <code class="docutils literal"><span class="pre">error</span></code> state.</p>
<p><code class="docutils literal"><span class="pre">add_rules</span></code> and <code class="docutils literal"><span class="pre">delete_rules</span></code> can be empty lists, in this
situation, drivers should ensure that the rules present in
<code class="docutils literal"><span class="pre">access_rules</span></code> are the same as those on the back end. One scenario
where this situation is forced is when the access_level is changed for
all existing rules (share migration and for readable replicas).</p>
<p>Drivers must be mindful of this call for share replicas. When
&#8216;update_access&#8217; is called on one of the replicas, the call is likely
propagated to all replicas belonging to the share, especially when
individual rules are added or removed. If a particular access rule
does not make sense to the driver in the context of a given replica,
the driver should be careful to report a correct behavior, and take
meaningful action. For example, if R/W access is requested on a
replica that is part of a &#8220;readable&#8221; type replication; R/O access
may be added by the driver instead of R/W. Note that raising an
exception <em>will</em> result in the access_rules_status on the replica,
and the share itself being &#8220;out_of_sync&#8221;. Drivers can sync on the
valid access rules that are provided on the <code class="docutils literal"><span class="pre">create_replica</span></code> and
<code class="docutils literal"><span class="pre">promote_replica</span></code> calls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>share</strong> &#8211; Share model with share data.</li>
<li><strong>access_rules</strong> &#8211; A list of access rules for given share</li>
<li><strong>add_rules</strong> &#8211; Empty List or List of access rules which should be
added. access_rules already contains these rules.</li>
<li><strong>delete_rules</strong> &#8211; Empty List or List of access rules which should be
removed. access_rules doesn&#8217;t contain these rules.</li>
<li><strong>share_server</strong> &#8211; None or Share server model</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>None, or a dictionary of updates in the format:</p>
<dl class="docutils">
<dt>{</dt>
<dd><dl class="first last docutils">
<dt>&#8216;09960614-8574-4e03-89cf-7cf267b0bd08&#8217;: {</dt>
<dd><blockquote class="first">
<div><p>&#8216;access_key&#8217;: &#8216;alice31493e5441b8171d2310d80e37e&#8217;,
&#8216;state&#8217;: &#8216;error&#8217;,</p>
</div></blockquote>
<p class="last">},</p>
</dd>
<dt>&#8216;28f6eabb-4342-486a-a7f4-45688f0c0295&#8217;: {</dt>
<dd><blockquote class="first">
<div><p>&#8216;access_key&#8217;: &#8216;bob0078aa042d5a7325480fd13228b&#8217;,
&#8216;state&#8217;: &#8216;active&#8217;,</p>
</div></blockquote>
<p class="last">},</p>
</dd>
</dl>
</dd>
</dl>
<p>}</p>
</p>
</td>
</tr>
</tbody>
</table>
<p>The top level keys are &#8216;access_id&#8217; fields of the access rules that
need to be updated. <code class="docutils literal"><span class="pre">access_key``s</span> <span class="pre">are</span> <span class="pre">credentials</span> <span class="pre">(str)</span> <span class="pre">of</span> <span class="pre">the</span>
<span class="pre">entities</span> <span class="pre">granted</span> <span class="pre">access.</span> <span class="pre">Any</span> <span class="pre">rule</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">``access_rules</span></code> parameter
can be updated.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Raising an exception in this method will force <em>all</em> rules in
&#8216;applying&#8217; and &#8216;denying&#8217; states to &#8216;error&#8217;.</p>
<p>An access rule can be set to &#8216;error&#8217; state, either explicitly
via this return parameter or because of an exception raised in
this method. Such an access rule will no longer be sent to the
driver on subsequent access rule updates. When users deny that
rule however, the driver will be asked to deny access to the
client/s represented by the rule. We expect that a
rule that was error-ed at the driver should never exist on the
back end. So, do not fail the deletion request.</p>
<p class="last">Also, it is possible that the driver may receive a request to
add a rule that is already present on the back end.
This can happen if the share manager service goes down
while the driver is committing access rule changes. Since we
cannot determine if the rule was applied successfully by the driver
before the disruption, we will treat all &#8216;applying&#8217; transitional
rules as new rules and repeat the request.</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_admin_network_allocation</code><span class="sig-paren">(</span><em>context</em>, <em>share_server</em><span class="sig-paren">)</span></dt>
<dd><p>Update admin network allocation after share server creation.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_network_allocation</code><span class="sig-paren">(</span><em>context</em>, <em>share_server</em><span class="sig-paren">)</span></dt>
<dd><p>Update network allocation after share server creation.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_replica_state</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>replica</em>, <em>access_rules</em>, <em>replica_snapshots</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update the replica_state of a replica.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call is made on the host which hosts the replica being
updated.</p>
</div>
<p>Drivers should fix replication relationships that were broken if
possible inside this method.</p>
<p>This method is called periodically by the share manager; and
whenever requested by the administrator through the &#8216;resync&#8217; API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
This list also contains the replica to be updated. The &#8216;active&#8217;
replica will have its &#8216;replica_state&#8217; attr set to &#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
    {
    &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;active&#39;,
        ...
    &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    {
    &#39;id&#39;: &#39;e82ff8b6-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;replica_state&#39;: &#39;in_sync&#39;,
        ...
    &#39;share_server_id&#39;: &#39;07574742-67ea-4dfd-9844-9fbd8ada3d87&#39;,
    &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica</strong> &#8211; Dictionary of the replica being updated
Replica state will always be &#8216;in_sync&#8217;, &#8216;out_of_sync&#8217;, or &#8216;error&#8217;.
Replicas in &#8216;active&#8217; state will not be passed via this parameter.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_id&#39;</span><span class="p">:</span> <span class="s1">&#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;deleted&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;openstack2@cmodeSSVMNFS1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;available&#39;</span><span class="p">,</span>
    <span class="s1">&#39;scheduled_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span>
    <span class="s1">&#39;launched_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span>
    <span class="s1">&#39;terminated_at&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
    <span class="s1">&#39;replica_state&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
    <span class="s1">&#39;availability_zone_id&#39;</span><span class="p">:</span> <span class="s1">&#39;e2c2db5c-cb2f-4697-9966-c06fb200cb80&#39;</span><span class="p">,</span>
    <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">models</span><span class="o">.</span><span class="n">ShareInstanceExportLocations</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;access_rules_status&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_network_id&#39;</span><span class="p">:</span> <span class="s1">&#39;4ccd5318-65f1-11e5-9d70-feff819cdc9f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_server_id&#39;</span><span class="p">:</span> <span class="s1">&#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>access_rules</strong> &#8211; A list of access rules
These access rules are obeyed by other instances of the share. The
driver could attempt to sync on any un-applied access_rules.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
 {
    &#39;id&#39;: &#39;f0875f6f-766b-4865-8b41-cccb4cdf1676&#39;,
    &#39;deleted&#39; = False,
    &#39;share_id&#39; = &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
    &#39;access_type&#39; = &#39;ip&#39;,
    &#39;access_to&#39; = &#39;172.16.20.1&#39;,
    &#39;access_level&#39; = &#39;rw&#39;,
 }
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
This includes snapshot instances of every snapshot of the share
whose &#8216;aggregate_status&#8217; property was reported to be &#8216;available&#8217;
when the share manager initiated this request. Each list member
will have two sub dictionaries: &#8216;active_replica_snapshot&#8217; and
&#8216;share_replica_snapshot&#8217;. The &#8216;active&#8217; replica snapshot corresponds
to the instance of the snapshot on any of the &#8216;active&#8217; replicas of
the share while share_replica_snapshot corresponds to the snapshot
instance for the specific replica being updated. The driver needs
to ensure that this snapshot instance is truly available before
transitioning from &#8216;out_of_sync&#8217; to &#8216;in_sync&#8217;. Snapshots instances
for snapshots that have an &#8216;aggregate_status&#8217; of &#8216;creating&#8217; or
&#8216;deleting&#8217; will be polled for in the update_replicated_snapshot
method.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span> [
  {
&#39;active_replica_snapshot&#39;: {
     &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
     &#39;share_instance_id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
     &#39;status&#39;: &#39;available&#39;,
     &#39;provider_location&#39;: &#39;/newton/share-snapshot-10e49c3e-aca9&#39;,
     ...
    },
 &#39;share_replica_snapshot&#39;: {
     &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
     &#39;share_instance_id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
     &#39;status&#39;: &#39;creating&#39;,
     &#39;provider_location&#39;: None,
        ...
    },
  }
 ]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">replica_state: a str value denoting the replica_state.
Valid values are &#8216;in_sync&#8217; and &#8216;out_of_sync&#8217; or None (to leave the
current replica_state unchanged).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">update_replicated_snapshot</code><span class="sig-paren">(</span><em>context</em>, <em>replica_list</em>, <em>share_replica</em>, <em>replica_snapshots</em>, <em>replica_snapshot</em>, <em>share_server=None</em><span class="sig-paren">)</span></dt>
<dd><p>Update the status of a snapshot instance that lives on a replica.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For DR and Readable styles of replication, this call is made on
the replica&#8217;s host and not the &#8216;active&#8217; replica&#8217;s host.</p>
</div>
<p>This method is called periodically by the share manager. It will
query for snapshot instances that track the parent snapshot across
non-&#8216;active&#8217; replicas. Drivers can expect the status of the instance to
be &#8216;creating&#8217; or &#8216;deleting&#8217;. If the driver sees that a snapshot
instance has been removed from the replica&#8217;s backend and the
instance status was set to &#8216;deleting&#8217;, it is expected to raise a
SnapshotResourceNotFound exception. All other exceptions will set the
snapshot instance status to &#8216;error&#8217;. If the instance was not in
&#8216;deleting&#8217; state, raising a SnapshotResourceNotFound will set the
instance status to &#8216;error&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>context</strong> &#8211; Current context</li>
<li><strong>replica_list</strong> &#8211; List of all replicas for a particular share
The &#8216;active&#8217; replica will have its &#8216;replica_state&#8217; attr set to
&#8216;active&#8217;.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[
     {
      &#39;id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
      &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
      &#39;replica_state&#39;: &#39;in_sync&#39;,
      ...
      &#39;share_server_id&#39;: &#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;,
      &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
     },
     {
      &#39;id&#39;: &#39;10e49c3e-aca9-483b-8c2d-1c337b38d6af&#39;,
      &#39;share_id&#39;: &#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;,
      &#39;replica_state&#39;: &#39;active&#39;,
      ...
      &#39;share_server_id&#39;: &#39;f63629b3-e126-4448-bec2-03f788f76094&#39;,
      &#39;share_server&#39;: &lt;models.ShareServer&gt; or None,
     },
      ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_replica</strong> &#8211; Share replica dictionary.
This replica is associated with the snapshot instance whose
status is being updated. Replicas in &#8216;active&#8217; replica_state will
not be passed via this parameter.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_id&#39;</span><span class="p">:</span> <span class="s1">&#39;f0e4bb5e-65f0-11e5-9d70-feff819cdc9f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;deleted&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="s1">&#39;openstack2@cmodeSSVMNFS1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="s1">&#39;available&#39;</span><span class="p">,</span>
    <span class="s1">&#39;scheduled_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span>
    <span class="s1">&#39;launched_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span>
    <span class="s1">&#39;terminated_at&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
    <span class="s1">&#39;replica_state&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
    <span class="s1">&#39;availability_zone_id&#39;</span><span class="p">:</span> <span class="s1">&#39;e2c2db5c-cb2f-4697-9966-c06fb200cb80&#39;</span><span class="p">,</span>
    <span class="s1">&#39;export_locations&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="n">models</span><span class="o">.</span><span class="n">ShareInstanceExportLocations</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">&#39;access_rules_status&#39;</span><span class="p">:</span> <span class="s1">&#39;in_sync&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_network_id&#39;</span><span class="p">:</span> <span class="s1">&#39;4ccd5318-65f1-11e5-9d70-feff819cdc9f&#39;</span><span class="p">,</span>
    <span class="s1">&#39;share_server_id&#39;</span><span class="p">:</span> <span class="s1">&#39;4ce78e7b-0ef6-4730-ac2a-fd2defefbd05&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshots</strong> &#8211; List of dictionaries of snapshot instances.
These snapshot instances track the snapshot across the replicas.
This will include the snapshot instance being updated as well.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span> [
    {
    &#39;id&#39;: &#39;d3931a93-3984-421e-a9e7-d9f71895450a&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
        ...
    },
    {
    &#39;id&#39;: &#39;8bda791c-7bb6-4e7b-9b64-fefff85ff13e&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
        ...
    },
    ...
]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replica_snapshot</strong> &#8211; Dictionary of the snapshot instance.
This is the instance to be updated. It will be in &#8216;creating&#8217; or
&#8216;deleting&#8217; state when sent via this parameter.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
    &#39;name&#39;: &#39;share-snapshot-18825630-574f-4912-93bb-af4611ef35a2&#39;,
    &#39;share_id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;share_name&#39;: &#39;share-d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;status&#39;: &#39;creating&#39;,
    &#39;id&#39;: &#39;18825630-574f-4912-93bb-af4611ef35a2&#39;,
    &#39;deleted&#39;: False,
    &#39;created_at&#39;: datetime.datetime(2016, 8, 3, 0, 5, 58),
    &#39;share&#39;: &lt;models.ShareInstance&gt;,
    &#39;updated_at&#39;: datetime.datetime(2016, 8, 3, 0, 5, 58),
    &#39;share_instance_id&#39;: &#39;d487b88d-e428-4230-a465-a800c2cce5f8&#39;,
    &#39;snapshot_id&#39;: &#39;13ee5cb5-fc53-4539-9431-d983b56c5c40&#39;,
    &#39;progress&#39;: &#39;0%&#39;,
    &#39;deleted_at&#39;: None,
    &#39;provider_location&#39;: None,
}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>share_server</strong> &#8211; &lt;models.ShareServer&gt; or None</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">replica_snapshot_model_update: a dictionary.
The dictionary must contain values that need to be updated on the
database for the snapshot instance that represents the snapshot on
the replica.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">exception.SnapshotResourceNotFound
Raise this exception for snapshots that are not found on the
backend and their status was &#8216;deleting&#8217;.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="database.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: The Database Layer"></i></a>
          
          
            <a href="share_hooks.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Manila share driver hooks"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#programming-howtos-and-tutorials">Programming HowTos and Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#background-concepts-for-manila">Background Concepts for manila</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-resources">Other Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#api-reference">API Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#module-reference">Module Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#capabilities-and-extra-specs">Capabilities and Extra-Specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends-feature-support-mapping">Share backends feature support mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends">Share backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-Line Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adminref/index.html">Admin Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "devref/share" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/manila/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 610baa2fdb702fa4cc2c12eb5c61599bdcad21ce";
        var bugProject = "manila";
        var bugTitle = "Shared Filesystems in manila";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 4.0.0.0rc2.dev25 on 'Tue Feb 14 14:25:27 2017, commit 610baa2'";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>