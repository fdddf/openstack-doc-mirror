<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Capabilities and Extra-Specs</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Capabilities and Extra-Specs</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="driver_filter_goodness_weigher.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configure and use driver filter and weighing for scheduler"></i></a>
    
    
    <a href="export_location_metadata.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Export Location Metadata"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Capabilities and Extra-Specs</a><ul>
<li><a class="reference internal" href="#share-types">Share Types</a></li>
<li><a class="reference internal" href="#extra-specs">Extra-Specs</a></li>
<li><a class="reference internal" href="#common-capabilities">Common Capabilities</a></li>
<li><a class="reference internal" href="#reporting-capabilities">Reporting Capabilities</a></li>
<li><a class="reference internal" href="#developer-impact">Developer impact</a></li>
<li><a class="reference internal" href="#work-flow">Work Flow</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="capabilities-and-extra-specs">
<span id="id1"></span><h1>Capabilities and Extra-Specs<a class="headerlink" href="#capabilities-and-extra-specs" title="Permalink to this headline">¶</a></h1>
<p>Manila Administrators create share types with extra-specs to allow users
to request a type of share to create. The Administrator chooses a name
for the share type and decides how to communicate the significance of
the different share types in terms that the users should understand or
need to know. By design, most of the details of a share type (the extra-
specs) are not exposed to users &#8211; only Administrators.</p>
<div class="section" id="share-types">
<h2>Share Types<a class="headerlink" href="#share-types" title="Permalink to this headline">¶</a></h2>
<p>Refer to the manila client command-line help for information on how to
create a share type and set &#8220;extra-spec&#8221; key/value pairs for a share type.</p>
</div>
<div class="section" id="extra-specs">
<h2>Extra-Specs<a class="headerlink" href="#extra-specs" title="Permalink to this headline">¶</a></h2>
<p>There are 3 types of extra-specs: required, scoped, and un-scoped.</p>
<p>Manila <em>requires</em> the driver_handles_share_servers extra-spec.</p>
<p><em>Scoped</em> extra-specs use a prefix followed by a colon to define a namespace
for scoping the extra-spec. A prefix could be a vendor name or acronym
and is a hint that this extra-spec key/value only applies to that vendor&#8217;s
driver. Scoped extra-specs are not used by the scheduler to determine
where a share is created (except for the special <cite>capabilities</cite> prefix).
It is up to each driver implementation to determine how to use scoped
extra-specs and to document them.</p>
<p>The prefix &#8220;capabilities&#8221; is a special prefix to indicate extra-specs that
are treated like un-scoped extra-specs. In the CapabilitiesFilter the
&#8220;capabilities:&#8221; is stripped from the key and then the extra-spec key and
value are used as an un-scoped extra-spec.</p>
<p><em>Un-scoped</em> extra-specs have a key that either starts with &#8220;capabilities:&#8221; or
does not contain a colon. When the CapabilitiesFilter is enabled (it is
enabled by default), the scheduler will only create a share on a backend
that reports capabilities that match the share type&#8217;s un-scoped extra-spec
keys.</p>
<p>The CapabilitiesFilter uses the following for matching operators:</p>
<ul>
<li><p class="first">No operator
This defaults to doing a python ==. Additionally it will match boolean values.</p>
</li>
<li><p class="first"><strong>&lt;=, &gt;=, ==, !=</strong></p>
<p>This does a float conversion and then uses the python operators as expected.</p>
</li>
<li><p class="first"><strong>&lt;in&gt;</strong></p>
<p>This either chooses a host that has partially matching string in the capability
or chooses a host if it matches any value in a list. For example, if &#8220;&lt;in&gt; sse4&#8221;
is used, it will match a host that reports capability of &#8220;sse4_1&#8221; or &#8220;sse4_2&#8221;.</p>
</li>
<li><p class="first"><strong>&lt;or&gt;</strong></p>
<p>This chooses a host that has one of the items specified. If the first word in
the string is &lt;or&gt;, another &lt;or&gt; and value pair can be concatenated. Examples
are &#8220;&lt;or&gt; 3&#8221;, &#8220;&lt;or&gt; 3 &lt;or&gt; 5&#8221;, and &#8220;&lt;or&gt; 1 &lt;or&gt; 3 &lt;or&gt; 7&#8221;. This is for
string values only.</p>
</li>
<li><p class="first"><strong>&lt;is&gt;</strong></p>
<p>This chooses a host that matches a boolean capability. An example extra-spec value
would be &#8220;&lt;is&gt; True&#8221;.</p>
</li>
<li><p class="first"><strong>=</strong></p>
<p>This does a float conversion and chooses a host that has equal to or greater
than the resource specified. This operator behaves this way for historical
reasons.</p>
</li>
<li><p class="first"><strong>s==, s!=, s&gt;=, s&gt;, s&lt;=, s&lt;</strong></p>
<p>The &#8220;s&#8221; indicates it is a string comparison. These choose a host that satisfies
the comparison of strings in capability and specification. For example,
if &#8220;capabilities:replication_type s== dr&#8221;, a host that reports
replication_type of &#8220;dr&#8221; will be chosen.</p>
</li>
</ul>
<p>For vendor-specific capabilities (which need to be visible to the
CapabilityFilter), it is recommended to use the vendor prefix followed
by an underscore. This is not a strict requirement, but will provide a
consistent look along-side the scoped extra-specs and will be a clear
indicator of vendor capabilities vs. common capabilities.</p>
</div>
<div class="section" id="common-capabilities">
<h2>Common Capabilities<a class="headerlink" href="#common-capabilities" title="Permalink to this headline">¶</a></h2>
<p>For capabilities that apply to multiple backends a common capability can
be created. Like all other backend reported capabilities, these capabilities
can be used verbatim as extra_specs in share types used to create shares.</p>
<ul class="simple">
<li><cite>driver_handles_share_servers</cite> is a special, required, user-visible common
capability. Added in Kilo.</li>
<li><cite>dedupe</cite> - indicates that a backend/pool can provide shares using some
deduplication technology. The default value of the dedupe capability (if a
driver doesn&#8217;t report it) is False. Drivers cannot report to the scheduler
that they support both dedupe and non-deduped share. For each pool it&#8217;s
either always on or always off. Administrators can make a share type use
deduplication by setting this extra-spec to &#8216;&lt;is&gt; True&#8217;. Administrators can
prevent a share type from using deduplication by setting this extra-spec to
&#8216;&lt;is&gt; False&#8217;. Added in Liberty.</li>
<li><cite>compression</cite> - indicates that a backend/pool can provide shares using some
compression technology. The default value of the compression capability (if a
driver doesn&#8217;t report it) is False. Drivers cannot report to the scheduler
that they support both compression and non-compression. For each pool it&#8217;s
either always on or always off. Administrators can make a share type use
compression by setting this extra-spec to &#8216;&lt;is&gt; True&#8217;. Administrators can
prevent a share type from using compression by setting this extra-spec to
&#8216;&lt;is&gt; False&#8217;. Added in Liberty.</li>
<li><cite>thin_provisioning</cite> - shares will not be space guaranteed and
overprovisioning will be enabled. This capability defaults to False.
Backends/pools that support thin provisioning must report True for this
capability. Administrators can make a share type use thin provisioned shares
by setting this extra-spec to &#8216;&lt;is&gt; True&#8217;. If a driver reports
thin_provisioning=False (the default) then it&#8217;s assumed that the driver is
doing thick provisioning and overprovisioning is turned off.
This was added in Liberty. In Liberty and Mitaka, the driver was required
to configure one pool for thin and another pool for thick and report
thin_provisioning as either True or False even if an array can technically
support both thin and thick provisioning in a pool. In Newton, the logic is
changed to allow a driver to report thin_provisioning=[True, False] if it
can support both thin and thick provisioning in a pool. To provision a thick
share on a back end that supports both thin and thick provisioning, set one
of the following in extra specs:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;thin_provisioning&#39;</span><span class="p">:</span> <span class="s1">&#39;False&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;thin_provisioning&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;is&gt; False&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;capabilities:thin_provisioning&#39;</span><span class="p">:</span> <span class="s1">&#39;False&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;capabilities:thin_provisioning&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;is&gt; False&#39;</span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><cite>qos</cite> - indicates that a backend/pool can provide shares using some
QoS (Quality of Service) specification. The default value of the qos
capability (if a driver doesn&#8217;t report it) is False. Administrators
can make a share type use QoS by setting this extra-spec to &#8216;&lt;is&gt; True&#8217; and
also setting the relevant QoS-related extra specs for the drivers being used.
Administrators can prevent a share type from using QoS by setting this
extra-spec to &#8216;&lt;is&gt; False&#8217;. Different drivers have different ways of specifying
QoS limits (or guarantees) and this extra spec merely allows the scheduler to
filter by pools that either have or don&#8217;t have QoS support enabled. Added in
Mitaka.</li>
<li><cite>replication_type</cite> - indicates the style of replication supported for the
backend/pool. This extra_spec will have a string value and could be one
of <a class="reference internal" href="../glossary.html#term-writable"><span class="xref std std-term">writable</span></a>, <a class="reference internal" href="../glossary.html#term-readable"><span class="xref std std-term">readable</span></a> or <a class="reference internal" href="../glossary.html#term-dr"><span class="xref std std-term">dr</span></a>. <cite>writable</cite> replication
type involves synchronously replicated shares where all replicas are
writable. Promotion is not supported and not needed. <cite>readable</cite> and <cite>dr</cite>
replication types involve a single <cite>active</cite> or <cite>primary</cite> replica and one or
more <cite>non-active</cite> or secondary replicas per share. In <cite>readable</cite> type of
replication, <cite>non-active</cite> replicas have one or more export_locations and
can thus be mounted and read while the <cite>active</cite> replica is the only one
that can be written into. In <cite>dr</cite> style of replication, only
the <cite>active</cite> replica can be mounted, read from and written into. Added in
Mitaka.</li>
<li><cite>snapshot_support</cite> - indicates whether snapshots are supported for shares
created on the pool/backend. When administrators do not set this capability
as an extra-spec in a share type, the scheduler can place new shares of that
type in pools without regard for whether snapshots are supported, and those
shares will not support snapshots.</li>
<li><cite>create_share_from_snapshot_support</cite> - indicates whether a backend can create
a new share from a snapshot. When administrators do not set this capability
as an extra-spec in a share type, the scheduler can place new shares of that
type in pools without regard for whether creating shares from snapshots is
supported, and those shares will not support creating shares from snapshots.</li>
<li><cite>revert_to_snapshot_support</cite> - indicates that a driver is capable of
reverting a share in place to its most recent snapshot. When administrators
do not set this capability as an extra-spec in a share type, the scheduler
can place new shares of that type in pools without regard for whether
reverting shares to snapshots is supported, and those shares will not support
reverting shares to snapshots.</li>
</ul>
</div>
<div class="section" id="reporting-capabilities">
<h2>Reporting Capabilities<a class="headerlink" href="#reporting-capabilities" title="Permalink to this headline">¶</a></h2>
<p>Drivers report capabilities as part of the updated stats (e.g. capacity)
for their backend/pools. This is how a backend/pool advertizes its ability
to provide a share that matches the capabilities requested in the share
type extra-specs.</p>
</div>
<div class="section" id="developer-impact">
<h2>Developer impact<a class="headerlink" href="#developer-impact" title="Permalink to this headline">¶</a></h2>
<p>Developers should update their drivers to include all backend and pool
capacities and capabilities in the share stats it reports to scheduler.
Below is an example having multiple pools. &#8220;my&#8221; is used as an
example vendor prefix:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;driver_handles_share_servers&#39;</span><span class="p">:</span> <span class="s1">&#39;False&#39;</span><span class="p">,</span>  <span class="c1">#\</span>
    <span class="s1">&#39;share_backend_name&#39;</span><span class="p">:</span> <span class="s1">&#39;My Backend&#39;</span><span class="p">,</span>       <span class="c1"># backend level</span>
    <span class="s1">&#39;vendor_name&#39;</span><span class="p">:</span> <span class="s1">&#39;MY&#39;</span><span class="p">,</span>                      <span class="c1"># mandatory/fixed</span>
    <span class="s1">&#39;driver_version&#39;</span><span class="p">:</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span>                  <span class="c1"># stats &amp; capabilities</span>
    <span class="s1">&#39;storage_protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;NFS_CIFS&#39;</span><span class="p">,</span>           <span class="c1">#/</span>
                                              <span class="c1">#\</span>
    <span class="s1">&#39;my_capability_1&#39;</span><span class="p">:</span> <span class="s1">&#39;custom_val&#39;</span><span class="p">,</span>          <span class="c1"># &quot;my&quot; optional vendor</span>
    <span class="s1">&#39;my_capability_2&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>                  <span class="c1"># stats &amp; capabilities</span>
                                              <span class="c1">#/</span>
    <span class="s1">&#39;pools&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;pool_name&#39;</span><span class="p">:</span>
           <span class="s1">&#39;thin-dedupe-compression pool&#39;</span><span class="p">,</span>    <span class="c1">#\</span>
         <span class="s1">&#39;total_capacity_gb&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>            <span class="c1">#  mandatory stats for</span>
         <span class="s1">&#39;free_capacity_gb&#39;</span><span class="p">:</span> <span class="mi">230</span><span class="p">,</span>             <span class="c1">#  pools</span>
         <span class="s1">&#39;reserved_percentage&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>            <span class="c1">#/</span>
                                              <span class="c1">#\</span>
         <span class="s1">&#39;dedupe&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>                      <span class="c1"># common capabilities</span>
         <span class="s1">&#39;compression&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>                 <span class="c1">#</span>
         <span class="s1">&#39;snapshot_support&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>            <span class="c1">#</span>
         <span class="s1">&#39;create_share_from_snapshot_support&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
         <span class="s1">&#39;revert_to_snapshot_support&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
         <span class="s1">&#39;qos&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>                         <span class="c1"># this backend supports QoS</span>
         <span class="s1">&#39;thin_provisioning&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>           <span class="c1">#</span>
         <span class="s1">&#39;max_over_subscription_ratio&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>   <span class="c1"># (mandatory for thin)</span>
         <span class="s1">&#39;provisioned_capacity_gb&#39;</span><span class="p">:</span> <span class="mi">270</span><span class="p">,</span>      <span class="c1"># (mandatory for thin)</span>
                                              <span class="c1">#</span>
                                              <span class="c1">#</span>
         <span class="s1">&#39;replication_type&#39;</span><span class="p">:</span> <span class="s1">&#39;dr&#39;</span><span class="p">,</span>            <span class="c1"># this backend supports</span>
                                              <span class="c1"># replication_type &#39;dr&#39;</span>
                                              <span class="c1">#/</span>
         <span class="s1">&#39;my_dying_disks&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>               <span class="c1">#\</span>
         <span class="s1">&#39;my_super_hero_1&#39;</span><span class="p">:</span> <span class="s1">&#39;Hulk&#39;</span><span class="p">,</span>           <span class="c1">#  &quot;my&quot; optional vendor</span>
         <span class="s1">&#39;my_super_hero_2&#39;</span><span class="p">:</span> <span class="s1">&#39;Spider-Man&#39;</span><span class="p">,</span>     <span class="c1">#  stats &amp; capabilities</span>
                                              <span class="c1">#/</span>
                                              <span class="c1">#\</span>
                                              <span class="c1"># can replicate to other</span>
         <span class="s1">&#39;replication_domain&#39;</span><span class="p">:</span> <span class="s1">&#39;asgard&#39;</span><span class="p">,</span>      <span class="c1"># backends in</span>
                                              <span class="c1"># replication_domain &#39;asgard&#39;</span>
                                              <span class="c1">#/</span>
        <span class="p">},</span>
        <span class="p">{</span><span class="s1">&#39;pool_name&#39;</span><span class="p">:</span> <span class="s1">&#39;thick pool&#39;</span><span class="p">,</span>
         <span class="s1">&#39;total_capacity_gb&#39;</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
         <span class="s1">&#39;free_capacity_gb&#39;</span><span class="p">:</span> <span class="mi">1024</span><span class="p">,</span>
         <span class="s1">&#39;qos&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
         <span class="s1">&#39;snapshot_support&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
         <span class="s1">&#39;create_share_from_snapshot_support&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="c1"># this pool does not</span>
                                                      <span class="c1"># allow creating</span>
                                                      <span class="c1"># shares from</span>
                                                      <span class="c1"># snapshots</span>
         <span class="s1">&#39;revert_to_snapshot_support&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
         <span class="s1">&#39;reserved_percentage&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s1">&#39;dedupe&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
         <span class="s1">&#39;compression&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
         <span class="s1">&#39;thin_provisioning&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
         <span class="s1">&#39;replication_type&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
         <span class="s1">&#39;my_dying_disks&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
         <span class="s1">&#39;my_super_hero_1&#39;</span><span class="p">:</span> <span class="s1">&#39;Batman&#39;</span><span class="p">,</span>
         <span class="s1">&#39;my_super_hero_2&#39;</span><span class="p">:</span> <span class="s1">&#39;Robin&#39;</span><span class="p">,</span>
        <span class="p">},</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="work-flow">
<h2>Work Flow<a class="headerlink" href="#work-flow" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Share Backends report how many pools and what those pools look like and
are capable of to scheduler;</li>
<li>When request comes in, scheduler picks a pool that fits the need best to
serve the request, it passes the request to the backend where the target
pool resides;</li>
<li>Share driver gets the message and lets the target pool serve the request
as scheduler instructed. Share type extra-specs (scoped and un-scoped)
are available for the driver implementation to use as-needed.</li>
</ol>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="driver_filter_goodness_weigher.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Configure and use driver filter and weighing for scheduler"></i></a>
          
          
            <a href="export_location_metadata.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Export Location Metadata"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 'Tue Feb 14 14:25:27 2017, commit 610baa2'</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#programming-howtos-and-tutorials">Programming HowTos and Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#background-concepts-for-manila">Background Concepts for manila</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-resources">Other Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#api-reference">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-reference">Module Reference</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#capabilities-and-extra-specs">Capabilities and Extra-Specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends-feature-support-mapping">Share backends feature support mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#share-backends">Share backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/index.html">Command-Line Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adminref/index.html">Admin Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "devref/capabilities_and_extra_specs" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/manila/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 610baa2fdb702fa4cc2c12eb5c61599bdcad21ce";
        var bugProject = "manila";
        var bugTitle = "Capabilities and Extra-Specs in manila";
    var fieldTags = "docs";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 4.0.0.0rc2.dev25 on 'Tue Feb 14 14:25:27 2017, commit 610baa2'";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>