<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Searchlight API &mdash; searchlight 2.0.0.0rc2.dev8 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0.0rc2.dev8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="searchlight 2.0.0.0rc2.dev8 documentation" href="index.html" />
    <link rel="next" title="Searchlight Indexing" href="indexingservice.html" />
    <link rel="prev" title="Searchlight Architecture" href="architecture.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="searchlight-api">
<h1>Searchlight API<a class="headerlink" href="#searchlight-api" title="Permalink to this headline">¶</a></h1>
<p>Searchlight&#8217;s API adds authentication and Role Based Access Control in front
of Elasticsearch&#8217;s query API.</p>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Searchlight, like other OpenStack APIs, depends on Keystone and the
OpenStack Identity API to handle authentication. You must obtain an
authentication token from Keystone and pass it to Searchlight in API requests
with the <code class="docutils literal"><span class="pre">X-Auth-Token</span></code> header.</p>
<p>See <a class="reference internal" href="authentication.html"><em>Keystone Authentication</em></a> for more information on integrating with Keystone.</p>
</div>
<div class="section" id="using-v1">
<h2>Using v1<a class="headerlink" href="#using-v1" title="Permalink to this headline">¶</a></h2>
<p>For the purposes of examples, assume a Searchlight server is running
at the URL <code class="docutils literal"><span class="pre">http://searchlight.example.com</span></code> on HTTP port 80. All
queries are assumed to include an <code class="docutils literal"><span class="pre">X-Auth-Token</span></code> header. Where request
bodies are present, it is assumed that an appropriate <code class="docutils literal"><span class="pre">Content-Type</span></code>
header is present (usually <code class="docutils literal"><span class="pre">application/json</span></code>).</p>
<p>Searches use Elasticsearch&#8217;s
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl.html">query DSL</a>.</p>
<p>Elasticsearch stores each &#8216;document&#8217; in an &#8216;index&#8217;, which has one or more
&#8216;types&#8217;. Searchlight&#8217;s indexing service stores all resource
types in their own document type, grouped by service into indices. For
instance, the <code class="docutils literal"><span class="pre">OS::Glance::Image</span></code> and <code class="docutils literal"><span class="pre">OS::Glance::Metadef</span></code> types both
reside in the <code class="docutils literal"><span class="pre">searchlight</span></code> index. <code class="docutils literal"><span class="pre">type</span></code> is unique to a resource type.</p>
<p>Document access is defined by each document type, for instance for glance
images:</p>
<ul class="simple">
<li>If the current user is the resource owner OR</li>
<li>If the resource is marked public</li>
</ul>
<p>Some resources may have additional rules. Administrators have access to all resources,
though by default searches are restricted to the current tenant unless <code class="docutils literal"><span class="pre">all_projects</span></code>
is set in the search request body.</p>
<div class="section" id="querying-available-plugins">
<h3>Querying available plugins<a class="headerlink" href="#querying-available-plugins" title="Permalink to this headline">¶</a></h3>
<p>Searchlight indexes OpenStack resources as defined by installed plugins. In
general, a plugin maps directly to an OpenStack resource type. For instance, a
plugin might index nova instances, or glance images. There may be multiple
plugins related to a given OpenStack project (an example being glance images
and metadefs).</p>
<p>A given deployment may not necessarily expose all available plugins.
Searchlight provides a REST endpoint to request a list of installed plugins.
A <code class="docutils literal"><span class="pre">GET</span></code> request to  <code class="docutils literal"><span class="pre">http://searchlight.example.com/v1/search/plugins</span></code>
might yield:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
    &quot;plugins&quot;: [
        {
             &quot;type&quot;: &quot;OS::Glance::Image&quot;,
             &quot;alias-searching&quot;: &quot;searchlight-search&quot;
             &quot;alias-indexing&quot;: &quot;searchlight-listener&quot;
        },
        {
             &quot;type&quot;: &quot;OS::Glance::Metadef&quot;,
             &quot;alias-searching&quot;: &quot;searchlight-search&quot;
             &quot;alias-indexing&quot;: &quot;searchlight-listener&quot;
        }

    ]
}
</pre></div>
</div>
<p>This response shows the plugin information associated with the Glance image
and metadef resources.</p>
<ul class="simple">
<li><strong>type</strong>: the resource group, which is used as the document type in
Elasticsearch.</li>
<li><strong>alias-searching</strong>: the Elasticsearch alias used for querying.</li>
<li><strong>alias-indexing</strong>: the Elasticsearch alias used for indexing.</li>
</ul>
<p>If desired, all indexed Glance images can be queried directly from
Elasticsearch, rather than using Searchlight. Assuming an Elasticsearch
server running on localhost, the following request can be made:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>curl http://localhost:9200/searchlight-search/OS::Glance::Image/_search
</pre></div>
</div>
</div>
<div class="section" id="running-a-search">
<h3>Running a search<a class="headerlink" href="#running-a-search" title="Permalink to this headline">¶</a></h3>
<p>The simplest query is to ask for everything we have access to. We issue a
<code class="docutils literal"><span class="pre">POST</span></code> request to <code class="docutils literal"><span class="pre">http://searchlight.example.com/v1/search</span></code> with the
following body:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The data is returned as a JSON-encoded mapping from Elasticsearch:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
  &quot;_shards&quot;: {
    &quot;failed&quot;: 0,
    &quot;successful&quot;: 2,
    &quot;total&quot;: 2
  },
  &quot;hits&quot;: {
    &quot;hits&quot;: [
      {
        &quot;_id&quot;: &quot;76580e9d-f83d-49d8-b428-1fb90c5d8e95&quot;,
        &quot;_index&quot;: &quot;searchlight&quot;,
        &quot;_type&quot;: &quot;OS::Glance::Image&quot;
        &quot;_score&quot;: 1.0,
        &quot;_source&quot;: {
          &quot;id&quot;: &quot;76580e9d-f83d-49d8-b428-1fb90c5d8e95&quot;,
          &quot;members&quot;: [],
          &quot;name&quot;: &quot;cirros-0.3.2-x86_64-uec&quot;,
          &quot;owner&quot;: &quot;d95b27da6e9f4acc9a8031918e443e04&quot;,
          &quot;visibility&quot;: &quot;public&quot;,
          ...
        }
      },
      {
        &quot;_id&quot;: &quot;OS::Software::DBMS&quot;,
        &quot;_index&quot;: &quot;searchlight&quot;,
        &quot;_type&quot;: &quot;metadef&quot;,
        &quot;_score&quot;: 1.0,
        &quot;_source&quot;: {
          &quot;description&quot;: &quot;A database is an ...&quot;,
          &quot;display_name&quot;: &quot;Database Software&quot;,
          &quot;namespace&quot;: &quot;OS::Software::DBMS&quot;,
          &quot;objects&quot;: [
            {
              &quot;description&quot;: &quot;PostgreSQL, often simply &#39;Postgres&#39; ...&quot;,
              &quot;name&quot;: &quot;PostgreSQL&quot;,
              &quot;properties&quot;: [
                {
                  &quot;default&quot;: &quot;5432&quot;,
                  &quot;description&quot;: &quot;Specifies the TCP/IP port...&quot;,
                  &quot;property&quot;: &quot;sw_database_postgresql_listen_port&quot;,
                  ...
                },
                ...
              ]
            }
          ],
          &quot;tags&quot;: [
            {
              &quot;name&quot;: &quot;Database&quot;
            },
          ]
        }
      },
      ...
    ],
    &quot;max_score&quot;: 1.0,
    &quot;total&quot;: 8
  },
  &quot;timed_out&quot;: false,
  &quot;took&quot;: 1
}
</pre></div>
</div>
<p>Each <code class="docutils literal"><span class="pre">hit</span></code> is a document in Elasticsearch, representing an OpenStack
resource. the fields in the root of each hit are:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">_id</span></code></p>
<p>Uniquely identifies the resource within its OpenStack context (for
instance, Glance images use their GUID).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">_index</span></code></p>
<p>The service to which the resource belongs (e.g. <code class="docutils literal"><span class="pre">searchlight</span></code>).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">_type</span></code></p>
<p>The document type within the service (e.g. <code class="docutils literal"><span class="pre">image</span></code>, <code class="docutils literal"><span class="pre">metadef</span></code>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">_score</span></code></p>
<p>Where applicable the relevancy of a given <code class="docutils literal"><span class="pre">hit</span></code>. By default,
the field upon which results are sorted.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">_source</span></code></p>
<p>The document originally indexed. The <code class="docutils literal"><span class="pre">_source</span></code> is a map, where each key
is a <code class="docutils literal"><span class="pre">field</span></code> whose value may be a scalar value, a list, a nested object
or a list of nested objects.</p>
</li>
</ul>
</div>
<div class="section" id="more-example-searches">
<h3>More example searches<a class="headerlink" href="#more-example-searches" title="Permalink to this headline">¶</a></h3>
<p>Results are shown here only where it would help illustrate the example. The
<code class="docutils literal"><span class="pre">query</span></code> parameter supports anything that Elasticsearch exposes via its
<a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-queries.html">query DSL</a>.
There are normally multiple ways to represent the same query, often with some
subtle differences, but some common examples are shown here.</p>
<div class="section" id="administrators-search-all-resources">
<h4>Administrators - search all resources<a class="headerlink" href="#administrators-search-all-resources" title="Permalink to this headline">¶</a></h4>
<p>By default, all users see search results restricted by access control; in
practice, this is a combination of resources belonging to the user&#8217;s current
tenant/project, and any fields that are restricted to administrators.</p>
<p>Administrators also have the option to view all resources, by passing
<code class="docutils literal"><span class="pre">all_projects</span></code> in the search request body. For instance, a <code class="docutils literal"><span class="pre">POST</span></code> to
<code class="docutils literal"><span class="pre">http://searchlight.example.com/searchlight/v1/search</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="s2">&quot;all_projects&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="restricting-document-index-or-type">
<h4>Restricting document index or type<a class="headerlink" href="#restricting-document-index-or-type" title="Permalink to this headline">¶</a></h4>
<p>To restrict a query to Glance image and metadef information only (both
<code class="docutils literal"><span class="pre">index</span></code> and <code class="docutils literal"><span class="pre">type</span></code> can be arrays or a single string):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;OS::Glance::Image&quot;</span><span class="p">,</span> <span class="s2">&quot;OS::Glance::Metadef&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">index</span></code> or <code class="docutils literal"><span class="pre">type</span></code> are not provided they will default to covering as
wide a range of results as possible. Be aware that it is possible to specify
combinations of <code class="docutils literal"><span class="pre">index</span></code> and <code class="docutils literal"><span class="pre">type</span></code> that can return no results. In general
<code class="docutils literal"><span class="pre">type</span></code> is preferred since <code class="docutils literal"><span class="pre">type</span></code> is unique to a resource.</p>
</div>
<div class="section" id="retrieving-an-item-by-id">
<h4>Retrieving an item by id<a class="headerlink" href="#retrieving-an-item-by-id" title="Permalink to this headline">¶</a></h4>
<p>To retrieve a resource by its OpenStack ID (e.g. a glance image), we can use
Elasticsearch&#8217;s <a class="reference external" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/query-dsl-term-query.html">term query</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;searchlight&quot;</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;term&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;79fa243d-e05d-4848-8a9e-27a01e83ceba&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="limiting-and-paging-results">
<h4>Limiting and paging results<a class="headerlink" href="#limiting-and-paging-results" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch (and Searchlight) support <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html">paging</a> through the
<code class="docutils literal"><span class="pre">size</span></code> and <code class="docutils literal"><span class="pre">from</span></code> parameters (Searchlight also accepts
<code class="docutils literal"><span class="pre">limit</span></code> and <code class="docutils literal"><span class="pre">offset</span></code> respectively as synonyms). <code class="docutils literal"><span class="pre">from</span></code> is
zero-indexed. If <code class="docutils literal"><span class="pre">size</span></code> is zero, no results will be returned. This
can be useful for retrieving the total number of hits for a query without
being interested in the results themselves, or for <a class="reference internal" href="#aggregations">aggregations</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}},</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Gives:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s2">&quot;max_score&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">40</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="limiting-the-fields-returned">
<h4>Limiting the fields returned<a class="headerlink" href="#limiting-the-fields-returned" title="Permalink to this headline">¶</a></h4>
<p>To restrict the <code class="docutils literal"><span class="pre">source</span></code> to include only certain fields using Elasticsearch&#8217;s
<a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-source-filtering.html">source filtering</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;OS::Glance::Image&quot;</span><span class="p">,</span>
  <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Gives:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;_shards&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;successful&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;76580e9d-f83d-49d8-b428-1fb90c5d8e95&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_index&quot;</span><span class="p">:</span> <span class="s2">&quot;searchlight&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_score&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cirros-0.3.2-x86_64-uec&quot;</span><span class="p">,</span>
          <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">3723817</span>
        <span class="p">},</span>
        <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;OS::Glance::Image&quot;</span>
      <span class="p">},</span>
      <span class="o">...</span>
    <span class="p">],</span>
    <span class="s2">&quot;max_score&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">4</span>
  <span class="p">},</span>
  <span class="s2">&quot;timed_out&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;took&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="versioning">
<h4>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h4>
<p>Internally an always-incrementing value is stored with search results to
ensure that out of order notifications don&#8217;t lead to inconsistencies with
search results. Normally this value is not exposed in search results, but
including a search parameter <code class="docutils literal"><span class="pre">version:</span> <span class="pre">true</span></code> in requests will result in
a field named <code class="docutils literal"><span class="pre">_version</span></code> (note the underscore) being present in each result:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
  &quot;index&quot;: &quot;searchlight&quot;,
  &quot;query&quot;: {&quot;match_all&quot;: {}},
  &quot;version&quot;: true
}

{
  &quot;hits&quot;: {
    &quot;hits&quot;: [
      {
        &quot;_id&quot;: &quot;76580e9d-f83d-49d8-b428-1fb90c5d8e95&quot;,
        &quot;_index&quot;: &quot;searchlight&quot;,
        &quot;_version&quot;: 462198730000000000,
        ....
      },
      ....
    ]
  },
  ...
}
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<h4>Sorting<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch allows sorting by single or multiple fields. See Elasticsearch&#8217;s
<a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-sort.html">sort</a>
documentation for details of the allowed syntax. Sort fields can be included as a top
level field in the request body. For instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}},</span>
  <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;desc&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You will see in the search results a <code class="docutils literal"><span class="pre">sort</span></code> field for each result:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="p">{</span>
   <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;7741fbcc-3fa9-4ace-adff-593304b6e629&quot;</span><span class="p">,</span>
   <span class="s2">&quot;_index&quot;</span><span class="p">:</span> <span class="s2">&quot;glance&quot;</span><span class="p">,</span>
   <span class="s2">&quot;_score&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
   <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="p">{</span>
       <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cirros-0.3.4-x86_64-uec&quot;</span><span class="p">,</span>
       <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">25165824</span>
   <span class="p">},</span>
   <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
   <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="s2">&quot;cirros-0.3.4-x86_64-uec&quot;</span><span class="p">,</span>
       <span class="mi">25165824</span>
   <span class="p">]</span>
<span class="p">},</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="wildcards">
<h4>Wildcards<a class="headerlink" href="#wildcards" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch supports regular expression searches but often wildcards within
<code class="docutils literal"><span class="pre">query_string</span></code> elements are sufficient, using <code class="docutils literal"><span class="pre">*</span></code> to represent one or more
characters or <code class="docutils literal"><span class="pre">?</span></code> to represent a single character. Note that <em>starting</em> a
search term with a wildcard can lead to <em>extremely</em> slow queries:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;query_string&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;name: ubun?u AND mysql_version: 5.*&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="highlighting">
<h4>Highlighting<a class="headerlink" href="#highlighting" title="Permalink to this headline">¶</a></h4>
<p>A common requirement is to highlight search terms in results:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;OS::Glance::Metadef&quot;</span><span class="p">,</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;query_string&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;database&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;namespace&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">],</span>
  <span class="s2">&quot;highlight&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;namespace&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Results:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;OS::Software::DBMS&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_index&quot;</span><span class="p">:</span> <span class="s2">&quot;searchlight&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;OS::Glance::Metadef&quot;</span><span class="p">,</span>
        <span class="s2">&quot;_score&quot;</span><span class="p">:</span> <span class="mf">0.56079304</span><span class="p">,</span>
        <span class="s2">&quot;_source&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A database is an organized collection of data. The data is typically organized to model aspects of reality in a way that supports processes requiring information. Database management systems are computer software applications that interact with the user, other applications, and the database itself to capture and analyze data. (http://en.wikipedia.org/wiki/Database)&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;highlight&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;A &lt;em&gt;database&lt;/em&gt; is an organized collection of data. The data is typically organized to model aspects of&quot;</span><span class="p">,</span>
            <span class="s2">&quot; reality in a way that supports processes requiring information. &lt;em&gt;Database&lt;/em&gt; management systems are&quot;</span><span class="p">,</span>
            <span class="s2">&quot; computer software applications that interact with the user, other applications, and the &lt;em&gt;database&lt;/em&gt; itself&quot;</span><span class="p">,</span>
            <span class="s2">&quot; to capture and analyze data. (http://en.wikipedia.org/wiki/&lt;em&gt;Database&lt;/em&gt;)&quot;</span>
          <span class="p">],</span>
          <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;&lt;em&gt;Database&lt;/em&gt; Software&quot;</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;max_score&quot;</span><span class="p">:</span> <span class="mf">0.56079304</span><span class="p">,</span>
    <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s2">&quot;timed_out&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;took&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="faceting">
<h4>Faceting<a class="headerlink" href="#faceting" title="Permalink to this headline">¶</a></h4>
<p>Searchlight can provide a list of field names and values present for those
fields for each registered resource type. Exactly which fields are returned
and whether values are listed is up to each plugin. Some fields or values may
only be listed for administrative users. For some string fields, &#8216;facet_field&#8217;
may be included in the result and can be used to do an exact term
match against facet options.</p>
<p>To list supported facets, issue a <code class="docutils literal"><span class="pre">GET</span></code> to
<code class="docutils literal"><span class="pre">http://searchlight.example.com/v1/search/facets</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>{
  &quot;OS::Glance::Image&quot;: [
    {
      &quot;name&quot;: &quot;status&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    {
      &quot;name&quot;: &quot;created_at&quot;,
      &quot;type&quot;: &quot;date&quot;
    },
    {
      &quot;name&quot;: &quot;virtual_size&quot;,
      &quot;type&quot;: &quot;long&quot;
    },
    {
      &quot;name&quot;: &quot;name&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;facet_field&quot;: &quot;name.raw&quot;
    },
    ...
  ],
  &quot;OS::Glance::Metadef&quot;: [
    {
      &quot;name&quot;: &quot;objects.description&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    {
      &quot;name&quot;: &quot;objects.properties.description&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;nested&quot;: true
    },
    ...
  ],
  &quot;OS::Nova::Server&quot;: [
    {
      &quot;name&quot;: &quot;status&quot;,
      &quot;options&quot;: [
        {
          &quot;doc_count&quot;: 1,
          &quot;key&quot;: &quot;ACTIVE&quot;
        }
      ],
      &quot;type&quot;: &quot;string&quot;
    },
    {
      &quot;name&quot;: &quot;OS-EXT-SRV-ATTR:host&quot;,
      &quot;type&quot;: &quot;string&quot;
    },
    {
      &quot;name&quot;: &quot;name&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;facet_field&quot;: &quot;name.raw&quot;
    },
    {
      &quot;name&quot;: &quot;image.id&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;nested&quot;: false
    },
    {
      &quot;name&quot;: &quot;OS-EXT-AZ:availability_zone&quot;,
      &quot;options&quot;: [
        {
          &quot;doc_count&quot;: 1,
          &quot;key&quot;: &quot;nova&quot;
        }
      ],
      &quot;type&quot;: &quot;string&quot;
    }
    ...
  ]
}
</pre></div>
</div>
<p>Facet fields containing the &#8216;nested&#8217; (boolean) attribute indicate that the
field mapping type is either &#8216;nested&#8217; or &#8216;object&#8217;. This can influence how a
field should be queried. In general &#8216;object&#8217; types are queried as any other
field; &#8216;nested&#8217; types require some <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/nested.html">additional complexity</a>.</p>
<p>It&#8217;s also possible to request facets for a particular type by adding a
<code class="docutils literal"><span class="pre">type</span></code> query parameter. For instance, a <code class="docutils literal"><span class="pre">GET</span></code> to
<code class="docutils literal"><span class="pre">http://searchlight.example.com/v1/search/facets?type=OS::Nova::Server</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;OS::Nova::Server&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;status&quot;</span><span class="p">,</span>
      <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;doc_count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;ACTIVE&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="o">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As with searches, administrators are able to request facet terms for all
projects/tenants. By default, facet terms are limited to the currently scoped
project; adding <code class="docutils literal"><span class="pre">all_projects=true</span></code> as a query parameter removes the
restriction.</p>
<p>It is possible to limit the number of <code class="docutils literal"><span class="pre">options</span></code> returned for fields that
support facet terms. <code class="docutils literal"><span class="pre">limit_terms</span></code> restricts the number of terms (sorted
in order of descending frequency). A value of 0 indicates no limit, and is the
default.</p>
<p>It is possible to not return any options for facets. By default all options
are returned for fields that support facet terms. Adding
<code class="docutils literal"><span class="pre">exclude_options=true</span></code> as a query parameter will return only the facet
field and not any of the options. Using this option will avoid an aggregation
query being performed on Elasticsearch, providing a performance boost.</p>
</div>
<div class="section" id="aggregations">
<h4>Aggregations<a class="headerlink" href="#aggregations" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#faceting">Faceting</a> (above) is a more general form of <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html">Elasticsearch aggregation</a>.
Faceting is an example of &#8216;bucketing&#8217;; &#8216;metrics&#8217; includes functions like min,
max, percentiles.</p>
<p>Aggregations will be based on the <code class="docutils literal"><span class="pre">query</span></code> provided as well as restrictions
on resource type and any RBAC filters.</p>
<p>To include aggregations in a query, include <code class="docutils literal"><span class="pre">aggs</span></code> or <code class="docutils literal"><span class="pre">aggregations</span></code> in
a search request body. <code class="docutils literal"><span class="pre">&quot;size&quot;:</span> <span class="pre">0</span></code> prevents Elasticsearch
returning any results, just the aggregation, though it is valid to retrieve
both search results and aggregations from a single query. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:</span> <span class="p">{}},</span>
  <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s2">&quot;aggregations&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;terms&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;earliest&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;created_at&quot;</span><span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Response:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;max_score&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;hits&quot;</span><span class="p">:</span> <span class="p">[]},</span>
  <span class="s2">&quot;aggregations&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;doc_count_error_upper_bound&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;sum_other_doc_count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;buckets&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;for_instance1&quot;</span><span class="p">,</span> <span class="s2">&quot;doc_count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;instance1&quot;</span><span class="p">,</span> <span class="s2">&quot;doc_count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">&quot;earliest&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1459946898000.0</span><span class="p">,</span>
      <span class="s2">&quot;value_as_string&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-04-06T12:48:18.000Z&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that for some aggregations <code class="docutils literal"><span class="pre">value_as_string</span></code> may be more useful than
<code class="docutils literal"><span class="pre">value</span></code> - for example, the <code class="docutils literal"><span class="pre">earliest</span></code> aggregation in the example operates
on a date field whose internal representation is a timestamp.</p>
<p>The <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-global-aggregation.html">global aggregation</a> type is not allowed because unlike other aggregation
types it operates outside the search query scope.</p>
</div>
<div class="section" id="freeform-queries">
<h4>Freeform queries<a class="headerlink" href="#freeform-queries" title="Permalink to this headline">¶</a></h4>
<p>Elasticsearch has a flexible query parser that can be used for many kinds of
search terms: the <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html">query_string</a>
operator.</p>
<p>Some things to bear in mind about using <code class="docutils literal"><span class="pre">query_string</span></code> (see the documentation
for full options):</p>
<ul class="simple">
<li>A query term may be prefixed with a <code class="docutils literal"><span class="pre">field</span></code> name (as seen below). If it
is not, by default the entire document will be searched for the term.</li>
<li>The default operator between terms is <code class="docutils literal"><span class="pre">OR</span></code></li>
<li>By default, query terms are case insensitive</li>
</ul>
<p>For instance, the following will look for images with a
restriction on name and a range query on size:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;query_string&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;name: (Ubuntu OR Fedora) AND size: [3000000 TO 5000000]&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Within the query string query, you may perform a number of interesting
queries. Below are some examples.</p>
<div class="section" id="phrases">
<h5>Phrases<a class="headerlink" href="#phrases" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>\&quot;i love openstack\&quot;
</pre></div>
</div>
<p>By default, each word you type will be searched for
individually. You may also try to search an exact phrase by
using quotes (&#8220;my phrase&#8221;) to surround a phrase. The search
service may allow a certain amount of phrase slop - meaning that
if you have some words out of order in the phrase it may still
match.</p>
</div>
<div class="section" id="id2">
<h5>Wildcards<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>python3.?
10.0.0.*
172.*.4.*
</pre></div>
</div>
<p>By default, each word you type will match full words
only. You may also use wildcards to match parts of words. Wildcard
searches can be run on individual terms, using ? to replace a
single character, and * to replace zero or more character. &#8216;demo&#8217;
will match the full word &#8216;demo&#8217; only. However, &#8216;de*&#8217;
will match anything that starts with &#8216;de&#8217;, such as &#8216;demo_1&#8217;.
&#8216;de*1&#8217; will match anything that starts with &#8216;de&#8217; and ends with &#8216;1&#8217;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Wildcard queries place a heavy burden on the search service and
may perform poorly.</p>
</div>
</div>
<div class="section" id="term-operators">
<h5>Term Operators<a class="headerlink" href="#term-operators" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>+apache
-apache
web +(apache OR python)
</pre></div>
</div>
<p>Add a &#8216;+&#8217; or a &#8216;-&#8216; to indicate terms that must or must
not appear. For example &#8216;+python -apache web&#8217; would find
everything that has &#8216;python&#8217; does NOT have &#8216;apache&#8217; and should have
&#8216;web&#8217;. This may also be used with grouping. For example,
&#8216;web -(apache AND python)&#8217; would find anything with &#8216;web&#8217;, but does
not have either &#8216;apache&#8217; or &#8216;python&#8217;.</p>
</div>
<div class="section" id="boolean-operators">
<h5>Boolean Operators<a class="headerlink" href="#boolean-operators" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>python AND apache
nginx OR apache
web &amp;&amp; !apache
</pre></div>
</div>
<p>You can separate search terms and groups with
AND, OR and NOT (also written &amp;&amp;, || and !). For example,
&#8216;python OR javascript&#8217; will find anything with either term
(OR is used by default, so does not need to be specified).
However, &#8216;python AND javascript&#8217; will find things that only have
both terms. You can do this with as many terms as you&#8217;d like (e.g.
&#8216;django AND javascript AND !unholy&#8217;). It is important to use all
caps or the alternate syntax (&amp;&amp;, ||), because &#8216;and&#8217; will be
treated as another search term, but &#8216;AND&#8217; will be treated as a
logical operator.</p>
</div>
<div class="section" id="grouping">
<h5>Grouping<a class="headerlink" href="#grouping" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>python AND (2.7 OR 3.4)
web &amp;&amp; (apache !python)
</pre></div>
</div>
<p>Use parenthesis to group different aspects of your
query to form sub-queries. For example, &#8216;web OR (python AND
apache)&#8217; will return anything that either has &#8216;web&#8217; OR has both
&#8216;python&#8217; AND &#8216;apache&#8217;.</p>
</div>
<div class="section" id="facets">
<h5>Facets<a class="headerlink" href="#facets" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>name:cirros
name:cirros &amp;&amp; protected:false
</pre></div>
</div>
<p>You may decide to only look in a certain field for a
search term by setting a specific facet. This is accomplished by
either selecting a facet from the drop down or by typing the facet
manually. For example, if you are looking for an image, you
may choose to only look at the name field by adding &#8216;name:foo&#8217;.
You may group facets and use logical operators.</p>
</div>
<div class="section" id="range-queries">
<h5>Range Queries<a class="headerlink" href="#range-queries" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>size:[1 TO 1000]
size:[1 TO *]
size:&gt;=1
size:&lt;1000
</pre></div>
</div>
<p>Date, numeric or string fields can use range queries.
Use square brackets [min TO max] for inclusive ranges and curly
brackets {min TO max} for exclusive ranges.</p>
</div>
<div class="section" id="ip-addresses">
<h5>IP Addresses<a class="headerlink" href="#ip-addresses" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>172.24.4.0/16
[10.0.0.1 TO 10.0.0.4]
</pre></div>
</div>
<p>IPv4 addresses may be searched based on ranges and with CIDR notation.</p>
</div>
<div class="section" id="boosting">
<h5>Boosting<a class="headerlink" href="#boosting" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>web javascript^2 python^0.1
</pre></div>
</div>
<p>You can increase or decrease the relevance of a search
term by boosting different terms, phrases, or groups. Boost one of
these by adding ^n to the term, phrase, or group where n is a
number greater than 1 to increase relevance and between 0 and 1 to
decrease relevance. For example &#8216;web^4 python^0.1&#8217; would find
anything with both web and python, but would increase the
relevance for anything with &#8216;web&#8217; in the result and decrease the
relevance for anything with &#8216;python&#8217; in the result.</p>
</div>
<div class="section" id="reserved-characters">
<h5>Reserved Characters<a class="headerlink" href="#reserved-characters" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span></span>python \(3.4\)
</pre></div>
</div>
<p>The following characters are reserved and must be
escaped with a leading (backslash):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>+ - = &amp;&amp; || &gt; &lt; ! ( ) { } [ ] ^ &quot; ~ * ? : \
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="advanced-features">
<h2>Advanced Features<a class="headerlink" href="#advanced-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cors-accessing-searchlight-from-the-browser">
<h3>CORS - Accessing Searchlight from the browser<a class="headerlink" href="#cors-accessing-searchlight-from-the-browser" title="Permalink to this headline">¶</a></h3>
<p>Searchlight can be configured to permit access directly from the browser. For
details on this configuration, please refer to the
<a class="reference external" href="http://docs.openstack.org/admin-guide-cloud/cross_project_cors.html">OpenStack Cloud Admin Guide</a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Searchlight API</a><ul>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#using-v1">Using v1</a><ul>
<li><a class="reference internal" href="#querying-available-plugins">Querying available plugins</a></li>
<li><a class="reference internal" href="#running-a-search">Running a search</a></li>
<li><a class="reference internal" href="#more-example-searches">More example searches</a><ul>
<li><a class="reference internal" href="#administrators-search-all-resources">Administrators - search all resources</a></li>
<li><a class="reference internal" href="#restricting-document-index-or-type">Restricting document index or type</a></li>
<li><a class="reference internal" href="#retrieving-an-item-by-id">Retrieving an item by id</a></li>
<li><a class="reference internal" href="#limiting-and-paging-results">Limiting and paging results</a></li>
<li><a class="reference internal" href="#limiting-the-fields-returned">Limiting the fields returned</a></li>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#sorting">Sorting</a></li>
<li><a class="reference internal" href="#wildcards">Wildcards</a></li>
<li><a class="reference internal" href="#highlighting">Highlighting</a></li>
<li><a class="reference internal" href="#faceting">Faceting</a></li>
<li><a class="reference internal" href="#aggregations">Aggregations</a></li>
<li><a class="reference internal" href="#freeform-queries">Freeform queries</a><ul>
<li><a class="reference internal" href="#phrases">Phrases</a></li>
<li><a class="reference internal" href="#id2">Wildcards</a></li>
<li><a class="reference internal" href="#term-operators">Term Operators</a></li>
<li><a class="reference internal" href="#boolean-operators">Boolean Operators</a></li>
<li><a class="reference internal" href="#grouping">Grouping</a></li>
<li><a class="reference internal" href="#facets">Facets</a></li>
<li><a class="reference internal" href="#range-queries">Range Queries</a></li>
<li><a class="reference internal" href="#ip-addresses">IP Addresses</a></li>
<li><a class="reference internal" href="#boosting">Boosting</a></li>
<li><a class="reference internal" href="#reserved-characters">Reserved Characters</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-features">Advanced Features</a><ul>
<li><a class="reference internal" href="#cors-accessing-searchlight-from-the-browser">CORS - Accessing Searchlight from the browser</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="architecture.html"
                                  title="previous chapter">Searchlight Architecture</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="indexingservice.html"
                                  title="next chapter">Searchlight Indexing</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/searchlight
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/searchlightapi.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="indexingservice.html" title="Searchlight Indexing"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="architecture.html" title="Searchlight Architecture"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">searchlight 2.0.0.0rc2.dev8 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-2015, OpenStack Foundation..
      Last updated on &#39;Thu Feb 9 15:23:46 2017, commit 40ee622&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/searchlight");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>