<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CLI Usage &mdash; python-barbicanclient 4.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="python-barbicanclient 4.2.0 documentation" href="index.html" />
    <link rel="next" title="Reference" href="reference.html" />
    <link rel="prev" title="Client Usage" href="usage.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cli-usage">
<h1>CLI Usage<a class="headerlink" href="#cli-usage" title="Permalink to this headline">¶</a></h1>
<div class="highlight-bash"><div class="highlight"><pre><span></span>usage: barbican <span class="o">[</span>--version<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>--log-file LOG_FILE<span class="o">]</span> <span class="o">[</span>-q<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--debug<span class="o">]</span>
                <span class="o">[</span>--no-auth<span class="o">]</span> <span class="o">[</span>--os-identity-api-version &lt;identity-api-version&gt;<span class="o">]</span>
                <span class="o">[</span>--os-auth-url &lt;auth-url&gt;<span class="o">]</span> <span class="o">[</span>--os-username &lt;auth-user-name&gt;<span class="o">]</span>
                <span class="o">[</span>--os-user-id &lt;auth-user-id&gt;<span class="o">]</span> <span class="o">[</span>--os-password &lt;auth-password&gt;<span class="o">]</span>
                <span class="o">[</span>--os-user-domain-id &lt;auth-user-domain-id&gt;<span class="o">]</span>
                <span class="o">[</span>--os-user-domain-name &lt;auth-user-domain-name&gt;<span class="o">]</span>
                <span class="o">[</span>--os-tenant-name &lt;auth-tenant-name&gt;<span class="o">]</span>
                <span class="o">[</span>--os-tenant-id &lt;tenant-id&gt;<span class="o">]</span>
                <span class="o">[</span>--os-project-id &lt;auth-project-id&gt;<span class="o">]</span>
                <span class="o">[</span>--os-project-name &lt;auth-project-name&gt;<span class="o">]</span>
                <span class="o">[</span>--os-project-domain-id &lt;auth-project-domain-id&gt;<span class="o">]</span>
                <span class="o">[</span>--os-project-domain-name &lt;auth-project-domain-name&gt;<span class="o">]</span>
                <span class="o">[</span>--os-auth-token &lt;auth-token&gt;<span class="o">]</span>
                <span class="o">[</span>--endpoint &lt;barbican-url&gt;<span class="o">]</span> <span class="o">[</span>--insecure<span class="o">]</span>
                <span class="o">[</span>--os-cacert &lt;ca-certificate&gt;<span class="o">]</span> <span class="o">[</span>--os-cert &lt;certificate&gt;<span class="o">]</span>
                <span class="o">[</span>--os-key &lt;key&gt;<span class="o">]</span> <span class="o">[</span>--timeout &lt;seconds&gt;<span class="o">]</span>
</pre></div>
</div>
<p>The examples below assume that credentials have been saved to your environment.
If you don&#8217;t have variables saved to your environment or you wish to use
different credentials than those defined, any of the optional arguments listed
above may be passed to Barbican.</p>
<p>Barbican takes a positional argument &lt;entity&gt;, which specifies whether you wish
to operate on a secret or an order.</p>
<div class="section" id="secrets">
<h2>Secrets<a class="headerlink" href="#secrets" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret &lt;action&gt;
</pre></div>
</div>
<p>A subcommand describing the action to be performed should follow. The
subcommands are mostly the same for secrets and orders, although some optional
arguments only apply to one or the other.</p>
<p>Subcommand actions that a user can take for secrets are:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>secret delete  Delete a secret by providing its URI.
secret get     Retrieve a secret by providing its URI.
secret list    List secrets.
secret store   Store a secret in Barbican.
</pre></div>
</div>
<p>Each subcommand takes in a different set of arguments, and the help message
varies from one to another. The help message for <strong>get</strong> can be seen below.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$  barbican <span class="nb">help</span> secret get
usage: barbican secret get <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-f <span class="o">{</span>shell,table,value<span class="o">}]</span> <span class="o">[</span>-c COLUMN<span class="o">]</span>
                           <span class="o">[</span>--max-width &lt;integer&gt;<span class="o">]</span> <span class="o">[</span>--prefix PREFIX<span class="o">]</span>
                           <span class="o">[</span>--decrypt<span class="o">]</span> <span class="o">[</span>--payload<span class="o">]</span>
                           <span class="o">[</span>--payload_content_type PAYLOAD_CONTENT_TYPE<span class="o">]</span>
                           URI

Retrieve a secret by providing its URI.

positional arguments:
  URI                   The URI reference <span class="k">for</span> the secret.

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --decrypt, -d         <span class="k">if</span> specified, retrieve the unencrypted secret data<span class="p">;</span>
                        the data <span class="nb">type</span> can be specified with --payload-content-
                        type.
  --payload, -p         <span class="k">if</span> specified, retrieve the unencrypted secret data<span class="p">;</span>
                        the data <span class="nb">type</span> can be specified with --payload-content-
                        type. If the user wishes to only retrieve the value of
                        the payload they must add <span class="s2">&quot;-f value&quot;</span> to format
                        returning only the value of the payload
  --payload_content_type PAYLOAD_CONTENT_TYPE, -t PAYLOAD_CONTENT_TYPE
                        the content <span class="nb">type</span> of the decrypted secret <span class="o">(</span>default:
                        text/plain.

output formatters:
  output formatter options

  -f <span class="o">{</span>shell,table,value<span class="o">}</span>, --format <span class="o">{</span>shell,table,value<span class="o">}</span>
                        the output format, defaults to table
  -c COLUMN, --column COLUMN
                        specify the column<span class="o">(</span>s<span class="o">)</span> to include, can be repeated

table formatter:
  --max-width &lt;integer&gt;
                        Maximum display width, <span class="m">0</span> to disable

shell formatter:
  a format a UNIX shell can parse <span class="o">(</span><span class="nv">variable</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="o">)</span>

  --prefix PREFIX       add a prefix to all variable names
</pre></div>
</div>
<div class="section" id="secret-create">
<h3>Secret Create<a class="headerlink" href="#secret-create" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret store -n mysecretname -p <span class="s1">&#39;my secret value&#39;</span>

+---------------+-----------------------------------------------------------------------+
<span class="p">|</span> Field         <span class="p">|</span> Value                                                                 <span class="p">|</span>
+---------------+-----------------------------------------------------------------------+
<span class="p">|</span> Secret href   <span class="p">|</span> http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e <span class="p">|</span>
<span class="p">|</span> Name          <span class="p">|</span> mysecretname                                                          <span class="p">|</span>
<span class="p">|</span> Created       <span class="p">|</span> None                                                                  <span class="p">|</span>
<span class="p">|</span> Status        <span class="p">|</span> None                                                                  <span class="p">|</span>
<span class="p">|</span> Content types <span class="p">|</span> None                                                                  <span class="p">|</span>
<span class="p">|</span> Algorithm     <span class="p">|</span> aes                                                                   <span class="p">|</span>
<span class="p">|</span> Bit length    <span class="p">|</span> <span class="m">256</span>                                                                   <span class="p">|</span>
<span class="p">|</span> Mode          <span class="p">|</span> cbc                                                                   <span class="p">|</span>
<span class="p">|</span> Expiration    <span class="p">|</span> None                                                                  <span class="p">|</span>
+---------------+-----------------------------------------------------------------------+
</pre></div>
</div>
</div>
<div class="section" id="secret-get">
<h3>Secret Get<a class="headerlink" href="#secret-get" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret get http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e

+---------------+-----------------------------------------------------------------------+
<span class="p">|</span> Field         <span class="p">|</span> Value                                                                 <span class="p">|</span>
+---------------+-----------------------------------------------------------------------+
<span class="p">|</span> Secret href   <span class="p">|</span> http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e <span class="p">|</span>
<span class="p">|</span> Name          <span class="p">|</span> mysecretname                                                          <span class="p">|</span>
<span class="p">|</span> Created       <span class="p">|</span> <span class="m">2015</span>-04-16 <span class="m">20</span>:36:40.334696+00:00                                      <span class="p">|</span>
<span class="p">|</span> Status        <span class="p">|</span> ACTIVE                                                                <span class="p">|</span>
<span class="p">|</span> Content types <span class="p">|</span> <span class="o">{</span>u<span class="s1">&#39;default&#39;</span>: u<span class="s1">&#39;application/octet-stream&#39;</span><span class="o">}</span>                             <span class="p">|</span>
<span class="p">|</span> Algorithm     <span class="p">|</span> aes                                                                   <span class="p">|</span>
<span class="p">|</span> Bit length    <span class="p">|</span> <span class="m">256</span>                                                                   <span class="p">|</span>
<span class="p">|</span> Mode          <span class="p">|</span> cbc                                                                   <span class="p">|</span>
<span class="p">|</span> Expiration    <span class="p">|</span> None                                                                  <span class="p">|</span>
+---------------+-----------------------------------------------------------------------+
</pre></div>
</div>
<p>To retrieve only the raw value of the payload we have introduced the <code class="code docutils literal"><span class="pre">-p</span></code>
or <code class="code docutils literal"><span class="pre">--payload</span></code> option paired with the <code class="code docutils literal"><span class="pre">-f</span> <span class="pre">value</span></code> cliff formatting
option. (The <code class="code docutils literal"><span class="pre">--decrypt</span></code> option will perform the same action; however,
it will be deprecated)</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret get http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e --payload -f value
my secret value
</pre></div>
</div>
</div>
<div class="section" id="secret-delete">
<h3>Secret Delete<a class="headerlink" href="#secret-delete" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret delete http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e
</pre></div>
</div>
</div>
<div class="section" id="secret-update">
<h3>Secret Update<a class="headerlink" href="#secret-update" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret update http://localhost:9311/v1/secrets/a70a45d8-4076-42a2-b111-8893d3b92a3e <span class="sb">``</span>my_payload<span class="sb">``</span>
</pre></div>
</div>
<p>In order for a secret to be updated it must have been created without a payload.
<code class="docutils literal"><span class="pre">my_payload</span></code> will be added as the secret&#8217;s payload.</p>
</div>
<div class="section" id="secret-list">
<h3>Secret List<a class="headerlink" href="#secret-list" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican secret list

+-----------------------------------------------------------------------+------+----------------------------------+--------+-------------------------------------------+-----------+------------+------+------------+
<span class="p">|</span> Secret href                                                           <span class="p">|</span> Name <span class="p">|</span> Created                          <span class="p">|</span> Status <span class="p">|</span> Content types                             <span class="p">|</span> Algorithm <span class="p">|</span> Bit length <span class="p">|</span> Mode <span class="p">|</span> Expiration <span class="p">|</span>
+-----------------------------------------------------------------------+------+----------------------------------+--------+-------------------------------------------+-----------+------------+------+------------+
<span class="p">|</span> http://localhost:9311/v1/secrets/bb3d8c20-8ea5-4bfc-9645-c8da79c8b371 <span class="p">|</span> None <span class="p">|</span> <span class="m">2015</span>-04-15 <span class="m">20</span>:37:37.501475+00:00 <span class="p">|</span> ACTIVE <span class="p">|</span> <span class="o">{</span>u<span class="s1">&#39;default&#39;</span>: u<span class="s1">&#39;application/octet-stream&#39;</span><span class="o">}</span> <span class="p">|</span> aes       <span class="p">|</span>        <span class="m">256</span> <span class="p">|</span> cbc  <span class="p">|</span> None       <span class="p">|</span>
+-----------------------------------------------------------------------+------+----------------------------------+--------+-------------------------------------------+-----------+------------+------+------------+
</pre></div>
</div>
</div>
</div>
<div class="section" id="acls">
<h2>ACLS<a class="headerlink" href="#acls" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl &lt;action&gt;
</pre></div>
</div>
<p>A subcommand describing the action to be performed should follow. The
subcommands are mostly the same for secret and container ACLs.</p>
<p>Subcommand actions that a user can take for ACLs are:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>acl delete          Delete ACLs <span class="k">for</span> a secret or container as identified by its href.
acl get             Retrieve ACLs <span class="k">for</span> a secret or container by providing its href.
acl submit          Submit ACL on a secret or container as identified by its href.
acl user add        Add ACL users to a secret or container as identified by its href.
acl user remove     Remove ACL users from a secret or container as identified by its href.
</pre></div>
</div>
<p>ACL <strong>get</strong> or <strong>delete</strong> subcommand, only takes secret or container href. All
other ACL commands take additional arguments to specify ACL settings data.
Please see help message for both cases of argument. Either secret ref or
container ref is required for all of acl actions.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican <span class="nb">help</span> acl get
usage: barbican acl get <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-f <span class="o">{</span>csv,table,value<span class="o">}]</span> <span class="o">[</span>-c COLUMN<span class="o">]</span>
                        <span class="o">[</span>--max-width &lt;integer&gt;<span class="o">]</span>
                        <span class="o">[</span>--quote <span class="o">{</span>all,minimal,none,nonnumeric<span class="o">}]</span>
                        URI

Retrieve ACLs <span class="k">for</span> a secret or container by providing its href.

positional arguments:
  URI                   The URI reference <span class="k">for</span> the secret or container.

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>

output formatters:
  output formatter options

  -f <span class="o">{</span>csv,table,value<span class="o">}</span>, --format <span class="o">{</span>csv,table,value<span class="o">}</span>
                        the output format, defaults to table
  -c COLUMN, --column COLUMN
                        specify the column<span class="o">(</span>s<span class="o">)</span> to include, can be repeated

table formatter:
  --max-width &lt;integer&gt;
                        Maximum display width, <span class="m">0</span> to disable

CSV Formatter:
  --quote <span class="o">{</span>all,minimal,none,nonnumeric<span class="o">}</span>
                        when to include quotes, defaults to nonnumeric
</pre></div>
</div>
<p>Following is snippet of related command line options for an ACL modify action
e.g. submit, add or remove.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican <span class="nb">help</span> acl submit/user add/user remove
usage: barbican acl submit <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-f <span class="o">{</span>csv,table,value<span class="o">}]</span> <span class="o">[</span>-c COLUMN<span class="o">]</span>
                           <span class="o">[</span>--max-width &lt;integer&gt;<span class="o">]</span>
                           <span class="o">[</span>--quote <span class="o">{</span>all,minimal,none,nonnumeric<span class="o">}]</span>
                           <span class="o">[</span>--user <span class="o">[</span>USER<span class="o">]]</span>
                           <span class="o">[</span>--project-access <span class="p">|</span> --no-project-access<span class="o">]</span>
                           <span class="o">[</span>--operation-type <span class="o">{</span>read<span class="o">}]</span>
                           URI

....
....

positional arguments:
  URI                   The URI reference <span class="k">for</span> the secret or container.

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --user <span class="o">[</span>USER<span class="o">]</span>, -u <span class="o">[</span>USER<span class="o">]</span>
                        Keystone userid<span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> ACL.
  --project-access      Flag to <span class="nb">enable</span> project access behavior.
  --no-project-access   Flag to disable project access behavior.
  --operation-type <span class="o">{</span>read<span class="o">}</span>, -o <span class="o">{</span>read<span class="o">}</span>
                        Type of Barbican operation ACL is <span class="nb">set</span> <span class="k">for</span>
....
....
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Default for <code class="docutils literal"><span class="pre">operation-type</span></code> argument is &#8216;read&#8217; as that&#8217;s the only operation
currently supported by Barbican ACL API. So this argument can be skipped in
CLI call.</p>
</div>
<div class="section" id="acls-get">
<h3>ACLs Get<a class="headerlink" href="#acls-get" title="Permalink to this headline">¶</a></h3>
<p>To get complete ACL setting for a secret or container, use this ACL action.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl get http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213

+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                                                      <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;721e27b8505b499e8ab3b38154705b9e&#39;</span>, u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-07-21 <span class="m">17</span>:52:01.729370+00:00 <span class="p">|</span> <span class="m">2015</span>-07-28 <span class="m">02</span>:08:02.455276+00:00 <span class="p">|</span> http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213/acl <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+

$ barbican acl get http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19

+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                 <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Container ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-07-28 <span class="m">01</span>:36:55.791381+00:00 <span class="p">|</span> <span class="m">2015</span>-07-28 <span class="m">02</span>:05:41.175386+00:00 <span class="p">|</span> http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19/acl <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
</pre></div>
</div>
<p>Secret or container ref is required. If missing, it will result in error.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl get

usage: barbican acl get <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-f <span class="o">{</span>csv,table,value<span class="o">}]</span> <span class="o">[</span>-c COLUMN<span class="o">]</span>
                        <span class="o">[</span>--max-width &lt;integer&gt;<span class="o">]</span>
                        <span class="o">[</span>--quote <span class="o">{</span>all,minimal,none,nonnumeric<span class="o">}]</span>
                        URI
barbican acl get: error: too few arguments
</pre></div>
</div>
</div>
<div class="section" id="acls-submit">
<h3>ACLs Submit<a class="headerlink" href="#acls-submit" title="Permalink to this headline">¶</a></h3>
<p>To submit complete ACL setting for a secret or container, use this ACL action.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl submit --user 2d0ee7c681cc4549b6d76769c320d91f --user 721e27b8505b499e8ab3b38154705b9e http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213

+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                                                      <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> True           <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;721e27b8505b499e8ab3b38154705b9e&#39;</span>, u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-07-21 <span class="m">17</span>:52:01.729370+00:00 <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">09</span>:53:20.225971+00:00 <span class="p">|</span> http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213/acl <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">user</span></code> argument is missing or has no value, then empty list is passed for
users and this approach can be used to remove existing ACL users. If project
access argument is not provided, then by default project access is enabled. To
disable project access behavior, just pass <code class="docutils literal"><span class="pre">no-project-access</span></code> argument
without any value.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl submit --user --no-project-access http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213

+----------------+----------------+-------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+-------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[]</span>    <span class="p">|</span> <span class="m">2015</span>-07-21 <span class="m">17</span>:52:01.729370+00:00 <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">09</span>:55:23.043433+00:00 <span class="p">|</span> http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213/acl <span class="p">|</span>
+----------------+----------------+-------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+

$ barbican acl submit --user 2d0ee7c681cc4549b6d76769c320d91f --no-project-access http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19

+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                 <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Container ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-07-29 <span class="m">22</span>:01:00.878270+00:00 <span class="p">|</span> <span class="m">2015</span>-08-19 <span class="m">05</span>:56:09.930302+00:00 <span class="p">|</span> http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19/acl <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
</pre></div>
</div>
<p>Following error is returned when both mutually exclusive flags are passed.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl submit --project-access --no-project-access http://localhost:9311/v1/secrets/7776adb8-e865-413c-8ccc-4f09c3fe0213
usage: barbican acl submit <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-f <span class="o">{</span>csv,table,value<span class="o">}]</span> <span class="o">[</span>-c COLUMN<span class="o">]</span>
                           <span class="o">[</span>--max-width &lt;integer&gt;<span class="o">]</span>
                           <span class="o">[</span>--quote <span class="o">{</span>all,minimal,none,nonnumeric<span class="o">}]</span>
                           <span class="o">[</span>--user <span class="o">[</span>USER<span class="o">]]</span>
                           <span class="o">[</span>--project-access <span class="p">|</span> --no-project-access<span class="o">]</span>
                           <span class="o">[</span>--operation-type <span class="o">{</span>read<span class="o">}]</span>
                           URI
barbican acl submit: error: argument --no-project-access: not allowed with argument --project-access
</pre></div>
</div>
</div>
<div class="section" id="acl-add-user-s">
<h3>ACL Add User(s)<a class="headerlink" href="#acl-add-user-s" title="Permalink to this headline">¶</a></h3>
<p>To add ACL users for a secret or container, use this ACL action.</p>
<p>If <code class="docutils literal"><span class="pre">user</span></code> argument is missing or has no value, then no change is made in ACL
users. If project access argument is not provided, then no change is made in
existing project access behavior flag.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl user add --user c1d20e4b7e7d4917aee6f0832152269b http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19

+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                                                      <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Container ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span>, u<span class="s1">&#39;c1d20e4b7e7d4917aee6f0832152269b&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-07-29 <span class="m">22</span>:01:00.878270+00:00 <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">10</span>:08:19.129370+00:00 <span class="p">|</span> http://localhost:9311/v1/containers/83c302c7-86fe-4f07-a277-c4962f121f19/acl <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+------------------------------------------------------------------------------+
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Added 2 users for secret (084c2098-66db-4401-8348-d969be0eddaa) earlier via set action.</span>
$ barbican acl user add --user --no-project-access http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa

+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                                                      <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;721e27b8505b499e8ab3b38154705b9e&#39;</span>, u<span class="s1">&#39;2d0ee7c681cc4549b6d76769c320d91f&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">10</span>:09:27.564371+00:00 <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">10</span>:11:09.749980+00:00 <span class="p">|</span> http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa/acl <span class="p">|</span>
+----------------+----------------+----------------------------------------------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
</pre></div>
</div>
</div>
<div class="section" id="acl-remove-user-s">
<h3>ACL Remove User(s)<a class="headerlink" href="#acl-remove-user-s" title="Permalink to this headline">¶</a></h3>
<p>To remove ACL users for a secret or container, use this ACL action.</p>
<p>If <code class="docutils literal"><span class="pre">user</span></code> argument is missing or has no value, then no change is made in ACL
users. If project access argument is not provided, then no change is made in
existing project access behavior flag.</p>
<p>If provided userid(s) does not exist in ACL, it is simply ignored and only
existing userid(s) are removed from ACL.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl user remove --user 2d0ee7c681cc4549b6d76769c320d91f --user invalid_user_id http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa

+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users                                 <span class="p">|</span> Created                          <span class="p">|</span> Updated                          <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> False          <span class="p">|</span> <span class="o">[</span>u<span class="s1">&#39;721e27b8505b499e8ab3b38154705b9e&#39;</span><span class="o">]</span> <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">10</span>:09:27.564371+00:00 <span class="p">|</span> <span class="m">2015</span>-08-12 <span class="m">10</span>:12:21.842888+00:00 <span class="p">|</span> http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa/acl <span class="p">|</span>
+----------------+----------------+---------------------------------------+----------------------------------+----------------------------------+---------------------------------------------------------------------------+
</pre></div>
</div>
</div>
<div class="section" id="acls-delete">
<h3>ACLs Delete<a class="headerlink" href="#acls-delete" title="Permalink to this headline">¶</a></h3>
<p>To delete existing ACL setting for a secret or container, use this ACL action.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ barbican acl delete http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa

$ barbican acl get http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa

+----------------+----------------+-------+---------+---------+---------------------------------------------------------------------------+
<span class="p">|</span> Operation Type <span class="p">|</span> Project Access <span class="p">|</span> Users <span class="p">|</span> Created <span class="p">|</span> Updated <span class="p">|</span> Secret ACL Ref                                                            <span class="p">|</span>
+----------------+----------------+-------+---------+---------+---------------------------------------------------------------------------+
<span class="p">|</span> <span class="nb">read</span>           <span class="p">|</span> True           <span class="p">|</span> <span class="o">[]</span>    <span class="p">|</span> None    <span class="p">|</span> None    <span class="p">|</span> http://localhost:9311/v1/secrets/084c2098-66db-4401-8348-d969be0eddaa/acl <span class="p">|</span>
+----------------+----------------+-------+---------+---------+---------------------------------------------------------------------------+
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">CLI Usage</a><ul>
<li><a class="reference internal" href="#secrets">Secrets</a><ul>
<li><a class="reference internal" href="#secret-create">Secret Create</a></li>
<li><a class="reference internal" href="#secret-get">Secret Get</a></li>
<li><a class="reference internal" href="#secret-delete">Secret Delete</a></li>
<li><a class="reference internal" href="#secret-update">Secret Update</a></li>
<li><a class="reference internal" href="#secret-list">Secret List</a></li>
</ul>
</li>
<li><a class="reference internal" href="#acls">ACLS</a><ul>
<li><a class="reference internal" href="#acls-get">ACLs Get</a></li>
<li><a class="reference internal" href="#acls-submit">ACLs Submit</a></li>
<li><a class="reference internal" href="#acl-add-user-s">ACL Add User(s)</a></li>
<li><a class="reference internal" href="#acl-remove-user-s">ACL Remove User(s)</a></li>
<li><a class="reference internal" href="#acls-delete">ACLs Delete</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="usage.html"
                                  title="previous chapter">Client Usage</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="reference.html"
                                  title="next chapter">Reference</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/python-barbicanclient
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/cli_usage.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reference.html" title="Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Client Usage"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">python-barbicanclient 4.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/python-barbicanclient");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>