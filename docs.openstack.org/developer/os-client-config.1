<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Team and repository tags &mdash; os-client-config 1.26.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.26.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="os-client-config 1.26.0 documentation" href="#" />
    <link rel="next" title="Vendor Support" href="vendor-support.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="team-and-repository-tags">
<h1>Team and repository tags<a class="headerlink" href="#team-and-repository-tags" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="http://governance.openstack.org/reference/tags/index.html"><img src="http://governance.openstack.org/badges/os-client-config.svg" /></a>
</div>
<div class="section" id="os-client-config">
<h1>os-client-config<a class="headerlink" href="#os-client-config" title="Permalink to this headline">¶</a></h1>
<p><cite>os-client-config</cite> is a library for collecting client configuration for
using an OpenStack cloud in a consistent and comprehensive manner. It
will find cloud config for as few as 1 cloud and as many as you want to
put in a config file. It will read environment variables and config files,
and it also contains some vendor specific default values so that you don&#8217;t
have to know extra info to use OpenStack</p>
<ul class="simple">
<li>If you have a config file, you will get the clouds listed in it</li>
<li>If you have environment variables, you will get a cloud named <cite>envvars</cite></li>
<li>If you have neither, you will get a cloud named <cite>defaults</cite> with base defaults</li>
</ul>
<div class="section" id="environment-variables">
<h2>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<p><cite>os-client-config</cite> honors all of the normal <cite>OS_*</cite> variables. It does not
provide backwards compatibility to service-specific variables such as
<cite>NOVA_USERNAME</cite>.</p>
<p>If you have OpenStack environment variables set, <cite>os-client-config</cite> will produce
a cloud config object named <cite>envvars</cite> containing your values from the
environment. If you don&#8217;t like the name <cite>envvars</cite>, that&#8217;s ok, you can override
it by setting <cite>OS_CLOUD_NAME</cite>.</p>
<p>Service specific settings, like the nova service type, are set with the
default service type as a prefix. For instance, to set a special service_type
for trove set</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">OS_DATABASE_SERVICE_TYPE</span><span class="o">=</span>rax:database
</pre></div>
</div>
</div>
<div class="section" id="config-files">
<h2>Config Files<a class="headerlink" href="#config-files" title="Permalink to this headline">¶</a></h2>
<p><cite>os-client-config</cite> will look for a file called <cite>clouds.yaml</cite> in the following
locations:</p>
<ul class="simple">
<li>Current Directory</li>
<li>~/.config/openstack</li>
<li>/etc/openstack</li>
</ul>
<p>The first file found wins.</p>
<p>You can also set the environment variable <cite>OS_CLIENT_CONFIG_FILE</cite> to an
absolute path of a file to look for and that location will be inserted at the
front of the file search list.</p>
<p>The keys are all of the keys you&#8217;d expect from <cite>OS_*</cite> - except lower case
and without the OS prefix. So, region name is set with <cite>region_name</cite>.</p>
<p>Service specific settings, like the nova service type, are set with the
default service type as a prefix. For instance, to set a special service_type
for trove (because you&#8217;re using Rackspace) set:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">database_service_type</span><span class="p p-Indicator">:</span> <span class="s">&#39;rax:database&#39;</span>
</pre></div>
</div>
<div class="section" id="site-specific-file-locations">
<h3>Site Specific File Locations<a class="headerlink" href="#site-specific-file-locations" title="Permalink to this headline">¶</a></h3>
<p>In addition to <cite>~/.config/openstack</cite> and <cite>/etc/openstack</cite> - some platforms
have other locations they like to put things. <cite>os-client-config</cite> will also
look in an OS specific config dir</p>
<ul class="simple">
<li><cite>USER_CONFIG_DIR</cite></li>
<li><cite>SITE_CONFIG_DIR</cite></li>
</ul>
<p><cite>USER_CONFIG_DIR</cite> is different on Linux, OSX and Windows.</p>
<ul class="simple">
<li>Linux: <cite>~/.config/openstack</cite></li>
<li>OSX: <cite>~/Library/Application Support/openstack</cite></li>
<li>Windows: <cite>C:\Users\USERNAME\AppData\Local\OpenStack\openstack</cite></li>
</ul>
<p><cite>SITE_CONFIG_DIR</cite> is different on Linux, OSX and Windows.</p>
<ul class="simple">
<li>Linux: <cite>/etc/openstack</cite></li>
<li>OSX: <cite>/Library/Application Support/openstack</cite></li>
<li>Windows: <cite>C:\ProgramData\OpenStack\openstack</cite></li>
</ul>
<p>An example config file is probably helpful:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">mtvexx</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">vexxhost</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
    <span class="l l-Scalar l-Scalar-Plain">region_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ca-ymq-1</span>
    <span class="l l-Scalar l-Scalar-Plain">dns_api_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="l l-Scalar l-Scalar-Plain">mordred</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">region_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">RegionOne</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="s">&#39;mordred&#39;</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="s">&#39;shade&#39;</span>
      <span class="l l-Scalar l-Scalar-Plain">auth_url</span><span class="p p-Indicator">:</span> <span class="s">&#39;https://montytaylor-sjc.openstack.blueboxgrid.com:5001/v2.0&#39;</span>
  <span class="l l-Scalar l-Scalar-Plain">infra</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rackspace</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">openstackci</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">610275</span>
    <span class="l l-Scalar l-Scalar-Plain">regions</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">DFW</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ORD</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">IAD</span>
</pre></div>
</div>
<p>You may note a few things. First, since <cite>auth_url</cite> settings are silly
and embarrassingly ugly, known cloud vendor profile information is included and
may be referenced by name. One of the benefits of that is that <cite>auth_url</cite>
isn&#8217;t the only thing the vendor defaults contain. For instance, since
Rackspace lists <cite>rax:database</cite> as the service type for trove, <cite>os-client-config</cite>
knows that so that you don&#8217;t have to. In case the cloud vendor profile is not
available, you can provide one called <cite>clouds-public.yaml</cite>, following the same
location rules previously mentioned for the config files.</p>
<p><cite>regions</cite> can be a list of regions. When you call <cite>get_all_clouds</cite>,
you&#8217;ll get a cloud config object for each cloud/region combo.</p>
<p>As seen with <cite>dns_service_type</cite>, any setting that makes sense to be per-service,
like <cite>service_type</cite> or <cite>endpoint</cite> or <cite>api_version</cite> can be set by prefixing
the setting with the default service type. That might strike you funny when
setting <cite>service_type</cite> and it does me too - but that&#8217;s just the world we live
in.</p>
</div>
</div>
<div class="section" id="auth-settings">
<h2>Auth Settings<a class="headerlink" href="#auth-settings" title="Permalink to this headline">¶</a></h2>
<p>Keystone has auth plugins - which means it&#8217;s not possible to know ahead of time
which auth settings are needed. <cite>os-client-config</cite> sets the default plugin type
to <cite>password</cite>, which is what things all were before plugins came about. In
order to facilitate validation of values, all of the parameters that exist
as a result of a chosen plugin need to go into the auth dict. For password
auth, this includes <cite>auth_url</cite>, <cite>username</cite> and <cite>password</cite> as well as anything
related to domains, projects and trusts.</p>
</div>
<div class="section" id="splitting-secrets">
<h2>Splitting Secrets<a class="headerlink" href="#splitting-secrets" title="Permalink to this headline">¶</a></h2>
<p>In some scenarios, such as configuration management controlled environments,
it might be easier to have secrets in one file and non-secrets in another.
This is fully supported via an optional file <cite>secure.yaml</cite> which follows all
the same location rules as <cite>clouds.yaml</cite>. It can contain anything you put
in <cite>clouds.yaml</cite> and will take precedence over anything in the <cite>clouds.yaml</cite>
file.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># clouds.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">internap</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">internap</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">api-55f9a00fb2619</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037</span>
    <span class="l l-Scalar l-Scalar-Plain">regions</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ams01</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nyj01</span>
<span class="c1"># secure.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">internap</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXXXXXXXXXX</span>
</pre></div>
</div>
</div>
<div class="section" id="ssl-settings">
<h2>SSL Settings<a class="headerlink" href="#ssl-settings" title="Permalink to this headline">¶</a></h2>
<p>When the access to a cloud is done via a secure connection, <cite>os-client-config</cite>
will always verify the SSL cert by default. This can be disabled by setting
<cite>verify</cite> to <cite>False</cite>. In case the cert is signed by an unknown CA, a specific
cacert can be provided via <cite>cacert</cite>. <strong>WARNING:</strong> <cite>verify</cite> will always have
precedence over <cite>cacert</cite>, so when setting a CA cert but disabling <cite>verify</cite>, the
cloud cert will never be validated.</p>
<p>Client certs are also configurable. <cite>cert</cite> will be the client cert file
location. In case the cert key is not included within the client cert file,
its file location needs to be set via <cite>key</cite>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="c1"># clouds.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">secure</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">key</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/myhome/client-cert.key</span>
    <span class="l l-Scalar l-Scalar-Plain">cert</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/myhome/client-cert.crt</span>
    <span class="l l-Scalar l-Scalar-Plain">cacert</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/myhome/ca.crt</span>
  <span class="l l-Scalar l-Scalar-Plain">insecure</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="l l-Scalar l-Scalar-Plain">verify</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-settings">
<h2>Cache Settings<a class="headerlink" href="#cache-settings" title="Permalink to this headline">¶</a></h2>
<p>Accessing a cloud is often expensive, so it&#8217;s quite common to want to do some
client-side caching of those operations. To facilitate that, <cite>os-client-config</cite>
understands passing through cache settings to dogpile.cache, with the following
behaviors:</p>
<ul class="simple">
<li>Listing no config settings means you get a null cache.</li>
<li><cite>cache.expiration_time</cite> and nothing else gets you memory cache.</li>
<li>Otherwise, <cite>cache.class</cite> and <cite>cache.arguments</cite> are passed in</li>
</ul>
<p>Different cloud behaviors are also differently expensive to deal with. If you
want to get really crazy and tweak stuff, you can specify different expiration
times on a per-resource basis by passing values, in seconds to an expiration
mapping keyed on the singular name of the resource. A value of <cite>-1</cite> indicates
that the resource should never expire.</p>
<p><cite>os-client-config</cite> does not actually cache anything itself, but it collects
and presents the cache information so that your various applications that
are connecting to OpenStack can share a cache should you desire.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">cache</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">dogpile.cache.pylibmc</span>
  <span class="l l-Scalar l-Scalar-Plain">expiration_time</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3600</span>
  <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">url</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
  <span class="l l-Scalar l-Scalar-Plain">expiration</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">server</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
    <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">mtvexx</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">vexxhost</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
    <span class="l l-Scalar l-Scalar-Plain">region_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ca-ymq-1</span>
    <span class="l l-Scalar l-Scalar-Plain">dns_api_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
<div class="section" id="ipv6">
<h2>IPv6<a class="headerlink" href="#ipv6" title="Permalink to this headline">¶</a></h2>
<p>IPv6 is the future, and you should always use it if your cloud supports it and
if your local network supports it. Both of those are easily detectable and all
friendly software should do the right thing. However, sometimes you might
exist in a location where you have an IPv6 stack, but something evil has
caused it to not actually function. In that case, there is a config option
you can set to unbreak you <cite>force_ipv4</cite>, or <cite>OS_FORCE_IPV4</cite> boolean
environment variable.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">client</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">force_ipv4</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">mtvexx</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">vexxhost</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
    <span class="l l-Scalar l-Scalar-Plain">region_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ca-ymq-1</span>
    <span class="l l-Scalar l-Scalar-Plain">dns_api_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="l l-Scalar l-Scalar-Plain">monty</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">rax</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mordred@inaugust.com</span>
    <span class="l l-Scalar l-Scalar-Plain">region_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DFW</span>
</pre></div>
</div>
<p>The above snippet will tell client programs to prefer returning an IPv4
address.</p>
</div>
<div class="section" id="per-region-settings">
<h2>Per-region settings<a class="headerlink" href="#per-region-settings" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you have a cloud provider that has config that is common to the
cloud, but also with some things you might want to express on a per-region
basis. For instance, Internap provides a public and private network specific
to the user in each region, and putting the values of those networks into
config can make consuming programs more efficient.</p>
<p>To support this, the region list can actually be a list of dicts, and any
setting that can be set at the cloud level can be overridden for that
region.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">clouds</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">internap</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">profile</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">internap</span>
    <span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">XXXXXXXXXXXXXXXXX</span>
      <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">api-55f9a00fb2619</span>
      <span class="l l-Scalar l-Scalar-Plain">project_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037</span>
    <span class="l l-Scalar l-Scalar-Plain">regions</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ams01</span>
      <span class="l l-Scalar l-Scalar-Plain">values</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037-WAN1654</span>
          <span class="l l-Scalar l-Scalar-Plain">routes_externally</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037-LAN6745</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">nyj01</span>
      <span class="l l-Scalar l-Scalar-Plain">values</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037-WAN1654</span>
          <span class="l l-Scalar l-Scalar-Plain">routes_externally</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">inap-17037-LAN6745</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The simplest and least useful thing you can do is:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">config</span>
</pre></div>
</div>
<p>Which will print out whatever if finds for your config. If you want to use
it from python, which is much more likely what you want to do, things like:</p>
<p>Get a named cloud.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud_config</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">OpenStackConfig</span><span class="p">()</span><span class="o">.</span><span class="n">get_one_cloud</span><span class="p">(</span>
    <span class="s1">&#39;internap&#39;</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;ams01&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">cloud_config</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cloud_config</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="n">cloud_config</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, get all of the clouds.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud_config</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">OpenStackConfig</span><span class="p">()</span><span class="o">.</span><span class="n">get_all_clouds</span><span class="p">()</span>
<span class="k">for</span> <span class="n">cloud</span> <span class="ow">in</span> <span class="n">cloud_config</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">cloud</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cloud</span><span class="o">.</span><span class="n">region</span><span class="p">,</span> <span class="n">cloud</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="argparse">
<h2>argparse<a class="headerlink" href="#argparse" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re using os-client-config from a program that wants to process
command line options, there is a registration function to register the
arguments that both os-client-config and keystoneauth know how to deal
with - as well as a consumption argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud_config</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">OpenStackConfig</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">cloud_config</span><span class="o">.</span><span class="n">register_argparse_arguments</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

<span class="n">options</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="n">cloud</span> <span class="o">=</span> <span class="n">cloud_config</span><span class="o">.</span><span class="n">get_one_cloud</span><span class="p">(</span><span class="n">argparse</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="constructing-openstack-sdk-object">
<h2>Constructing OpenStack SDK object<a class="headerlink" href="#constructing-openstack-sdk-object" title="Permalink to this headline">¶</a></h2>
<p>If what you want to do is get an OpenStack SDK Connection and you want it to
do all the normal things related to clouds.yaml, <cite>OS_</cite> environment variables,
a helper function is provided. The following will get you a fully configured
<cite>openstacksdk</cite> instance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">sdk</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_sdk</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to do the same thing but on a named cloud.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">sdk</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_sdk</span><span class="p">(</span><span class="n">cloud</span><span class="o">=</span><span class="s1">&#39;mtvexx&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to do the same thing but also support command line parsing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">sdk</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_sdk</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">())</span>
</pre></div>
</div>
<p>It should be noted that OpenStack SDK has ways to construct itself that allow
for additional flexibility. If the helper function here does not meet your
needs, you should see the <cite>from_config</cite> method of
<a class="reference external" href="http://developer.openstack.org/sdks/python/openstacksdk/users/guides/connect_from_config.html">openstack.connection.Connection</a></p>
</div>
<div class="section" id="constructing-shade-objects">
<h2>Constructing shade objects<a class="headerlink" href="#constructing-shade-objects" title="Permalink to this headline">¶</a></h2>
<p>If what you want to do is get a
<a class="reference external" href="http://docs.openstack.org/infra/shade/">shade</a> OpenStackCloud object, a
helper function that honors clouds.yaml and <cite>OS_</cite> environment variables is
provided. The following will get you a fully configured <cite>OpenStackCloud</cite>
instance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_shade</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to do the same thing but on a named cloud.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_shade</span><span class="p">(</span><span class="n">cloud</span><span class="o">=</span><span class="s1">&#39;mtvexx&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to do the same thing but also support command line parsing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">cloud</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_shade</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="constructing-rest-api-clients">
<h2>Constructing REST API Clients<a class="headerlink" href="#constructing-rest-api-clients" title="Permalink to this headline">¶</a></h2>
<p>What if you want to make direct REST calls via a Session interface? You&#8217;re
in luck. A similar interface is available as with <cite>openstacksdk</cite> and <cite>shade</cite>.
The main difference is that you need to specify which service you want to
talk to and <cite>make_rest_client</cite> will return you a keystoneauth Session object
that is mounted on the endpoint for the service you&#8217;re looking for.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_rest_client</span><span class="p">(</span><span class="s1">&#39;compute&#39;</span><span class="p">,</span> <span class="n">cloud</span><span class="o">=</span><span class="s1">&#39;vexxhost&#39;</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/servers&#39;</span><span class="p">)</span>
<span class="n">server_list</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;servers&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="constructing-legacy-client-objects">
<h2>Constructing Legacy Client objects<a class="headerlink" href="#constructing-legacy-client-objects" title="Permalink to this headline">¶</a></h2>
<p>If you want get an old-style Client object from a python-*client library,
and you want it to do all the normal things related to clouds.yaml, <cite>OS_</cite>
environment variables, a helper function is also provided. The following
will get you a fully configured <cite>novaclient</cite> instance.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">nova</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_client</span><span class="p">(</span><span class="s1">&#39;compute&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to do the same thing but on a named cloud.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">nova</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_client</span><span class="p">(</span><span class="s1">&#39;compute&#39;</span><span class="p">,</span> <span class="n">cloud</span><span class="o">=</span><span class="s1">&#39;mtvexx&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to do the same thing but also support command line parsing.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="kn">import</span> <span class="nn">os_client_config</span>

<span class="n">nova</span> <span class="o">=</span> <span class="n">os_client_config</span><span class="o">.</span><span class="n">make_client</span><span class="p">(</span>
    <span class="s1">&#39;compute&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">())</span>
</pre></div>
</div>
<p>If you want to get fancier than that in your python, then the rest of the
API is available to you. But often times, you just want to do the one thing.</p>
</div>
<div class="section" id="source">
<h2>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Free software: Apache license</li>
<li>Documentation: <a class="reference external" href="http://docs.openstack.org/developer/os-client-config">http://docs.openstack.org/developer/os-client-config</a></li>
<li>Source: <a class="reference external" href="http://git.openstack.org/cgit/openstack/os-client-config">http://git.openstack.org/cgit/openstack/os-client-config</a></li>
<li>Bugs: <a class="reference external" href="http://bugs.launchpad.net/os-client-config">http://bugs.launchpad.net/os-client-config</a></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="vendor-support.html">Vendor Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#default-values">Default Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#auro">auro</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#catalyst">catalyst</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#citycloud">citycloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#conoha">conoha</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#datacentred">datacentred</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#dreamcompute">dreamcompute</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#dreamhost">dreamhost</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#otc">otc</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#elastx">elastx</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#entercloudsuite">entercloudsuite</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#fuga">fuga</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#internap">internap</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#ovh">ovh</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#rackspace">rackspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#switchengines">switchengines</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#ultimum">ultimum</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#unitedstack">unitedstack</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#vexxhost">vexxhost</a></li>
<li class="toctree-l2"><a class="reference internal" href="vendor-support.html#zetta">zetta</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="network-config.html">Network Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span>Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span>Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span>Search Page</span></a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="#">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Team and repository tags</a></li>
<li><a class="reference internal" href="#os-client-config">os-client-config</a><ul>
<li><a class="reference internal" href="#environment-variables">Environment Variables</a></li>
<li><a class="reference internal" href="#config-files">Config Files</a><ul>
<li><a class="reference internal" href="#site-specific-file-locations">Site Specific File Locations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#auth-settings">Auth Settings</a></li>
<li><a class="reference internal" href="#splitting-secrets">Splitting Secrets</a></li>
<li><a class="reference internal" href="#ssl-settings">SSL Settings</a></li>
<li><a class="reference internal" href="#cache-settings">Cache Settings</a></li>
<li><a class="reference internal" href="#ipv6">IPv6</a></li>
<li><a class="reference internal" href="#per-region-settings">Per-region settings</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#argparse">argparse</a></li>
<li><a class="reference internal" href="#constructing-openstack-sdk-object">Constructing OpenStack SDK object</a></li>
<li><a class="reference internal" href="#constructing-shade-objects">Constructing shade objects</a></li>
<li><a class="reference internal" href="#constructing-rest-api-clients">Constructing REST API Clients</a></li>
<li><a class="reference internal" href="#constructing-legacy-client-objects">Constructing Legacy Client objects</a></li>
<li><a class="reference internal" href="#source">Source</a></li>
</ul>
</li>
</ul>

            <h4>Next topic</h4>
            <p class="topless"><a href="vendor-support.html"
                                  title="next chapter">Vendor Support</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/os-client-config
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="vendor-support.html" title="Vendor Support"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">os-client-config 1.26.0 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, various OpenStack developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/os-client-config");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>