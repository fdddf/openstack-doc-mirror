<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Part 2: Customizing your Application Package &mdash; Murano</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.1.1.dev17',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Murano" href="../../index.html" />
    <link rel="up" title="Developing Murano Packages 101" href="step_by_step.html" />
    <link rel="next" title="Part 3: Creating a Plone CMS application package" href="part3.html" />
    <link rel="prev" title="Part 1: Creating your first Application Package" href="part1.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="part-2-customizing-your-application-package">
<h1>Part 2: Customizing your Application Package<a class="headerlink" href="#part-2-customizing-your-application-package" title="Permalink to this headline">¶</a></h1>
<p>We&#8217;ve built a classic &#8220;Hello, World&#8221; application during the first part of
this tutorial, now let&#8217;s play a little with it and customize it for better
user and developer experience - while learning some more Murano features,
of course.</p>
<div class="section" id="adding-user-input">
<h2>Adding user input<a class="headerlink" href="#adding-user-input" title="Permalink to this headline">¶</a></h2>
<p>Most deployment scenarios for cloud applications require user input. It may
be various options which should be applied in software configuration files,
passwords for default administrator&#8217;s accounts, IP addresses of external
services to register with and so on. Murano Application Packages may define
the user inputs they expect, prompt the end-users to pass the values as these
inputs, so that they may utilize these values during application lifecycle
workflows.</p>
<p>In Murano user input is defined for each class as <cite>input properties</cite>.
<cite>Properties</cite> are object-level variables of the class, they may be of different
kinds, and the <cite>input properties</cite> are the ones which are expected to contain
user input. See <a class="reference internal" href="../murano_pl/class_templ.html#class-props"><span>Properties</span></a> for details on other kinds of them.</p>
<p>To define properties of the class you should add a <code class="docutils literal"><span class="pre">Properties</span></code> block
somewhere in the YAML file of that class.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Usually it is better to place this block after the <code class="docutils literal"><span class="pre">Name</span></code> and <code class="docutils literal"><span class="pre">Extends</span></code>
blocks but before the <code class="docutils literal"><span class="pre">Methods</span></code> block. Following this suggestion will
improve the overall readability of your code.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">Properties</span></code> block should contain a YAML dictionary, mapping the names of
the properties to their descriptions. These descriptions may specify the kind
of properties, the restrictions on the type and value of the property
(so-called <cite>contracts</cite>), provide default value for the property and so on.</p>
<p>Let&#8217;s add some user input to our &#8220;Hello, World&#8221; application. Let&#8217;s ask the end
user to provide their name, so the application will greet the user instead of
the whole world. To do that, we need to edit our <code class="docutils literal"><span class="pre">com.yourdomain.HelloWorld</span></code>
class to look the following way:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>

<span class="l l-Scalar l-Scalar-Plain">Extends</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">io.murano.Application</span>

<span class="hll"><span class="l l-Scalar l-Scalar-Plain">Properties</span><span class="p p-Indicator">:</span>
</span><span class="hll">  <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">Usage</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">In</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">Contract</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$.string().notNull()</span>
</span>
<span class="l l-Scalar l-Scalar-Plain">Methods</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">deploy</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">Body</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$this.find(&#39;io.murano.Environment&#39;).reporter</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter.report($this, &quot;Hello, World!&quot;)</span>
</pre></div>
</td></tr></table></div>
<p>On line 6 we declare a property named <code class="docutils literal"><span class="pre">username</span></code>, on line 7 we specify that
it is an input property, and on line 8 we provide a contract, i.e. a
restriction on the value. This particular one states that the property&#8217;s value
should be a string and should not be null (i.e. should be provided by the
user).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although there are a total of 7 different kinds of properties, it turns
out that the input ones are the most common. So, for input properties you
may omit the <code class="docutils literal"><span class="pre">Usage</span></code> part - all the properties without an explicit usage
are considered to be input properties.</p>
</div>
<p>Once the property is declared within the <code class="docutils literal"><span class="pre">Properties</span></code> block, you may access
it in the code of the class methods. Since the properties are object-level
variables they may be accessed by calling a <code class="docutils literal"><span class="pre">$this</span></code> variable (which is a
reference to a current instance of your class) followed by a dot and a property
name. So, our <code class="docutils literal"><span class="pre">username</span></code> property may be accessed as <code class="docutils literal"><span class="pre">$this.username</span></code>.</p>
<p>Let&#8217;s modify the <code class="docutils literal"><span class="pre">deploy</span></code> method of our class to make use of the property to
greet the user by name:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Methods</span><span class="p p-Indicator">:</span>
 <span class="l l-Scalar l-Scalar-Plain">deploy</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">Body</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$this.find(&#39;io.murano.Environment&#39;).reporter</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter.report($this, &quot;Hello, &quot; + $this.username + &quot;!&quot;)</span>
</pre></div>
</div>
<p>OK, let&#8217;s try it. Save the file and archive your package directory again, then
re-import your zip-file to the Murano Catalog as a package.
You&#8217;ll probably get a warning, since the package with the same name already
exists in the catalog (we imported it there in the previous part of the
tutorial), so murano CLI will ask you if you want to update it. In production
it is better to make a newer version of our application and thus to have both
in the catalog, but for now let&#8217;s just overwrite the old package with the new
one.</p>
<p>But you cannot deploy it with the old json input we used in the previous part:
since the property&#8217;s contract has that <code class="docutils literal"><span class="pre">.notNull()</span></code> part it means that the
input should contain the value for the property. If you attempt to deploy an
application without this value, you&#8217;ll get an error.</p>
<p>So, let&#8217;s edit the <code class="docutils literal"><span class="pre">input.json</span></code> file we created in the previous part and add
the value of the property to the input:</p>
<div class="highlight-json"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
    <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/-&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;?&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Demo&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;com.yourdomain.HelloWorld&quot;</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;42&quot;</span>
       <span class="p">},</span>
<span class="hll">      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span>
</span>    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</td></tr></table></div>
<p>Save the json file and repeat the steps from the previous part to create an
environment, open a configuration session, add an application and deploy it.
Now in the &#8216;Last Operation&#8217; of Murano Dashboard you will see the updated
reporting message, containing the username:</p>
<a class="reference internal image-reference" href="../../_images/hello-world-screen-2.png"><img alt="../../_images/hello-world-screen-2.png" src="../../_images/hello-world-screen-2.png" style="width: 100%;" /></a>
</div>
<div class="section" id="adding-user-interface">
<h2>Adding user interface<a class="headerlink" href="#adding-user-interface" title="Permalink to this headline">¶</a></h2>
<p>As you can see in all the examples above, deploying applications via Murano
CLI is quite a cumbersome process: the user has to create environments and
sessions and provide the appropriate json-based input for the application.</p>
<p>This is inconvenient for a real user, of course. The CLI is intended to be used
by various external automation systems which interact with Murano via scripts,
but the human users will use Murano Dashboard which simplifies all those
actions and provides a nice interface for them.</p>
<p>Murano Dashboard provides a nice interface to create and deploy environments
and manages sessions transparently for the end users, but when it comes to the
generation of input JSON it can&#8217;t do it out of the box: it needs some hints
from the package developer. By having hints, Murano Dashboard will be able to
generate nicely looking wizard-like dialogs to configure applications and add
them to an environment. In this section we&#8217;ll learn how to create these UI
hints.</p>
<p>The UI hints (also called <cite>UI definitions</cite>) should be defined in a separate
YAML file (yeah, YAML again) in your application package. The file should be
named <code class="docutils literal"><span class="pre">ui.yaml</span></code> and placed in a special directory of your package called
<code class="docutils literal"><span class="pre">UI</span></code>.</p>
<p>The main section which is mandatory for all the UI definitions is called
<code class="docutils literal"><span class="pre">Application</span></code>: it defines the object structure which should be passed as the
input to Murano. That&#8217;s it: it is equivalent to the JSON <code class="docutils literal"><span class="pre">input.json</span></code> we were
creating before. The data structure remains the same: ?-header is for system
properties and all other properties belong inside the top level of the object.</p>
<p>The <code class="docutils literal"><span class="pre">Application</span></code> section for our modified &#8220;Hello, World&#8221; application should
look like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">?</span><span class="p p-Indicator">:</span>
     <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>
  <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Alice</span>
</pre></div>
</td></tr></table></div>
<p>This input is almost the same as the <code class="docutils literal"><span class="pre">input.json</span></code> we used last time, except
that the data is expressed in a different format. However, there are several
important differences: there are not JSON-Patch related keywords (&#8220;op&#8221;, &#8220;path&#8221;
and &#8220;value&#8221;) - that&#8217;s because Murano Dashboard will generate them
automatically.</p>
<p>Same is true for the missing <code class="docutils literal"><span class="pre">id</span></code> and <code class="docutils literal"><span class="pre">name</span></code> from the ?-header of the
object: the dashboard will generate the id on its own and ask the end-user for
the name, and then will insert both into the structure it sends to Murano.</p>
<p>However, there is one problem in the example above: it has the <code class="docutils literal"><span class="pre">username</span></code>
hardcoded to be Alice. Of course we do not want the user input to be hardcoded:
it won&#8217;t be an input then. So, let&#8217;s define a user interface which will ask the
end user for the actual value of this parameter.</p>
<p>Since Murano Dashboard works like a step-by-step wizard, we need to define at
least one wizard step (so-called <cite>form</cite>) and place a single text-box control
into it, so the end-user will be able to enter his/her name there.</p>
<p>These steps are defined in the <code class="docutils literal"><span class="pre">Forms</span></code> section of our ui definition file.
This section should contain a list of key-value pairs. Keys are the identifiers
of the forms, while values should define a list of <cite>field</cite> objects. Each field
may define a name, a type, a description, a requirement indicator and some
other attributes intended for advanced usage.</p>
<p>For our example we need a single step with a single text field. The <code class="docutils literal"><span class="pre">Forms</span></code>
section should look like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Forms</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">step1</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">username</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
          <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Username of the user to say &#39;hello&#39; to</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
<p>This defines the needed textbox control in the ui. Finally, we need to bind
the value user puts into that textbox to the appropriate position in our
<code class="docutils literal"><span class="pre">Application</span></code> section. To do that we replace the hardcoded value with an
expression of form <code class="docutils literal"><span class="pre">$.&lt;formId&gt;.&lt;fieldName&gt;</span></code>. In our case this will be
<code class="docutils literal"><span class="pre">$step1.username</span></code>.</p>
<p>So, our final UI definition will look like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">?</span><span class="p p-Indicator">:</span>
     <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>
  <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$.step1.username</span>

<span class="l l-Scalar l-Scalar-Plain">Forms</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">step1</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">fields</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">username</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
          <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Username of the user to say &#39;hello&#39; to</span>
          <span class="l l-Scalar l-Scalar-Plain">required</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</td></tr></table></div>
<p>Save this code into your <code class="docutils literal"><span class="pre">UI/ui.yaml</span></code> file and then re-zip your package
directory and import the resulting archive to Murano Catalog again.</p>
<p>Now, let&#8217;s deploy this application using Murano Dashboard.</p>
<p>Open Murano Dashboard with your browser, navigate to
&#8220;Applications/Catalog/Environments&#8221; panel, click the &#8220;Create Environment&#8221;
button, enter the name for your environment and click &#8220;Create&#8221;. You&#8217;ll be
taken to the contents of your environment: you&#8217;ll see that it is empty, but on
top of the screen there is a list of components you may add to it. If your
Murano Catalog was empty when you started this tutorial, this list will
contain just one item: your &#8220;Hello, World&#8221; application. The screen should look
like this:</p>
<a class="reference internal image-reference" href="../../_images/new-env-1.png"><img alt="../../_images/new-env-1.png" src="../../_images/new-env-1.png" style="width: 100%;" /></a>
<p>Drag-n-drop your &#8220;com.yourdomain.HelloWorld&#8221; application from the list on top
of the screen to the &#8220;Drop components here&#8221; panel beneath it. You&#8217;ll see a
dialog, prompting you to enter a username:</p>
<a class="reference internal image-reference" href="../../_images/configure-step1.png"><img alt="../../_images/configure-step1.png" src="../../_images/configure-step1.png" style="width: 100%;" /></a>
<p>Enter the name and click &#8220;Next&#8221;. Although you&#8217;ve configured just one step of
the wizard, the actual interface will consist of two: the dashboard always adds
a final step to prompt the user to enter the name of the application instance
within the environment:</p>
<a class="reference internal image-reference" href="../../_images/configure-step2.png"><img alt="../../_images/configure-step2.png" src="../../_images/configure-step2.png" style="width: 100%;" /></a>
<p>When you click &#8220;Create&#8221; button an instance of your application will be added to
the environment, you&#8217;ll see it in the list of components:</p>
<a class="reference internal image-reference" href="../../_images/new-env-2.png"><img alt="../../_images/new-env-2.png" src="../../_images/new-env-2.png" style="width: 100%;" /></a>
<p>So, now you may click the &#8220;Deploy this Environment&#8221; button and the application
will greet the user with the name you&#8217;ve entered.</p>
<a class="reference internal image-reference" href="../../_images/new-env-3.png"><img alt="../../_images/new-env-3.png" src="../../_images/new-env-3.png" style="width: 100%;" /></a>
</div>
<div class="section" id="simplifying-code-namespaces">
<h2>Simplifying code: namespaces<a class="headerlink" href="#simplifying-code-namespaces" title="Permalink to this headline">¶</a></h2>
<p>Now that we&#8217;ve learned how to simplify the user&#8217;s life by adding a UI
definition, let&#8217;s simplify the developer&#8217;s life a bit.</p>
<p>When you were working with Murano classes in the previous part you probably
noticed that the long class names with all those domain-name-based segments
were hard to write and that it was easy to make a mistake:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>

<span class="l l-Scalar l-Scalar-Plain">Extends</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">io.murano.Application</span>

<span class="l l-Scalar l-Scalar-Plain">Methods</span><span class="p p-Indicator">:</span>
 <span class="l l-Scalar l-Scalar-Plain">deploy</span><span class="p p-Indicator">:</span>
   <span class="l l-Scalar l-Scalar-Plain">Body</span><span class="p p-Indicator">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$this.find(&#39;io.murano.Environment&#39;).reporter</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter.report($this, &quot;Hello, World!&quot;)</span>
</pre></div>
</td></tr></table></div>
<p>To simplify the code we may use the concept of <cite>namespaces</cite> and <cite>short names</cite>.
All but last segments of a long class name are namespaces, while the last
segment is a short name of a class. In our example <code class="docutils literal"><span class="pre">com.yourdomain</span></code> is a
namespace while the <code class="docutils literal"><span class="pre">HelloWorld</span></code> is a short name.</p>
<p>Short names have to be unique only within their namespace, so they tend to be
expressive, short and human readable, while the namespaces are globally unique
and thus are usually long and too detailed.</p>
<p>Murano provides a capability to abbreviate long namespaces with a short alias.
Unlike namespaces, aliases don&#8217;t need to be globally unique: they have
to be unique only within a single file which uses them. So, they may be very
short. So, in your file you may abbreviate your <code class="docutils literal"><span class="pre">com.yourdomain</span></code> namespace
as <code class="docutils literal"><span class="pre">my</span></code>, and standard Murano&#8217;s <code class="docutils literal"><span class="pre">io.murano</span></code> as <code class="docutils literal"><span class="pre">std</span></code>. Then instead of a
long class name you may write a namespace alias followed by a colon character
and then a short name, e.g. <code class="docutils literal"><span class="pre">my:HelloWorld</span></code> or <code class="docutils literal"><span class="pre">std:Application</span></code>. This
becomes very helpful when you have lots of class names in your code.</p>
<p>To use this feature, declare a special section called <code class="docutils literal"><span class="pre">Namespaces</span></code> in your
class file. Inside that section provide a mapping of namespace aliases to full
namespaces, like this:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Namespaces</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain</span>
  <span class="l l-Scalar l-Scalar-Plain">std</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">io.murano</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since namespaces are often used in all other sections of files it is
considered good practice to declare this section at a very top of your
class file.</p>
</div>
<p>Quite often there is a namespace which is used much more often than others in a
given file. In this case it would be beneficial to declare this namespace as a
<cite>default namespace</cite>. Default namespace does not need a prefix at all: you just
type short name of the class and Murano will interpret it as being in your
default namespace. Use &#8216;=&#8217; character to declare the default namespace in your
namespaces block:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Namespaces</span><span class="p p-Indicator">:</span>
<span class="hll">  <span class="l l-Scalar l-Scalar-Plain">=</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain</span>
</span>  <span class="l l-Scalar l-Scalar-Plain">std</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">io.murano</span>

<span class="hll"><span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HelloWorld</span>
</span>
<span class="l l-Scalar l-Scalar-Plain">Extends</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">std:Application</span>

<span class="l l-Scalar l-Scalar-Plain">Methods</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">deploy</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">Body</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">$this.find(std:Environment).reporter</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$reporter.report($this, &quot;Hello, World!&quot;)</span>
</pre></div>
</td></tr></table></div>
<p>Notice that <code class="docutils literal"><span class="pre">Name</span></code> definition at line 5 uses the default namespace: the
<code class="docutils literal"><span class="pre">HelloWorld</span></code> is not prefixed with any namespaces, but is properly resolved
to <code class="docutils literal"><span class="pre">com.yourdomain.HelloWorld</span></code> because of the default namespace declaration
at line 2. Also, because Murano recognizes the <code class="docutils literal"><span class="pre">ns:Class</span></code> syntax there is
no need to enclose <code class="docutils literal"><span class="pre">std:Environment</span></code> in quote marks, though it will also
work.</p>
</div>
<div class="section" id="adding-more-info-for-the-catalog">
<h2>Adding more info for the catalog<a class="headerlink" href="#adding-more-info-for-the-catalog" title="Permalink to this headline">¶</a></h2>
<p>As you could see while browsing Murano Catalog your application entry in it is
not particularly informative: the user can&#8217;t get any description about your
app, and the long domain-based name is not very user-friendly aither.</p>
<p>This can easily be improved. The <code class="docutils literal"><span class="pre">manifest.yaml</span></code> which we wrote in the first
part contained only mandatory fields. This is how it should look by now:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">FullName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>
<span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="l l-Scalar l-Scalar-Plain">Classes</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HelloWorld.yaml</span>
</pre></div>
</td></tr></table></div>
<p>Let&#8217;s add more fields here.</p>
<p>First, you can add a <code class="docutils literal"><span class="pre">Name</span></code> attribute. Unlike <code class="docutils literal"><span class="pre">FullName</span></code>, it is not a
unique identifier of the package. But, if specified, it overrides the name of
the package that is displayed in the catalog.</p>
<p>Then there is a <code class="docutils literal"><span class="pre">Description</span></code> field. This is a multi-line text attribute,
providing detailed info about your package.</p>
<p>Then an <code class="docutils literal"><span class="pre">Author</span></code> field: here you can put your name or the name of your
company, so it will be displayed in catalog as the name of the package
developer. If this field is omitted, the catalog will consider the package to
be made by &#8220;OpenStack&#8221;, so don&#8217;t forget this field if you care about your
copyright.</p>
<p>When you add these fields your manifest may look like this:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">FullName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span>
<span class="l l-Scalar l-Scalar-Plain">Type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="s">&#39;Hello,</span><span class="nv"> </span><span class="s">World&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">Description</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
   <span class="no">A package which demonstrates</span>
   <span class="no">development for Murano</span>
   <span class="no">by greeting the user.</span>
<span class="l l-Scalar l-Scalar-Plain">Author</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">John Doe</span>
<span class="l l-Scalar l-Scalar-Plain">Classes</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">com.yourdomain.HelloWorld</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HelloWorld.yaml</span>
</pre></div>
</td></tr></table></div>
<p>You may also add an icon to be displayed for your application. To do that just
place a <code class="docutils literal"><span class="pre">logo.png</span></code> file with an appropriate image into the root folder of
your package.</p>
<p>Zip the package directory and re-upload the file to the catalog. Then use
Murano Dashboard and navigate to Applications/Catalog/Browse panel. You&#8217;ll see
that your app gets a logo, a more appropriate name and a description:</p>
<a class="reference internal image-reference" href="../../_images/hello-world-desc.png"><img alt="../../_images/hello-world-desc.png" src="../../_images/hello-world-desc.png" style="width: 50%;" /></a>
<p>So, here we&#8217;ve learned how to improve both the user&#8217;s and developer&#8217;s
experience with developing Murano application packages. That was all we could
do with the oversimplistic &#8220;Hello World&#8221; app. Let&#8217;s move forward and touch
some real-life applications.</p>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Part 2: Customizing your Application Package</a><ul>
<li><a class="reference internal" href="#adding-user-input">Adding user input</a></li>
<li><a class="reference internal" href="#adding-user-interface">Adding user interface</a></li>
<li><a class="reference internal" href="#simplifying-code-namespaces">Simplifying code: namespaces</a></li>
<li><a class="reference internal" href="#adding-more-info-for-the-catalog">Adding more info for the catalog</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="part1.html"
                                  title="previous chapter">Part 1: Creating your first Application Package</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="part3.html"
                                  title="next chapter">Part 3: Creating a Plone CMS application package</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/murano
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/appdev-guide/step-by-step/part2.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="part3.html" title="Part 3: Creating a Plone CMS application package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="part1.html" title="Part 1: Creating your first Application Package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Murano</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../developer_index.html" >Application Developer Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="step_by_step.html" accesskey="U">Developing Murano Packages 101</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright .
      Last updated on &#39;Fri Feb 10 03:18:12 2017, commit fbee404&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Murano");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>