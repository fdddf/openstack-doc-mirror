<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>post-deployment &mdash; tripleo-validations 5.3.1.dev2 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '5.3.1.dev2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="tripleo-validations 5.3.1.dev2 documentation" href="index.html" />
    <link rel="prev" title="pre-deployment" href="validations-pre-deployment-details.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="post-deployment">
<h1>post-deployment<a class="headerlink" href="#post-deployment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="controller-ulimits">
<span id="post-deployment-controller-ulimits"></span><h2>controller-ulimits<a class="headerlink" href="#controller-ulimits" title="Permalink to this headline">¶</a></h2>
<p>Check controller ulimits.</p>
<p>This will check the ulimits of each controller.</p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:<ul>
<li><strong>nofiles_min</strong>: 2048</li>
<li><strong>nproc_min</strong>: 2048</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/controller-ulimits.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="haproxy">
<span id="post-deployment-haproxy"></span><h2>haproxy<a class="headerlink" href="#haproxy" title="Permalink to this headline">¶</a></h2>
<p>HAProxy configuration.</p>
<p>Verify the HAProxy configuration has recommended values.</p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:<ul>
<li><strong>config_file</strong>: /etc/haproxy/haproxy.cfg</li>
<li><strong>defaults_timeout_check</strong>: 10s</li>
<li><strong>global_maxconn_min</strong>: 20480</li>
<li><strong>defaults_timeout_queue</strong>: 1m</li>
<li><strong>defaults_maxconn_min</strong>: 4096</li>
<li><strong>defaults_timeout_server</strong>: 2m</li>
<li><strong>defaults_timeout_client</strong>: 2m</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/haproxy.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="mysql-open-files-limit">
<span id="post-deployment-mysql-open-files-limit"></span><h2>mysql-open-files-limit<a class="headerlink" href="#mysql-open-files-limit" title="Permalink to this headline">¶</a></h2>
<p>MySQL Open Files Limit.</p>
<p>Verify the <cite>open-files-limit</cite> configuration is high enough
<a class="reference external" href="https://access.redhat.com/solutions/1598733">https://access.redhat.com/solutions/1598733</a></p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:<ul>
<li><strong>min_open_files_limit</strong>: 16384</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/mysql-open-files-limit.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="no-op-firewall-nova-driver">
<span id="post-deployment-no-op-firewall-nova-driver"></span><h2>no-op-firewall-nova-driver<a class="headerlink" href="#no-op-firewall-nova-driver" title="Permalink to this headline">¶</a></h2>
<p>Verify NoOpFirewallDriver is set in Nova.</p>
<p>When using Neutron, the <cite>firewall_driver</cite> option in Nova must be set to <cite>NoopFirewallDriver</cite>.</p>
<ul class="simple">
<li><strong>hosts</strong>: compute</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/no-op-firewall-nova-driver.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="ntpstat">
<span id="post-deployment-ntpstat"></span><h2>ntpstat<a class="headerlink" href="#ntpstat" title="Permalink to this headline">¶</a></h2>
<p>Verify all deployed nodes have their clock synchronised..</p>
<p>Each overcloud node should have their clocks synchronised.
The deployment should configure and run ntpd. This validation verifies that it is indeed running and connected to an NPT server on all nodes.</p>
<ul class="simple">
<li><strong>hosts</strong>: overcloud</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/ntpstat.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="openstack-endpoints">
<span id="post-deployment-openstack-endpoints"></span><h2>openstack-endpoints<a class="headerlink" href="#openstack-endpoints" title="Permalink to this headline">¶</a></h2>
<p>Check connectivity to various OpenStack services.</p>
<p>This validation gets the PublicVip address from the deployment and tries to access Horizon and get a Keystone token.</p>
<ul class="simple">
<li><strong>hosts</strong>: undercloud</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/openstack-endpoints.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="pacemaker-status">
<span id="post-deployment-pacemaker-status"></span><h2>pacemaker-status<a class="headerlink" href="#pacemaker-status" title="Permalink to this headline">¶</a></h2>
<p>Check the status of the pacemaker cluster.</p>
<p>This runs <cite>pcs status</cite> and checks for any failed actions.
A failed status post-deployment indicates something is not configured correctly. This should also be run before upgrade as the process will likely fail with a cluster that&#8217;s not completely healthy.</p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/pacemaker-status.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="rabbitmq-limits">
<span id="post-deployment-rabbitmq-limits"></span><h2>rabbitmq-limits<a class="headerlink" href="#rabbitmq-limits" title="Permalink to this headline">¶</a></h2>
<p>Rabbitmq limits.</p>
<p>Make sure the rabbitmq file descriptor limits are set to reasonable values.</p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:<ul>
<li><strong>min_fd_limit</strong>: 16384</li>
</ul>
</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/rabbitmq-limits.yaml">View validation source code</a>.</p>
</div>
<div class="section" id="stonith-exists">
<span id="post-deployment-stonith-exists"></span><h2>stonith-exists<a class="headerlink" href="#stonith-exists" title="Permalink to this headline">¶</a></h2>
<p>stonith-exists.</p>
<p>Verify that stonith devices are configured for your OpenStack Platform HA cluster. We don&#8217;t configure stonith device with TripleO Installer. Because the hardware configuration may be differ in each environment and requires different fence agents. How to configure fencing please read <a class="reference external" href="https://access.redhat.com/documentation/en/red-hat-openstack-platform/8/paged/director-installation-and-usage/86-fencing-the-controller-nodes">https://access.redhat.com/documentation/en/red-hat-openstack-platform/8/paged/director-installation-and-usage/86-fencing-the-controller-nodes</a></p>
<ul class="simple">
<li><strong>hosts</strong>: controller</li>
<li><strong>groups</strong>: post-deployment</li>
<li><strong>metadata</strong>:</li>
<li><strong>parameters</strong>:</li>
</ul>
<p><a class="reference external" href="http://git.openstack.org/cgit/openstack/tripleo-validations/plain/validations/stonith-exists.yaml">View validation source code</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">post-deployment</a><ul>
<li><a class="reference internal" href="#controller-ulimits">controller-ulimits</a></li>
<li><a class="reference internal" href="#haproxy">haproxy</a></li>
<li><a class="reference internal" href="#mysql-open-files-limit">mysql-open-files-limit</a></li>
<li><a class="reference internal" href="#no-op-firewall-nova-driver">no-op-firewall-nova-driver</a></li>
<li><a class="reference internal" href="#ntpstat">ntpstat</a></li>
<li><a class="reference internal" href="#openstack-endpoints">openstack-endpoints</a></li>
<li><a class="reference internal" href="#pacemaker-status">pacemaker-status</a></li>
<li><a class="reference internal" href="#rabbitmq-limits">rabbitmq-limits</a></li>
<li><a class="reference internal" href="#stonith-exists">stonith-exists</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="validations-pre-deployment-details.html"
                                  title="previous chapter">pre-deployment</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/tripleo-validations
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/validations-post-deployment-details.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="validations-pre-deployment-details.html" title="pre-deployment"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">tripleo-validations 5.3.1.dev2 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/tripleo-validations");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>