<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Secrets API - Reference &mdash; barbican 4.0.0.0rc2.dev3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.0.0.0rc2.dev3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="barbican 4.0.0.0rc2.dev3 documentation" href="../../index.html" />
    <link rel="up" title="Barbican API Documentation" href="../index.html" />
    <link rel="next" title="Secret Types - Reference" href="secret_types.html" />
    <link rel="prev" title="Barbican API Documentation" href="../index.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="secrets-api-reference">
<h1>Secrets API - Reference<a class="headerlink" href="#secrets-api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-v1-secrets">
<h2>GET /v1/secrets<a class="headerlink" href="#get-v1-secrets" title="Permalink to this headline">¶</a></h2>
<p>Lists a project&#8217;s secrets.</p>
<p>The list of secrets can be filtered by the parameters passed in via the URL.</p>
<p>The actual secret payload data will not be listed here. Clients must instead
make a separate call to retrieve the secret payload data for each individual
secret.</p>
<div class="section" id="parameters">
<span id="secret-parameters"></span><h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="10%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>offset</td>
<td>integer</td>
<td>The starting index within the total list of the secrets that
you would like to retrieve.</td>
</tr>
<tr class="row-odd"><td>limit</td>
<td>integer</td>
<td>The maximum number of records to return (up to 100). The
default limit is 10.</td>
</tr>
<tr class="row-even"><td>name</td>
<td>string</td>
<td>Selects all secrets with name similar to this value.</td>
</tr>
<tr class="row-odd"><td>alg</td>
<td>string</td>
<td>Selects all secrets with algorithm similar to this value.</td>
</tr>
<tr class="row-even"><td>mode</td>
<td>string</td>
<td>Selects all secrets with mode similar to this value.</td>
</tr>
<tr class="row-odd"><td>bits</td>
<td>integer</td>
<td>Selects all secrets with bit_length equal to this value.</td>
</tr>
<tr class="row-even"><td>secret_type</td>
<td>string</td>
<td>Selects all secrets with secret_type equal to this value.</td>
</tr>
<tr class="row-odd"><td>acl_only</td>
<td>boolean</td>
<td>Selects all secrets with an ACL that contains the user.
Project scope is ignored.</td>
</tr>
<tr class="row-even"><td>created</td>
<td>string</td>
<td>Date filter to select all secrets with <cite>created</cite> matching the
specified criteria.  See Date Filters below for more detail.</td>
</tr>
<tr class="row-odd"><td>updated</td>
<td>string</td>
<td>Date filter to select all secrets with <cite>updated</cite> matching the
specified criteria. See Date Filters below for more detail.</td>
</tr>
<tr class="row-even"><td>expiration</td>
<td>string</td>
<td>Date filter to select all secrets with <cite>expiration</cite> matching
the specified criteria. See Date Filters below for more detail.</td>
</tr>
<tr class="row-odd"><td>sort</td>
<td>string</td>
<td>Determines the sorted order of the returned list.  See Sorting
below for more detail.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="date-filters">
<h3>Date Filters:<a class="headerlink" href="#date-filters" title="Permalink to this headline">¶</a></h3>
<p>The values for the <code class="docutils literal"><span class="pre">created</span></code>, <code class="docutils literal"><span class="pre">updated</span></code>, and <code class="docutils literal"><span class="pre">expiration</span></code> parameters are
comma-separated lists of time stamps in ISO 8601 format.  The time stamps can
be prefixed with any of these comparison operators: <code class="docutils literal"><span class="pre">gt:</span></code> (greater-than),
<code class="docutils literal"><span class="pre">gte:</span></code> (greater-than-or-equal), <code class="docutils literal"><span class="pre">lt:</span></code> (less-than), <code class="docutils literal"><span class="pre">lte:</span></code> (less-than-or-equal).</p>
<p>For example, to get a list of secrets that will expire in January of 2020:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GET /v1/secrets?expiration=gte:2020-01-01T00:00:00,lt:2020-02-01T00:00:00
</pre></div>
</div>
</div>
<div class="section" id="sorting">
<h3>Sorting:<a class="headerlink" href="#sorting" title="Permalink to this headline">¶</a></h3>
<p>The value of the <code class="docutils literal"><span class="pre">sort</span></code> parameter is a comma-separated list of sort keys.
Supported sort keys include <code class="docutils literal"><span class="pre">created</span></code>, <code class="docutils literal"><span class="pre">expiration</span></code>, <code class="docutils literal"><span class="pre">mode</span></code>, <code class="docutils literal"><span class="pre">name</span></code>,
<code class="docutils literal"><span class="pre">secret_type</span></code>, <code class="docutils literal"><span class="pre">status</span></code>, and <code class="docutils literal"><span class="pre">updated</span></code>.</p>
<p>Each sort key may also include a direction.  Supported directions
are <code class="docutils literal"><span class="pre">:asc</span></code> for ascending and <code class="docutils literal"><span class="pre">:desc</span></code> for descending.  The service will
use <code class="docutils literal"><span class="pre">:asc</span></code> for every key that does not include a direction.</p>
<p>For example, to sort the list from most recently created to oldest:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GET /v1/secrets?sort=created:desc
</pre></div>
</div>
</div>
<div class="section" id="request">
<h3>Request:<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">?</span><span class="nx">offset</span><span class="o">=</span><span class="mi">1</span><span class="o">&amp;</span><span class="nx">limit</span><span class="o">=</span><span class="mi">2</span><span class="o">&amp;</span><span class="nx">sort</span><span class="o">=</span><span class="nx">created</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Accept</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">keystone_token</span><span class="p">}</span>
    <span class="p">(</span><span class="nx">or</span> <span class="nx">X</span><span class="o">-</span><span class="nx">Project</span><span class="o">-</span><span class="nx">Id</span><span class="o">:</span> <span class="p">{</span><span class="nx">project</span> <span class="nx">id</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="response">
<h3>Response:<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;next&quot;</span><span class="o">:</span> <span class="s2">&quot;http://{barbican_host}:9311/v1/secrets?limit=2&amp;offset=3&quot;</span><span class="p">,</span>
    <span class="s2">&quot;previous&quot;</span><span class="o">:</span> <span class="s2">&quot;http://{barbican_host}:9311/v1/secrets?limit=2&amp;offset=0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;secrets&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;algorithm&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;bit_length&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;content_types&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="s2">&quot;application/octet-stream&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-04-07T03:37:19.805835&quot;</span><span class="p">,</span>
            <span class="s2">&quot;creator_id&quot;</span><span class="o">:</span> <span class="s2">&quot;3a7e3d2421384f56a8fb6cf082a8efab&quot;</span><span class="p">,</span>
            <span class="s2">&quot;expiration&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;opaque octet-stream base64&quot;</span><span class="p">,</span>
            <span class="s2">&quot;secret_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;http://{barbican_host}:9311/v1/secrets/{uuid}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;secret_type&quot;</span><span class="o">:</span> <span class="s2">&quot;opaque&quot;</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;ACTIVE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-04-07T03:37:19.808337&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;algorithm&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;bit_length&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;content_types&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="s2">&quot;application/octet-stream&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-04-07T03:41:02.184159&quot;</span><span class="p">,</span>
            <span class="s2">&quot;creator_id&quot;</span><span class="o">:</span> <span class="s2">&quot;3a7e3d2421384f56a8fb6cf082a8efab&quot;</span><span class="p">,</span>
            <span class="s2">&quot;expiration&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;opaque random octet-stream base64&quot;</span><span class="p">,</span>
            <span class="s2">&quot;secret_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;http://{barbican_host}:9311/v1/secrets/{uuid}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;secret_type&quot;</span><span class="o">:</span> <span class="s2">&quot;opaque&quot;</span><span class="p">,</span>
            <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;ACTIVE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-04-07T03:41:02.187823&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mi">5</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="response-attributes">
<span id="secret-response-attributes"></span><h3>Response Attributes<a class="headerlink" href="#response-attributes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="11%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>secrets</td>
<td>list</td>
<td>Contains a list of secrets.  The attributes in the secret
objects are the same as for an individual secret.</td>
</tr>
<tr class="row-odd"><td>total</td>
<td>integer</td>
<td>The total number of secrets available to the user.</td>
</tr>
<tr class="row-even"><td>next</td>
<td>string</td>
<td>A HATEOAS URL to retrieve the next set of secrets based on
the offset and limit parameters. This attribute is only
available when the total number of secrets is greater than
offset and limit parameter combined.</td>
</tr>
<tr class="row-odd"><td>previous</td>
<td>string</td>
<td>A HATEOAS URL to retrieve the previous set of secrets based
on the offset and limit parameters. This attribute is only
available when the request offset is greater than 0.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="http-status-codes">
<span id="secret-status-codes"></span><h3>HTTP Status Codes<a class="headerlink" href="#http-status-codes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successful Request</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="post-v1-secrets">
<span id="post-secrets"></span><h2>POST /v1/secrets<a class="headerlink" href="#post-v1-secrets" title="Permalink to this headline">¶</a></h2>
<p>Creates a Secret entity.  If the <code class="docutils literal"><span class="pre">payload</span></code> attribute is not included in the
request, then only the metadata for the secret is created, and a
subsequent PUT request is required.</p>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="9%" />
<col width="52%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>string</td>
<td>(optional) The name of the secret set by the
user.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>expiration</td>
<td>string</td>
<td>(optional) This is a UTC timestamp in ISO
8601 format <code class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SSZ</span></code>.  If
set, the secret will not be available after
this time.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>algorithm</td>
<td>string</td>
<td>(optional) Metadata provided by a user or
system for informational purposes.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>bit_length</td>
<td>integer</td>
<td>(optional) Metadata provided by a user or
system for informational purposes. Value
must be greater than zero.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>mode</td>
<td>string</td>
<td>(optional) Metadata provided by a user or
system for informational purposes.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>payload</td>
<td>string</td>
<td>(optional) The secret&#8217;s data to be stored.
<code class="docutils literal"><span class="pre">payload_content_type</span></code> must also be
supplied if payload is included.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>payload_content_type</td>
<td>string</td>
<td>(optional) (required if payload is included)
The media type for the content of the
payload.  For more information see
<a class="reference internal" href="secret_types.html"><em>Secret Types</em></a></td>
<td>None</td>
</tr>
<tr class="row-odd"><td>payload_content_encoding</td>
<td>string</td>
<td>(optional) (required if payload is encoded)
The encoding used for the payload to be able
to include it in the JSON request.
Currently only <code class="docutils literal"><span class="pre">base64</span></code> is supported.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>secret_type</td>
<td>string</td>
<td>(optional) Used to indicate the type of
secret being stored.  For more information
see <a class="reference internal" href="secret_types.html"><em>Secret Types</em></a></td>
<td><code class="docutils literal"><span class="pre">opaque</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h3>Request:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">token</span><span class="o">&gt;</span>

<span class="nx">Content</span><span class="o">:</span>
<span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;AES key&quot;</span><span class="p">,</span>
    <span class="s2">&quot;expiration&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-12-28T19:14:44.180394&quot;</span><span class="p">,</span>
    <span class="s2">&quot;algorithm&quot;</span><span class="o">:</span> <span class="s2">&quot;aes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bit_length&quot;</span><span class="o">:</span> <span class="mi">256</span><span class="p">,</span>
    <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="s2">&quot;cbc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;payload&quot;</span><span class="o">:</span> <span class="s2">&quot;YmVlcg==&quot;</span><span class="p">,</span>
    <span class="s2">&quot;payload_content_type&quot;</span><span class="o">:</span> <span class="s2">&quot;application/octet-stream&quot;</span><span class="p">,</span>
    <span class="s2">&quot;payload_content_encoding&quot;</span><span class="o">:</span> <span class="s2">&quot;base64&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Response:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">201</span> <span class="nx">Created</span>

<span class="p">{</span>
    <span class="s2">&quot;secret_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/secrets/{secret_uuid}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>HTTP Status Codes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>201</td>
<td>Successfully created a Secret</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>Bad Request</td>
</tr>
<tr class="row-even"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
<tr class="row-odd"><td>403</td>
<td>Forbidden.  The user has been authenticated, but is not authorized to
create a secret. This can be based on the user&#8217;s role or the
project&#8217;s quota.</td>
</tr>
<tr class="row-even"><td>415</td>
<td>Unsupported media-type</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="get-v1-secrets-uuid">
<h2>GET /v1/secrets/{uuid}<a class="headerlink" href="#get-v1-secrets-uuid" title="Permalink to this headline">¶</a></h2>
<p>Retrieves a secret&#8217;s metadata.</p>
<div class="section" id="id4">
<h3>Request:<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Accept</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token</span><span class="p">}</span>
    <span class="p">(</span><span class="nx">or</span> <span class="nx">X</span><span class="o">-</span><span class="nx">Project</span><span class="o">-</span><span class="nx">Id</span><span class="o">:</span> <span class="p">{</span><span class="nx">project_id</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Response:<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="nx">OK</span>

<span class="p">{</span>
    <span class="s2">&quot;status&quot;</span><span class="o">:</span> <span class="s2">&quot;ACTIVE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-03-23T20:46:51.650515&quot;</span><span class="p">,</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-03-23T20:46:51.654116&quot;</span><span class="p">,</span>
    <span class="s2">&quot;expiration&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-12-28T19:14:44.180394&quot;</span><span class="p">,</span>
    <span class="s2">&quot;algorithm&quot;</span><span class="o">:</span> <span class="s2">&quot;aes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bit_length&quot;</span><span class="o">:</span> <span class="mi">256</span><span class="p">,</span>
    <span class="s2">&quot;mode&quot;</span><span class="o">:</span> <span class="s2">&quot;cbc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;AES key&quot;</span><span class="p">,</span>
    <span class="s2">&quot;secret_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/secrets/{secret_uuid}&quot;</span><span class="p">,</span>
    <span class="s2">&quot;secret_type&quot;</span><span class="o">:</span> <span class="s2">&quot;opaque&quot;</span><span class="p">,</span>
    <span class="s2">&quot;content_types&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="s2">&quot;application/octet-stream&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="payload-request">
<h3>Payload Request:<a class="headerlink" href="#payload-request" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">DEPRECATION WARNING: Previous releases of the API allowed the payload to be
retrieved from this same endpoint by changing the Accept header to be one
of the values listed in the <code class="docutils literal"><span class="pre">content_types</span></code> attribute of the Secret
metadata.  This was found to be problematic in some situations, so new
applications should make use of the <a class="reference internal" href="#secret-payload"><span>/v1/secrets/{uuid}/payload</span></a>
endpoint instead.</p>
</div>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Accept</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">octet</span><span class="o">-</span><span class="nx">stream</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">token</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="payload-response">
<h3>Payload Response:<a class="headerlink" href="#payload-response" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="nx">OK</span>

<span class="nx">beer</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>HTTP Status Codes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successful request</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Not Found</td>
</tr>
<tr class="row-odd"><td>406</td>
<td>Not Acceptable</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="put-v1-secrets-uuid">
<span id="put-secrets"></span><h2>PUT /v1/secrets/{uuid}<a class="headerlink" href="#put-v1-secrets-uuid" title="Permalink to this headline">¶</a></h2>
<p>Add the payload to an existing metadata-only secret, such as one made by
sending a POST /v1/secrets request that does not include the <code class="docutils literal"><span class="pre">payload</span></code>
attribute.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This action can only be done for a secret that doesn&#8217;t have a payload.</p>
</div>
<div class="section" id="headers">
<h3>Headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="66%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Content-Type</td>
<td>Corresponds with the payload_content_type
attribute of a normal secret creation request.</td>
<td>text/plain</td>
</tr>
<tr class="row-odd"><td>Content-Encoding</td>
<td>(optional) Corresponds with the payload_content_encoding
attribute of a normal secret creation request.</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h3>Request:<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">token</span><span class="o">&gt;</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">octet</span><span class="o">-</span><span class="nx">stream</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Encoding</span><span class="o">:</span> <span class="nx">base64</span>

<span class="nx">Content</span><span class="o">:</span>
<span class="nx">YmxhaA</span><span class="o">==</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>Response:<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">204</span> <span class="nx">No</span> <span class="nx">Content</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h3>HTTP Status Codes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>204</td>
<td>Successful request</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Not Found</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="delete-v1-secrets-uuid">
<span id="delete-secrets"></span><h2>DELETE /v1/secrets/{uuid}<a class="headerlink" href="#delete-v1-secrets-uuid" title="Permalink to this headline">¶</a></h2>
<p>Delete a secret by uuid</p>
<div class="section" id="id10">
<h3>Request:<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">token</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>Response:<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">204</span> <span class="nx">No</span> <span class="nx">Content</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3>HTTP Status Codes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>204</td>
<td>Successful request</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Not Found</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="get-v1-secrets-uuid-payload">
<span id="secret-payload"></span><h2>GET /v1/secrets/{uuid}/payload<a class="headerlink" href="#get-v1-secrets-uuid-payload" title="Permalink to this headline">¶</a></h2>
<p>Retrieve a secret&#8217;s payload</p>
<div class="section" id="accept-header-options">
<h3>Accept Header Options:<a class="headerlink" href="#accept-header-options" title="Permalink to this headline">¶</a></h3>
<p>When making a request for a secret&#8217;s payload, you must set the accept header
to one of the values listed in the <code class="docutils literal"><span class="pre">content_types</span></code> attribute of a secret&#8217;s
metadata.</p>
</div>
<div class="section" id="id13">
<h3>Request:<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">payload</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Accept</span><span class="o">:</span> <span class="nx">text</span><span class="o">/</span><span class="nx">plain</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">token</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h3>Response:<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="mi">200</span> <span class="nx">OK</span>

<span class="nx">beer</span>
</pre></div>
</div>
</div>
<div class="section" id="id15">
<h3>HTTP Status Codes<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successful request</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Invalid X-Auth-Token or the token doesn&#8217;t have permissions to this resource</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Not Found</td>
</tr>
<tr class="row-odd"><td>406</td>
<td>Not Acceptable</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Secrets API - Reference</a><ul>
<li><a class="reference internal" href="#get-v1-secrets">GET /v1/secrets</a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#date-filters">Date Filters:</a></li>
<li><a class="reference internal" href="#sorting">Sorting:</a></li>
<li><a class="reference internal" href="#request">Request:</a></li>
<li><a class="reference internal" href="#response">Response:</a></li>
<li><a class="reference internal" href="#response-attributes">Response Attributes</a></li>
<li><a class="reference internal" href="#http-status-codes">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#post-v1-secrets">POST /v1/secrets</a><ul>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#id1">Request:</a></li>
<li><a class="reference internal" href="#id2">Response:</a></li>
<li><a class="reference internal" href="#id3">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-v1-secrets-uuid">GET /v1/secrets/{uuid}</a><ul>
<li><a class="reference internal" href="#id4">Request:</a></li>
<li><a class="reference internal" href="#id5">Response:</a></li>
<li><a class="reference internal" href="#payload-request">Payload Request:</a></li>
<li><a class="reference internal" href="#payload-response">Payload Response:</a></li>
<li><a class="reference internal" href="#id6">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#put-v1-secrets-uuid">PUT /v1/secrets/{uuid}</a><ul>
<li><a class="reference internal" href="#headers">Headers</a></li>
<li><a class="reference internal" href="#id7">Request:</a></li>
<li><a class="reference internal" href="#id8">Response:</a></li>
<li><a class="reference internal" href="#id9">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delete-v1-secrets-uuid">DELETE /v1/secrets/{uuid}</a><ul>
<li><a class="reference internal" href="#id10">Request:</a></li>
<li><a class="reference internal" href="#id11">Response:</a></li>
<li><a class="reference internal" href="#id12">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-v1-secrets-uuid-payload">GET /v1/secrets/{uuid}/payload</a><ul>
<li><a class="reference internal" href="#accept-header-options">Accept Header Options:</a></li>
<li><a class="reference internal" href="#id13">Request:</a></li>
<li><a class="reference internal" href="#id14">Response:</a></li>
<li><a class="reference internal" href="#id15">HTTP Status Codes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../index.html"
                                  title="previous chapter">Barbican API Documentation</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="secret_types.html"
                                  title="next chapter">Secret Types - Reference</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/barbican
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/api/reference/secrets.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="secret_types.html" title="Secret Types - Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Barbican API Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">barbican 4.0.0.0rc2.dev3 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Barbican API Documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/barbican");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>