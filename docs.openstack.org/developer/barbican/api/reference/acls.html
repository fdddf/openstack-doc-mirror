<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ACL API - Reference &mdash; barbican 4.0.0.0rc2.dev3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.0.0.0rc2.dev3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="barbican 4.0.0.0rc2.dev3 documentation" href="../../index.html" />
    <link rel="up" title="Barbican API Documentation" href="../index.html" />
    <link rel="next" title="Certificates API - Reference" href="certificates.html" />
    <link rel="prev" title="Containers API - Reference" href="containers.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="acl-api-reference">
<h1>ACL API - Reference<a class="headerlink" href="#acl-api-reference" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is applicable only when Barbican is used in an authenticated
pipeline i.e. integrated with Keystone.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently the access control list (ACL) settings defined for a container
are not propagated down to associated secrets.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This ACL documentation is work in progress and may change in near future.</p>
</div>
<div class="section" id="secret-acl-api">
<h2>Secret ACL API<a class="headerlink" href="#secret-acl-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-v1-secrets-uuid-acl">
<span id="get-secret-acl"></span><h3>GET /v1/secrets/{uuid}/acl<a class="headerlink" href="#get-v1-secrets-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Retrieve the ACL settings for a given secret.</p>
<p>If no ACL is defined for that secret, then
<a class="reference external" href="http://developer.openstack.org/api-guide/key-manager/acls.html#default-acl">Default ACL</a>
is returned.</p>
<div class="section" id="request-response-with-acl-defined">
<h4>Request/Response (With ACL defined):<a class="headerlink" href="#request-response-with-acl-defined" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">Request</span><span class="o">:</span>

<span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>

<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span><span class="s2">&quot;2015-05-12T20:08:47.644264&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span><span class="s2">&quot;2015-05-12T19:23:44.019168&quot;</span><span class="p">,</span>
    <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="nx">user_id1</span><span class="p">},</span>
      <span class="p">{</span><span class="nx">user_id2</span><span class="p">},</span>
      <span class="p">.....</span>
    <span class="p">],</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">project</span><span class="o">-</span><span class="nx">access</span><span class="o">-</span><span class="nx">flag</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-response-with-no-acl-defined">
<h4>Request/Response (With no ACL defined):<a class="headerlink" href="#request-response-with-no-acl-defined" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">Request</span><span class="o">:</span>

<span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>

<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="http-status-codes">
<h4>HTTP Status Codes<a class="headerlink" href="#http-status-codes" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successful request.</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-even"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-odd"><td>404</td>
<td>Secret not found for the given UUID.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="put-v1-secrets-uuid-acl">
<span id="put-secret-acl"></span><h3>PUT /v1/secrets/{uuid}/acl<a class="headerlink" href="#put-v1-secrets-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Create new or replaces existing ACL for a given secret.</p>
<p>This call is used to add new ACL for a secret. If the ACL is already set on a secret, this
method will replace it with the requested ACL settings. In case of create (first new explicit
ACL) or replace existing ACL, 200 is returned in both cases. To delete existing users from
an ACL definition, pass empty list [] for <cite>users</cite>.</p>
<p>Returns an ACL reference in success case.</p>
<div class="section" id="attributes">
<h4>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h4>
<p>The ACL resource detailed in this page allows access to individual secrets to be controlled.
This access is configured via operations on those secrets. Currently only the &#8216;read&#8217; operation
(which includes GET REST actions) is supported.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="11%" />
<col width="49%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>read</td>
<td>parent
element</td>
<td>ACL data for read operation.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>users</td>
<td>[string]</td>
<td>(optional) List of user ids. This needs to be
a user id as returned by Keystone.</td>
<td>[]</td>
</tr>
<tr class="row-even"><td>project-access</td>
<td>boolean</td>
<td>(optional) Flag to mark a secret private so
that the user who created the secret and
<code class="docutils literal"><span class="pre">users</span></code> specified in above list can only
access the secret. Pass <cite>false</cite> to mark the
secret private.</td>
<td><cite>true</cite></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="request-response-set-or-replace-acl">
<h4>Request/Response (Set or Replace ACL):<a class="headerlink" href="#request-response-set-or-replace-acl" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">Request</span><span class="o">:</span>

<span class="nx">PUT</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="nx">user_id1</span><span class="p">},</span>
      <span class="p">{</span><span class="nx">user_id2</span><span class="p">},</span>
      <span class="p">.....</span>
    <span class="p">],</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">project</span><span class="o">-</span><span class="nx">access</span><span class="o">-</span><span class="nx">flag</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>

<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/secrets/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>HTTP Status Codes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully set/replaced secret ACL.</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>Bad Request.</td>
</tr>
<tr class="row-even"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-odd"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Secret not found for the given UUID.</td>
</tr>
<tr class="row-odd"><td>415</td>
<td>Unsupported Media Type.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="patch-v1-secrets-uuid-acl">
<span id="patch-secret-acl"></span><h3>PATCH /v1/secrets/{uuid}/acl<a class="headerlink" href="#patch-v1-secrets-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Updates existing ACL for a given secret. This method can be used to apply partial changes on
existing ACL settings. Client can update the <cite>users</cite> list and enable or disable <cite>project-access</cite>
flag for existing ACL. List of provided users replaces existing users if any. For an existing
list of provided users from an ACL definition, pass empty list [] for <cite>users</cite>.</p>
<p>Returns an ACL reference in success case.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PATCH API support will be changing in near future.</p>
</div>
<div class="section" id="id2">
<h4>Attributes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="11%" />
<col width="49%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>read</td>
<td>parent
element</td>
<td>ACL data for read operation.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>users</td>
<td>[string]</td>
<td>(optional) List of user ids. This needs to be
a user id as returned by Keystone.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>project-access</td>
<td>boolean</td>
<td>(optional) Flag to mark a secret private so
that the user who created the secret and
<code class="docutils literal"><span class="pre">users</span></code> specified in above list can only
access the secret. Pass <cite>false</cite> to mark the
secret private.</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="request-response-updating-project-access-flag">
<h4>Request/Response (Updating project-access flag):<a class="headerlink" href="#request-response-updating-project-access-flag" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PATCH</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="kc">false</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/secrets/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="request-response-removing-all-users-from-acl">
<h4>Request/Response (Removing all users from ACL):<a class="headerlink" href="#request-response-removing-all-users-from-acl" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PATCH</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/secrets/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>HTTP Status Codes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully updated secret ACL.</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>Bad Request.</td>
</tr>
<tr class="row-even"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-odd"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Secret not found for the given UUID.</td>
</tr>
<tr class="row-odd"><td>415</td>
<td>Unsupported Media Type.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="delete-v1-secrets-uuid-acl">
<span id="delete-secret-acl"></span><h3>DELETE /v1/secrets/{uuid}/acl<a class="headerlink" href="#delete-v1-secrets-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Delete ACL for a given secret. No content is returned in the case of successful
deletion.</p>
<div class="section" id="request-response">
<h4>Request/Response:<a class="headerlink" href="#request-response" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">secrets</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h4>HTTP Status Codes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully deleted secret ACL.</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-even"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-odd"><td>404</td>
<td>Secret not found for the given UUID.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="container-acl-api">
<h2>Container ACL API<a class="headerlink" href="#container-acl-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-v1-containers-uuid-acl">
<span id="get-container-acl"></span><h3>GET /v1/containers/{uuid}/acl<a class="headerlink" href="#get-v1-containers-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Retrieve the ACL settings for a given container.</p>
<p>If no ACL is defined for that container, then
<a class="reference external" href="http://developer.openstack.org/api-guide/key-manager/acls.html#default-acl">Default ACL</a>
is returned.</p>
<div class="section" id="id5">
<h4>Request/Response (With ACL defined):<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">Request</span><span class="o">:</span>

<span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>

<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;updated&quot;</span><span class="o">:</span><span class="s2">&quot;2015-05-12T20:08:47.644264&quot;</span><span class="p">,</span>
    <span class="s2">&quot;created&quot;</span><span class="o">:</span><span class="s2">&quot;2015-05-12T19:23:44.019168&quot;</span><span class="p">,</span>
    <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="nx">user_id1</span><span class="p">},</span>
      <span class="p">{</span><span class="nx">user_id2</span><span class="p">},</span>
      <span class="p">.....</span>
    <span class="p">],</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">project</span><span class="o">-</span><span class="nx">access</span><span class="o">-</span><span class="nx">flag</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h4>Request/Response (With no ACL defined):<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">Request</span><span class="o">:</span>

<span class="nx">GET</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>

<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h4>HTTP Status Codes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successful request.</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-even"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-odd"><td>404</td>
<td>Container not found for the given UUID.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="put-v1-containers-uuid-acl">
<span id="put-container-acl"></span><h3>PUT /v1/containers/{uuid}/acl<a class="headerlink" href="#put-v1-containers-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Create new or replaces existing ACL for a given container.</p>
<p>This call is used to add new ACL for an container. If the ACL is already set on a container,
this method will replace it with the requested ACL settings. In case of create (first new explicit
ACL) or replace existing ACL, 200 is returned in both cases. To delete existing users from
an ACL definition, pass empty list [] for <cite>users</cite>.</p>
<p>Returns an ACL reference in success case.</p>
<div class="section" id="id8">
<h4>Attributes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>The ACL resource detailed in this page allows access to individual containers to be controlled.
This access is configured via operations on those containers. Currently only the &#8216;read&#8217; operation
(which includes GET REST actions) is supported.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="11%" />
<col width="49%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>read</td>
<td>parent
element</td>
<td>ACL data for read operation.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>users</td>
<td>[string]</td>
<td>(optional) List of user ids. This needs to be
a user id as returned by Keystone.</td>
<td>[]</td>
</tr>
<tr class="row-even"><td>project-access</td>
<td>boolean</td>
<td>(optional) Flag to mark a container private
so that the user who created the container and
<code class="docutils literal"><span class="pre">users</span></code> specified in above list can only
access the container. Pass <cite>false</cite> to mark the
container private.</td>
<td><cite>true</cite></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h4>Request/Response (Set or Replace ACL):<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[</span>
      <span class="p">{</span><span class="nx">user_id1</span><span class="p">},</span>
      <span class="p">{</span><span class="nx">user_id2</span><span class="p">},</span>
      <span class="p">.....</span>
    <span class="p">],</span>
    <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="p">{</span><span class="nx">project</span><span class="o">-</span><span class="nx">access</span><span class="o">-</span><span class="nx">flag</span><span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/containers/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h4>HTTP Status Codes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully set/replaced  container ACL.</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>Bad Request.</td>
</tr>
<tr class="row-even"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-odd"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Container not found for the given UUID.</td>
</tr>
<tr class="row-odd"><td>415</td>
<td>Unsupported Media Type.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="patch-v1-containers-uuid-acl">
<span id="patch-container-acl"></span><h3>PATCH /v1/containers/{uuid}/acl<a class="headerlink" href="#patch-v1-containers-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Update existing ACL for a given container. This method can be used to apply partial changes
on existing ACL settings. Client can update <cite>users</cite> list and enable or disable <cite>project-access</cite>
flag for existing ACL. List of provided users replaces existing users if any. For an existing
list of provided users from an ACL definition, pass empty list [] for <cite>users</cite>.</p>
<p>Returns an ACL reference in success case.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">PATCH API support will be changing in near future.</p>
</div>
<div class="section" id="id11">
<h4>Attributes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="11%" />
<col width="49%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Type</th>
<th class="head">Description</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>read</td>
<td>parent
element</td>
<td>ACL data for read operation.</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>users</td>
<td>[string]</td>
<td>(optional) List of user ids. This needs to be
a user id as returned by Keystone.</td>
<td>None</td>
</tr>
<tr class="row-even"><td>project-access</td>
<td>boolean</td>
<td>(optional) Flag to mark a container private
so that the user who created the container and
<code class="docutils literal"><span class="pre">users</span></code> specified in above list can only
access the container. Pass <cite>false</cite> to mark the
container private.</td>
<td>None</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id12">
<h4>Request/Response (Updating project-access flag):<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PATCH</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;project-access&quot;</span><span class="o">:</span><span class="kc">false</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/containers/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h4>Request/Response (Removing all users from ACL):<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">PATCH</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">application</span><span class="o">/</span><span class="nx">json</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Body</span><span class="o">:</span>
<span class="p">{</span>
  <span class="s2">&quot;read&quot;</span><span class="o">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;users&quot;</span><span class="o">:</span><span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
<span class="p">{</span><span class="s2">&quot;acl_ref&quot;</span><span class="o">:</span> <span class="s2">&quot;https://{barbican_host}/v1/containers/{uuid}/acl&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h4>HTTP Status Codes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully updated container ACL.</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>Bad Request.</td>
</tr>
<tr class="row-even"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-odd"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-even"><td>404</td>
<td>Container not found for the given UUID.</td>
</tr>
<tr class="row-odd"><td>415</td>
<td>Unsupported Media Type.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="delete-v1-containers-uuid-acl">
<span id="delete-container-acl"></span><h3>DELETE /v1/containers/{uuid}/acl<a class="headerlink" href="#delete-v1-containers-uuid-acl" title="Permalink to this headline">¶</a></h3>
<p>Delete ACL for a given container. No content is returned in the case of successful
deletion.</p>
<div class="section" id="id15">
<h4>Request/Response:<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="o">/</span><span class="nx">v1</span><span class="o">/</span><span class="nx">containers</span><span class="o">/</span><span class="p">{</span><span class="nx">uuid</span><span class="p">}</span><span class="o">/</span><span class="nx">acl</span>
<span class="nx">Headers</span><span class="o">:</span>
    <span class="nx">X</span><span class="o">-</span><span class="nx">Auth</span><span class="o">-</span><span class="nx">Token</span><span class="o">:</span> <span class="p">{</span><span class="nx">token_id</span><span class="p">}</span>

<span class="nx">Response</span><span class="o">:</span>
<span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
</pre></div>
</div>
</div>
<div class="section" id="id16">
<h4>HTTP Status Codes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>200</td>
<td>Successfully deleted container ACL.</td>
</tr>
<tr class="row-odd"><td>401</td>
<td>Missing or Invalid X-Auth-Token. Authentication required.</td>
</tr>
<tr class="row-even"><td>403</td>
<td>User does not have permission to access this resource.</td>
</tr>
<tr class="row-odd"><td>404</td>
<td>Container not found for the given UUID.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">ACL API - Reference</a><ul>
<li><a class="reference internal" href="#secret-acl-api">Secret ACL API</a><ul>
<li><a class="reference internal" href="#get-v1-secrets-uuid-acl">GET /v1/secrets/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#request-response-with-acl-defined">Request/Response (With ACL defined):</a></li>
<li><a class="reference internal" href="#request-response-with-no-acl-defined">Request/Response (With no ACL defined):</a></li>
<li><a class="reference internal" href="#http-status-codes">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#put-v1-secrets-uuid-acl">PUT /v1/secrets/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#request-response-set-or-replace-acl">Request/Response (Set or Replace ACL):</a></li>
<li><a class="reference internal" href="#id1">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patch-v1-secrets-uuid-acl">PATCH /v1/secrets/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#id2">Attributes</a></li>
<li><a class="reference internal" href="#request-response-updating-project-access-flag">Request/Response (Updating project-access flag):</a></li>
<li><a class="reference internal" href="#request-response-removing-all-users-from-acl">Request/Response (Removing all users from ACL):</a></li>
<li><a class="reference internal" href="#id3">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delete-v1-secrets-uuid-acl">DELETE /v1/secrets/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#request-response">Request/Response:</a></li>
<li><a class="reference internal" href="#id4">HTTP Status Codes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#container-acl-api">Container ACL API</a><ul>
<li><a class="reference internal" href="#get-v1-containers-uuid-acl">GET /v1/containers/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#id5">Request/Response (With ACL defined):</a></li>
<li><a class="reference internal" href="#id6">Request/Response (With no ACL defined):</a></li>
<li><a class="reference internal" href="#id7">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#put-v1-containers-uuid-acl">PUT /v1/containers/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#id8">Attributes</a></li>
<li><a class="reference internal" href="#id9">Request/Response (Set or Replace ACL):</a></li>
<li><a class="reference internal" href="#id10">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patch-v1-containers-uuid-acl">PATCH /v1/containers/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#id11">Attributes</a></li>
<li><a class="reference internal" href="#id12">Request/Response (Updating project-access flag):</a></li>
<li><a class="reference internal" href="#id13">Request/Response (Removing all users from ACL):</a></li>
<li><a class="reference internal" href="#id14">HTTP Status Codes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delete-v1-containers-uuid-acl">DELETE /v1/containers/{uuid}/acl</a><ul>
<li><a class="reference internal" href="#id15">Request/Response:</a></li>
<li><a class="reference internal" href="#id16">HTTP Status Codes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="containers.html"
                                  title="previous chapter">Containers API - Reference</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="certificates.html"
                                  title="next chapter">Certificates API - Reference</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/barbican
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/api/reference/acls.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="certificates.html" title="Certificates API - Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="containers.html" title="Containers API - Reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">barbican 4.0.0.0rc2.dev3 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Barbican API Documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/barbican");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>