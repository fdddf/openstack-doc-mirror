
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &mdash; DevStack 0.0.1.dev8194 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1.dev8194',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="DevStack 0.0.1.dev8194 documentation" href="index.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#local-conf" id="id3">local.conf</a></li>
<li><a class="reference internal" href="#openrc" id="id4">openrc</a></li>
<li><a class="reference internal" href="#minimal-configuration" id="id5">Minimal Configuration</a></li>
<li><a class="reference internal" href="#historical-notes" id="id6">Historical Notes</a></li>
<li><a class="reference internal" href="#configuration-notes" id="id7">Configuration Notes</a></li>
</ul>
</div>
<div class="section" id="local-conf">
<h2><a class="toc-backref" href="#id3">local.conf</a><a class="headerlink" href="#local-conf" title="Permalink to this headline">¶</a></h2>
<p>DevStack configuration is modified via the file <tt class="docutils literal"><span class="pre">local.conf</span></tt>.  It is
a modified INI format file that introduces a meta-section header to
carry additional information regarding the configuration files to be
changed.</p>
<p>A sample is provided in <tt class="docutils literal"><span class="pre">devstack/samples</span></tt></p>
<p>The new header is similar to a normal INI section header but with double
brackets (<tt class="docutils literal"><span class="pre">[[</span> <span class="pre">...</span> <span class="pre">]]</span></tt>) and two internal fields separated by a pipe
(<tt class="docutils literal"><span class="pre">|</span></tt>). Note that there are no spaces between the double brackets and the
internal fields. Likewise, there are no spaces between the pipe and the
internal fields:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="s1">&#39;[[&#39;</span> <span class="o">&lt;</span><span class="n">phase</span><span class="o">&gt;</span> <span class="s1">&#39;|&#39;</span> <span class="o">&lt;</span><span class="n">config</span><span class="o">-</span><span class="nb">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="s1">&#39;]]&#39;</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">&lt;phase&gt;</span></tt> is one of a set of phase names defined by <tt class="docutils literal"><span class="pre">stack.sh</span></tt>
and <tt class="docutils literal"><span class="pre">&lt;config-file-name&gt;</span></tt> is the configuration filename. The filename
is eval&#8217;ed in the <tt class="docutils literal"><span class="pre">stack.sh</span></tt> context so all environment variables are
available and may be used. Using the project config file variables in
the header is strongly suggested (see the <tt class="docutils literal"><span class="pre">NOVA_CONF</span></tt> example below).
If the path of the config file does not exist it is skipped.</p>
<p>The defined phases are:</p>
<ul class="simple">
<li><strong>local</strong> - extracts <tt class="docutils literal"><span class="pre">localrc</span></tt> from <tt class="docutils literal"><span class="pre">local.conf</span></tt> before
<tt class="docutils literal"><span class="pre">stackrc</span></tt> is sourced</li>
<li><strong>post-config</strong> - runs after the layer 2 services are configured and
before they are started</li>
<li><strong>extra</strong> - runs after services are started and before any files in
<tt class="docutils literal"><span class="pre">extra.d</span></tt> are executed</li>
<li><strong>post-extra</strong> - runs after files in <tt class="docutils literal"><span class="pre">extra.d</span></tt> are executed</li>
</ul>
<p>The file is processed strictly in sequence; meta-sections may be
specified more than once but if any settings are duplicated the last to
appear in the file will be used.</p>
<div class="highlight-python"><pre>[[post-config|$NOVA_CONF]]
[DEFAULT]
use_syslog = True

[osapi_v3]
enabled = False</pre>
</div>
<p>A specific meta-section <tt class="docutils literal"><span class="pre">local|localrc</span></tt> is used to provide a default
<tt class="docutils literal"><span class="pre">localrc</span></tt> file (actually <tt class="docutils literal"><span class="pre">.localrc.auto</span></tt>). This allows all custom
settings for DevStack to be contained in a single file. If <tt class="docutils literal"><span class="pre">localrc</span></tt>
exists it will be used instead to preserve backward-compatibility.</p>
<div class="highlight-python"><pre>[[local|localrc]]
IPV4_ADDRS_SAFE_TO_USE=10.254.1.0/24
ADMIN_PASSWORD=speciale
LOGFILE=$DEST/logs/stack.sh.log</pre>
</div>
<p>Note that <tt class="docutils literal"><span class="pre">Q_PLUGIN_CONF_FILE</span></tt> is unique in that it is assumed to
<em>NOT</em> start with a <tt class="docutils literal"><span class="pre">/</span></tt> (slash) character. A slash will need to be
added:</p>
<div class="highlight-python"><pre>[[post-config|/$Q_PLUGIN_CONF_FILE]]</pre>
</div>
<p>Also note that the <tt class="docutils literal"><span class="pre">localrc</span></tt> section is sourced as a shell script
fragment and MUST conform to the shell requirements, specifically no
whitespace around <tt class="docutils literal"><span class="pre">=</span></tt> (equals).</p>
</div>
<div class="section" id="openrc">
<h2><a class="toc-backref" href="#id4">openrc</a><a class="headerlink" href="#openrc" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">openrc</span></tt> configures login credentials suitable for use with the
OpenStack command-line tools. <tt class="docutils literal"><span class="pre">openrc</span></tt> sources <tt class="docutils literal"><span class="pre">stackrc</span></tt> at the
beginning (which in turn sources the <tt class="docutils literal"><span class="pre">localrc</span></tt> section of
<tt class="docutils literal"><span class="pre">local.conf</span></tt>) in order to pick up <tt class="docutils literal"><span class="pre">HOST_IP</span></tt> and/or <tt class="docutils literal"><span class="pre">SERVICE_HOST</span></tt>
to use in the endpoints. The values shown below are the default values.</p>
<dl class="docutils">
<dt>OS_PROJECT_NAME (OS_TENANT_NAME)</dt>
<dd><p class="first">Keystone has
standardized the term <em>project</em> as the entity that owns resources. In
some places references still exist to the previous term
<em>tenant</em> for this use. Also, <em>project_name</em> is preferred to
<em>project_id</em>.  OS_TENANT_NAME remains supported for compatibility
with older tools.</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">OS_PROJECT_NAME</span><span class="o">=</span><span class="n">demo</span>
</pre></div>
</div>
</dd>
<dt>OS_USERNAME</dt>
<dd><p class="first">In addition to the owning entity (project), OpenStack calls the entity
performing the action <em>user</em>.</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">OS_USERNAME</span><span class="o">=</span><span class="n">demo</span>
</pre></div>
</div>
</dd>
<dt>OS_PASSWORD</dt>
<dd><p class="first">Keystone&#8217;s default authentication requires a password be provided.
The usual cautions about putting passwords in environment variables
apply, for most DevStack uses this may be an acceptable tradeoff.</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="n">OS_PASSWORD</span><span class="o">=</span><span class="n">secret</span>
</pre></div>
</div>
</dd>
<dt>HOST_IP, SERVICE_HOST</dt>
<dd><p class="first">Set API endpoint host using <tt class="docutils literal"><span class="pre">HOST_IP</span></tt>. <tt class="docutils literal"><span class="pre">SERVICE_HOST</span></tt> may also
be used to specify the endpoint, which is convenient for some
<tt class="docutils literal"><span class="pre">local.conf</span></tt> configurations. Typically, <tt class="docutils literal"><span class="pre">HOST_IP</span></tt> is set in the
<tt class="docutils literal"><span class="pre">localrc</span></tt> section.</p>
<div class="last highlight-python"><pre>HOST_IP=127.0.0.1
SERVICE_HOST=$HOST_IP</pre>
</div>
</dd>
<dt>OS_AUTH_URL</dt>
<dd><p class="first">Authenticating against an OpenStack cloud using Keystone returns a
<em>Token</em> and <em>Service Catalog</em>. The catalog contains the endpoints
for all services the user/tenant has access to - including Nova,
Glance, Keystone and Swift.</p>
<div class="last highlight-python"><pre>OS_AUTH_URL=http://$SERVICE_HOST:5000/v2.0</pre>
</div>
</dd>
<dt>KEYSTONECLIENT_DEBUG, NOVACLIENT_DEBUG</dt>
<dd><p class="first">Set command-line client log level to <tt class="docutils literal"><span class="pre">DEBUG</span></tt>. These are commented
out by default.</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="c1"># export KEYSTONECLIENT_DEBUG=1</span>
<span class="c1"># export NOVACLIENT_DEBUG=1</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="minimal-configuration">
<span id="id1"></span><h2><a class="toc-backref" href="#id5">Minimal Configuration</a><a class="headerlink" href="#minimal-configuration" title="Permalink to this headline">¶</a></h2>
<p>While <tt class="docutils literal"><span class="pre">stack.sh</span></tt> is happy to run without a <tt class="docutils literal"><span class="pre">localrc</span></tt> section in
<tt class="docutils literal"><span class="pre">local.conf</span></tt>, devlife is better when there are a few minimal variables
set. This is an example of a minimal configuration that touches the
values that most often need to be set.</p>
<ul class="simple">
<li>no logging</li>
<li>pre-set the passwords to prevent interactive prompts</li>
<li>move network ranges away from the local network (<tt class="docutils literal"><span class="pre">IPV4_ADDRS_SAFE_TO_USE</span></tt>
and <tt class="docutils literal"><span class="pre">FLOATING_RANGE</span></tt>, commented out below)</li>
<li>set the host IP if detection is unreliable (<tt class="docutils literal"><span class="pre">HOST_IP</span></tt>, commented
out below)</li>
</ul>
<div class="highlight-python"><pre>[[local|localrc]]
ADMIN_PASSWORD=secret
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD
#IPV4_ADDRS_SAFE_TO_USE=172.31.1.0/24
#FLOATING_RANGE=192.168.20.0/25
#HOST_IP=10.3.4.5</pre>
</div>
<p>If the <tt class="docutils literal"><span class="pre">*_PASSWORD</span></tt> variables are not set here you will be prompted to
enter values for them by <tt class="docutils literal"><span class="pre">stack.sh</span></tt>.</p>
<p>The network ranges must not overlap with any networks in use on the
host. Overlap is not uncommon as RFC-1918 &#8216;private&#8217; ranges are commonly
used for both the local networking and Nova&#8217;s fixed and floating ranges.</p>
<p><tt class="docutils literal"><span class="pre">HOST_IP</span></tt> is normally detected on the first run of <tt class="docutils literal"><span class="pre">stack.sh</span></tt> but
often is indeterminate on later runs due to the IP being moved from an
Ethernet interface to a bridge on the host. Setting it here also makes it
available for <tt class="docutils literal"><span class="pre">openrc</span></tt> to set <tt class="docutils literal"><span class="pre">OS_AUTH_URL</span></tt>. <tt class="docutils literal"><span class="pre">HOST_IP</span></tt> is not set
by default.</p>
<p><tt class="docutils literal"><span class="pre">HOST_IPV6</span></tt> is normally detected on the first run of <tt class="docutils literal"><span class="pre">stack.sh</span></tt> but
will not be set if there is no IPv6 address on the default Ethernet interface.
Setting it here also makes it available for <tt class="docutils literal"><span class="pre">openrc</span></tt> to set <tt class="docutils literal"><span class="pre">OS_AUTH_URL</span></tt>.
<tt class="docutils literal"><span class="pre">HOST_IPV6</span></tt> is not set by default.</p>
</div>
<div class="section" id="historical-notes">
<h2><a class="toc-backref" href="#id6">Historical Notes</a><a class="headerlink" href="#historical-notes" title="Permalink to this headline">¶</a></h2>
<p>Historically DevStack obtained all local configuration and
customizations from a <tt class="docutils literal"><span class="pre">localrc</span></tt> file.  In Oct 2013 the
<tt class="docutils literal"><span class="pre">local.conf</span></tt> configuration method was introduced (in <a class="reference external" href="https://review.openstack.org/#/c/46768/">review 46768</a>) to simplify this
process.</p>
</div>
<div class="section" id="configuration-notes">
<h2><a class="toc-backref" href="#id7">Configuration Notes</a><a class="headerlink" href="#configuration-notes" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><a class="reference internal" href="#service-repos" id="id8">Service Repos</a></li>
<li><a class="reference internal" href="#installation-directory" id="id9">Installation Directory</a></li>
<li><a class="reference internal" href="#logging" id="id10">Logging</a><ul>
<li><a class="reference internal" href="#enable-logging" id="id11">Enable Logging</a></li>
<li><a class="reference internal" href="#logging-the-service-output" id="id12">Logging the Service Output</a></li>
<li><a class="reference internal" href="#enabling-syslog" id="id13">Enabling Syslog</a></li>
<li><a class="reference internal" href="#example-logging-configuration" id="id14">Example Logging Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-backend" id="id15">Database Backend</a></li>
<li><a class="reference internal" href="#rpc-backend" id="id16">RPC Backend</a></li>
<li><a class="reference internal" href="#apache-frontend" id="id17">Apache Frontend</a></li>
<li><a class="reference internal" href="#libraries-from-git" id="id18">Libraries from Git</a></li>
<li><a class="reference internal" href="#virtual-environments" id="id19">Virtual Environments</a></li>
<li><a class="reference internal" href="#a-clean-install-every-time" id="id20">A clean install every time</a></li>
<li><a class="reference internal" href="#upgrade-packages-installed-by-pip" id="id21">Upgrade packages installed by pip</a></li>
<li><a class="reference internal" href="#guest-images" id="id22">Guest Images</a></li>
<li><a class="reference internal" href="#instance-type" id="id23">Instance Type</a></li>
<li><a class="reference internal" href="#ip-version" id="id24">IP Version</a><ul>
<li><a class="reference internal" href="#service-version" id="id25">Service Version</a></li>
<li><a class="reference internal" href="#multi-node-setup" id="id26">Multi-node setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#projects" id="id27">Projects</a><ul>
<li><a class="reference internal" href="#neutron" id="id28">Neutron</a></li>
<li><a class="reference internal" href="#swift" id="id29">Swift</a><ul>
<li><a class="reference internal" href="#swift-s3" id="id30">Swift S3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heat" id="id31">Heat</a></li>
<li><a class="reference internal" href="#tempest" id="id32">Tempest</a></li>
<li><a class="reference internal" href="#xenserver" id="id33">Xenserver</a></li>
<li><a class="reference internal" href="#cells" id="id34">Cells</a></li>
<li><a class="reference internal" href="#cinder" id="id35">Cinder</a></li>
<li><a class="reference internal" href="#keystone" id="id36">Keystone</a><ul>
<li><a class="reference internal" href="#multi-region-setup" id="id37">Multi-Region Setup</a></li>
<li><a class="reference internal" href="#disabling-identity-api-v2" id="id38">Disabling Identity API v2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises" id="id39">Exercises</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="service-repos">
<h3><a class="toc-backref" href="#id8">Service Repos</a><a class="headerlink" href="#service-repos" title="Permalink to this headline">¶</a></h3>
<p>The Git repositories used to check out the source for each service are
controlled by a pair of variables set for each service.  <tt class="docutils literal"><span class="pre">*_REPO</span></tt>
points to the repository and <tt class="docutils literal"><span class="pre">*_BRANCH</span></tt> selects which branch to
check out. These may be overridden in <tt class="docutils literal"><span class="pre">local.conf</span></tt> to pull source
from a different repo for testing, such as a Gerrit branch
proposal. <tt class="docutils literal"><span class="pre">GIT_BASE</span></tt> points to the primary repository server.</p>
<blockquote>
<div><div class="highlight-python"><pre>NOVA_REPO=$GIT_BASE/openstack/nova.git
NOVA_BRANCH=master</pre>
</div>
</div></blockquote>
<p>To pull a branch directly from Gerrit, get the repo and branch from
the Gerrit review page:</p>
<blockquote>
<div><div class="highlight-python"><pre>git fetch https://review.openstack.org/p/openstack/nova refs/changes/50/5050/1 &amp;&amp; git checkout FETCH_HEAD</pre>
</div>
<p>The repo is the stanza following <tt class="docutils literal"><span class="pre">fetch</span></tt> and the branch is the
stanza following that:</p>
<div class="highlight-python"><pre>NOVA_REPO=https://review.openstack.org/p/openstack/nova
NOVA_BRANCH=refs/changes/50/5050/1</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="installation-directory">
<h3><a class="toc-backref" href="#id9">Installation Directory</a><a class="headerlink" href="#installation-directory" title="Permalink to this headline">¶</a></h3>
<p>The DevStack install directory is set by the <tt class="docutils literal"><span class="pre">DEST</span></tt> variable.  By
default it is <tt class="docutils literal"><span class="pre">/opt/stack</span></tt>.</p>
<p>By setting it early in the <tt class="docutils literal"><span class="pre">localrc</span></tt> section you can reference it in
later variables.  It can be useful to set it even though it is not
changed from the default value.</p>
<blockquote>
<div><div class="highlight-python"><pre>DEST=/opt/stack</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="logging">
<h3><a class="toc-backref" href="#id10">Logging</a><a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<div class="section" id="enable-logging">
<h4><a class="toc-backref" href="#id11">Enable Logging</a><a class="headerlink" href="#enable-logging" title="Permalink to this headline">¶</a></h4>
<p>By default <tt class="docutils literal"><span class="pre">stack.sh</span></tt> output is only written to the console where it
runs. It can be sent to a file in addition to the console by setting
<tt class="docutils literal"><span class="pre">LOGFILE</span></tt> to the fully-qualified name of the destination log file. A
timestamp will be appended to the given filename for each run of
<tt class="docutils literal"><span class="pre">stack.sh</span></tt>.</p>
<blockquote>
<div><div class="highlight-python"><pre>LOGFILE=$DEST/logs/stack.sh.log</pre>
</div>
</div></blockquote>
<p>Old log files are cleaned automatically if <tt class="docutils literal"><span class="pre">LOGDAYS</span></tt> is set to the
number of days of old log files to keep.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">LOGDAYS</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<p>The some of the project logs (Nova, Cinder, etc) will be colorized by
default (if <tt class="docutils literal"><span class="pre">SYSLOG</span></tt> is not set below); this can be turned off by
setting <tt class="docutils literal"><span class="pre">LOG_COLOR</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt>.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">LOG_COLOR</span><span class="o">=</span><span class="bp">False</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="logging-the-service-output">
<h4><a class="toc-backref" href="#id12">Logging the Service Output</a><a class="headerlink" href="#logging-the-service-output" title="Permalink to this headline">¶</a></h4>
<p>DevStack will log the <tt class="docutils literal"><span class="pre">stdout</span></tt> output of the services it starts.
When using <tt class="docutils literal"><span class="pre">screen</span></tt> this logs the output in the screen windows to a
file.  Without <tt class="docutils literal"><span class="pre">screen</span></tt> this simply redirects stdout of the service
process to a file in <tt class="docutils literal"><span class="pre">LOGDIR</span></tt>.</p>
<blockquote>
<div><div class="highlight-python"><pre>LOGDIR=$DEST/logs</pre>
</div>
</div></blockquote>
<p>Note the use of <tt class="docutils literal"><span class="pre">DEST</span></tt> to locate the main install directory; this
is why we suggest setting it in <tt class="docutils literal"><span class="pre">local.conf</span></tt>.</p>
</div>
<div class="section" id="enabling-syslog">
<h4><a class="toc-backref" href="#id13">Enabling Syslog</a><a class="headerlink" href="#enabling-syslog" title="Permalink to this headline">¶</a></h4>
<p>Logging all services to a single syslog can be convenient. Enable
syslogging by setting <tt class="docutils literal"><span class="pre">SYSLOG</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt>. If the destination log
host is not localhost <tt class="docutils literal"><span class="pre">SYSLOG_HOST</span></tt> and <tt class="docutils literal"><span class="pre">SYSLOG_PORT</span></tt> can be used
to direct the message stream to the log host.</p>
<blockquote>
<div><div class="highlight-python"><pre>SYSLOG=True
SYSLOG_HOST=$HOST_IP
SYSLOG_PORT=516</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="example-logging-configuration">
<h4><a class="toc-backref" href="#id14">Example Logging Configuration</a><a class="headerlink" href="#example-logging-configuration" title="Permalink to this headline">¶</a></h4>
<p>For example, non-interactive installs probably wish to save output to
a file, keep service logs and disable color in the stored files.</p>
<blockquote>
<div><div class="highlight-python"><pre>[[local|localrc]]
DEST=/opt/stack/
LOGDIR=$DEST/logs
LOGFILE=$LOGDIR/stack.sh.log
LOG_COLOR=False</pre>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="database-backend">
<h3><a class="toc-backref" href="#id15">Database Backend</a><a class="headerlink" href="#database-backend" title="Permalink to this headline">¶</a></h3>
<p>Multiple database backends are available. The available databases are defined
in the lib/databases directory.
<tt class="docutils literal"><span class="pre">mysql</span></tt> is the default database, choose a different one by putting the
following in the <tt class="docutils literal"><span class="pre">localrc</span></tt> section:</p>
<blockquote>
<div><div class="highlight-python"><pre>disable_service mysql
enable_service postgresql</pre>
</div>
</div></blockquote>
<p><tt class="docutils literal"><span class="pre">mysql</span></tt> is the default database.</p>
</div>
<div class="section" id="rpc-backend">
<h3><a class="toc-backref" href="#id16">RPC Backend</a><a class="headerlink" href="#rpc-backend" title="Permalink to this headline">¶</a></h3>
<p>Support for a RabbitMQ RPC backend is included. Additional RPC
backends may be available via external plugins.  Enabling or disabling
RabbitMQ is handled via the usual service functions and
<tt class="docutils literal"><span class="pre">ENABLED_SERVICES</span></tt>.</p>
<p>Example disabling RabbitMQ in <tt class="docutils literal"><span class="pre">local.conf</span></tt>:</p>
<div class="highlight-python"><pre>disable_service rabbit</pre>
</div>
</div>
<div class="section" id="apache-frontend">
<h3><a class="toc-backref" href="#id17">Apache Frontend</a><a class="headerlink" href="#apache-frontend" title="Permalink to this headline">¶</a></h3>
<p>The Apache web server can be enabled for wsgi services that support
being deployed under HTTPD + mod_wsgi. By default, services that
recommend running under HTTPD + mod_wsgi are deployed under Apache. To
use an alternative deployment strategy (e.g. eventlet) for services
that support an alternative to HTTPD + mod_wsgi set
<tt class="docutils literal"><span class="pre">ENABLE_HTTPD_MOD_WSGI_SERVICES</span></tt> to <tt class="docutils literal"><span class="pre">False</span></tt> in your
<tt class="docutils literal"><span class="pre">local.conf</span></tt>.</p>
<p>Each service that can be run under HTTPD + mod_wsgi also has an
override toggle available that can be set in your <tt class="docutils literal"><span class="pre">local.conf</span></tt>.</p>
<p>Keystone is run under Apache with <tt class="docutils literal"><span class="pre">mod_wsgi</span></tt> by default.</p>
<p>Example (Keystone)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">KEYSTONE_USE_MOD_WSGI</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
<p>Example (Nova):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">NOVA_USE_MOD_WSGI</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
<p>Example (Swift):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">SWIFT_USE_MOD_WSGI</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
<p>Example (Heat):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">HEAT_USE_MOD_WSGI</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
<p>Example (Cinder):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">CINDER_USE_MOD_WSGI</span><span class="o">=</span><span class="s2">&quot;True&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="libraries-from-git">
<h3><a class="toc-backref" href="#id18">Libraries from Git</a><a class="headerlink" href="#libraries-from-git" title="Permalink to this headline">¶</a></h3>
<p>By default devstack installs OpenStack server components from git,
however it installs client libraries from released versions on pypi.
This is appropriate if you are working on server development, but if
you want to see how an unreleased version of the client affects the
system you can have devstack install it from upstream, or from local
git trees by specifying it in <tt class="docutils literal"><span class="pre">LIBS_FROM_GIT</span></tt>.  Multiple libraries
can be specified as a comma separated list.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">LIBS_FROM_GIT</span><span class="o">=</span><span class="n">python</span><span class="o">-</span><span class="n">keystoneclient</span><span class="p">,</span><span class="n">oslo</span><span class="o">.</span><span class="n">config</span>
</pre></div>
</div>
</div></blockquote>
<p>Setting the variable to <tt class="docutils literal"><span class="pre">ALL</span></tt> will activate the download for all
libraries.</p>
</div>
<div class="section" id="virtual-environments">
<h3><a class="toc-backref" href="#id19">Virtual Environments</a><a class="headerlink" href="#virtual-environments" title="Permalink to this headline">¶</a></h3>
<p>Enable the use of Python virtual environments by setting <tt class="docutils literal"><span class="pre">USE_VENV</span></tt>
to <tt class="docutils literal"><span class="pre">True</span></tt>.  This will enable the creation of venvs for each project
that is defined in the <tt class="docutils literal"><span class="pre">PROJECT_VENV</span></tt> array.</p>
<p>Each entry in the <tt class="docutils literal"><span class="pre">PROJECT_VENV</span></tt> array contains the directory name
of a venv to be used for the project.  The array index is the project
name.  Multiple projects can use the same venv if desired.</p>
<blockquote>
<div><div class="highlight-python"><pre>PROJECT_VENV["glance"]=${GLANCE_DIR}.venv</pre>
</div>
</div></blockquote>
<p><tt class="docutils literal"><span class="pre">ADDITIONAL_VENV_PACKAGES</span></tt> is a comma-separated list of additional
packages to be installed into each venv.  Often projects will not have
certain packages listed in its <tt class="docutils literal"><span class="pre">requirements.txt</span></tt> file because they
are &#8216;optional&#8217; requirements, i.e. only needed for certain
configurations.  By default, the enabled databases will have their
Python bindings added when they are enabled.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ADDITIONAL_VENV_PACKAGES</span><span class="o">=</span><span class="s2">&quot;python-foo, python-bar&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="a-clean-install-every-time">
<h3><a class="toc-backref" href="#id20">A clean install every time</a><a class="headerlink" href="#a-clean-install-every-time" title="Permalink to this headline">¶</a></h3>
<p>By default <tt class="docutils literal"><span class="pre">stack.sh</span></tt> only clones the project repos if they do not
exist in <tt class="docutils literal"><span class="pre">$DEST</span></tt>. <tt class="docutils literal"><span class="pre">stack.sh</span></tt> will freshen each repo on each run if
<tt class="docutils literal"><span class="pre">RECLONE</span></tt> is set to <tt class="docutils literal"><span class="pre">yes</span></tt>. This avoids having to manually remove
repos in order to get the current branch from <tt class="docutils literal"><span class="pre">$GIT_BASE</span></tt>.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">RECLONE</span><span class="o">=</span><span class="n">yes</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="upgrade-packages-installed-by-pip">
<h3><a class="toc-backref" href="#id21">Upgrade packages installed by pip</a><a class="headerlink" href="#upgrade-packages-installed-by-pip" title="Permalink to this headline">¶</a></h3>
<p>By default <tt class="docutils literal"><span class="pre">stack.sh</span></tt> only installs Python packages if no version is
currently installed or the current version does not match a specified
requirement. If <tt class="docutils literal"><span class="pre">PIP_UPGRADE</span></tt> is set to <tt class="docutils literal"><span class="pre">True</span></tt> then existing
required Python packages will be upgraded to the most recent version
that matches requirements.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">PIP_UPGRADE</span><span class="o">=</span><span class="bp">True</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="guest-images">
<h3><a class="toc-backref" href="#id22">Guest Images</a><a class="headerlink" href="#guest-images" title="Permalink to this headline">¶</a></h3>
<p>Images provided in URLS via the comma-separated <tt class="docutils literal"><span class="pre">IMAGE_URLS</span></tt>
variable will be downloaded and uploaded to glance by DevStack.</p>
<p>Default guest-images are predefined for each type of hypervisor and
their testing-requirements in <tt class="docutils literal"><span class="pre">stack.sh</span></tt>.  Setting
<tt class="docutils literal"><span class="pre">DOWNLOAD_DEFAULT_IMAGES=False</span></tt> will prevent DevStack downloading
these default images; in that case, you will want to populate
<tt class="docutils literal"><span class="pre">IMAGE_URLS</span></tt> with sufficient images to satisfy testing-requirements.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DOWNLOAD_DEFAULT_IMAGES</span><span class="o">=</span><span class="bp">False</span>
<span class="n">IMAGE_URLS</span><span class="o">=</span><span class="s2">&quot;http://foo.bar.com/image.qcow,&quot;</span>
<span class="n">IMAGE_URLS</span><span class="o">+=</span><span class="s2">&quot;http://foo.bar.com/image2.qcow&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="instance-type">
<h3><a class="toc-backref" href="#id23">Instance Type</a><a class="headerlink" href="#instance-type" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">DEFAULT_INSTANCE_TYPE</span></tt> can be used to configure the default instance
type. When this parameter is not specified, Devstack creates additional
micro &amp; nano flavors for really small instances to run Tempest tests.</p>
<p>For guests with larger memory requirements, <tt class="docutils literal"><span class="pre">DEFAULT_INSTANCE_TYPE</span></tt>
should be specified in the configuration file so Tempest selects the
default flavors instead.</p>
<p>KVM on Power with QEMU 2.4 requires 512 MB to load the firmware -
<a class="reference external" href="http://wiki.qemu.org/ChangeLog/2.4">QEMU 2.4 - PowerPC</a> so users
running instances on ppc64/ppc64le can choose one of the default
created flavors as follows:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DEFAULT_INSTANCE_TYPE</span><span class="o">=</span><span class="n">m1</span><span class="o">.</span><span class="n">tiny</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="ip-version">
<h3><a class="toc-backref" href="#id24">IP Version</a><a class="headerlink" href="#ip-version" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">IP_VERSION</span></tt> can be used to configure Neutron to create either an
IPv4, IPv6, or dual-stack self-service project data-network by with
either <tt class="docutils literal"><span class="pre">IP_VERSION=4</span></tt>, <tt class="docutils literal"><span class="pre">IP_VERSION=6</span></tt>, or <tt class="docutils literal"><span class="pre">IP_VERSION=4+6</span></tt>
respectively.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">IP_VERSION</span><span class="o">=</span><span class="mi">4</span><span class="o">+</span><span class="mi">6</span>
</pre></div>
</div>
</div></blockquote>
<p>The following optional variables can be used to alter the default IPv6
behavior:</p>
<blockquote>
<div><div class="highlight-python"><pre>IPV6_RA_MODE=slaac
IPV6_ADDRESS_MODE=slaac
IPV6_ADDRS_SAFE_TO_USE=fd$IPV6_GLOBAL_ID::/56
IPV6_PRIVATE_NETWORK_GATEWAY=fd$IPV6_GLOBAL_ID::1</pre>
</div>
</div></blockquote>
<p><em>Note</em>: <tt class="docutils literal"><span class="pre">IPV6_ADDRS_SAFE_TO_USE</span></tt> and <tt class="docutils literal"><span class="pre">IPV6_PRIVATE_NETWORK_GATEWAY</span></tt>
can be configured with any valid IPv6 prefix. The default values make
use of an auto-generated <tt class="docutils literal"><span class="pre">IPV6_GLOBAL_ID</span></tt> to comply with RFC4193.</p>
<div class="section" id="service-version">
<h4><a class="toc-backref" href="#id25">Service Version</a><a class="headerlink" href="#service-version" title="Permalink to this headline">¶</a></h4>
<p>DevStack can enable service operation over either IPv4 or IPv6 by
setting <tt class="docutils literal"><span class="pre">SERVICE_IP_VERSION</span></tt> to either <tt class="docutils literal"><span class="pre">SERVICE_IP_VERSION=4</span></tt> or
<tt class="docutils literal"><span class="pre">SERVICE_IP_VERSION=6</span></tt> respectively.</p>
<p>When set to <tt class="docutils literal"><span class="pre">4</span></tt> devstack services will open listen sockets on
<tt class="docutils literal"><span class="pre">0.0.0.0</span></tt> and service endpoints will be registered using <tt class="docutils literal"><span class="pre">HOST_IP</span></tt>
as the address.</p>
<p>When set to <tt class="docutils literal"><span class="pre">6</span></tt> devstack services will open listen sockets on <tt class="docutils literal"><span class="pre">::</span></tt>
and service endpoints will be registered using <tt class="docutils literal"><span class="pre">HOST_IPV6</span></tt> as the
address.</p>
<p>The default value for this setting is <tt class="docutils literal"><span class="pre">4</span></tt>.  Dual-mode support, for
example <tt class="docutils literal"><span class="pre">4+6</span></tt> is not currently supported.  <tt class="docutils literal"><span class="pre">HOST_IPV6</span></tt> can
optionally be used to alter the default IPv6 address</p>
<blockquote>
<div><div class="highlight-python"><pre>HOST_IPV6=${some_local_ipv6_address}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="multi-node-setup">
<h4><a class="toc-backref" href="#id26">Multi-node setup</a><a class="headerlink" href="#multi-node-setup" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="guides/multinode-lab.html"><em>multi-node lab guide</em></a></p>
</div>
</div>
<div class="section" id="projects">
<h3><a class="toc-backref" href="#id27">Projects</a><a class="headerlink" href="#projects" title="Permalink to this headline">¶</a></h3>
<div class="section" id="neutron">
<h4><a class="toc-backref" href="#id28">Neutron</a><a class="headerlink" href="#neutron" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="guides/neutron.html"><em>neutron configuration guide</em></a> for
details on configuration of Neutron</p>
</div>
<div class="section" id="swift">
<h4><a class="toc-backref" href="#id29">Swift</a><a class="headerlink" href="#swift" title="Permalink to this headline">¶</a></h4>
<p>Swift is disabled by default.  When enabled, it is configured with
only one replica to avoid being IO/memory intensive on a small
VM. When running with only one replica the account, container and
object services will run directly in screen. The others services like
replicator, updaters or auditor runs in background.</p>
<p>If you would like to enable Swift you can add this to your <tt class="docutils literal"><span class="pre">localrc</span></tt>
section:</p>
<div class="highlight-python"><pre>enable_service s-proxy s-object s-container s-account</pre>
</div>
<p>If you want a minimal Swift install with only Swift and Keystone you
can have this instead in your <tt class="docutils literal"><span class="pre">localrc</span></tt> section:</p>
<div class="highlight-python"><pre>disable_all_services
enable_service key mysql s-proxy s-object s-container s-account</pre>
</div>
<p>If you only want to do some testing of a real normal swift cluster
with multiple replicas you can do so by customizing the variable
<tt class="docutils literal"><span class="pre">SWIFT_REPLICAS</span></tt> in your <tt class="docutils literal"><span class="pre">localrc</span></tt> section (usually to 3).</p>
<p>You can manually override the ring building to use specific storage
nodes, for example when you want to test a multinode environment. In
this case you have to set a space-separated list of IPs in
<tt class="docutils literal"><span class="pre">SWIFT_STORAGE_IPS</span></tt> in your <tt class="docutils literal"><span class="pre">localrc</span></tt> section that should be used
as Swift storage nodes.
Please note that this does not create a multinode setup, it is only
used when adding nodes to the Swift rings.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">SWIFT_STORAGE_IPS</span><span class="o">=</span><span class="s2">&quot;192.168.1.10 192.168.1.11 192.168.1.12&quot;</span>
</pre></div>
</div>
<div class="section" id="swift-s3">
<h5><a class="toc-backref" href="#id30">Swift S3</a><a class="headerlink" href="#swift-s3" title="Permalink to this headline">¶</a></h5>
<p>If you are enabling <tt class="docutils literal"><span class="pre">swift3</span></tt> in <tt class="docutils literal"><span class="pre">ENABLED_SERVICES</span></tt> DevStack will
install the swift3 middleware emulation. Swift will be configured to
act as a S3 endpoint for Keystone so effectively replacing the
<tt class="docutils literal"><span class="pre">nova-objectstore</span></tt>.</p>
<p>Only Swift proxy server is launched in the screen session all other
services are started in background and managed by <tt class="docutils literal"><span class="pre">swift-init</span></tt> tool.</p>
</div>
</div>
<div class="section" id="heat">
<h4><a class="toc-backref" href="#id31">Heat</a><a class="headerlink" href="#heat" title="Permalink to this headline">¶</a></h4>
<p>Heat is disabled by default (see <tt class="docutils literal"><span class="pre">stackrc</span></tt> file). To enable it
explicitly you&#8217;ll need the following settings in your <tt class="docutils literal"><span class="pre">localrc</span></tt>
section</p>
<div class="highlight-python"><pre>enable_service heat h-api h-api-cfn h-api-cw h-eng</pre>
</div>
<p>Heat can also run in standalone mode, and be configured to orchestrate
on an external OpenStack cloud. To launch only Heat in standalone mode
you&#8217;ll need the following settings in your <tt class="docutils literal"><span class="pre">localrc</span></tt> section</p>
<div class="highlight-python"><pre>disable_all_services
enable_service rabbit mysql heat h-api h-api-cfn h-api-cw h-eng
HEAT_STANDALONE=True
KEYSTONE_SERVICE_HOST=...
KEYSTONE_AUTH_HOST=...</pre>
</div>
</div>
<div class="section" id="tempest">
<h4><a class="toc-backref" href="#id32">Tempest</a><a class="headerlink" href="#tempest" title="Permalink to this headline">¶</a></h4>
<p>If tempest has been successfully configured, a basic set of smoke
tests can be run as follows:</p>
<div class="highlight-python"><pre>$ cd /opt/stack/tempest
$ tox -efull  tempest.scenario.test_network_basic_ops</pre>
</div>
<p>By default tempest is downloaded and the config file is generated, but the
tempest package is not installed in the system&#8217;s global site-packages (the
package install includes installing dependences). So tempest won&#8217;t run
outside of tox. If you would like to install it add the following to your
<tt class="docutils literal"><span class="pre">localrc</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">INSTALL_TEMPEST</span><span class="o">=</span><span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="xenserver">
<h4><a class="toc-backref" href="#id33">Xenserver</a><a class="headerlink" href="#xenserver" title="Permalink to this headline">¶</a></h4>
<p>If you would like to use Xenserver as the hypervisor, please refer to
the instructions in <tt class="docutils literal"><span class="pre">./tools/xen/README.md</span></tt>.</p>
</div>
<div class="section" id="cells">
<h4><a class="toc-backref" href="#id34">Cells</a><a class="headerlink" href="#cells" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://wiki.openstack.org/blueprint-nova-compute-cells">Cells</a> is
an alternative scaling option.  To setup a cells environment add the
following to your <tt class="docutils literal"><span class="pre">localrc</span></tt> section:</p>
<div class="highlight-python"><pre>enable_service n-cell</pre>
</div>
<p>Be aware that there are some features currently missing in cells, one
notable one being security groups.  The exercises have been patched to
disable functionality not supported by cells.</p>
</div>
<div class="section" id="cinder">
<h4><a class="toc-backref" href="#id35">Cinder</a><a class="headerlink" href="#cinder" title="Permalink to this headline">¶</a></h4>
<p>The logical volume group used to hold the Cinder-managed volumes is
set by <tt class="docutils literal"><span class="pre">VOLUME_GROUP_NAME</span></tt>, the logical volume name prefix is set with
<tt class="docutils literal"><span class="pre">VOLUME_NAME_PREFIX</span></tt> and the size of the volume backing file is set
with <tt class="docutils literal"><span class="pre">VOLUME_BACKING_FILE_SIZE</span></tt>.</p>
<blockquote>
<div><div class="highlight-python"><pre>VOLUME_GROUP_NAME="stack-volumes"
VOLUME_NAME_PREFIX="volume-"
VOLUME_BACKING_FILE_SIZE=10250M</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="keystone">
<h4><a class="toc-backref" href="#id36">Keystone</a><a class="headerlink" href="#keystone" title="Permalink to this headline">¶</a></h4>
<div class="section" id="multi-region-setup">
<h5><a class="toc-backref" href="#id37">Multi-Region Setup</a><a class="headerlink" href="#multi-region-setup" title="Permalink to this headline">¶</a></h5>
<p>We want to setup two devstack (RegionOne and RegionTwo) with shared
keystone (same users and services) and horizon.  Keystone and Horizon
will be located in RegionOne.  Full spec is available at:
<a class="reference external" href="https://wiki.openstack.org/wiki/Heat/Blueprints/Multi_Region_Support_for_Heat">https://wiki.openstack.org/wiki/Heat/Blueprints/Multi_Region_Support_for_Heat</a>.</p>
<p>In RegionOne:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">REGION_NAME</span><span class="o">=</span><span class="n">RegionOne</span>
</pre></div>
</div>
<p>In RegionTwo:</p>
<div class="highlight-python"><pre>disable_service horizon
KEYSTONE_SERVICE_HOST=&lt;KEYSTONE_IP_ADDRESS_FROM_REGION_ONE&gt;
KEYSTONE_AUTH_HOST=&lt;KEYSTONE_IP_ADDRESS_FROM_REGION_ONE&gt;
REGION_NAME=RegionTwo
KEYSTONE_REGION_NAME=RegionOne</pre>
</div>
<p>In the devstack for RegionOne, we set REGION_NAME as RegionOne, so region of
the services started in this devstack are registered as RegionOne. In devstack
for RegionTwo, similarly, we set REGION_NAME as RegionTwo since we want
services started in this devstack to be registered in RegionTwo. But Keystone
service is started and registered in RegionOne, not RegionTwo, so we use
KEYSTONE_REGION_NAME to specify the region of Keystone service.
KEYSTONE_REGION_NAME has a default value the same as REGION_NAME thus we omit
it in the configuration of RegionOne.</p>
</div>
<div class="section" id="disabling-identity-api-v2">
<h5><a class="toc-backref" href="#id38">Disabling Identity API v2</a><a class="headerlink" href="#disabling-identity-api-v2" title="Permalink to this headline">¶</a></h5>
<p>The Identity API v2 is deprecated as of Mitaka and it is recommended to only
use the v3 API. It is possible to setup keystone without v2 API, by doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ENABLE_IDENTITY_V2</span><span class="o">=</span><span class="bp">False</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exercises">
<h4><a class="toc-backref" href="#id39">Exercises</a><a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">exerciserc</span></tt> is used to configure settings for the exercise scripts.
The values shown below are the default values. These can all be
overridden by setting them in the <tt class="docutils literal"><span class="pre">localrc</span></tt> section.</p>
<ul>
<li><p class="first">Max time to wait while vm goes from build to active state</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ACTIVE_TIMEOUT</span><span class="o">==</span><span class="mi">30</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Max time to wait for proper IP association and dis-association.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ASSOCIATE_TIMEOUT</span><span class="o">=</span><span class="mi">15</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Max time till the vm is bootable</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">BOOT_TIMEOUT</span><span class="o">=</span><span class="mi">30</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Max time from run instance command until it is running</p>
<blockquote>
<div><div class="highlight-python"><pre>RUNNING_TIMEOUT=$(($BOOT_TIMEOUT + $ACTIVE_TIMEOUT))</pre>
</div>
</div></blockquote>
</li>
<li><p class="first">Max time to wait for a vm to terminate</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">TERMINATE_TIMEOUT</span><span class="o">=</span><span class="mi">30</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#local-conf">local.conf</a></li>
<li><a class="reference internal" href="#openrc">openrc</a></li>
<li><a class="reference internal" href="#minimal-configuration">Minimal Configuration</a></li>
<li><a class="reference internal" href="#historical-notes">Historical Notes</a></li>
<li><a class="reference internal" href="#configuration-notes">Configuration Notes</a><ul>
<li><a class="reference internal" href="#service-repos">Service Repos</a></li>
<li><a class="reference internal" href="#installation-directory">Installation Directory</a></li>
<li><a class="reference internal" href="#logging">Logging</a><ul>
<li><a class="reference internal" href="#enable-logging">Enable Logging</a></li>
<li><a class="reference internal" href="#logging-the-service-output">Logging the Service Output</a></li>
<li><a class="reference internal" href="#enabling-syslog">Enabling Syslog</a></li>
<li><a class="reference internal" href="#example-logging-configuration">Example Logging Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#database-backend">Database Backend</a></li>
<li><a class="reference internal" href="#rpc-backend">RPC Backend</a></li>
<li><a class="reference internal" href="#apache-frontend">Apache Frontend</a></li>
<li><a class="reference internal" href="#libraries-from-git">Libraries from Git</a></li>
<li><a class="reference internal" href="#virtual-environments">Virtual Environments</a></li>
<li><a class="reference internal" href="#a-clean-install-every-time">A clean install every time</a></li>
<li><a class="reference internal" href="#upgrade-packages-installed-by-pip">Upgrade packages installed by pip</a></li>
<li><a class="reference internal" href="#guest-images">Guest Images</a></li>
<li><a class="reference internal" href="#instance-type">Instance Type</a></li>
<li><a class="reference internal" href="#ip-version">IP Version</a><ul>
<li><a class="reference internal" href="#service-version">Service Version</a></li>
<li><a class="reference internal" href="#multi-node-setup">Multi-node setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#projects">Projects</a><ul>
<li><a class="reference internal" href="#neutron">Neutron</a></li>
<li><a class="reference internal" href="#swift">Swift</a><ul>
<li><a class="reference internal" href="#swift-s3">Swift S3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#heat">Heat</a></li>
<li><a class="reference internal" href="#tempest">Tempest</a></li>
<li><a class="reference internal" href="#xenserver">Xenserver</a></li>
<li><a class="reference internal" href="#cells">Cells</a></li>
<li><a class="reference internal" href="#cinder">Cinder</a></li>
<li><a class="reference internal" href="#keystone">Keystone</a><ul>
<li><a class="reference internal" href="#multi-region-setup">Multi-Region Setup</a></li>
<li><a class="reference internal" href="#disabling-identity-api-v2">Disabling Identity API v2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack-dev/devstack
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/configuration.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">DevStack 0.0.1.dev8194 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2014, OpenStack Foundation.
      Last updated on Mon Feb 13 19:57:46 2017, commit 6bd3561.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/DevStack");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>