<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>base &mdash; oslo.versionedobjects 1.21.1.dev6 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.21.1.dev6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="oslo.versionedobjects 1.21.1.dev6 documentation" href="../index.html" />
    <link rel="up" title="API" href="index.html" />
    <link rel="next" title="exception" href="exception.html" />
    <link rel="prev" title="API" href="index.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-oslo_versionedobjects.base">
<span id="base"></span><h1>base<a class="headerlink" href="#module-oslo_versionedobjects.base" title="Permalink to this headline">¶</a></h1>
<p>Common internal object model</p>
<dl class="class">
<dt id="oslo_versionedobjects.base.ComparableVersionedObject">
<em class="property">class </em><code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">ComparableVersionedObject</code><a class="headerlink" href="#oslo_versionedobjects.base.ComparableVersionedObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix-in to provide comparison methods</p>
<p>When objects are to be compared with each other (in tests for example),
this mixin can be used.</p>
</dd></dl>

<dl class="class">
<dt id="oslo_versionedobjects.base.ObjectListBase">
<em class="property">class </em><code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">ObjectListBase</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.ObjectListBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin class for lists of objects.</p>
<p>This mixin class can be added as a base class for an object that
is implementing a list of objects. It adds a single field of &#8216;objects&#8217;,
which is the list store, and behaves like a list itself. It supports
serialization of the list of objects automatically.</p>
</dd></dl>

<dl class="class">
<dt id="oslo_versionedobjects.base.VersionedObject">
<em class="property">class </em><code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">VersionedObject</code><span class="sig-paren">(</span><em>context=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class and object factory.</p>
<p>This forms the base of all objects that can be remoted or instantiated
via RPC. Simply defining a class that inherits from this base class
will make it remotely instantiatable. Objects should implement the
necessary &#8220;get&#8221; classmethod routines as well as &#8220;save&#8221; object methods
as appropriate.</p>
<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_attr_is_set">
<code class="descname">obj_attr_is_set</code><span class="sig-paren">(</span><em>attrname</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_attr_is_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Test object to see if attrname is present.</p>
<p>Returns True if the named attribute has a value set, or
False if not. Raises AttributeError if attrname is not
a valid attribute for this object.</p>
</dd></dl>

<dl class="classmethod">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_class_from_name">
<em class="property">classmethod </em><code class="descname">obj_class_from_name</code><span class="sig-paren">(</span><em>objname</em>, <em>objver</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_class_from_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a class from the registry based on a name and version.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_clone">
<code class="descname">obj_clone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy.</p>
</dd></dl>

<dl class="classmethod">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_from_primitive">
<em class="property">classmethod </em><code class="descname">obj_from_primitive</code><span class="sig-paren">(</span><em>primitive</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_from_primitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Object field-by-field hydration.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_get_changes">
<code class="descname">obj_get_changes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_get_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict of changed fields and their new values.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_load_attr">
<code class="descname">obj_load_attr</code><span class="sig-paren">(</span><em>attrname</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_load_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an additional attribute from the real object.</p>
<p>This should load self.$attrname and cache any data that might
be useful for future load operations.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_make_compatible">
<code class="descname">obj_make_compatible</code><span class="sig-paren">(</span><em>primitive</em>, <em>target_version</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_make_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an object representation compatible with a target version.</p>
<p>This is responsible for taking the primitive representation of
an object and making it suitable for the given target_version.
This may mean converting the format of object attributes, removing
attributes that have been added since the target version, etc. In
general:</p>
<ul class="simple">
<li>If a new version of an object adds a field, this routine
should remove it for older versions.</li>
<li>If a new version changed or restricted the format of a field, this
should convert it back to something a client knowing only of the
older version will tolerate.</li>
<li>If an object that this object depends on is bumped, then this
object should also take a version bump. Then, this routine should
backlevel the dependent object (by calling its obj_make_compatible())
if the requested version of this object is older than the version
where the new dependent object was added.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>primitive</strong> &#8211; The result of <a class="reference internal" href="#oslo_versionedobjects.base.VersionedObject.obj_to_primitive" title="oslo_versionedobjects.base.VersionedObject.obj_to_primitive"><code class="xref py py-meth docutils literal"><span class="pre">obj_to_primitive()</span></code></a></li>
<li><strong>target_version</strong> &#8211; The version string requested by the recipient
of the object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">oslo_versionedobjects.exception.UnsupportedObjectError</span></code>
if conversion is not possible for some reason</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_name">
<em class="property">classmethod </em><code class="descname">obj_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the object&#8217;s name</p>
<p>Return a canonical name for this object which will be used over
the wire for remote hydration.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_reset_changes">
<code class="descname">obj_reset_changes</code><span class="sig-paren">(</span><em>fields=None</em>, <em>recursive=False</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_reset_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the list of fields that have been changed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fields</strong> &#8211; List of fields to reset, or &#8220;all&#8221; if None.</li>
<li><strong>recursive</strong> &#8211; Call obj_reset_changes(recursive=True) on
any sub-objects within the list of fields
being reset.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This is NOT &#8220;revert to previous values&#8221;.</p>
<p>Specifying fields on recursive resets will only be honored at the top
level. Everything below the top will reset all.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_to_primitive">
<code class="descname">obj_to_primitive</code><span class="sig-paren">(</span><em>target_version=None</em>, <em>version_manifest=None</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_to_primitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple base-case dehydration.</p>
<p>This calls to_primitive() for each item in fields.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.obj_what_changed">
<code class="descname">obj_what_changed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.obj_what_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of fields that have been modified.</p>
</dd></dl>

<dl class="method">
<dt id="oslo_versionedobjects.base.VersionedObject.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObject.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the changed fields back to the store.</p>
<p>This is optional for subclasses, but is presented here in the base
class for consistency among those that do.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="oslo_versionedobjects.base.VersionedObjectDictCompat">
<em class="property">class </em><code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">VersionedObjectDictCompat</code><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObjectDictCompat" title="Permalink to this definition">¶</a></dt>
<dd><p>Mix-in to provide dictionary key access compatibility</p>
<p>If an object needs to support attribute access using
dictionary items instead of object attributes, inherit
from this class. This should only be used as a temporary
measure until all callers are converted to use modern
attribute access.</p>
</dd></dl>

<dl class="class">
<dt id="oslo_versionedobjects.base.VersionedObjectSerializer">
<em class="property">class </em><code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">VersionedObjectSerializer</code><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObjectSerializer" title="Permalink to this definition">¶</a></dt>
<dd><p>A VersionedObject-aware Serializer.</p>
<p>This implements the Oslo Serializer interface and provides the
ability to serialize and deserialize VersionedObject entities. Any service
that needs to accept or return VersionedObjects as arguments or result
values should pass this to its RPCClient and RPCServer objects.</p>
<dl class="attribute">
<dt id="oslo_versionedobjects.base.VersionedObjectSerializer.OBJ_BASE_CLASS">
<code class="descname">OBJ_BASE_CLASS</code><a class="headerlink" href="#oslo_versionedobjects.base.VersionedObjectSerializer.OBJ_BASE_CLASS" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#oslo_versionedobjects.base.VersionedObject" title="oslo_versionedobjects.base.VersionedObject"><code class="xref py py-class docutils literal"><span class="pre">VersionedObject</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="oslo_versionedobjects.base.obj_make_list">
<code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">obj_make_list</code><span class="sig-paren">(</span><em>context</em>, <em>list_obj</em>, <em>item_cls</em>, <em>db_list</em>, <em>**extra_args</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.obj_make_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an object list from a list of primitives.</p>
<p>This calls item_cls._from_db_object() on each item of db_list, and
adds the resulting object to list_obj.</p>
<p>:param:context: Request context
:param:list_obj: An ObjectListBase object
:param:item_cls: The VersionedObject class of the objects within the list
:param:db_list: The list of primitives to convert to objects
:param:extra_args: Extra arguments to pass to _from_db_object()
:returns: list_obj</p>
</dd></dl>

<dl class="function">
<dt id="oslo_versionedobjects.base.obj_tree_get_versions">
<code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">obj_tree_get_versions</code><span class="sig-paren">(</span><em>objname</em>, <em>tree=None</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.obj_tree_get_versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a mapping of dependent object versions.</p>
<p>This method builds a list of dependent object versions given a top-
level object with other objects as fields. It walks the tree recursively
to determine all the objects (by symbolic name) that could be contained
within the top-level object, and the maximum versions of each. The result
is a dict like:</p>
<blockquote>
<div>{&#8216;MyObject&#8217;: &#8216;1.23&#8217;, ... }</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>objname</strong> &#8211; The top-level object at which to start</li>
<li><strong>tree</strong> &#8211; Used internally, pass None here.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary of object names and versions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="oslo_versionedobjects.base.remotable">
<code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">remotable</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.remotable" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for remotable object methods.</p>
</dd></dl>

<dl class="function">
<dt id="oslo_versionedobjects.base.remotable_classmethod">
<code class="descclassname">oslo_versionedobjects.base.</code><code class="descname">remotable_classmethod</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="headerlink" href="#oslo_versionedobjects.base.remotable_classmethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for remotable classmethods.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">API</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="exception.html"
                                  title="next chapter">exception</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/oslo.versionedobjects
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/base.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="exception.html" title="exception"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">oslo.versionedobjects 1.21.1.dev6 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/oslo.versionedobjects");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>