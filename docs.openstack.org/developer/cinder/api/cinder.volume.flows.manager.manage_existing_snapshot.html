<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The cinder.volume.flows.manager.manage_existing_snapshot Module &mdash; cinder 10.0.0.0rc2.dev77 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '10.0.0.0rc2.dev77',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="cinder 10.0.0.0rc2.dev77 documentation" href="../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="autoindex.html" />
    <link rel="next" title="The cinder.volume.group_types Module" href="cinder.volume.group_types.html" />
    <link rel="prev" title="The cinder.volume.flows.manager.manage_existing Module" href="cinder.volume.flows.manager.manage_existing.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-cinder.volume.flows.manager.manage_existing_snapshot">
<span id="the-cinder-volume-flows-manager-manage-existing-snapshot-module"></span><h1>The <a class="reference internal" href="#module-cinder.volume.flows.manager.manage_existing_snapshot" title="cinder.volume.flows.manager.manage_existing_snapshot"><code class="xref py py-mod docutils literal"><span class="pre">cinder.volume.flows.manager.manage_existing_snapshot</span></code></a> Module<a class="headerlink" href="#module-cinder.volume.flows.manager.manage_existing_snapshot" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.CreateSnapshotOnFinishTask">
<em class="property">class </em><code class="descname">CreateSnapshotOnFinishTask</code><span class="sig-paren">(</span><em>db</em>, <em>event_suffix</em>, <em>host</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.CreateSnapshotOnFinishTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask" title="cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask</span></code></a></p>
<p>Perform final snapshot actions.</p>
<p>When a snapshot is created successfully it is expected that MQ
notifications and database updates will occur to &#8216;signal&#8217; to others that
the snapshot is now ready for usage. This task does those notifications and
updates in a reliable manner (not re-raising exceptions if said actions can
not be triggered).</p>
<p>Reversion strategy: N/A</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.CreateSnapshotOnFinishTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot</em>, <em>new_status</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.CreateSnapshotOnFinishTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask">
<em class="property">class </em><code class="descname">ExtractSnapshotRefTask</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Extracts snapshot reference for given snapshot id.</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = 'snapshot_ref'</em><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_id</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_id</em>, <em>result</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ExtractSnapshotRefTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask">
<em class="property">class </em><code class="descname">ManageExistingTask</code><span class="sig-paren">(</span><em>db</em>, <em>driver</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Brings an existing snapshot under Cinder management.</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = set(['snapshot', 'new_status'])</em><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_ref</em>, <em>manage_existing_ref</em>, <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.ManageExistingTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask">
<em class="property">class </em><code class="descname">NotifySnapshotActionTask</code><span class="sig-paren">(</span><em>db</em>, <em>event_suffix</em>, <em>host</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Performs a notification about the given snapshot when called.</p>
<p>Reversion strategy: N/A</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.NotifySnapshotActionTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask">
<em class="property">class </em><code class="descname">PrepareForQuotaReservationTask</code><span class="sig-paren">(</span><em>db</em>, <em>driver</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Gets the snapshot size from the driver.</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = set(['snapshot_properties', 'size'])</em><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>snapshot_ref</em>, <em>manage_existing_ref</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.PrepareForQuotaReservationTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask">
<em class="property">class </em><code class="descname">QuotaCommitTask</code><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Commits the reservation.</p>
<p>Reversion strategy: N/A (the rollback will be handled by the task that did
the initial reservation (see: QuotaReserveTask).</p>
<p>Warning Warning: if the process that is running this reserve and commit
process fails (or is killed before the quota is rolled back or committed
it does appear like the quota will never be rolled back). This makes
software upgrades hard (inflight operations will need to be stopped or
allowed to complete before the upgrade can occur). <em>In the future</em> when
taskflow has persistence built-in this should be easier to correct via
an automated or manual process.</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>reservations</em>, <em>snapshot_properties</em>, <em>optional_args</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>result</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaCommitTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask">
<em class="property">class </em><code class="descname">QuotaReserveTask</code><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Reserves a single snapshot with the given size.</p>
<p>Reversion strategy: rollback the quota reservation.</p>
<p>Warning Warning: if the process that is running this reserve and commit
process fails (or is killed before the quota is rolled back or committed
it does appear like the quota will never be rolled back). This makes
software upgrades hard (inflight operations will need to be stopped or
allowed to complete before the upgrade can occur). <em>In the future</em> when
taskflow has persistence built-in this should be easier to correct via
an automated or manual process.</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = set(['reservations'])</em><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>size</em>, <em>optional_args</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>result</em>, <em>optional_args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.QuotaReserveTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="cinder.volume.flows.manager.manage_existing_snapshot.get_flow">
<code class="descname">get_flow</code><span class="sig-paren">(</span><em>context</em>, <em>db</em>, <em>driver</em>, <em>host</em>, <em>snapshot_id</em>, <em>ref</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.manage_existing_snapshot.get_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs and returns the manager entry point flow.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="cinder.volume.flows.manager.manage_existing.html"
                                  title="previous chapter">The <code class="docutils literal"><span class="pre">cinder.volume.flows.manager.manage_existing</span></code> Module</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="cinder.volume.group_types.html"
                                  title="next chapter">The <code class="docutils literal"><span class="pre">cinder.volume.group_types</span></code> Module</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/cinder
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/cinder.volume.flows.manager.manage_existing_snapshot.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cinder.volume.group_types.html" title="The cinder.volume.group_types Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cinder.volume.flows.manager.manage_existing.html" title="The cinder.volume.flows.manager.manage_existing Module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">cinder 10.0.0.0rc2.dev77 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../devref/index.html" >Developer Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="autoindex.html" accesskey="U">&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-present, OpenStack Foundation.
      Last updated on Tue Feb 14 19:31:55 2017, commit e7efdb6.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/cinder");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>