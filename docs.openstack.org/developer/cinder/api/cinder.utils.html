<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The cinder.utils Module &mdash; cinder 10.0.0.0rc2.dev77 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '10.0.0.0rc2.dev77',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="cinder 10.0.0.0rc2.dev77 documentation" href="../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="autoindex.html" />
    <link rel="next" title="The cinder.version Module" href="cinder.version.html" />
    <link rel="prev" title="The cinder.transfer.api Module" href="cinder.transfer.api.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-cinder.utils">
<span id="the-cinder-utils-module"></span><h1>The <a class="reference internal" href="#module-cinder.utils" title="cinder.utils"><code class="xref py py-mod docutils literal"><span class="pre">cinder.utils</span></code></a> Module<a class="headerlink" href="#module-cinder.utils" title="Permalink to this headline">¶</a></h1>
<p>Utilities and helper functions.</p>
<dl class="class">
<dt id="cinder.utils.ComparableMixin">
<em class="property">class </em><code class="descname">ComparableMixin</code><a class="headerlink" href="#cinder.utils.ComparableMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="cinder.utils.DO_NOTHING">
<code class="descname">DO_NOTHING</code><a class="headerlink" href="#cinder.utils.DO_NOTHING" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that literrally does nothing.</p>
<p>We inherit from str in case it&#8217;s called with json.dumps.</p>
</dd></dl>

<dl class="class">
<dt id="cinder.utils.DoNothing">
<em class="property">class </em><code class="descname">DoNothing</code><a class="headerlink" href="#cinder.utils.DoNothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">str</span></code></p>
<p>Class that literrally does nothing.</p>
<p>We inherit from str in case it&#8217;s called with json.dumps.</p>
</dd></dl>

<dl class="class">
<dt id="cinder.utils.TraceWrapperMetaclass">
<em class="property">class </em><code class="descname">TraceWrapperMetaclass</code><a class="headerlink" href="#cinder.utils.TraceWrapperMetaclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">type</span></code></p>
<p>Metaclass that wraps all methods of a class with trace_method.</p>
<p>This metaclass will cause every function inside of the class to be
decorated with the trace_method decorator.</p>
<p>To use the metaclass you define a class like so:
&#64;six.add_metaclass(utils.TraceWrapperMetaclass)
class MyClass(object):</p>
</dd></dl>

<dl class="class">
<dt id="cinder.utils.TraceWrapperWithABCMetaclass">
<em class="property">class </em><code class="descname">TraceWrapperWithABCMetaclass</code><a class="headerlink" href="#cinder.utils.TraceWrapperWithABCMetaclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">abc.ABCMeta</span></code>, <a class="reference internal" href="#cinder.utils.TraceWrapperMetaclass" title="cinder.utils.TraceWrapperMetaclass"><code class="xref py py-class docutils literal"><span class="pre">cinder.utils.TraceWrapperMetaclass</span></code></a></p>
<p>Metaclass that wraps all methods of a class with trace.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.add_visible_admin_metadata">
<code class="descname">add_visible_admin_metadata</code><span class="sig-paren">(</span><em>volume</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.add_visible_admin_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Add user-visible admin metadata to regular metadata.</p>
<p>Extracts the admin metadata keys that are to be made visible to
non-administrators, and adds them to the regular metadata structure for the
passed-in volume.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.as_int">
<code class="descname">as_int</code><span class="sig-paren">(</span><em>obj</em>, <em>quiet=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.as_int" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.brick_attach_volume_encryptor">
<code class="descname">brick_attach_volume_encryptor</code><span class="sig-paren">(</span><em>context</em>, <em>attach_info</em>, <em>encryption</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.brick_attach_volume_encryptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach encryption layer.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.brick_detach_volume_encryptor">
<code class="descname">brick_detach_volume_encryptor</code><span class="sig-paren">(</span><em>attach_info</em>, <em>encryption</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.brick_detach_volume_encryptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach encryption layer.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.brick_get_connector">
<code class="descname">brick_get_connector</code><span class="sig-paren">(</span><em>protocol</em>, <em>driver=None</em>, <em>use_multipath=False</em>, <em>device_scan_attempts=3</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.brick_get_connector" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper to get a brick connector object.</p>
<p>This automatically populates the required protocol as well
as the root_helper needed to execute commands.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.brick_get_connector_properties">
<code class="descname">brick_get_connector_properties</code><span class="sig-paren">(</span><em>multipath=False</em>, <em>enforce_multipath=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.brick_get_connector_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper to automatically set root_helper in brick calls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>multipath</strong> &#8211; A boolean indicating whether the connector can
support multipath.</li>
<li><strong>enforce_multipath</strong> &#8211; If True, it raises exception when multipath=True
is specified but multipathd is not running.
If False, it falls back to multipath=False
when multipathd is not running.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.brick_get_encryptor">
<code class="descname">brick_get_encryptor</code><span class="sig-paren">(</span><em>connection_info</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.brick_get_encryptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper to get a brick encryptor object.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.build_or_str">
<code class="descname">build_or_str</code><span class="sig-paren">(</span><em>elements</em>, <em>str_format=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.build_or_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a string of elements joined by &#8216;or&#8217;.</p>
<p>Will join strings with the &#8216;or&#8217; word and if a str_format is provided it
will be used to format the resulted joined string.
If there are no elements an empty string will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>elements</strong> (<em>String or iterable of strings.</em>) &#8211; Elements we want to join.</li>
<li><strong>str_format</strong> (<em>String.</em>) &#8211; String to use to format the response.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.calculate_virtual_free_capacity">
<code class="descname">calculate_virtual_free_capacity</code><span class="sig-paren">(</span><em>total_capacity</em>, <em>free_capacity</em>, <em>provisioned_capacity</em>, <em>thin_provisioning_support</em>, <em>max_over_subscription_ratio</em>, <em>reserved_percentage</em>, <em>thin</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.calculate_virtual_free_capacity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the virtual free capacity based on thin provisioning support.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>total_capacity</strong> &#8211; total_capacity_gb of a host_state or pool.</li>
<li><strong>free_capacity</strong> &#8211; free_capacity_gb of a host_state or pool.</li>
<li><strong>provisioned_capacity</strong> &#8211; provisioned_capacity_gb of a host_state
or pool.</li>
<li><strong>thin_provisioning_support</strong> &#8211; thin_provisioning_support of
a host_state or a pool.</li>
<li><strong>max_over_subscription_ratio</strong> &#8211; max_over_subscription_ratio of
a host_state or a pool</li>
<li><strong>reserved_percentage</strong> &#8211; reserved_percentage of a host_state or
a pool.</li>
<li><strong>thin</strong> &#8211; whether volume to be provisioned is thin</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the calculated virtual free capacity.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.check_exclusive_options">
<code class="descname">check_exclusive_options</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.check_exclusive_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that only one of the provided options is actually not-none.</p>
<p>Iterates over all the kwargs passed in and checks that only one of said
arguments is not-none, if more than one is not-none then an exception will
be raised with the names of those arguments who were not-none.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.check_metadata_properties">
<code class="descname">check_metadata_properties</code><span class="sig-paren">(</span><em>metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.check_metadata_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the volume metadata properties are valid.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.check_ssh_injection">
<code class="descname">check_ssh_injection</code><span class="sig-paren">(</span><em>cmd_list</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.check_ssh_injection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.check_string_length">
<code class="descname">check_string_length</code><span class="sig-paren">(</span><em>value</em>, <em>name</em>, <em>min_length=0</em>, <em>max_length=None</em>, <em>allow_all_spaces=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.check_string_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the length of specified string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> &#8211; the value of the string</li>
<li><strong>name</strong> &#8211; the name of the string</li>
<li><strong>min_length</strong> &#8211; the min_length of the string</li>
<li><strong>max_length</strong> &#8211; the max_length of the string</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.convert_str">
<code class="descname">convert_str</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.convert_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to native string.</p>
<p>Convert bytes and Unicode strings to native strings:</p>
<ul class="simple">
<li>convert to bytes on Python 2:
encode Unicode using encodeutils.safe_encode()</li>
<li>convert to Unicode on Python 3: decode bytes from UTF-8</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>*cmd</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience wrapper around oslo&#8217;s execute() method.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.get_blkdev_major_minor">
<code class="descname">get_blkdev_major_minor</code><span class="sig-paren">(</span><em>path</em>, <em>lookup_for_file=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_blkdev_major_minor" title="Permalink to this definition">¶</a></dt>
<dd><p>Get &#8216;major:minor&#8217; number of block device.</p>
<p>Get the device&#8217;s &#8216;major:minor&#8217; number of a block device to control
I/O ratelimit of the specified path.
If lookup_for_file is True and the path is a regular file, lookup a disk
device which the file lies on and returns the result for the device.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.get_bool_param">
<code class="descname">get_bool_param</code><span class="sig-paren">(</span><em>param_string</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_bool_param" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.get_file_gid">
<code class="descname">get_file_gid</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_file_gid" title="Permalink to this definition">¶</a></dt>
<dd><p>This primarily exists to make unit testing easier.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.get_file_mode">
<code class="descname">get_file_mode</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_file_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>This primarily exists to make unit testing easier.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.get_file_size">
<code class="descname">get_file_size</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_file_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the file size.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.get_root_helper">
<code class="descname">get_root_helper</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.get_root_helper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.if_notifications_enabled">
<code class="descname">if_notifications_enabled</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.if_notifications_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls decorated method only if notifications are enabled.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.is_blk_device">
<code class="descname">is_blk_device</code><span class="sig-paren">(</span><em>dev</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.is_blk_device" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.is_none_string">
<code class="descname">is_none_string</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.is_none_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a string represents a None value.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.last_completed_audit_period">
<code class="descname">last_completed_audit_period</code><span class="sig-paren">(</span><em>unit=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.last_completed_audit_period" title="Permalink to this definition">¶</a></dt>
<dd><p>This method gives you the most recently <em>completed</em> audit period.</p>
<dl class="docutils">
<dt>arguments:</dt>
<dd><dl class="first last docutils">
<dt>units: string, one of &#8216;hour&#8217;, &#8216;day&#8217;, &#8216;month&#8217;, &#8216;year&#8217;</dt>
<dd>Periods normally begin at the beginning (UTC) of the
period unit (So a &#8216;day&#8217; period begins at midnight UTC,
a &#8216;month&#8217; unit on the 1st, a &#8216;year&#8217; on Jan, 1)
unit string may be appended with an optional offset
like so:  <a class="reference external" href="mailto:'day&#37;&#52;&#48;18">'day<span>&#64;</span>18</a>&#8216;  This will begin the period at 18:00
UTC.  <a class="reference external" href="mailto:'month&#37;&#52;&#48;15">'month<span>&#64;</span>15</a>&#8216; starts a monthly period on the 15th,
and year&#64;3 begins a yearly one on March 1st.</dd>
</dl>
</dd>
<dt>returns:  2 tuple of datetimes (begin, end)</dt>
<dd>The begin timestamp of this audit period is the same as the
end of the previous.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.log_unsupported_driver_warning">
<code class="descname">log_unsupported_driver_warning</code><span class="sig-paren">(</span><em>driver</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.log_unsupported_driver_warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Annoy the log about unsupported drivers.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.make_dev_path">
<code class="descname">make_dev_path</code><span class="sig-paren">(</span><em>dev</em>, <em>partition=None</em>, <em>base='/dev'</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.make_dev_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path to a particular device.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_dev_path</span><span class="p">(</span><span class="s1">&#39;xvdc&#39;</span><span class="p">)</span>
<span class="go">/dev/xvdc</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_dev_path</span><span class="p">(</span><span class="s1">&#39;xvdc&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">/dev/xvdc1</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.monkey_patch">
<code class="descname">monkey_patch</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.monkey_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Patches decorators for all functions in a specified module.</p>
<p>If the CONF.monkey_patch set as True,
this function patches a decorator
for all functions in specified modules.</p>
<p>You can set decorators for each modules
using CONF.monkey_patch_modules.
The format is &#8220;Module path:Decorator function&#8221;.
Example: &#8216;cinder.api.ec2.cloud:&#8217;      cinder.openstack.common.notifier.api.notify_decorator&#8217;</p>
<p>Parameters of the decorator is as follows.
(See cinder.openstack.common.notifier.api.notify_decorator)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; name of the function</li>
<li><strong>function</strong> &#8211; object of the function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.notifications_enabled">
<code class="descname">notifications_enabled</code><span class="sig-paren">(</span><em>conf</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.notifications_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if oslo notifications are enabled.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.read_file_as_root">
<code class="descname">read_file_as_root</code><span class="sig-paren">(</span><em>file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.read_file_as_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Secure helper to read file as root.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.remove_invalid_filter_options">
<code class="descname">remove_invalid_filter_options</code><span class="sig-paren">(</span><em>context</em>, <em>filters</em>, <em>allowed_search_options</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.remove_invalid_filter_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove search options that are not valid for non-admin API/context.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.require_driver_initialized">
<code class="descname">require_driver_initialized</code><span class="sig-paren">(</span><em>driver</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.require_driver_initialized" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if <cite>driver</cite> is initialized</p>
<p>If the driver is not initialized, an exception will be raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Params driver:</th><td class="field-body">The driver instance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><cite>exception.DriverNotInitialized</cite></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.resolve_hostname">
<code class="descname">resolve_hostname</code><span class="sig-paren">(</span><em>hostname</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.resolve_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves host name to IP address.</p>
<p>Resolves a host name (my.data.point.com) to an IP address (10.12.143.11).
This routine also works if the data passed in hostname is already an IP.
In this case, the same IP address will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hostname</strong> &#8211; Host name to resolve.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">IP Address for Host name.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.retry">
<code class="descname">retry</code><span class="sig-paren">(</span><em>exceptions</em>, <em>interval=1</em>, <em>retries=3</em>, <em>backoff_rate=2</em>, <em>wait_random=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.retry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.robust_file_write">
<code class="descname">robust_file_write</code><span class="sig-paren">(</span><em>directory</em>, <em>filename</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.robust_file_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Robust file write.</p>
<p>Use &#8220;write to temp file and rename&#8221; model for writing the
persistence file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>directory</strong> &#8211; Target directory to create a file.</li>
<li><strong>filename</strong> &#8211; File name to store specified data.</li>
<li><strong>data</strong> &#8211; String data.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.sanitize_hostname">
<code class="descname">sanitize_hostname</code><span class="sig-paren">(</span><em>hostname</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.sanitize_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a hostname which conforms to RFC-952 and RFC-1123 specs.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.service_expired_time">
<code class="descname">service_expired_time</code><span class="sig-paren">(</span><em>with_timezone=False</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.service_expired_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.setup_tracing">
<code class="descname">setup_tracing</code><span class="sig-paren">(</span><em>trace_flags</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.setup_tracing" title="Permalink to this definition">¶</a></dt>
<dd><p>Set global variables for each trace flag.</p>
<p>Sets variables TRACE_METHOD and TRACE_API, which represent
whether to log method and api traces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>trace_flags</strong> &#8211; a list of strings</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.tempdir">
<code class="descname">tempdir</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.tempdir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="cinder.utils.temporary_chown">
<code class="descname">temporary_chown</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.temporary_chown" title="Permalink to this definition">¶</a></dt>
<dd><p>Temporarily chown a path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Params owner_uid:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">UID of temporary owner (defaults to current user)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.trace">
<code class="descname">trace</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace calls to the decorated function.</p>
<p>This decorator should always be defined as the outermost decorator so it
is defined last. This is important so it does not interfere
with other decorators.</p>
<p>Using this decorator on a function will cause its execution to be logged at
<cite>DEBUG</cite> level with arguments, return values, and exceptions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a function decorator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.trace_api">
<code class="descname">trace_api</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.trace_api" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates a function if TRACE_API is true.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.trace_method">
<code class="descname">trace_method</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.trace_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates a function if TRACE_METHOD is true.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.validate_dictionary_string_length">
<code class="descname">validate_dictionary_string_length</code><span class="sig-paren">(</span><em>specs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.validate_dictionary_string_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the length of each key and value of dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.validate_integer">
<code class="descname">validate_integer</code><span class="sig-paren">(</span><em>value</em>, <em>name</em>, <em>min_value=None</em>, <em>max_value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.validate_integer" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that value is a valid integer, potentially within range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>value</strong> &#8211; the value of the integer</li>
<li><strong>name</strong> &#8211; the name of the integer</li>
<li><strong>min_length</strong> &#8211; the min_length of the integer</li>
<li><strong>max_length</strong> &#8211; the max_length of the integer</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">integer</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="cinder.utils.walk_class_hierarchy">
<code class="descname">walk_class_hierarchy</code><span class="sig-paren">(</span><em>clazz</em>, <em>encountered=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.utils.walk_class_hierarchy" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk class hierarchy, yielding most derived classes first.</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="cinder.transfer.api.html"
                                  title="previous chapter">The <code class="docutils literal"><span class="pre">cinder.transfer.api</span></code> Module</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="cinder.version.html"
                                  title="next chapter">The <code class="docutils literal"><span class="pre">cinder.version</span></code> Module</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/cinder
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/cinder.utils.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cinder.version.html" title="The cinder.version Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cinder.transfer.api.html" title="The cinder.transfer.api Module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">cinder 10.0.0.0rc2.dev77 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../devref/index.html" >Developer Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="autoindex.html" accesskey="U">&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-present, OpenStack Foundation.
      Last updated on Tue Feb 14 19:31:55 2017, commit e7efdb6.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/cinder");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>