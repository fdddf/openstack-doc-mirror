<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The cinder.volume.flows.manager.create_volume Module &mdash; cinder 10.0.0.0rc2.dev77 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '10.0.0.0rc2.dev77',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="cinder 10.0.0.0rc2.dev77 documentation" href="../index.html" />
    <link rel="up" title="&lt;no title&gt;" href="autoindex.html" />
    <link rel="next" title="The cinder.volume.flows.manager.manage_existing Module" href="cinder.volume.flows.manager.manage_existing.html" />
    <link rel="prev" title="The cinder.volume.flows.common Module" href="cinder.volume.flows.common.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-cinder.volume.flows.manager.create_volume">
<span id="the-cinder-volume-flows-manager-create-volume-module"></span><h1>The <a class="reference internal" href="#module-cinder.volume.flows.manager.create_volume" title="cinder.volume.flows.manager.create_volume"><code class="xref py py-mod docutils literal"><span class="pre">cinder.volume.flows.manager.create_volume</span></code></a> Module<a class="headerlink" href="#module-cinder.volume.flows.manager.create_volume" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.CreateVolumeFromSpecTask">
<em class="property">class </em><code class="descname">CreateVolumeFromSpecTask</code><span class="sig-paren">(</span><em>manager</em>, <em>db</em>, <em>driver</em>, <em>image_volume_cache=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.CreateVolumeFromSpecTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Creates a volume from a provided specification.</p>
<p>Reversion strategy: N/A</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.CreateVolumeFromSpecTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em>, <em>volume_spec</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.CreateVolumeFromSpecTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.CreateVolumeOnFinishTask">
<em class="property">class </em><code class="descname">CreateVolumeOnFinishTask</code><span class="sig-paren">(</span><em>db</em>, <em>event_suffix</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.CreateVolumeOnFinishTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask" title="cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask</span></code></a></p>
<p>On successful volume creation this will perform final volume actions.</p>
<p>When a volume is created successfully it is expected that MQ notifications
and database updates will occur to &#8216;signal&#8217; to others that the volume is
now ready for usage. This task does those notifications and updates in a
reliable manner (not re-raising exceptions if said actions can not be
triggered).</p>
<p>Reversion strategy: N/A</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.CreateVolumeOnFinishTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em>, <em>volume_spec</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.CreateVolumeOnFinishTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask">
<em class="property">class </em><code class="descname">ExtractVolumeRefTask</code><span class="sig-paren">(</span><em>db</em>, <em>host</em>, <em>set_error=True</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Extracts volume reference for given volume id.</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = 'refreshed'</em><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em>, <em>result</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeRefTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask">
<em class="property">class </em><code class="descname">ExtractVolumeSpecTask</code><span class="sig-paren">(</span><em>db</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Extracts a spec of a volume to be created into a common structure.</p>
<p>This task extracts and organizes the input requirements into a common
and easier to analyze structure for later tasks to use. It will also
attach the underlying database volume reference which can be used by
other tasks to reference for further details about the volume to be.</p>
<p>Reversion strategy: N/A</p>
<dl class="attribute">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.default_provides">
<code class="descname">default_provides</code><em class="property"> = 'volume_spec'</em><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.default_provides" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em>, <em>request_spec</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>result</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.ExtractVolumeSpecTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask">
<em class="property">class </em><code class="descname">NotifyVolumeActionTask</code><span class="sig-paren">(</span><em>db</em>, <em>event_suffix</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Performs a notification about the given volume when called.</p>
<p>Reversion strategy: N/A</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>context</em>, <em>volume</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.NotifyVolumeActionTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask">
<em class="property">class </em><code class="descname">OnFailureRescheduleTask</code><span class="sig-paren">(</span><em>reschedule_context</em>, <em>db</em>, <em>driver</em>, <em>scheduler_rpcapi</em>, <em>do_reschedule</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="cinder.flow_utils.html#cinder.flow_utils.CinderTask" title="cinder.flow_utils.CinderTask"><code class="xref py py-class docutils literal"><span class="pre">cinder.flow_utils.CinderTask</span></code></a></p>
<p>Triggers a rescheduling request to be sent when reverting occurs.</p>
<p>If rescheduling doesn&#8217;t occur this task errors out the volume.</p>
<p>Reversion strategy: Triggers the rescheduling mechanism whereby a cast gets
sent to the scheduler rpc api to allow for an attempt X of Y for scheduling
this volume elsewhere.</p>
<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask.revert">
<code class="descname">revert</code><span class="sig-paren">(</span><em>context</em>, <em>result</em>, <em>flow_failures</em>, <em>volume</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.OnFailureRescheduleTask.revert" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="cinder.volume.flows.manager.create_volume.get_flow">
<code class="descname">get_flow</code><span class="sig-paren">(</span><em>context</em>, <em>manager</em>, <em>db</em>, <em>driver</em>, <em>scheduler_rpcapi</em>, <em>host</em>, <em>volume</em>, <em>allow_reschedule</em>, <em>reschedule_context</em>, <em>request_spec</em>, <em>filter_properties</em>, <em>image_volume_cache=None</em><span class="sig-paren">)</span><a class="headerlink" href="#cinder.volume.flows.manager.create_volume.get_flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs and returns the manager entrypoint flow.</p>
<p>This flow will do the following:</p>
<ol class="arabic simple">
<li>Determines if rescheduling is enabled (ahead of time).</li>
<li>Inject keys &amp; values for dependent tasks.</li>
<li>Selects 1 of 2 activated only on <em>failure</em> tasks (one to update the db
status &amp; notify or one to update the db status &amp; notify &amp; <em>reschedule</em>).</li>
<li>Extracts a volume specification from the provided inputs.</li>
<li>Notifies that the volume has started to be created.</li>
<li>Creates a volume from the extracted volume specification.</li>
<li>Attaches a on-success <em>only</em> task that notifies that the volume creation
has ended and performs further database status updates.</li>
</ol>
</dd></dl>

</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="cinder.volume.flows.common.html"
                                  title="previous chapter">The <code class="docutils literal"><span class="pre">cinder.volume.flows.common</span></code> Module</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="cinder.volume.flows.manager.manage_existing.html"
                                  title="next chapter">The <code class="docutils literal"><span class="pre">cinder.volume.flows.manager.manage_existing</span></code> Module</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/cinder
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/api/cinder.volume.flows.manager.create_volume.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cinder.volume.flows.manager.manage_existing.html" title="The cinder.volume.flows.manager.manage_existing Module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cinder.volume.flows.common.html" title="The cinder.volume.flows.common Module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">cinder 10.0.0.0rc2.dev77 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../devref/index.html" >Developer Guide</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="autoindex.html" accesskey="U">&lt;no title&gt;</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2010-present, OpenStack Foundation.
      Last updated on Tue Feb 14 19:31:55 2017, commit e7efdb6.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/cinder");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>