<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>First Contribution to Swift &mdash; swift 2.12.1.dev102 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.12.1.dev102',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="swift 2.12.1.dev102 documentation" href="index.html" />
    <link rel="next" title="Adding Storage Policies to an Existing SAIO" href="policies_saio.html" />
    <link rel="prev" title="SAIO - Swift All In One" href="development_saio.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="first-contribution-to-swift">
<h1>First Contribution to Swift<a class="headerlink" href="#first-contribution-to-swift" title="Permalink to this headline">¶</a></h1>
<div class="section" id="getting-swift">
<h2>Getting Swift<a class="headerlink" href="#getting-swift" title="Permalink to this headline">¶</a></h2>
<p>Swift&#8217;s source code is hosted on github and managed with git.  The current
trunk can be checked out like this:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/openstack/swift.git</span></code></div></blockquote>
<p>This will clone the Swift repository under your account.</p>
<p>A source tarball for the latest release of Swift is available on the
<a class="reference external" href="https://launchpad.net/swift">launchpad project page</a>.</p>
<p>Prebuilt packages for Ubuntu and RHEL variants are available.</p>
<ul class="simple">
<li><a class="reference external" href="https://launchpad.net/ubuntu/+source/swift">Swift Ubuntu Packages</a></li>
<li><a class="reference external" href="https://www.rdoproject.org/Repositories">Swift RDO Packages</a></li>
</ul>
</div>
<div class="section" id="source-control-setup">
<h2>Source Control Setup<a class="headerlink" href="#source-control-setup" title="Permalink to this headline">¶</a></h2>
<p>Swift uses <cite>git</cite> for source control. The OpenStack
<a class="reference external" href="http://docs.openstack.org/infra/manual/developers.html">Developer&#8217;s Guide</a>
describes the steps for setting up Git and all the necessary accounts for
contributing code to Swift.</p>
</div>
<div class="section" id="changes-to-swift">
<h2>Changes to Swift<a class="headerlink" href="#changes-to-swift" title="Permalink to this headline">¶</a></h2>
<p>Once you have the source code and source control set up, you can make your
changes to Swift.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="development_guidelines.html"><em>Development Guidelines</em></a> describes the testing
requirements before submitting Swift code.</p>
<p>In summary, you can execute tox from the swift home directory (where you
checked out the source code):</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">tox</span></code></div></blockquote>
<p>Tox will present tests results. Notice that in the beginning, it is very common
to break many coding style guidelines.</p>
</div>
<div class="section" id="proposing-changes-to-swift">
<h2>Proposing changes to Swift<a class="headerlink" href="#proposing-changes-to-swift" title="Permalink to this headline">¶</a></h2>
<p>The OpenStack
<a class="reference external" href="http://docs.openstack.org/infra/manual/developers.html">Developer&#8217;s Guide</a>
describes the most common <cite>git</cite> commands that you will need.</p>
<p>Following is a list of the commands that you need to know for your first
contribution to Swift:</p>
<p>To clone a copy of Swift:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/openstack/swift.git</span></code></div></blockquote>
<p>Under the swift directory, set up the Gerrit repository. The following command
configures the repository to know about Gerrit and makes the Change-Id commit
hook get installed. You only need to do this once:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">review</span> <span class="pre">-s</span></code></div></blockquote>
<p>To create your development branch (substitute branch_name for a name of your
choice:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">&lt;branch_name&gt;</span></code></div></blockquote>
<p>To check the files that have been updated in your branch:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></code></div></blockquote>
<p>To check the differences between your branch and the repository:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span></code></div></blockquote>
<p>Assuming you have not added new files, you commit all your changes using:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-a</span></code></div></blockquote>
<p>Read the <a class="reference external" href="https://wiki.openstack.org/wiki/GitCommitMessages?%22Summary%20of%20Git%20commit%20message%20structure%22#Summary_of_Git_commit_message_structure">Summary of Git commit message structure</a>
for best practices on writing the commit message. When you are ready to send
your changes for review use:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">review</span></code></div></blockquote>
<p>If successful, Git response message will contain a URL you can use to track your
changes.</p>
<p>If you need to make further changes to the same review, you can commit them
using:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-a</span> <span class="pre">--amend</span></code></div></blockquote>
<p>This will commit the changes under the same set of changes you issued earlier.
Notice that in order to send your latest version for review, you will still
need to call:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">review</span></code></div></blockquote>
</div>
<div class="section" id="tracking-your-changes">
<h2>Tracking your changes<a class="headerlink" href="#tracking-your-changes" title="Permalink to this headline">¶</a></h2>
<p>After you proposed your changes to Swift, you can track the review in:</p>
<ul class="simple">
<li><a class="reference external" href="https://review.openstack.org">https://review.openstack.org</a></li>
</ul>
</div>
<div class="section" id="post-rebase-instructions">
<span id="id2"></span><h2>Post rebase instructions<a class="headerlink" href="#post-rebase-instructions" title="Permalink to this headline">¶</a></h2>
<p>After rebasing, the following steps should be performed to rebuild the swift
installation. Note that these commands should be performed from the root of the
swift repo directory (e.g. $HOME/swift/):</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code></p>
<p><code class="docutils literal"><span class="pre">sudo</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">test-requirements.txt</span></code></p>
</div></blockquote>
<p>If using TOX, depending on the changes made during the rebase, you may need to
rebuild the TOX environment (generally this will be the case if
test-requirements.txt was updated such that a new version of a package is
required), this can be accomplished using the &#8216;-r&#8217; argument to the TOX cli:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">tox</span> <span class="pre">-r</span></code></div></blockquote>
<p>You can include any of the other TOX arguments as well, for example, to run the
pep8 suite and rebuild the TOX environment the following can be used:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">tox</span> <span class="pre">-r</span> <span class="pre">-e</span> <span class="pre">pep8</span></code></div></blockquote>
<p>The rebuild option only needs to be specified once for a particular build (e.g.
pep8), that is further invocations of the same build will not require this
until the next rebase.</p>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>You may run into the following errors when starting Swift if you rebase
your commit using:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">git</span> <span class="pre">rebase</span></code></div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/local/bin/swift-init&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">5</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
        <span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">require</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/pkg_resources.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">2749</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
        <span class="n">working_set</span> <span class="o">=</span> <span class="n">WorkingSet</span><span class="o">.</span><span class="n">_build_master</span><span class="p">()</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/pkg_resources.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">446</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_build_master</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_build_from_requirements</span><span class="p">(</span><span class="n">__requires__</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/pkg_resources.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">459</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_build_from_requirements</span>
        <span class="n">dists</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">reqs</span><span class="p">,</span> <span class="n">Environment</span><span class="p">())</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/pkg_resources.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">628</span><span class="p">,</span> <span class="ow">in</span> <span class="n">resolve</span>
        <span class="k">raise</span> <span class="n">DistributionNotFound</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
<span class="n">pkg_resources</span><span class="o">.</span><span class="n">DistributionNotFound</span><span class="p">:</span> <span class="n">swift</span><span class="o">==</span><span class="mf">2.3</span><span class="o">.</span><span class="mf">1.</span><span class="n">devXXX</span>
<span class="p">(</span><span class="n">where</span> <span class="n">XXX</span> <span class="n">represents</span> <span class="n">a</span> <span class="n">dev</span> <span class="n">version</span> <span class="n">of</span> <span class="n">Swift</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/local/bin/swift-proxy-server&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">10</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="nb">execfile</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/home/swift/swift/bin/swift-proxy-server&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">23</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">run_wsgi</span><span class="p">(</span><span class="n">conf_file</span><span class="p">,</span> <span class="s1">&#39;proxy-server&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">))</span>
    <span class="n">File</span> <span class="s2">&quot;/home/swift/swift/swift/common/wsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">888</span><span class="p">,</span> <span class="ow">in</span> <span class="n">run_wsgi</span>
      <span class="n">loadapp</span><span class="p">(</span><span class="n">conf_path</span><span class="p">,</span> <span class="n">global_conf</span><span class="o">=</span><span class="n">global_conf</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/home/swift/swift/swift/common/wsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">390</span><span class="p">,</span> <span class="ow">in</span> <span class="n">loadapp</span>
      <span class="n">func</span><span class="p">(</span><span class="n">PipelineWrapper</span><span class="p">(</span><span class="n">ctx</span><span class="p">))</span>
    <span class="n">File</span> <span class="s2">&quot;/home/swift/swift/swift/proxy/server.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">602</span><span class="p">,</span> <span class="ow">in</span> <span class="n">modify_wsgi_pipeline</span>
      <span class="n">ctx</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">filter_name</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/home/swift/swift/swift/common/wsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">329</span><span class="p">,</span> <span class="ow">in</span> <span class="n">create_filter</span>
      <span class="n">global_conf</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">global_conf</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">296</span><span class="p">,</span> <span class="ow">in</span> <span class="n">loadcontext</span>
      <span class="n">global_conf</span><span class="o">=</span><span class="n">global_conf</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">328</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_loadegg</span>
      <span class="k">return</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">global_conf</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">620</span><span class="p">,</span> <span class="ow">in</span> <span class="n">get_context</span>
      <span class="n">object_type</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">File</span> <span class="s2">&quot;/usr/lib/python2.7/dist-packages/paste/deploy/loadwsgi.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">659</span><span class="p">,</span> <span class="ow">in</span> <span class="n">find_egg_entry_point</span>
      <span class="k">for</span> <span class="n">prot</span> <span class="ow">in</span> <span class="n">protocol_options</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;(no entry points)&#39;</span><span class="p">))))</span>
<span class="ne">LookupError</span><span class="p">:</span> <span class="n">Entry</span> <span class="n">point</span> <span class="s1">&#39;versioned_writes&#39;</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">in</span> <span class="n">egg</span> <span class="s1">&#39;swift&#39;</span> <span class="p">(</span><span class="nb">dir</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">swift</span><span class="o">/</span><span class="n">swift</span><span class="p">;</span> <span class="n">protocols</span><span class="p">:</span> <span class="n">paste</span><span class="o">.</span><span class="n">filter_factory</span><span class="p">,</span> <span class="n">paste</span><span class="o">.</span><span class="n">filter_app_factory</span><span class="p">;</span> <span class="n">entry_points</span><span class="p">:</span> <span class="p">)</span>
</pre></div>
</div>
<p>This happens because <cite>git rebase</cite> will retrieve code for a different version of
Swift in the development stream, but the start scripts under <cite>/usr/local/bin</cite> have
not been updated. The solution is to follow the steps described in the
<a class="reference internal" href="#post-rebase-instructions"><span>Post rebase instructions</span></a> section.</p>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">First Contribution to Swift</a><ul>
<li><a class="reference internal" href="#getting-swift">Getting Swift</a></li>
<li><a class="reference internal" href="#source-control-setup">Source Control Setup</a></li>
<li><a class="reference internal" href="#changes-to-swift">Changes to Swift</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#proposing-changes-to-swift">Proposing changes to Swift</a></li>
<li><a class="reference internal" href="#tracking-your-changes">Tracking your changes</a></li>
<li><a class="reference internal" href="#post-rebase-instructions">Post rebase instructions</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="development_saio.html"
                                  title="previous chapter">SAIO - Swift All In One</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="policies_saio.html"
                                  title="next chapter">Adding Storage Policies to an Existing SAIO</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/swift
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/first_contribution_swift.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="policies_saio.html" title="Adding Storage Policies to an Existing SAIO"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="development_saio.html" title="SAIO - Swift All In One"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">swift 2.12.1.dev102 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, OpenStack Foundation.
      Last updated on &#39;Tue Feb 14 07:57:22 2017, commit 7cb6882&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/swift");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>