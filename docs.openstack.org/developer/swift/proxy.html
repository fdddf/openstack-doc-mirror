<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Proxy &mdash; swift 2.12.1.dev102 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.12.1.dev102',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="swift 2.12.1.dev102 documentation" href="index.html" />
    <link rel="next" title="Account" href="account.html" />
    <link rel="prev" title="Partitioned Consistent Hash Ring" href="ring.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="proxy">
<span id="id1"></span><h1>Proxy<a class="headerlink" href="#proxy" title="Permalink to this headline">¶</a></h1>
<div class="section" id="proxy-controllers">
<span id="id2"></span><h2>Proxy Controllers<a class="headerlink" href="#proxy-controllers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-swift.proxy.controllers.base">
<span id="base"></span><h3>Base<a class="headerlink" href="#module-swift.proxy.controllers.base" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="swift.proxy.controllers.base.Controller">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">Controller</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base WSGI controller class for the proxy</p>
<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; The client request</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the response to the client</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.GETorHEAD_base">
<code class="descname">GETorHEAD_base</code><span class="sig-paren">(</span><em>req</em>, <em>server_type</em>, <em>node_iter</em>, <em>partition</em>, <em>path</em>, <em>concurrency=1</em>, <em>client_chunk_size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.GETorHEAD_base" title="Permalink to this definition">¶</a></dt>
<dd><p>Base handler for HTTP GET or HEAD requests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>req</strong> &#8211; swob.Request object</li>
<li><strong>server_type</strong> &#8211; server type used in logging</li>
<li><strong>node_iter</strong> &#8211; an iterator to obtain nodes from</li>
<li><strong>partition</strong> &#8211; partition</li>
<li><strong>path</strong> &#8211; path for the request</li>
<li><strong>concurrency</strong> &#8211; number of requests to run concurrently</li>
<li><strong>client_chunk_size</strong> &#8211; chunk size for response body iterator</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">swob.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.HEAD">
<code class="descname">HEAD</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; The client request</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the response to the client</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.OPTIONS">
<code class="descname">OPTIONS</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.OPTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>Base handler for OPTIONS requests</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; swob.Request object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">swob.Response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.account_info">
<code class="descname">account_info</code><span class="sig-paren">(</span><em>account</em>, <em>req=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get account information, and also verify that the account exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>account</strong> &#8211; name of the account to get the info for</li>
<li><strong>req</strong> &#8211; caller&#8217;s HTTP request context object (optional)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">tuple of (account partition, account nodes, container_count)
or (None, None, None) if it does not exist</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.base.Controller.allowed_methods">
<code class="descname">allowed_methods</code><a class="headerlink" href="#swift.proxy.controllers.base.Controller.allowed_methods" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.autocreate_account">
<code class="descname">autocreate_account</code><span class="sig-paren">(</span><em>req</em>, <em>account</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.autocreate_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Autocreate an account</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>req</strong> &#8211; request leading to this autocreate</li>
<li><strong>account</strong> &#8211; the unquoted account name</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.best_response">
<code class="descname">best_response</code><span class="sig-paren">(</span><em>req</em>, <em>statuses</em>, <em>reasons</em>, <em>bodies</em>, <em>server_type</em>, <em>etag=None</em>, <em>headers=None</em>, <em>overrides=None</em>, <em>quorum_size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.best_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of responses from several servers, choose the best to
return to the API.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>req</strong> &#8211; swob.Request object</li>
<li><strong>statuses</strong> &#8211; list of statuses returned</li>
<li><strong>reasons</strong> &#8211; list of reasons for each status</li>
<li><strong>bodies</strong> &#8211; bodies of each response</li>
<li><strong>server_type</strong> &#8211; type of server the responses came from</li>
<li><strong>etag</strong> &#8211; etag</li>
<li><strong>headers</strong> &#8211; headers of each response</li>
<li><strong>overrides</strong> &#8211; overrides to apply when lacking quorum</li>
<li><strong>quorum_size</strong> &#8211; quorum size to use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">swob.Response object with the correct status, body, etc. set</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.container_info">
<code class="descname">container_info</code><span class="sig-paren">(</span><em>account</em>, <em>container</em>, <em>req=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get container information and thusly verify container existence.
This will also verify account existence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>account</strong> &#8211; account name for the container</li>
<li><strong>container</strong> &#8211; container name to look up</li>
<li><strong>req</strong> &#8211; caller&#8217;s HTTP request context object (optional)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dict containing at least container partition (&#8216;partition&#8217;),
container nodes (&#8216;containers&#8217;), container read
acl (&#8216;read_acl&#8217;), container write acl (&#8216;write_acl&#8217;),
and container sync key (&#8216;sync_key&#8217;).
Values are set to None if the container does not exist.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.generate_request_headers">
<code class="descname">generate_request_headers</code><span class="sig-paren">(</span><em>orig_req=None</em>, <em>additional=None</em>, <em>transfer=False</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.generate_request_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list of headers to be used in backend requests</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>orig_req</strong> &#8211; the original request sent by the client to the proxy</li>
<li><strong>additional</strong> &#8211; additional headers to send to the backend</li>
<li><strong>transfer</strong> &#8211; If True, transfer headers from original client request</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a dictionary of headers</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.have_quorum">
<code class="descname">have_quorum</code><span class="sig-paren">(</span><em>statuses</em>, <em>node_count</em>, <em>quorum=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.have_quorum" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of statuses from several requests, determine if
a quorum response can already be decided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>statuses</strong> &#8211; list of statuses returned</li>
<li><strong>node_count</strong> &#8211; number of nodes being queried (basically ring count)</li>
<li><strong>quorum</strong> &#8211; number of statuses required for quorum</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True or False, depending on if quorum is established</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.is_origin_allowed">
<code class="descname">is_origin_allowed</code><span class="sig-paren">(</span><em>cors_info</em>, <em>origin</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.is_origin_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Is the given Origin allowed to make requests to this resource</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cors_info</strong> &#8211; the resource&#8217;s CORS related metadata headers</li>
<li><strong>origin</strong> &#8211; the origin making the request</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True or False</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.make_requests">
<code class="descname">make_requests</code><span class="sig-paren">(</span><em>req</em>, <em>ring</em>, <em>part</em>, <em>method</em>, <em>path</em>, <em>headers</em>, <em>query_string=''</em>, <em>overrides=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.make_requests" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an HTTP request to multiple nodes and aggregates the results.
It attempts the primary nodes concurrently, then iterates over the
handoff nodes as needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>req</strong> &#8211; a request sent by the client</li>
<li><strong>ring</strong> &#8211; the ring used for finding backend servers</li>
<li><strong>part</strong> &#8211; the partition number</li>
<li><strong>method</strong> &#8211; the method to send to the backend</li>
<li><strong>path</strong> &#8211; the path to send to the backend
(full path ends up being  /&lt;$device&gt;/&lt;$part&gt;/&lt;$path&gt;)</li>
<li><strong>headers</strong> &#8211; a list of dicts, where each dict represents one
backend request that should be made.</li>
<li><strong>query_string</strong> &#8211; optional query string to send to the backend</li>
<li><strong>overrides</strong> &#8211; optional return status override map used to override
the returned status of a request.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a swob.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.base.Controller.pass_through_headers">
<code class="descname">pass_through_headers</code><em class="property"> = []</em><a class="headerlink" href="#swift.proxy.controllers.base.Controller.pass_through_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.base.Controller.server_type">
<code class="descname">server_type</code><em class="property"> = 'Base'</em><a class="headerlink" href="#swift.proxy.controllers.base.Controller.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.Controller.transfer_headers">
<code class="descname">transfer_headers</code><span class="sig-paren">(</span><em>src_headers</em>, <em>dst_headers</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.Controller.transfer_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfer legal headers from an original client request to dictionary
that will be used as headers by the backend request</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>src_headers</strong> &#8211; A dictionary of the original client request headers</li>
<li><strong>dst_headers</strong> &#8211; A dictionary of the backend request headers</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.base.GetOrHeadHandler">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">GetOrHeadHandler</code><span class="sig-paren">(</span><em>app</em>, <em>req</em>, <em>server_type</em>, <em>node_iter</em>, <em>partition</em>, <em>path</em>, <em>backend_headers</em>, <em>concurrency=1</em>, <em>client_chunk_size=None</em>, <em>newest=None</em>, <em>header_provider=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.ResumingGetter" title="swift.proxy.controllers.base.ResumingGetter"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.base.ResumingGetter</span></code></a></p>
<dl class="method">
<dt id="swift.proxy.controllers.base.GetOrHeadHandler.get_working_response">
<code class="descname">get_working_response</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.GetOrHeadHandler.get_working_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.base.NodeIter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">NodeIter</code><span class="sig-paren">(</span><em>app</em>, <em>ring</em>, <em>partition</em>, <em>node_iter=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Yields nodes for a ring partition, skipping over error
limited nodes and stopping at the configurable number of nodes. If a
node yielded subsequently gets error limited, an extra node will be
yielded to take its place.</p>
<p>Note that if you&#8217;re going to iterate over this concurrently from
multiple greenthreads, you&#8217;ll want to use a
swift.common.utils.GreenthreadSafeIterator to serialize access.
Otherwise, you may get ValueErrors from concurrent access. (You also
may not, depending on how logging is configured, the vagaries of
socket IO and eventlet, and the phase of the moon.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> &#8211; a proxy app</li>
<li><strong>ring</strong> &#8211; ring to get yield nodes from</li>
<li><strong>partition</strong> &#8211; ring partition to yield nodes for</li>
<li><strong>node_iter</strong> &#8211; optional iterable of nodes to try. Useful if you
want to filter or reorder the nodes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="swift.proxy.controllers.base.NodeIter.log_handoffs">
<code class="descname">log_handoffs</code><span class="sig-paren">(</span><em>handoffs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.log_handoffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Log handoff requests if handoff logging is enabled and the
handoff was not expected.</p>
<p>We only log handoffs when we&#8217;ve pushed the handoff count further
than we would normally have expected under normal circumstances,
that is (request_node_count - num_primaries), when handoffs goes
higher than that it means one of the primaries must have been
skipped because of error limiting before we consumed all of our
nodes_left.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.NodeIter.next">
<code class="descname">next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.NodeIter.set_node_provider">
<code class="descname">set_node_provider</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.NodeIter.set_node_provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Install a callback function that will be used during a call to next()
to get an alternate node instead of returning the next node from the
iterator.
:param callback: A no argument function that should return a node dict</p>
<blockquote>
<div>or None.</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.base.ResumingGetter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">ResumingGetter</code><span class="sig-paren">(</span><em>app</em>, <em>req</em>, <em>server_type</em>, <em>node_iter</em>, <em>partition</em>, <em>path</em>, <em>backend_headers</em>, <em>concurrency=1</em>, <em>client_chunk_size=None</em>, <em>newest=None</em>, <em>header_provider=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="swift.proxy.controllers.base.ResumingGetter.fast_forward">
<code class="descname">fast_forward</code><span class="sig-paren">(</span><em>num_bytes</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.fast_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Will skip num_bytes into the current ranges.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Params num_bytes:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">the number of bytes that have already been read on
this request. This will change the Range header
so that the next req will start where it left off.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>ValueError</strong> &#8211; if invalid range header</li>
<li><strong>HTTPRequestedRangeNotSatisfiable</strong> &#8211; if begin + num_bytes
&gt; end of range + 1</li>
<li><strong>RangeAlreadyComplete</strong> &#8211; if begin + num_bytes == end of range + 1</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.ResumingGetter.is_good_source">
<code class="descname">is_good_source</code><span class="sig-paren">(</span><em>src</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.is_good_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether or not the request made to the backend found
what it was looking for.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>src</strong> &#8211; the response from the backend</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if found, False if not</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.base.ResumingGetter.last_headers">
<code class="descname">last_headers</code><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.last_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.base.ResumingGetter.last_status">
<code class="descname">last_status</code><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.last_status" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.ResumingGetter.learn_size_from_content_range">
<code class="descname">learn_size_from_content_range</code><span class="sig-paren">(</span><em>start</em>, <em>end</em>, <em>length</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.learn_size_from_content_range" title="Permalink to this definition">¶</a></dt>
<dd><p>If client_chunk_size is set, makes sure we yield things starting on
chunk boundaries based on the Content-Range header in the response.</p>
<p>Sets our Range header&#8217;s first byterange to the value learned from
the Content-Range header in the response; if we were given a
fully-specified range (e.g. &#8220;bytes=123-456&#8221;), this is a no-op.</p>
<p>If we were given a half-specified range (e.g. &#8220;bytes=123-&#8221; or
&#8220;bytes=-456&#8221;), then this changes the Range header to a
semantically-equivalent one <em>and</em> it lets us resume on a proper
boundary instead of just in the middle of a piece somewhere.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.ResumingGetter.pop_range">
<code class="descname">pop_range</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.pop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first byterange from our Range header.</p>
<p>This is used after a byterange has been completely sent to the
client; this way, should we need to resume the download from another
object server, we do not re-fetch byteranges that the client already
has.</p>
<p>If we have no Range header, this is a no-op.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.base.ResumingGetter.response_parts_iter">
<code class="descname">response_parts_iter</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.ResumingGetter.response_parts_iter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.bytes_to_skip">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">bytes_to_skip</code><span class="sig-paren">(</span><em>record_size</em>, <em>range_start</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.bytes_to_skip" title="Permalink to this definition">¶</a></dt>
<dd><p>Assume an object is composed of N records, where the first N-1 are all
the same size and the last is at most that large, but may be smaller.</p>
<p>When a range request is made, it might start with a partial record. This
must be discarded, lest the consumer get bad data. This is particularly
true of suffix-byte-range requests, e.g. &#8220;Range: bytes=-12345&#8221; where the
size of the object is unknown at the time the request is made.</p>
<p>This function computes the number of bytes that must be discarded to
ensure only whole records are yielded. Erasure-code decoding needs this.</p>
<p>This function could have been inlined, but it took enough tries to get
right that some targeted unit tests were desirable, hence its extraction.</p>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.clear_info_cache">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">clear_info_cache</code><span class="sig-paren">(</span><em>app</em>, <em>env</em>, <em>account</em>, <em>container=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.clear_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cached info in both memcache and env</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> &#8211; the application object</li>
<li><strong>env</strong> &#8211; the WSGI environment</li>
<li><strong>account</strong> &#8211; the account name</li>
<li><strong>container</strong> &#8211; the containr name or None if setting info for containers</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.close_swift_conn">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">close_swift_conn</code><span class="sig-paren">(</span><em>src</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.close_swift_conn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force close the http connection to the backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>src</strong> &#8211; the response from the backend</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.cors_validation">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">cors_validation</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.cors_validation" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to check if the request is a CORS request and if so, if it&#8217;s
valid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> &#8211; function to check</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.delay_denial">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">delay_denial</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.delay_denial" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to declare which methods should have any swift.authorize call
delayed. This is so the method can load the Request object up with
additional information that may be needed by the authorization system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> &#8211; function for which authorization will be delayed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.get_account_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">get_account_info</code><span class="sig-paren">(</span><em>env</em>, <em>app</em>, <em>swift_source=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for an account, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call bypasses auth. Success does not imply that the request has
authorization to the account.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>ValueError</strong> &#8211; when path doesn&#8217;t contain an account</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.get_cache_key">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">get_cache_key</code><span class="sig-paren">(</span><em>account</em>, <em>container=None</em>, <em>obj=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_cache_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the keys for both memcache and env[&#8216;swift.infocache&#8217;] (cache_key)
where info about accounts, containers, and objects is cached</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>account</strong> &#8211; The name of the account</li>
<li><strong>container</strong> &#8211; The name of the container (or None if account)</li>
<li><strong>obj</strong> &#8211; The name of the object (or None if account or container)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a string cache_key</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.get_container_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">get_container_info</code><span class="sig-paren">(</span><em>env</em>, <em>app</em>, <em>swift_source=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for a container, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call bypasses auth. Success does not imply that the request has
authorization to the container.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.get_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">get_info</code><span class="sig-paren">(</span><em>app</em>, <em>env</em>, <em>account</em>, <em>container=None</em>, <em>swift_source=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get info about accounts or containers</p>
<dl class="docutils">
<dt>Note: This call bypasses auth. Success does not imply that the</dt>
<dd>request has authorization to the info.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>app</strong> &#8211; the application object</li>
<li><strong>env</strong> &#8211; the environment used by the current request</li>
<li><strong>account</strong> &#8211; The unquoted name of the account</li>
<li><strong>container</strong> &#8211; The unquoted name of the container (or None if account)</li>
<li><strong>swift_source</strong> &#8211; swift source logged for any subrequests made while
retrieving the account or container info</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">information about the specified entity in a dictionary. See
get_account_info and get_container_info for details on what&#8217;s in the
dictionary.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.get_object_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">get_object_info</code><span class="sig-paren">(</span><em>env</em>, <em>app</em>, <em>path=None</em>, <em>swift_source=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.get_object_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info structure for an object, based on env and app.
This is useful to middlewares.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This call bypasses auth. Success does not imply that the request has
authorization to the object.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.headers_to_account_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">headers_to_account_info</code><span class="sig-paren">(</span><em>headers</em>, <em>status_int=200</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_account_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of account info based on response headers.</p>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.headers_to_container_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">headers_to_container_info</code><span class="sig-paren">(</span><em>headers</em>, <em>status_int=200</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_container_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of container info based on response headers.</p>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.headers_to_object_info">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">headers_to_object_info</code><span class="sig-paren">(</span><em>headers</em>, <em>status_int=200</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.headers_to_object_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a cacheable dict of object info based on response headers.</p>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.set_info_cache">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">set_info_cache</code><span class="sig-paren">(</span><em>app</em>, <em>env</em>, <em>account</em>, <em>container</em>, <em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.set_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache info in both memcache and env.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>app</strong> &#8211; the application object</li>
<li><strong>account</strong> &#8211; the unquoted account name</li>
<li><strong>container</strong> &#8211; the unquoted container name or None</li>
<li><strong>resp</strong> &#8211; the response received or None if info cache should be cleared</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the info that was placed into the cache, or None if the
request status was not in (404, 410, 2xx).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.set_object_info_cache">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">set_object_info_cache</code><span class="sig-paren">(</span><em>app</em>, <em>env</em>, <em>account</em>, <em>container</em>, <em>obj</em>, <em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.set_object_info_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Cache object info in the WSGI environment, but not in memcache. Caching
in memcache would lead to cache pressure and mass evictions due to the
large number of objects in a typical Swift cluster. This is a
per-request cache only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>app</strong> &#8211; the application object</li>
<li><strong>account</strong> &#8211; the unquoted account name</li>
<li><strong>container</strong> &#8211; the unquoted container name</li>
<li><strong>object</strong> &#8211; the unquoted object name</li>
<li><strong>resp</strong> &#8211; a GET or HEAD response received from an object server, or
None if info cache should be cleared</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the object info</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.source_key">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">source_key</code><span class="sig-paren">(</span><em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.source_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Provide the timestamp of the swift http response as a floating
point value.  Used as a sort key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resp</strong> &#8211; bufferedhttp response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.base.update_headers">
<code class="descclassname">swift.proxy.controllers.base.</code><code class="descname">update_headers</code><span class="sig-paren">(</span><em>response</em>, <em>headers</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.base.update_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to update headers in the response.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>response</strong> &#8211; swob.Response object</li>
<li><strong>headers</strong> &#8211; dictionary headers</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-swift.proxy.controllers.account">
<span id="account"></span><h3>Account<a class="headerlink" href="#module-swift.proxy.controllers.account" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="swift.proxy.controllers.account.AccountController">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.account.</code><code class="descname">AccountController</code><span class="sig-paren">(</span><em>app</em>, <em>account_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.base.Controller</span></code></a></p>
<p>WSGI controller for account requests</p>
<dl class="method">
<dt id="swift.proxy.controllers.account.AccountController.DELETE">
<code class="descname">DELETE</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.account.AccountController.GETorHEAD">
<code class="descname">GETorHEAD</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET/HEAD requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.account.AccountController.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.account.AccountController.PUT">
<code class="descname">PUT</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.account.AccountController.add_acls_from_sys_metadata">
<code class="descname">add_acls_from_sys_metadata</code><span class="sig-paren">(</span><em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.add_acls_from_sys_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.account.AccountController.server_type">
<code class="descname">server_type</code><em class="property"> = 'Account'</em><a class="headerlink" href="#swift.proxy.controllers.account.AccountController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-swift.proxy.controllers.container">
<span id="container"></span><h3>Container<a class="headerlink" href="#module-swift.proxy.controllers.container" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="swift.proxy.controllers.container.ContainerController">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.container.</code><code class="descname">ContainerController</code><span class="sig-paren">(</span><em>app</em>, <em>account_name</em>, <em>container_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.base.Controller</span></code></a></p>
<p>WSGI controller for container requests</p>
<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.DELETE">
<code class="descname">DELETE</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.GETorHEAD">
<code class="descname">GETorHEAD</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET/HEAD requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.HEAD">
<code class="descname">HEAD</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.PUT">
<code class="descname">PUT</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.container.ContainerController.clean_acls">
<code class="descname">clean_acls</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.clean_acls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.container.ContainerController.pass_through_headers">
<code class="descname">pass_through_headers</code><em class="property"> = ['x-container-read', 'x-container-write', 'x-container-sync-key', 'x-container-sync-to', 'x-versions-location']</em><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.pass_through_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.container.ContainerController.server_type">
<code class="descname">server_type</code><em class="property"> = 'Container'</em><a class="headerlink" href="#swift.proxy.controllers.container.ContainerController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-swift.proxy.controllers.obj">
<span id="object"></span><h3>Object<a class="headerlink" href="#module-swift.proxy.controllers.obj" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="swift.proxy.controllers.obj.BaseObjectController">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">BaseObjectController</code><span class="sig-paren">(</span><em>app</em>, <em>account_name</em>, <em>container_name</em>, <em>object_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.base.Controller" title="swift.proxy.controllers.base.Controller"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.base.Controller</span></code></a></p>
<p>Base WSGI controller for object requests.</p>
<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.DELETE">
<code class="descname">DELETE</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.DELETE" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP DELETE request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.GET">
<code class="descname">GET</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP GET requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.GETorHEAD">
<code class="descname">GETorHEAD</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.GETorHEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle HTTP GET or HEAD requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.HEAD">
<code class="descname">HEAD</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.HEAD" title="Permalink to this definition">¶</a></dt>
<dd><p>Handler for HTTP HEAD requests.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.POST">
<code class="descname">POST</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP POST request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.PUT">
<code class="descname">PUT</code><span class="sig-paren">(</span><em>*a</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.PUT" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP PUT request handler.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.BaseObjectController.iter_nodes_local_first">
<code class="descname">iter_nodes_local_first</code><span class="sig-paren">(</span><em>ring</em>, <em>partition</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.iter_nodes_local_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields nodes for a ring partition.</p>
<p>If the &#8216;write_affinity&#8217; setting is non-empty, then this will yield N
local nodes (as defined by the write_affinity setting) first, then the
rest of the nodes as normal. It is a re-ordering of the nodes such
that the local ones come first; no node is omitted. The effect is
that the request will be serviced by local object servers first, but
nonlocal ones will be employed if not enough local ones are available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ring</strong> &#8211; ring to get nodes from</li>
<li><strong>partition</strong> &#8211; ring partition to yield nodes for</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.obj.BaseObjectController.server_type">
<code class="descname">server_type</code><em class="property"> = 'Object'</em><a class="headerlink" href="#swift.proxy.controllers.obj.BaseObjectController.server_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ECAppIter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ECAppIter</code><span class="sig-paren">(</span><em>path</em>, <em>policy</em>, <em>internal_parts_iters</em>, <em>range_specs</em>, <em>fa_length</em>, <em>obj_length</em>, <em>logger</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>WSGI iterable that decodes EC fragment archives (or portions thereof)
into the original object (or portions thereof).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; object&#8217;s path, sans v1 (e.g. /a/c/o)</li>
<li><strong>policy</strong> &#8211; storage policy for this object</li>
<li><strong>internal_parts_iters</strong> &#8211; list of the response-document-parts
iterators for the backend GET responses. For an M+K erasure code,
the caller must supply M such iterables.</li>
<li><strong>range_specs</strong> &#8211; list of dictionaries describing the ranges requested
by the client. Each dictionary contains the start and end of the
client&#8217;s requested byte range as well as the start and end of the EC
segments containing that byte range.</li>
<li><strong>fa_length</strong> &#8211; length of the fragment archive, in bytes, if the
response is a 200. If it&#8217;s a 206, then this is ignored.</li>
<li><strong>obj_length</strong> &#8211; length of the object, in bytes. Learned from the
headers in the GET response from the object server.</li>
<li><strong>logger</strong> &#8211; a logger</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="swift.proxy.controllers.obj.ECAppIter.app_iter_range">
<code class="descname">app_iter_range</code><span class="sig-paren">(</span><em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECAppIter.app_iter_ranges">
<code class="descname">app_iter_ranges</code><span class="sig-paren">(</span><em>ranges</em>, <em>content_type</em>, <em>boundary</em>, <em>content_size</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.app_iter_ranges" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECAppIter.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECAppIter.kickoff">
<code class="descname">kickoff</code><span class="sig-paren">(</span><em>req</em>, <em>resp</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECAppIter.kickoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Start pulling data from the backends so that we can learn things like
the real Content-Type that might only be in the multipart/byteranges
response body. Update our response accordingly.</p>
<p>Also, this is the first point at which we can learn the MIME
boundary that our response has in the headers. We grab that so we
can also use it in the body.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">HTTPException on error</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ECGetResponseBucket</code><span class="sig-paren">(</span><em>policy</em>, <em>timestamp_str</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A helper class to encapsulate the properties of buckets in which fragment
getters and alternate nodes are collected.</p>
<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.add_alternate_nodes">
<code class="descname">add_alternate_nodes</code><span class="sig-paren">(</span><em>node</em>, <em>frag_indexes</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_alternate_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.add_response">
<code class="descname">add_response</code><span class="sig-paren">(</span><em>getter</em>, <em>parts_iter</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.add_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.get_responses">
<code class="descname">get_responses</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.get_responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all useful sources. Where there are multiple sources
associated with the same frag_index then only one is included.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of sources, each source being a tuple of form
(ResumingGetter, iter)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.set_durable">
<code class="descname">set_durable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.set_durable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.shortfall">
<code class="descname">shortfall</code><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ECGetResponseBucket.shortfall_with_alts">
<code class="descname">shortfall_with_alts</code><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseBucket.shortfall_with_alts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ECGetResponseCollection</code><span class="sig-paren">(</span><em>policy</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Manages all successful EC GET responses gathered by ResumingGetters.</p>
<p>A response comprises a tuple of (&lt;getter instance&gt;, &lt;parts iterator&gt;). All
responses having the same data timestamp are placed in an
ECGetResponseBucket for that timestamp. The buckets are stored in the
&#8216;buckets&#8217; dict which maps timestamp-&gt; bucket.</p>
<p>This class encapsulates logic for selecting the best bucket from the
collection, and for choosing alternate nodes.</p>
<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection.add_response">
<code class="descname">add_response</code><span class="sig-paren">(</span><em>get</em>, <em>parts_iter</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.add_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a response to the collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>get</strong> &#8211; An instance of
<a class="reference internal" href="#swift.proxy.controllers.base.ResumingGetter" title="swift.proxy.controllers.base.ResumingGetter"><code class="xref py py-class docutils literal"><span class="pre">ResumingGetter</span></code></a></li>
<li><strong>parts_iter</strong> &#8211; An iterator over response body parts</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>ValueError</strong> &#8211; if the response etag or status code values do not
match any values previously received for the same timestamp</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection.best_bucket">
<code class="descname">best_bucket</code><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.best_bucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the best bucket in the collection.</p>
<p>The &#8220;best&#8221; bucket is the newest timestamp with sufficient getters, or
the closest to having a sufficient getters, unless it is bettered by a
bucket with potential alternate nodes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">An instance of <a class="reference internal" href="#swift.proxy.controllers.obj.ECGetResponseBucket" title="swift.proxy.controllers.obj.ECGetResponseBucket"><code class="xref py py-class docutils literal"><span class="pre">ECGetResponseBucket</span></code></a> or None if there
are no buckets in the collection.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection.get_extra_headers">
<code class="descname">get_extra_headers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.get_extra_headers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection.has_alternate_node">
<code class="descname">has_alternate_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.has_alternate_node" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.ECGetResponseCollection.provide_alternate_node">
<code class="descname">provide_alternate_node</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECGetResponseCollection.provide_alternate_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback function that is installed in a NodeIter. Called on every call
to NodeIter.next(), which means we can track the number of nodes to
which GET requests have been made and selectively inject an alternate
node, if we have one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dict describing a node to which the next GET request
should be made.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ECObjectController">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ECObjectController</code><span class="sig-paren">(</span><em>app</em>, <em>account_name</em>, <em>container_name</em>, <em>object_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ECObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController" title="swift.proxy.controllers.obj.BaseObjectController"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.obj.BaseObjectController</span></code></a></p>
<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ECObjectController.policy_type">
<code class="descname">policy_type</code><em class="property"> = 'erasure_coding'</em><a class="headerlink" href="#swift.proxy.controllers.obj.ECObjectController.policy_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.MIMEPutter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">MIMEPutter</code><span class="sig-paren">(</span><em>conn</em>, <em>node</em>, <em>resp</em>, <em>req</em>, <em>connect_duration</em>, <em>logger</em>, <em>mime_boundary</em>, <em>multiphase=False</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.Putter" title="swift.proxy.controllers.obj.Putter"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.obj.Putter</span></code></a></p>
<p>Putter for backend PUT requests that use MIME.</p>
<p>This is here mostly to wrap up the fact that all multipart PUTs are
chunked because of the mime boundary footer trick and the first
half of the two-phase PUT conversation handling.</p>
<p>An HTTP PUT request that supports streaming.</p>
<dl class="classmethod">
<dt id="swift.proxy.controllers.obj.MIMEPutter.connect">
<em class="property">classmethod </em><code class="descname">connect</code><span class="sig-paren">(</span><em>node</em>, <em>part</em>, <em>req</em>, <em>headers</em>, <em>conn_timeout</em>, <em>node_timeout</em>, <em>logger=None</em>, <em>need_multiphase=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a backend node and send the headers.</p>
<p>Override superclass method to notify object of need for support for
multipart body with footers and optionally multiphase commit, and
verify object server&#8217;s capabilities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>need_multiphase</strong> &#8211; if True then multiphase support is required of
the object server</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">FooterNotSupported if need_metadata_footer is set but
backend node can&#8217;t process footers</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">MultiphasePUTNotSupported if need_multiphase is set but
backend node can&#8217;t handle multiphase PUT</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.MIMEPutter.end_of_object_data">
<code class="descname">end_of_object_data</code><span class="sig-paren">(</span><em>footer_metadata=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.end_of_object_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there is no more data to send.</p>
<p>Overrides superclass implementation to send any footer metadata
after object data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>footer_metadata</strong> &#8211; dictionary of metadata items
to be sent as footers.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.MIMEPutter.send_commit_confirmation">
<code class="descname">send_commit_confirmation</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.MIMEPutter.send_commit_confirmation" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there are &gt; quorum 2XX responses received.  Send commit
confirmations to all object nodes to finalize the PUT.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ObjectControllerRouter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ObjectControllerRouter</code><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ObjectControllerRouter.policy_type_to_controller_map">
<code class="descname">policy_type_to_controller_map</code><em class="property"> = {'erasure_coding': &lt;class 'swift.proxy.controllers.obj.ECObjectController'&gt;, 'replication': &lt;class 'swift.proxy.controllers.obj.ReplicatedObjectController'&gt;}</em><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter.policy_type_to_controller_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="swift.proxy.controllers.obj.ObjectControllerRouter.register">
<em class="property">classmethod </em><code class="descname">register</code><span class="sig-paren">(</span><em>policy_type</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ObjectControllerRouter.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for Storage Policy implementations to register
their ObjectController implementations.</p>
<p>This also fills in a policy_type attribute on the class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.Putter">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">Putter</code><span class="sig-paren">(</span><em>conn</em>, <em>node</em>, <em>resp</em>, <em>path</em>, <em>connect_duration</em>, <em>logger</em>, <em>chunked=False</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Putter for backend PUT requests.</p>
<p>Encapsulates all the actions required to establish a connection with a
storage node and stream data to that node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>conn</strong> &#8211; an HTTPConnection instance</li>
<li><strong>node</strong> &#8211; dict describing storage node</li>
<li><strong>resp</strong> &#8211; an HTTPResponse instance if connect() received final response</li>
<li><strong>path</strong> &#8211; the object path to send to the storage node</li>
<li><strong>connect_duration</strong> &#8211; time taken to initiate the HTTPConnection</li>
<li><strong>logger</strong> &#8211; a Logger instance</li>
<li><strong>chunked</strong> &#8211; boolean indicating if the request encoding is chunked</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.await_response">
<code class="descname">await_response</code><span class="sig-paren">(</span><em>timeout</em>, <em>informational=False</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.await_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Get 100-continue response indicating the end of 1st phase of a 2-phase
commit or the final response, i.e. the one with status &gt;= 200.</p>
<p>Might or might not actually wait for anything. If we said Expect:
100-continue but got back a non-100 response, that&#8217;ll be the thing
returned, and we won&#8217;t do any network IO to get it. OTOH, if we got
a 100 Continue response and sent up the PUT request&#8217;s body, then
we&#8217;ll actually read the 2xx-5xx response off the network here.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>timeout</strong> &#8211; time to wait for a response</li>
<li><strong>informational</strong> &#8211; if True then try to get a 100-continue response,
otherwise try to get a final response.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">HTTPResponse</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">Timeout if the response took too long</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="swift.proxy.controllers.obj.Putter.connect">
<em class="property">classmethod </em><code class="descname">connect</code><span class="sig-paren">(</span><em>node</em>, <em>part</em>, <em>path</em>, <em>headers</em>, <em>conn_timeout</em>, <em>node_timeout</em>, <em>logger=None</em>, <em>chunked=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a backend node and send the headers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Putter instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ConnectionTimeout if initial connection timed out</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ResponseTimeout if header retrieval timed out</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">InsufficientStorage on 507 response from node</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">PutterConnectError on non-507 server error response from node</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.end_of_object_data">
<code class="descname">end_of_object_data</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.end_of_object_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Call when there is no more data to send.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.send_chunk">
<code class="descname">send_chunk</code><span class="sig-paren">(</span><em>chunk</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.send_chunk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.spawn_sender_greenthread">
<code class="descname">spawn_sender_greenthread</code><span class="sig-paren">(</span><em>pool</em>, <em>queue_depth</em>, <em>write_timeout</em>, <em>exception_handler</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.spawn_sender_greenthread" title="Permalink to this definition">¶</a></dt>
<dd><p>Call before sending the first chunk of request body</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.controllers.obj.Putter.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.Putter.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="swift.proxy.controllers.obj.ReplicatedObjectController">
<em class="property">class </em><code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">ReplicatedObjectController</code><span class="sig-paren">(</span><em>app</em>, <em>account_name</em>, <em>container_name</em>, <em>object_name</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.ReplicatedObjectController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#swift.proxy.controllers.obj.BaseObjectController" title="swift.proxy.controllers.obj.BaseObjectController"><code class="xref py py-class docutils literal"><span class="pre">swift.proxy.controllers.obj.BaseObjectController</span></code></a></p>
<dl class="attribute">
<dt id="swift.proxy.controllers.obj.ReplicatedObjectController.policy_type">
<code class="descname">policy_type</code><em class="property"> = 'replication'</em><a class="headerlink" href="#swift.proxy.controllers.obj.ReplicatedObjectController.policy_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.obj.check_content_type">
<code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">check_content_type</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.check_content_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.obj.chunk_transformer">
<code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">chunk_transformer</code><span class="sig-paren">(</span><em>policy</em>, <em>nstreams</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.chunk_transformer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.obj.client_range_to_segment_range">
<code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">client_range_to_segment_range</code><span class="sig-paren">(</span><em>client_start</em>, <em>client_end</em>, <em>segment_size</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.client_range_to_segment_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a byterange from the client and converts it into a byterange
spanning the necessary segments.</p>
<p>Handles prefix, suffix, and fully-specified byte ranges.</p>
<dl class="docutils">
<dt>Examples:</dt>
<dd>client_range_to_segment_range(100, 700, 512) = (0, 1023)
client_range_to_segment_range(100, 700, 256) = (0, 767)
client_range_to_segment_range(300, None, 256) = (256, None)</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>client_start</strong> &#8211; first byte of the range requested by the client</li>
<li><strong>client_end</strong> &#8211; last byte of the range requested by the client</li>
<li><strong>segment_size</strong> &#8211; size of an EC segment, in bytes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>a 2-tuple (seg_start, seg_end) where</p>
<ul class="simple">
<li>seg_start is the first byte of the first segment, or None if this is
a suffix byte range</li>
<li>seg_end is the last byte of the last segment, or None if this is a
prefix byte range</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.obj.segment_range_to_fragment_range">
<code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">segment_range_to_fragment_range</code><span class="sig-paren">(</span><em>segment_start</em>, <em>segment_end</em>, <em>segment_size</em>, <em>fragment_size</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.segment_range_to_fragment_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a byterange spanning some segments and converts that into a
byterange spanning the corresponding fragments within their fragment
archives.</p>
<p>Handles prefix, suffix, and fully-specified byte ranges.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>segment_start</strong> &#8211; first byte of the first segment</li>
<li><strong>segment_end</strong> &#8211; last byte of the last segment</li>
<li><strong>segment_size</strong> &#8211; size of an EC segment, in bytes</li>
<li><strong>fragment_size</strong> &#8211; size of an EC fragment, in bytes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>a 2-tuple (frag_start, frag_end) where</p>
<ul class="simple">
<li>frag_start is the first byte of the first fragment, or None if this
is a suffix byte range</li>
<li>frag_end is the last byte of the last fragment, or None if this is a
prefix byte range</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="swift.proxy.controllers.obj.trailing_metadata">
<code class="descclassname">swift.proxy.controllers.obj.</code><code class="descname">trailing_metadata</code><span class="sig-paren">(</span><em>policy</em>, <em>client_obj_hasher</em>, <em>bytes_transferred_from_client</em>, <em>fragment_archive_index</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.controllers.obj.trailing_metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="module-swift.proxy.server">
<span id="id3"></span><span id="proxy-server"></span><h2>Proxy Server<a class="headerlink" href="#module-swift.proxy.server" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="swift.proxy.server.Application">
<em class="property">class </em><code class="descclassname">swift.proxy.server.</code><code class="descname">Application</code><span class="sig-paren">(</span><em>conf</em>, <em>memcache=None</em>, <em>logger=None</em>, <em>account_ring=None</em>, <em>container_ring=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>WSGI application for the proxy server.</p>
<dl class="method">
<dt id="swift.proxy.server.Application.check_config">
<code class="descname">check_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.check_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the configuration for possible errors</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.error_limit">
<code class="descname">error_limit</code><span class="sig-paren">(</span><em>node</em>, <em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark a node as error limited. This immediately pretends the
node received enough errors to trigger error suppression. Use
this for errors like Insufficient Storage. For other errors
use <a class="reference internal" href="#swift.proxy.server.Application.error_occurred" title="swift.proxy.server.Application.error_occurred"><code class="xref py py-func docutils literal"><span class="pre">error_occurred()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> &#8211; dictionary of node to error limit</li>
<li><strong>msg</strong> &#8211; error message</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.error_limited">
<code class="descname">error_limited</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_limited" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the node is currently error limited.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>node</strong> &#8211; dictionary of node to check</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if error limited, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.error_occurred">
<code class="descname">error_occurred</code><span class="sig-paren">(</span><em>node</em>, <em>msg</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.error_occurred" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle logging, and handling of errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> &#8211; dictionary of node to handle errors for</li>
<li><strong>msg</strong> &#8211; error message</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.exception_occurred">
<code class="descname">exception_occurred</code><span class="sig-paren">(</span><em>node</em>, <em>typ</em>, <em>additional_info</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.exception_occurred" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle logging of generic exceptions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> &#8211; dictionary of node to log the error for</li>
<li><strong>typ</strong> &#8211; server type</li>
<li><strong>additional_info</strong> &#8211; additional information to log</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.get_controller">
<code class="descname">get_controller</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.get_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the controller to handle a request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; the request</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">tuple of (controller class, path dictionary)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">ValueError (thrown by split_path) if given invalid path</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.get_object_ring">
<code class="descname">get_object_ring</code><span class="sig-paren">(</span><em>policy_idx</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.get_object_ring" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ring object to use to handle a request based on its policy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>policy_idx</strong> &#8211; policy index as defined in swift.conf</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">appropriate ring object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.handle_request">
<code class="descname">handle_request</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.handle_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point for proxy server.
Should return a WSGI-style callable (such as swob.Response).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; swob.Request object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.iter_nodes">
<code class="descname">iter_nodes</code><span class="sig-paren">(</span><em>ring</em>, <em>partition</em>, <em>node_iter=None</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.iter_nodes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.modify_wsgi_pipeline">
<code class="descname">modify_wsgi_pipeline</code><span class="sig-paren">(</span><em>pipe</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.modify_wsgi_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Called during WSGI pipeline creation. Modifies the WSGI pipeline
context to ensure that mandatory middleware is present in the pipeline.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pipe</strong> &#8211; A PipelineWrapper object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.set_node_timing">
<code class="descname">set_node_timing</code><span class="sig-paren">(</span><em>node</em>, <em>timing</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.set_node_timing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.sort_nodes">
<code class="descname">sort_nodes</code><span class="sig-paren">(</span><em>nodes</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.sort_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts nodes in-place (and returns the sorted list) according to
the configured strategy. The default &#8220;sorting&#8221; is to randomly
shuffle the nodes. If the &#8220;timing&#8221; strategy is chosen, the nodes
are sorted according to the stored timing data.</p>
</dd></dl>

<dl class="method">
<dt id="swift.proxy.server.Application.update_request">
<code class="descname">update_request</code><span class="sig-paren">(</span><em>req</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.Application.update_request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="swift.proxy.server.app_factory">
<code class="descclassname">swift.proxy.server.</code><code class="descname">app_factory</code><span class="sig-paren">(</span><em>global_conf</em>, <em>**local_conf</em><span class="sig-paren">)</span><a class="headerlink" href="#swift.proxy.server.app_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>paste.deploy app factory for creating WSGI proxy apps.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Proxy</a><ul>
<li><a class="reference internal" href="#proxy-controllers">Proxy Controllers</a><ul>
<li><a class="reference internal" href="#module-swift.proxy.controllers.base">Base</a></li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.account">Account</a></li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.container">Container</a></li>
<li><a class="reference internal" href="#module-swift.proxy.controllers.obj">Object</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-swift.proxy.server">Proxy Server</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="ring.html"
                                  title="previous chapter">Partitioned Consistent Hash Ring</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="account.html"
                                  title="next chapter">Account</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/swift
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/proxy.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="account.html" title="Account"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ring.html" title="Partitioned Consistent Hash Ring"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">swift 2.12.1.dev102 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, OpenStack Foundation.
      Last updated on &#39;Tue Feb 14 07:57:22 2017, commit 7cb6882&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/swift");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>