<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Launch an instance on a self-service network &mdash; networking-ovn 2.0.0.0rc2.dev13 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0.0rc2.dev13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="networking-ovn 2.0.0.0rc2.dev13 documentation" href="../index.html" />
    <link rel="up" title="Reference architecture" href="refarch.html" />
    <link rel="next" title="Installation" href="../install.html" />
    <link rel="prev" title="Launch an instance on a provider network" href="launch-instance-provider-network.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="launch-an-instance-on-a-self-service-network">
<span id="refarch-launch-instance-selfservice-network"></span><h1>Launch an instance on a self-service network<a class="headerlink" href="#launch-an-instance-on-a-self-service-network" title="Permalink to this headline">¶</a></h1>
<p>To launch an instance on a self-service network, follow the same steps as
<a class="reference internal" href="launch-instance-provider-network.html#refarch-launch-instance-provider-network"><span>launching an instance on the provider network</span></a>, but using the UUID of the
self-service network.</p>
<div class="section" id="ovn-operations">
<h2>OVN operations<a class="headerlink" href="#ovn-operations" title="Permalink to this headline">¶</a></h2>
<p>The OVN mechanism driver and OVN perform the following operations when
launching an instance.</p>
<ol class="arabic">
<li><p class="first">The OVN mechanism driver creates a logical port for the instance.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : c754d1d2-a7fb-4dd0-b14c-c076962b06b9</span>
<span class="go">addresses           : [&quot;fa:16:3e:15:7d:13 192.168.1.5&quot;]</span>
<span class="go">enabled             : true</span>
<span class="go">external_ids        : {&quot;neutron:port_name&quot;=&quot;&quot;}</span>
<span class="go">name                : &quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;</span>
<span class="go">options             : {}</span>
<span class="go">parent_name         : []</span>
<span class="go">port_security       : [&quot;fa:16:3e:15:7d:13 192.168.1.5&quot;]</span>
<span class="go">tag                 : []</span>
<span class="go">type                : &quot;&quot;</span>
<span class="go">up                  : true</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN mechanism driver updates the appropriate Address Set object(s)
with the address of the new instance:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : d0becdea-e1ed-48c4-9afc-e278cdef4629</span>
<span class="go">addresses           : [&quot;192.168.1.5&quot;, &quot;203.0.113.103&quot;]</span>
<span class="go">external_ids        : {&quot;neutron:security_group_name&quot;=default}</span>
<span class="go">name                : &quot;as_ip4_90a78a43_b549_4bee_8822_21fcccab58dc&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN mechanism driver creates ACL entries for this port and
any other ports in the project.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : 00ecbe8f-c82a-4e18-b688-af2a1941cff7</span>
<span class="go">action              : allow</span>
<span class="go">direction           : from-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;inport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip4 &amp;&amp; (ip4.dst == 255.255.255.255 || ip4.dst == 192.168.1.0/24) &amp;&amp; udp &amp;&amp; udp.src == 68 &amp;&amp; udp.dst == 67&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 2bf5b7ed-008e-4676-bba5-71fe58897886</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : from-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;inport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip4&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 330b4e27-074f-446a-849b-9ab0018b65c5</span>
<span class="go">action              : allow</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip4 &amp;&amp; ip4.src == 192.168.1.0/24 &amp;&amp; udp &amp;&amp; udp.src == 67 &amp;&amp; udp.dst == 68&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 683f52f2-4be6-4bd7-a195-6c782daa7840</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : from-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;inport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip6&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 8160f0b4-b344-43d5-bbd4-ca63a71aa4fc</span>
<span class="go">action              : drop</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip&quot;</span>
<span class="go">priority            : 1001</span>

<span class="go">_uuid               : 97c6b8ca-14ea-4812-8571-95d640a88f4f</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip6&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 9cfd8eb5-5daa-422e-8fe8-bd22fd7fa826</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip4 &amp;&amp; ip4.src == 0.0.0.0/0 &amp;&amp; icmp4&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : f72c2431-7a64-4cea-b84a-118bdc761be2</span>
<span class="go">action              : drop</span>
<span class="go">direction           : from-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;inport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip&quot;</span>
<span class="go">priority            : 1001</span>

<span class="go">_uuid               : f94133fa-ed27-4d5e-a806-0d528e539cb3</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip4 &amp;&amp; ip4.src == $as_ip4_90a78a43_b549_4bee_8822_21fcccab58dc&quot;</span>
<span class="go">priority            : 1002</span>

<span class="go">_uuid               : 7f7a92ff-b7e9-49b0-8be0-0dc388035df3</span>
<span class="go">action              : allow-related</span>
<span class="go">direction           : to-lport</span>
<span class="go">external_ids        : {&quot;neutron:lport&quot;=&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae&quot;}</span>
<span class="go">log                 : false</span>
<span class="go">match               : &quot;outport == \&quot;eaf36f62-5629-4ec4-b8b9-5e562c40e7ae\&quot; &amp;&amp; ip6 &amp;&amp; ip6.src == $as_ip4_90a78a43_b549_4bee_8822_21fcccab58dc&quot;</span>
<span class="go">priority            : 1002</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN mechanism driver updates the logical switch information with
the UUIDs of these objects.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : 15e2c80b-1461-4003-9869-80416cd97de5</span>
<span class="go">acls                : [00ecbe8f-c82a-4e18-b688-af2a1941cff7,</span>
<span class="go">                       2bf5b7ed-008e-4676-bba5-71fe58897886,</span>
<span class="go">                       330b4e27-074f-446a-849b-9ab0018b65c5,</span>
<span class="go">                       683f52f2-4be6-4bd7-a195-6c782daa7840,</span>
<span class="go">                       7f7a92ff-b7e9-49b0-8be0-0dc388035df3,</span>
<span class="go">                       8160f0b4-b344-43d5-bbd4-ca63a71aa4fc,</span>
<span class="go">                       97c6b8ca-14ea-4812-8571-95d640a88f4f,</span>
<span class="go">                       9cfd8eb5-5daa-422e-8fe8-bd22fd7fa826,</span>
<span class="go">                       f72c2431-7a64-4cea-b84a-118bdc761be2,</span>
<span class="go">                       f94133fa-ed27-4d5e-a806-0d528e539cb3]</span>
<span class="go">external_ids        : {&quot;neutron:network_name&quot;=&quot;selfservice&quot;}</span>
<span class="go">name                : &quot;neutron-6cc81cae-8c5f-4c09-aaf2-35d0aa95c084&quot;</span>
<span class="go">ports               : [2df457a5-f71c-4a2f-b9ab-d9e488653872,</span>
<span class="go">                       67c2737c-b380-492b-883b-438048b48e56,</span>
<span class="go">                       c754d1d2-a7fb-4dd0-b14c-c076962b06b9]</span>
</pre></div>
</div>
</li>
<li><p class="first">With address sets, it is no longer necessary for the OVN mechanism
driver to create separate ACLs for other instances in the project.
That is handled automagically via address sets.</p>
</li>
<li><p class="first">The OVN northbound service translates the updated Address Set object(s)
into updated Address Set objects in the OVN southbound database:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : 2addbee3-7084-4fff-8f7b-15b1efebdaff</span>
<span class="go">addresses           : [&quot;192.168.1.5&quot;, &quot;203.0.113.103&quot;]</span>
<span class="go">name                : &quot;as_ip4_90a78a43_b549_4bee_8822_21fcccab58dc&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN northbound service adds a Port Binding for the new Logical
Switch Port object:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : 7a558e7b-ed7a-424f-a0cf-ab67d2d832d7</span>
<span class="go">chassis             : b67d6da9-0222-4ab1-a852-ab2607610bf8</span>
<span class="go">datapath            : 3f6e16b5-a03a-48e5-9b60-7b7a0396c425</span>
<span class="go">logical_port        : &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot;</span>
<span class="go">mac                 : [&quot;fa:16:3e:b6:91:70 192.168.1.5&quot;]</span>
<span class="go">options             : {}</span>
<span class="go">parent_port         : []</span>
<span class="go">tag                 : []</span>
<span class="go">tunnel_key          : 3</span>
<span class="go">type                : &quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN northbound service updates the flooding multicast group
for the logical datapath with the new port binding:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">_uuid               : c08d0102-c414-4a47-98d9-dd3fa9f9901c</span>
<span class="go">datapath            : 0b214af6-8910-489c-926a-fd0ed16a8251</span>
<span class="go">name                : _MC_flood</span>
<span class="go">ports               : [3e463ca0-951c-46fd-b6cf-05392fa3aa1f,</span>
<span class="go">                       794a6f03-7941-41ed-b1c6-0e00c1e18da0,</span>
<span class="go">                       fa7b294d-2a62-45ae-8de3-a41c002de6de]</span>
<span class="go">tunnel_key          : 65535</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN northbound service adds Logical Flows based on the updated
Address Set, ACL and Logical_Switch_Port objects:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Datapath: 3f6e16b5-a03a-48e5-9b60-7b7a0396c425  Pipeline: ingress</span>
<span class="go">  table= 0(  ls_in_port_sec_l2), priority=   50,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.src == {fa:16:3e:b6:a3:54}),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 1(  ls_in_port_sec_ip), priority=   90,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.src == fa:16:3e:b6:a3:54 &amp;&amp; ip4.src == 0.0.0.0 &amp;&amp;</span>
<span class="go">      ip4.dst == 255.255.255.255 &amp;&amp; udp.src == 68 &amp;&amp; udp.dst == 67),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 1(  ls_in_port_sec_ip), priority=   90,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.src == fa:16:3e:b6:a3:54 &amp;&amp; ip4.src == {192.168.1.5}),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 1(  ls_in_port_sec_ip), priority=   80,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.src == fa:16:3e:b6:a3:54 &amp;&amp; ip),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 2(  ls_in_port_sec_nd), priority=   90,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.src == fa:16:3e:b6:a3:54 &amp;&amp; arp.sha == fa:16:3e:b6:a3:54 &amp;&amp;</span>
<span class="go">      (arp.spa == 192.168.1.5 )),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 2(  ls_in_port_sec_nd), priority=   80,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      (arp || nd)),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 3(      ls_in_pre_acl), priority=  110, match=(nd),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 3(      ls_in_pre_acl), priority=  100, match=(ip),</span>
<span class="go">    action=(reg0[0] = 1; next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority=65535,</span>
<span class="go">    match=(!ct.est &amp;&amp; ct.rel &amp;&amp; !ct.new &amp;&amp; !ct.inv),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority=65535,</span>
<span class="go">    match=(ct.est &amp;&amp; !ct.rel &amp;&amp; !ct.new &amp;&amp; !ct.inv),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority=65535, match=(ct.inv),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 6(          ls_in_acl), priority=65535, match=(nd),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority= 2002,</span>
<span class="go">    match=(ct.new &amp;&amp; (inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      ip6)),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority= 2002,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip4 &amp;&amp;</span>
<span class="go">      (ip4.dst == 255.255.255.255 || ip4.dst == 192.168.1.0/24) &amp;&amp;</span>
<span class="go">      udp &amp;&amp; udp.src == 68 &amp;&amp; udp.dst == 67),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority= 2002,</span>
<span class="go">    match=(ct.new &amp;&amp; (inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      ip4)),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 6(          ls_in_acl), priority= 2001,</span>
<span class="go">    match=(inport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 6(          ls_in_acl), priority=    1, match=(ip),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 9(   ls_in_arp_nd_rsp), priority=   50,</span>
<span class="go">    match=(arp.tpa == 192.168.1.5 &amp;&amp; arp.op == 1),</span>
<span class="go">    action=(eth.dst = eth.src; eth.src = fa:16:3e:b6:a3:54; arp.op = 2; /* ARP reply */ arp.tha = arp.sha; arp.sha = fa:16:3e:b6:a3:54; arp.tpa = arp.spa; arp.spa = 192.168.1.5; outport = inport; inport = &quot;&quot;; /* Allow sending out inport. */ output;)</span>
<span class="go">  table=10(      ls_in_l2_lkup), priority=   50,</span>
<span class="go">    match=(eth.dst == fa:16:3e:b6:a3:54),</span>
<span class="go">    action=(outport = &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot;; output;)</span>
<span class="go">Datapath: 3f6e16b5-a03a-48e5-9b60-7b7a0396c425  Pipeline: egress</span>
<span class="go">  table= 1(     ls_out_pre_acl), priority=  110, match=(nd),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 1(     ls_out_pre_acl), priority=  100, match=(ip),</span>
<span class="go">    action=(reg0[0] = 1; next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority=65535, match=(nd),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority=65535,</span>
<span class="go">    match=(!ct.est &amp;&amp; ct.rel &amp;&amp; !ct.new &amp;&amp; !ct.inv),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority=65535,</span>
<span class="go">    match=(ct.est &amp;&amp; !ct.rel &amp;&amp; !ct.new &amp;&amp; !ct.inv),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority=65535, match=(ct.inv),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 4(         ls_out_acl), priority= 2002,</span>
<span class="go">    match=(ct.new &amp;&amp;</span>
<span class="go">      (outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip6 &amp;&amp;</span>
<span class="go">      ip6.src == $as_ip6_90a78a43_b549_4bee_8822_21fcccab58dc)),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority= 2002,</span>
<span class="go">    match=(ct.new &amp;&amp;</span>
<span class="go">      (outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip4 &amp;&amp;</span>
<span class="go">      ip4.src == $as_ip4_90a78a43_b549_4bee_8822_21fcccab58dc)),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority= 2002,</span>
<span class="go">    match=(outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip4 &amp;&amp;</span>
<span class="go">      ip4.src == 192.168.1.0/24 &amp;&amp; udp &amp;&amp; udp.src == 67 &amp;&amp; udp.dst == 68),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 4(         ls_out_acl), priority= 2001,</span>
<span class="go">    match=(outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp; ip),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 4(         ls_out_acl), priority=    1, match=(ip),</span>
<span class="go">    action=(reg0[1] = 1; next;)</span>
<span class="go">  table= 6( ls_out_port_sec_ip), priority=   90,</span>
<span class="go">    match=(outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.dst == fa:16:3e:b6:a3:54 &amp;&amp;</span>
<span class="go">      ip4.dst == {255.255.255.255, 224.0.0.0/4, 192.168.1.5}),</span>
<span class="go">    action=(next;)</span>
<span class="go">  table= 6( ls_out_port_sec_ip), priority=   80,</span>
<span class="go">    match=(outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.dst == fa:16:3e:b6:a3:54 &amp;&amp; ip),</span>
<span class="go">    action=(drop;)</span>
<span class="go">  table= 7( ls_out_port_sec_l2), priority=   50,</span>
<span class="go">    match=(outport == &quot;e9cb7857-4cb1-4e91-aae5-165a7ab5b387&quot; &amp;&amp;</span>
<span class="go">      eth.dst == {fa:16:3e:b6:a3:54}),</span>
<span class="go">    action=(output;)</span>
</pre></div>
</div>
</li>
<li><p class="first">The OVN controller service on each compute node translates these objects
into flows on the integration bridge <code class="docutils literal"><span class="pre">br-int</span></code>. Exact flows depend on
whether the compute node containing the instance also contains a DHCP agent
on the subnet.</p>
<ul>
<li><p class="first">On the compute node containing the instance, the Compute service creates
a port that connects the instance to the integration bridge and OVN
creates the following flows:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> ovs-ofctl show br-int
<span class="go">OFPT_FEATURES_REPLY (xid=0x2): dpid:000022024a1dc045</span>
<span class="go">n_tables:254, n_buffers:256</span>
<span class="go">capabilities: FLOW_STATS TABLE_STATS PORT_STATS QUEUE_STATS ARP_MATCH_IP</span>
<span class="go">actions: output enqueue set_vlan_vid set_vlan_pcp strip_vlan mod_dl_src mod_dl_dst mod_nw_src mod_nw_dst mod_nw_tos mod_tp_src mod_tp_dst</span>
<span class="go"> 12(tapeaf36f62-56): addr:fe:16:3e:15:7d:13</span>
<span class="go">     config:     0</span>
<span class="go">     state:      0</span>
<span class="go">     current:    10MB-FD COPPER</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cookie=0x0, duration=179.460s, table=0, n_packets=122, n_bytes=10556,</span>
<span class="go">    idle_age=1, priority=100,in_port=12</span>
<span class="go">    actions=load:0x4-&gt;NXM_NX_REG5[],load:0x5-&gt;OXM_OF_METADATA[],</span>
<span class="go">        load:0x3-&gt;NXM_NX_REG6[],resubmit(,16)</span>
<span class="go">cookie=0x0, duration=187.408s, table=16, n_packets=122, n_bytes=10556,</span>
<span class="go">    idle_age=1, priority=50,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,17)</span>
<span class="go">cookie=0x0, duration=187.408s, table=17, n_packets=2, n_bytes=684,</span>
<span class="go">    idle_age=84, priority=90,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,nw_src=0.0.0.0,nw_dst=255.255.255.255,</span>
<span class="go">        tp_src=68,tp_dst=67</span>
<span class="go">    actions=resubmit(,18)</span>
<span class="go">cookie=0x0, duration=187.408s, table=17, n_packets=98, n_bytes=8276,</span>
<span class="go">    idle_age=1, priority=90,ip,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,nw_src=192.168.1.5</span>
<span class="go">    actions=resubmit(,18)</span>
<span class="go">cookie=0x0, duration=187.408s, table=17, n_packets=17, n_bytes=1386,</span>
<span class="go">    idle_age=55, priority=80,ipv6,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=187.408s, table=17, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=187, priority=80,ip,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=187.408s, table=18, n_packets=5, n_bytes=210,</span>
<span class="go">    idle_age=10, priority=90,arp,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,arp_spa=192.168.1.5,</span>
<span class="go">    arp_sha=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,19)</span>
<span class="go">cookie=0x0, duration=187.408s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=187, priority=80,icmp6,reg6=0x3,metadata=0x5,</span>
<span class="go">        icmp_type=135,icmp_code=0</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=187.408s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=187, priority=80,icmp6,reg6=0x3,metadata=0x5,</span>
<span class="go">        icmp_type=136,icmp_code=0</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=187.408s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=187, priority=80,arp,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=33, n_bytes=4081,</span>
<span class="go">    idle_age=0, priority=100,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=100,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=15, n_bytes=1392,</span>
<span class="go">    idle_age=0, priority=65535,ct_state=-new+est-rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=-new-est+rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=+inv+trk,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,ct_state=+new+trk,ipv6,reg6=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=16, n_bytes=1922,</span>
<span class="go">    idle_age=2, priority=2002,ct_state=+new+trk,ip,reg6=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        nw_dst=255.255.255.255,tp_src=68,tp_dst=67</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        nw_dst=192.168.1.0/24,tp_src=68,tp_dst=67</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.069s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ipv6,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ip,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=2, n_bytes=767,</span>
<span class="go">    idle_age=27, priority=1,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=1,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=179.457s, table=25, n_packets=2, n_bytes=84,</span>
<span class="go">    idle_age=33, priority=50,arp,metadata=0x5,arp_tpa=192.168.1.5,</span>
<span class="go">        arp_op=1</span>
<span class="go">    actions=move:NXM_OF_ETH_SRC[]-&gt;NXM_OF_ETH_DST[],</span>
<span class="go">        mod_dl_src:fa:16:3e:15:7d:13,load:0x2-&gt;NXM_OF_ARP_OP[],</span>
<span class="go">        move:NXM_NX_ARP_SHA[]-&gt;NXM_NX_ARP_THA[],</span>
<span class="go">        load:0xfa163e157d13-&gt;NXM_NX_ARP_SHA[],</span>
<span class="go">        move:NXM_OF_ARP_SPA[]-&gt;NXM_OF_ARP_TPA[],</span>
<span class="go">        load:0xc0a80105-&gt;NXM_OF_ARP_SPA[],</span>
<span class="go">        move:NXM_NX_REG6[]-&gt;NXM_NX_REG7[],</span>
<span class="go">        load:0-&gt;NXM_NX_REG6[],load:0-&gt;NXM_OF_IN_PORT[],resubmit(,32)</span>
<span class="go">cookie=0x0, duration=187.408s, table=26, n_packets=50, n_bytes=4806,</span>
<span class="go">    idle_age=1, priority=50,metadata=0x5,dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=load:0x3-&gt;NXM_NX_REG7[],resubmit(,32)</span>
<span class="go">cookie=0x0, duration=469.575s, table=33, n_packets=74, n_bytes=7040,</span>
<span class="go">    idle_age=305, priority=100,reg7=0x4,metadata=0x4</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG7[],resubmit(,33)</span>
<span class="go">cookie=0x0, duration=179.460s, table=34, n_packets=2, n_bytes=684,</span>
<span class="go">    idle_age=84, priority=100,reg6=0x3,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.069s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=34, n_bytes=4455,</span>
<span class="go">    idle_age=0, priority=100,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=100,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.069s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=+inv+trk,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.069s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=22, n_bytes=2000,</span>
<span class="go">    idle_age=0, priority=65535,ct_state=-new+est-rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=-new-est+rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,ct_state=+new+trk,ip,reg7=0x3,</span>
<span class="go">        metadata=0x5,nw_src=192.168.1.5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,ct_state=+new+trk,ip,reg7=0x3,</span>
<span class="go">        metadata=0x5,nw_src=203.0.113.103</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=3, n_bytes=1141,</span>
<span class="go">    idle_age=27, priority=2002,udp,reg7=0x3,metadata=0x5,</span>
<span class="go">        nw_src=192.168.1.0/24,tp_src=67,tp_dst=68</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=39.497s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=39, priority=2002,ct_state=+new+trk,ipv6,reg7=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ip,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ipv6,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=9, n_bytes=1314,</span>
<span class="go">    idle_age=2, priority=1,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=1,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=47.068s, table=54, n_packets=23, n_bytes=2945,</span>
<span class="go">    idle_age=0, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=192.168.1.11</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=47.068s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=255.255.255.255</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=47.068s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=224.0.0.0/4</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=47.068s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=80,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=80,ipv6,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=55, n_packets=25, n_bytes=3029,</span>
<span class="go">    idle_age=0, priority=50,reg7=0x3,metadata=0x7,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,64)</span>
<span class="go">cookie=0x0, duration=179.460s, table=64, n_packets=116, n_bytes=10623,</span>
<span class="go">    idle_age=1, priority=100,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=output:12</span>
</pre></div>
</div>
</li>
<li><p class="first">For each compute node that only contains a DHCP agent on the subnet,
OVN creates the following flows:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cookie=0x0, duration=192.587s, table=16, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=50,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,17)</span>
<span class="go">cookie=0x0, duration=192.587s, table=17, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,ip,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,nw_src=192.168.1.5</span>
<span class="go">    actions=resubmit(,18)</span>
<span class="go">cookie=0x0, duration=192.587s, table=17, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,nw_src=0.0.0.0,</span>
<span class="go">        nw_dst=255.255.255.255,tp_src=68,tp_dst=67</span>
<span class="go">    actions=resubmit(,18)</span>
<span class="go">cookie=0x0, duration=192.587s, table=17, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,ipv6,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=17, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,ip,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,arp,reg6=0x3,metadata=0x5,</span>
<span class="go">        dl_src=fa:16:3e:15:7d:13,arp_spa=192.168.1.5,</span>
<span class="go">        arp_sha=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,19)</span>
<span class="go">cookie=0x0, duration=192.587s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,arp,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,icmp6,reg6=0x3,metadata=0x5,</span>
<span class="go">        icmp_type=135,icmp_code=0</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=18, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,icmp6,reg6=0x3,metadata=0x5,</span>
<span class="go">        icmp_type=136,icmp_code=0</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=33, n_bytes=4081,</span>
<span class="go">    idle_age=0, priority=100,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=19, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=100,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,20)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=15, n_bytes=1392,</span>
<span class="go">    idle_age=0, priority=65535,ct_state=-new+est-rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=-new-est+rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=65535,ct_state=+inv+trk,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,ct_state=+new+trk,ipv6,reg6=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=16, n_bytes=1922,</span>
<span class="go">    idle_age=2, priority=2002,ct_state=+new+trk,ip,reg6=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        nw_dst=255.255.255.255,tp_src=68,tp_dst=67</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2002,udp,reg6=0x3,metadata=0x5,</span>
<span class="go">        nw_dst=192.168.1.0/24,tp_src=68,tp_dst=67</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.069s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ipv6,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=2001,ip,reg6=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=2, n_bytes=767,</span>
<span class="go">    idle_age=27, priority=1,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=47.068s, table=22, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=1,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,23)</span>
<span class="go">cookie=0x0, duration=179.457s, table=25, n_packets=2, n_bytes=84,</span>
<span class="go">    idle_age=33, priority=50,arp,metadata=0x5,arp_tpa=192.168.1.5,</span>
<span class="go">        arp_op=1</span>
<span class="go">    actions=move:NXM_OF_ETH_SRC[]-&gt;NXM_OF_ETH_DST[],</span>
<span class="go">        mod_dl_src:fa:16:3e:15:7d:13,load:0x2-&gt;NXM_OF_ARP_OP[],</span>
<span class="go">        move:NXM_NX_ARP_SHA[]-&gt;NXM_NX_ARP_THA[],</span>
<span class="go">        load:0xfa163e157d13-&gt;NXM_NX_ARP_SHA[],</span>
<span class="go">        move:NXM_OF_ARP_SPA[]-&gt;NXM_OF_ARP_TPA[],</span>
<span class="go">        load:0xc0a80105-&gt;NXM_OF_ARP_SPA[],</span>
<span class="go">        move:NXM_NX_REG6[]-&gt;NXM_NX_REG7[],</span>
<span class="go">        load:0-&gt;NXM_NX_REG6[],load:0-&gt;NXM_OF_IN_PORT[],resubmit(,32)</span>
<span class="go">cookie=0x0, duration=192.587s, table=26, n_packets=61, n_bytes=5607,</span>
<span class="go">    idle_age=6, priority=50,metadata=0x5,dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=load:0x3-&gt;NXM_NX_REG7[],resubmit(,32)</span>
<span class="go">cookie=0x0, duration=184.640s, table=32, n_packets=61, n_bytes=5607,</span>
<span class="go">    idle_age=6, priority=100,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=load:0x5-&gt;NXM_NX_TUN_ID[0..23],</span>
<span class="go">        set_field:0x3/0xffffffff-&gt;tun_metadata0,</span>
<span class="go">        move:NXM_NX_REG6[0..14]-&gt;NXM_NX_TUN_METADATA0[16..30],output:4</span>
<span class="go">cookie=0x0, duration=47.069s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=135,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=110,icmp6,metadata=0x5,icmp_type=136,</span>
<span class="go">        icmp_code=0</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=34, n_bytes=4455,</span>
<span class="go">    idle_age=0, priority=100,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=47.068s, table=49, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=47, priority=100,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[0],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=65535,ct_state=+inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=65535,ct_state=-new-est+rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=27, n_bytes=2316,</span>
<span class="go">    idle_age=6, priority=65535,ct_state=-new+est-rel-inv+trk,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2002,ct_state=+new+trk,icmp,reg7=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2002,ct_state=+new+trk,ipv6,reg7=0x3,</span>
<span class="go">        metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2002,udp,reg7=0x3,metadata=0x5,</span>
<span class="go">        nw_src=192.168.1.0/24,tp_src=67,tp_dst=68</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2002,ct_state=+new+trk,ip,reg7=0x3,</span>
<span class="go">        metadata=0x5,nw_src=203.0.113.103</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,50)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2001,ip,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=2001,ipv6,reg7=0x3,metadata=0x5</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=25, n_bytes=2604,</span>
<span class="go">    idle_age=6, priority=1,ip,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=192.587s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=1,ipv6,metadata=0x5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=192.587s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=224.0.0.0/4</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=192.587s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=255.255.255.255</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=192.587s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=90,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13,nw_dst=192.168.1.5</span>
<span class="go">    actions=resubmit(,55)</span>
<span class="go">cookie=0x0, duration=192.587s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,ipv6,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=54, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=80,ip,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=drop</span>
<span class="go">cookie=0x0, duration=192.587s, table=55, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=192, priority=50,reg7=0x3,metadata=0x5,</span>
<span class="go">        dl_dst=fa:16:3e:15:7d:13</span>
<span class="go">    actions=resubmit(,64)</span>
</pre></div>
</div>
</li>
<li><p class="first">For each compute node that contains neither the instance nor a DHCP
agent on the subnet, OVN creates the following flows:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cookie=0x0, duration=189.763s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=189, priority=2002,ct_state=+new+trk,ipv6,reg7=0x4,</span>
<span class="go">        metadata=0x4</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
<span class="go">cookie=0x0, duration=189.763s, table=52, n_packets=0, n_bytes=0,</span>
<span class="go">    idle_age=189, priority=2002,ct_state=+new+trk,ip,reg7=0x4,</span>
<span class="go">        metadata=0x4,nw_src=192.168.1.5</span>
<span class="go">    actions=load:0x1-&gt;NXM_NX_REG0[1],resubmit(,53)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Launch an instance on a self-service network</a><ul>
<li><a class="reference internal" href="#ovn-operations">OVN operations</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="launch-instance-provider-network.html"
                                  title="previous chapter">Launch an instance on a provider network</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../install.html"
                                  title="next chapter">Installation</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/networking-ovn
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/refarch/launch-instance-selfservice-network.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../install.html" title="Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="launch-instance-provider-network.html" title="Launch an instance on a provider network"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">networking-ovn 2.0.0.0rc2.dev13 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="refarch.html" accesskey="U">Reference architecture</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/networking-ovn");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>