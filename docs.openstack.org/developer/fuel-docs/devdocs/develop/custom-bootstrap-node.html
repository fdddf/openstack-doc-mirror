<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Bootstrap node</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../../_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../../_static/css/combined.css" rel="stylesheet">
<link href="../../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/summit/tokyo-2015/summit-videos/">Summit Videos</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
    <h2>Bootstrap node</h2>
  </div>
  <div class="docs-actions">
    
    <a href="ostf_contributors_guide.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Health Check (OSTF) Contributor&#8217;s Guide"></i></a>
    
    
    <a href="modular-architecture.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Modular Architecture"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017/02/03</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Bootstrap node</a><ul>
<li><a class="reference internal" href="#ubuntu-bootstrap">Ubuntu bootstrap</a><ul>
<li><a class="reference internal" href="#creating-a-custom-bootstrap-node">Creating a custom bootstrap node</a></li>
<li><a class="reference internal" href="#modifying-initramfs-image-manually-for-the-bootstrap-node">Modifying initramfs image manually for the bootstrap node</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-ubuntu-chroot-on-the-fuel-master-node">Creating Ubuntu chroot on the Fuel Master node</a></li>
<li><a class="reference internal" href="#adding-dkms-kernel-modules-into-bootstrap-ubuntu">Adding DKMS kernel modules into bootstrap (Ubuntu)</a><ul>
<li><a class="reference internal" href="#creating-a-dkms-package-from-sources">Creating a DKMS package from sources</a><ul>
<li><a class="reference internal" href="#example-of-a-minimal-dkms-conf-file">Example of a minimal dkms.conf file</a></li>
<li><a class="reference internal" href="#example-of-an-improved-dkms-conf-file">Example of an improved dkms.conf file</a></li>
<li><a class="reference internal" href="#exporting-dkms-package-and-kernel-binaries">Exporting DKMS package and kernel binaries</a></li>
<li><a class="reference internal" href="#extracting-kernel-module-binaries">Extracting kernel module binaries</a></li>
<li><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#centos-bootstrap">CentOS bootstrap</a><ul>
<li><a class="reference internal" href="#creating-and-injecting-the-initrd-update-into-bootstrap">Creating and injecting the initrd_update into bootstrap</a></li>
<li><a class="reference internal" href="#modifying-initramfs-image-manually-for-bootstrap-node">Modifying initramfs image manually for bootstrap node</a></li>
<li><a class="reference internal" href="#id1">Creating a custom bootstrap node</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="bootstrap-node">
<span id="custom-bootstrap-node"></span><h1>Bootstrap node<a class="headerlink" href="#bootstrap-node" title="Permalink to this headline">¶</a></h1>
<p>The Fuel bootstrap nodes can be based on the CentOS or Ubuntu
distributions and are respectively called CentOS or Ubuntu bootstrap
nodes. In previous versions of Fuel, the Fuel bootstrap nodes
were based exclusively on CentOS. However, since Fuel 7.0, you can
select from the two bootstraps. Initially, the Ubuntu bootstrap was
introduced as an experimental feature. In current version, the Ubuntu
bootstrap feature is fully supported.</p>
<div class="section" id="ubuntu-bootstrap">
<h2>Ubuntu bootstrap<a class="headerlink" href="#ubuntu-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to build and use the Ubuntu bootstrap.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The CentOS bootstrap located in the
<code class="docutils literal"><span class="pre">/var/www/nailgun/bootstrap</span></code> folder.
The Ubuntu bootstrap is located in the
<code class="docutils literal"><span class="pre">/var/www/nailgun/bootstraps/active</span></code> folder.
The bootstrap location can be changed in the future releases.</p>
</div>
<p>To modify a bootsrtap, use one of the following options:</p>
<ul class="simple">
<li>Create a custom image for bootstrap to replace the default one.</li>
<li>Modify the copy of original bootstrap image manually
and activate it.</li>
</ul>
<p>Let&#8217;s take a look at every approach in more details.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Altering the active bootstrap image is quite risky.
Please create a backup copy of the active bootstrap image,
make your changes on a copy of the active bootstrap and activate
the altered image later.
You can always create new custom bootstrap if something goes wrong
and activate the new bootstrap.</p>
</div>
<div class="section" id="creating-a-custom-bootstrap-node">
<h3>Creating a custom bootstrap node<a class="headerlink" href="#creating-a-custom-bootstrap-node" title="Permalink to this headline">¶</a></h3>
<p>You can create a new Ubuntu bootstrap using the
<strong class="command">fuel-bootsrtap</strong> command.
To create and activate a new Ubuntu bootstrap:</p>
<ol class="arabic simple">
<li>Build a new bootstrap image as a <code class="docutils literal"><span class="pre">.tar</span></code> archive.</li>
<li>Import the configured image from the archive.</li>
<li>Activate the new image.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The commands for creating the Ubuntu bootstrap
vary for different versions of Fuel.</p>
</div>
<p>To build the new bootstrap image:</p>
<ol class="arabic">
<li><p class="first">Type the command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap build</span>
</pre></div>
</div>
<p><strong>System response:</strong></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Try to build image with data:</span>
<span class="go">bootstrap:</span>
<span class="go"> container: {format: tar.gz, meta_file: metadata.yaml}</span>
<span class="go"> extend_kopts: biosdevname=0 net.ifnames=1 debug ignore_loglevel log_buf_len=10M</span>
<span class="go">   print_fatal_signals=1 LOGLEVEL=8</span>
<span class="go"> extra_files: [/usr/share/fuel_bootstrap_cli/files/trusty]</span>
<span class="go"> label: 93f117b9-65b7-41fa-ade2-52002989dda1</span>
<span class="go"> modules:</span>
<span class="go"> - {mask: kernel, name: kernel, uri: &#39;http://127.0.0.1:8080/bootstraps/93f117b9-65b7-41fa-ade2-52002989dda1/vmlinuz&#39;}</span>
<span class="go"> - {compress_format: xz, mask: initrd, name: initrd, uri: &#39;http://127.0.0.1:8080/bootstraps/93f117b9-65b7-41fa-ade2-52002989dda1/initrd.img&#39;}</span>
<span class="go"> - &amp;id001 {compress_format: xz, container: raw, format: ext4, mask: rootfs, name: rootfs,</span>
<span class="go">   uri: &#39;http://127.0.0.1:8080/bootstraps/93f117b9-65b7-41fa-ade2-52002989dda1/root.squashfs&#39;}</span>
<span class="go"> post_script_file: null</span>
<span class="go"> root_ssh_authorized_file: /root/.ssh/id_rsa.pub</span>
<span class="go"> uuid: 93f117b9-65b7-41fa-ade2-52002989dda1</span>

<span class="go">...</span>

<span class="go">Build process is in progress. Usually it takes 15-20 minutes. It depends on your Internet connection and hardware performance.</span>
<span class="go">--- Building bootstrap image (do_mkbootstrap) ---</span>
<span class="go">*** Preparing image space ***</span>
<span class="go">Installing BASE operating system into image</span>
<span class="go">Starting new HTTP connection (1): 127.0.0.1</span>
<span class="go">Starting new HTTP connection (1): mirror.fuel-infra.org</span>
<span class="go">Starting new HTTP connection (1): mirror.fuel-infra.org</span>
<span class="go">Starting new HTTP connection (1): mirror.fuel-infra.org</span>
<span class="go">Building initramfs</span>
<span class="go">Building squashfs</span>
<span class="go">squashfs_image clean-up</span>
<span class="go">Creating archive: /tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz</span>
<span class="go">--- Building bootstrap image END (do_mkbootstrap) ---</span>
<span class="go">Cleanup chroot</span>
<span class="go">Bootstrap image 93f117b9-65b7-41fa-ade2-52002989dda1 has been built: /tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz</span>
</pre></div>
</div>
<p>A new bootstrap image has been successfully built.
By default, Fuel places the new bootstrap image into the
<code class="docutils literal"><span class="pre">/tmp</span></code> folder. For example,
<code class="docutils literal"><span class="pre">/tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz</span></code>.</p>
</li>
<li><p class="first">Import the bootstrap image:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap import /tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz</span>
</pre></div>
</div>
<p><strong>System response:</strong></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap import /tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz</span>

<span class="go">Try extract /tmp/93f117b9-65b7-41fa-ade2-52002989dda1.tar.gz to /tmp/tmpaLrxol</span>
<span class="go">Bootstrap image 93f117b9-65b7-41fa-ade2-52002989dda1 has been imported.</span>
</pre></div>
</div>
</li>
<li><p class="first">Activate the bootstrap image:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap activate 93f117b9-65b7-41fa-ade2-52002989dda1</span>
</pre></div>
</div>
<p><strong>System response:</strong></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Starting new HTTP connection (1): 10.20.0.2</span>
<span class="go">Starting new HTTP connection (1): 10.20.0.2</span>
<span class="go">Starting new HTTP connection (1): 10.20.0.2</span>
<span class="go">Starting new HTTP connection (1): 10.20.0.2</span>
<span class="go">Bootstrap image 93f117b9-65b7-41fa-ade2-52002989dda1 has been activated.</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you use Fuel 7.0, create and activate a custom Ubuntu
bootstrap image using the following commands:</p>
<div class="last highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap-image</span>
<span class="go">fuel-bootstrap-image-set ubuntu</span>
</pre></div>
</div>
</div>
<p>See also:</p>
<ul class="simple">
<li>Fuel Installation Guide</li>
</ul>
</div>
<div class="section" id="modifying-initramfs-image-manually-for-the-bootstrap-node">
<h3>Modifying initramfs image manually for the bootstrap node<a class="headerlink" href="#modifying-initramfs-image-manually-for-the-bootstrap-node" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">fuel-bootstrap</span></code> utility builds Ubuntu bootstrap. The bootstrap is
split into two files: <code class="docutils literal"><span class="pre">initrd.img</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code>.
Fuel downloads and unpacks the <code class="docutils literal"><span class="pre">intrd.img</span></code> file as a temporary
file system during the PXE boot.
The image makes initialization and downloads the <code class="docutils literal"><span class="pre">root.squashfs</span></code> image.
After that, the <code class="docutils literal"><span class="pre">root.squashfs</span></code> is unpacked. The mount point of the file
system is switched to <code class="docutils literal"><span class="pre">root.squasfs</span></code>.</p>
<p>There is a possibility to add a package into a bootstrap
&#8220;on the fly&#8221; using the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap build --package &lt;package-name&gt;</span>
</pre></div>
</div>
<p>The command adds the package into both images: <code class="docutils literal"><span class="pre">initrd.img</span></code> and
<code class="docutils literal"><span class="pre">root.squashfs</span></code>.</p>
<p>You can add an arbitrary files and folders into
<code class="docutils literal"><span class="pre">root.squasfs</span></code> (but not to <code class="docutils literal"><span class="pre">initrd.img</span></code>) using
the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">fuel-bootstrap build --extra-dir &lt;root-path&gt;</span>
</pre></div>
</div>
<p>There are tasks that require editing a bootstrap manually.
For example, adding kernel module binaries into <code class="docutils literal"><span class="pre">initramfs</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code>.</p>
<p>To edit the <code class="docutils literal"><span class="pre">initramfs</span></code> (<code class="docutils literal"><span class="pre">initrd.img</span></code>) image, unpack the image, modify, and pack it back.
The <code class="docutils literal"><span class="pre">initramfs</span></code> image is a compressed <code class="docutils literal"><span class="pre">cpio</span></code> archive.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">initrd.img</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code> location may vary
for different Fuel versions.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Install <code class="docutils literal"><span class="pre">squashfs-tools</span></code> prior to working with the <code class="docutils literal"><span class="pre">root.squashfs</span></code> image.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Operating on active bootstrap may lead to the case when
a suddenly rebooted node fails to download bootstrap images <code class="docutils literal"><span class="pre">initrd</span></code>
and <code class="docutils literal"><span class="pre">root.squashfs</span></code>. The rebooted node will repeat the attempts until
the bootstrap files have been updated and downloaded successfully.
You can also create a new bootstrap image using the commands
<strong class="command">fuel-bootstrap build</strong> and <strong class="command">fuel-bootstrap import</strong>.
Modify the <code class="docutils literal"><span class="pre">initrd</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code> files as described
below and activate this new image using the command
<strong class="command">fuel-bootstrap active &lt;your-bootstrap&gt;</strong>.
In such case, use the <code class="docutils literal"><span class="pre">/var/www/nailgun/bootstraps/&lt;your-bootstrap&gt;</span></code>
path to your bootstrap instead of <code class="docutils literal"><span class="pre">/var/www/nailgun/bootstraps/active_bootstrap</span></code>
in the commands below.</p>
</div>
<p>To change the <code class="docutils literal"><span class="pre">initramfs</span></code> image (<code class="docutils literal"><span class="pre">initrd.img</span></code>) and <code class="docutils literal"><span class="pre">root.squashfs</span></code>, follow the steps below.</p>
<ol class="arabic">
<li><p class="first">Unpack <code class="docutils literal"><span class="pre">initrd.img</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code>:</p>
<ol class="arabic">
<li><p class="first">Create a folder for modifying bootstrap and copy the <code class="docutils literal"><span class="pre">initramfs</span></code>
and <code class="docutils literal"><span class="pre">root.squashfs</span></code> images into it:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mkdir /tmp/initrd-orig</span>
<span class="go">cp /var/www/nailgun/bootstraps/active_bootstrap/initrd.img /tmp/initrd-orig/</span>
<span class="go">cp /var/www/nailgun/bootstraps/active_bootstrap/root.squashfs /tmp/initrd-orig/</span>
</pre></div>
</div>
</li>
<li><p class="first">Unpack <code class="docutils literal"><span class="pre">initramfs</span></code>.</p>
<ol class="arabic">
<li><p class="first">Uncompress the <code class="docutils literal"><span class="pre">initrd.img</span></code> file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cd /tmp/initrd-orig/</span>
<span class="go">mv initrd.img initrd.img.xz</span>
<span class="go">xz -d initrd.img.xz</span>
</pre></div>
</div>
</li>
<li><p class="first">Unpack the <code class="docutils literal"><span class="pre">cpio</span></code> archive to the <code class="docutils literal"><span class="pre">initramfs</span></code> folder:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mkdir initramfs</span>
<span class="go">cd initramfs</span>
<span class="go">cpio -i &lt; ../initrd.img</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Unpack the <code class="docutils literal"><span class="pre">root.squashfs</span></code> image into the <code class="docutils literal"><span class="pre">squashfs-root</span></code> folder:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cd /tmp/initrd-orig/</span>
<span class="go">unsquashfs root.squashfs</span>
</pre></div>
</div>
</li>
<li><p class="first">See the RAM content that you will have in the bootstrap:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ls -l /tmp/initrd-orig/initramfs</span>
<span class="go">ls -l /tmp/initrd-orig/squashfs-root</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Modify <code class="docutils literal"><span class="pre">initrd.img</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To add or update a new kernel module, use the <strong class="command">depmod</strong> command.
It will update the <code class="docutils literal"><span class="pre">modules.alias</span></code> and <code class="docutils literal"><span class="pre">modules.dep</span></code> files informing
the kernel about the new module.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is <a class="reference external" href="http://www.linuxvox.com/2009/10/update-kernel-modules-the-smart-and-safe-way/">a safe way to update kernel modules</a> for Ubuntu, when
the new module is installed into the <code class="docutils literal"><span class="pre">/lib/modules/&lt;version&gt;/updates</span></code> folder.
The previous kernel module is still kept in the system, but hidden by
the new module. When something goes wrong with the new module it can be
easily removed from the <code class="docutils literal"><span class="pre">/update</span></code> folder and the older version of module
will be returned back.</p>
</div>
<ol class="arabic">
<li><p class="first">Modify it as you need. For example, copy new kernel module <code class="docutils literal"><span class="pre">aacraid</span></code>
into the <code class="docutils literal"><span class="pre">initrd</span></code> corresponding kernel folder:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mkdir -p /tmp/initrd-orig/initramfs/lib/modules/3.13.0-77-generic/updates</span>
<span class="go">cp aacraid.ko /tmp/initrd-orig/initramfs/lib/modules/3.13.0-77-generic/updates</span>
</pre></div>
</div>
</li>
<li><p class="first">Modify the <code class="docutils literal"><span class="pre">squashfs-root</span></code> by copying the new kernel module <code class="docutils literal"><span class="pre">aacraid</span></code>
into the specified folder (kernel version may be different in your case):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mkdir -p /tmp/initrd-orig/squashfs-root/lib/modules/3.13.0-77-generic/updates</span>
<span class="go">cp aacraid.ko /tmp/initrd-orig/squashfs-root/lib/modules/3.13.0-77-generic/updates</span>
</pre></div>
</div>
</li>
<li><p class="first">Run <strong class="command">depmod</strong> to update information about kernel modules on <code class="docutils literal"><span class="pre">initrd</span></code> and <code class="docutils literal"><span class="pre">root.squashfs</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">depmod -a -b /tmp/initrd-orig/initramfs/ -F /tmp/initrd-orig/squashfs-root/boot/System.map-3.13.0-77-generic 3.13.0-77-generic</span>
<span class="go">depmod -a -b /tmp/initrd-orig/squashfs-root/ -F /tmp/initrd-orig/squashfs-root/boot/System.map-3.13.0-77-generic 3.13.0-77-generic</span>
</pre></div>
</div>
<p>See <strong class="command">depmod</strong> command parameters:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">depmod -a -b &lt;base dir&gt; -F &lt;System.map location&gt; &lt;kernel version&gt;</span>
</pre></div>
</div>
<p><strong>System response</strong></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">====  =================================================================</span>
<span class="go"> -a     Rebuild information for all modules</span>
<span class="go"> -b     Base folder, If your modules are not currently in the (normal)</span>
<span class="go">        directory /lib/modules/version. In our case it were the folders</span>
<span class="go">        where initramfs and root.squasfs</span>
<span class="go"> -F     location of the System.map produced when the kernel was built</span>
<span class="go">====  =================================================================</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It is important to pass a correct kernel version to the <strong class="command">depmod</strong> command
at the end of the parameters. Otherwise, the version of the current kernel on
the Fuel master node will be used.</p>
<p>The following files will be modified in the <code class="docutils literal"><span class="pre">initramfs</span></code> and <code class="docutils literal"><span class="pre">squashfs-root</span></code>
folders after running the <strong class="command">depmod</strong> command:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">lib/modules/3.13.0-77-generic/modules.alias</span></code></li>
<li><code class="docutils literal"><span class="pre">lib/modules/3.13.0-77-generic/modules.alias.bin</span></code></li>
<li><code class="docutils literal"><span class="pre">lib/modules/3.13.0-77-generic/modules.dep</span></code></li>
<li><code class="docutils literal"><span class="pre">lib/modules/3.13.0-77-generic/modules.dep.bin</span></code></li>
<li><code class="docutils literal"><span class="pre">lib/modules/3.13.0-77-generic/modules.symbols.bin</span></code></li>
</ul>
</div>
<p>To get more information on how to:</p>
<ul class="simple">
<li>Pass options to a module</li>
<li>Start <code class="docutils literal"><span class="pre">dependent</span></code> modules</li>
<li>Start <code class="docutils literal"><span class="pre">black-list</span></code> modules</li>
</ul>
<p>see the <code class="docutils literal"><span class="pre">modprobe.d</span></code> man page.</p>
</li>
</ol>
</li>
<li><p class="first">Pack the <code class="docutils literal"><span class="pre">initramfs</span></code> and <code class="docutils literal"><span class="pre">squashfs-root</span></code></p>
<ol class="arabic">
<li><p class="first">Pack the <code class="docutils literal"><span class="pre">initramfs</span></code> back to <code class="docutils literal"><span class="pre">initfamfs.img.new</span></code> image:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cd /tmp/initrd-orig/initramfs</span>
<span class="go">find . | cpio --quiet -o -H newc | xz --check=crc32 &gt; ../initrd.img.new</span>
</pre></div>
</div>
</li>
<li><p class="first">Pack the <code class="docutils literal"><span class="pre">squashfs</span></code> to the <code class="docutils literal"><span class="pre">root.squashfs.new</span></code></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">squashfs</span></code> utilities (<code class="docutils literal"><span class="pre">mksquashfs</span></code>) installed on a user&#8217;s machine or
the Fuel Master node can be incompatible with <code class="docutils literal"><span class="pre">squashfs</span></code> code in the bootstrap
kernel. To verify the generated <code class="docutils literal"><span class="pre">squashfs</span> <span class="pre">image</span></code> is compatible with the
bootstrap kernel, use <code class="docutils literal"><span class="pre">mksquashfs</span></code> utility installed in <code class="docutils literal"><span class="pre">squashfs-root</span></code>.
A simple way to do that is using bind mounts:</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cd /tmp/initrd-orig</span>
<span class="go">mkdir -p /tmp/initrd-orig/squashfs-root/mnt/dst</span>
<span class="go">mkdir -p /tmp/initrd-orig/dst</span>
<span class="go">mount --bind dst squashfs-root/mnt/dst</span>
<span class="go">chroot squashfs-root mksquashfs / /mnt/dst/root.squashfs.new -comp xz -noappend -e /mnt/dst</span>
<span class="gp">#</span> clean up
<span class="go">umount squashfs-root/mnt/dst</span>
</pre></div>
</div>
<p>The output of the mksquashfs command should be as follows:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mksquashfs squashfs-root root.squashfs.new -comp xz</span>

<span class="go">  quashfs squashfs-root root.squashfs.new -comp xz</span>
<span class="go">  Parallel mksquashfs: Using 2 processors</span>
<span class="go">  Creating 4.0 filesystem on root.squashfs.new, block size 131072.</span>
<span class="go">  [================================================\] 105857/105857 100%</span>

<span class="go">  Exportable Squashfs 4.0 filesystem, xz compressed, data block size 131072</span>
<span class="go">    compressed data, compressed metadata, compressed fragments, compressed xattrs</span>
<span class="go">    duplicates are removed</span>
<span class="go">  Filesystem size 598514.76 Kbytes (584.49 Mbytes)</span>
<span class="go">    47.89% of uncompressed filesystem size (1249842.98 Kbytes)</span>
<span class="go">  Inode table size 933186 bytes (911.31 Kbytes)</span>
<span class="go">    23.04% of uncompressed inode table size (4050950 bytes)</span>
<span class="go">  Directory table size 1904568 bytes (1859.93 Kbytes)</span>
<span class="go">    48.93% of uncompressed directory table size (3892589 bytes)</span>
<span class="go">  Number of duplicate files found 7780</span>
<span class="go">  Number of inodes 121770</span>
<span class="go">  Number of files 106698</span>
<span class="go">  Number of fragments 4627</span>
<span class="go">  Number of symbolic links  6388</span>
<span class="go">  Number of device nodes 81</span>
<span class="go">  Number of fifo nodes 0</span>
<span class="go">  Number of socket nodes 0</span>
<span class="go">  Number of directories 8603</span>
<span class="go">  Number of ids (unique uids + gids) 18</span>
<span class="go">  Number of uids 4</span>
<span class="go">    root (0)</span>
<span class="go">    unknown (102)</span>
<span class="go">    unknown (100)</span>
<span class="go">    unknown (101)</span>
<span class="go">  Number of gids 17</span>
<span class="go">    root (0)</span>
<span class="go">    unknown (44)</span>
<span class="go">    unknown (29)</span>
<span class="go">    tty (5)</span>
<span class="go">    man (15)</span>
<span class="go">    disk (6)</span>
<span class="go">    unknown (42)</span>
<span class="go">    unknown (102)</span>
<span class="go">    unknown (43)</span>
<span class="go">    unknown (103)</span>
<span class="go">    mem (8)</span>
<span class="go">    unknown (106)</span>
<span class="go">    ftp (50)</span>
<span class="go">    unknown (101)</span>
<span class="go">    unknown (105)</span>
<span class="go">    adm (4)</span>
<span class="go">    unknown (104)</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy new files and update the current bootstrap</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cp dst/root.squashfs.new initrd.img.new /var/www/nailgun/bootstraps/active_bootstrap/</span>
<span class="go">cd /var/www/nailgun/bootstraps/active_bootstrap/</span>
<span class="go">mv initrd.img initrd.img.orig</span>
<span class="go">mv root.squashfs root.squashfs.orig</span>
<span class="go">cp initrd.img.new initrd.img</span>
<span class="go">cp root.squashfs.new root.squashfs</span>
<span class="go">cobbler sync</span>
</pre></div>
</div>
</li>
<li><p class="first">Clean up. Remove <code class="docutils literal"><span class="pre">/tmp/initrd-orig</span></code> temporary folder:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rm -Rf /tmp/initrd-orig</span>
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
<div class="section" id="creating-ubuntu-chroot-on-the-fuel-master-node">
<span id="chroot"></span><h2>Creating Ubuntu chroot on the Fuel Master node<a class="headerlink" href="#creating-ubuntu-chroot-on-the-fuel-master-node" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is an alternative way of creating a <code class="docutils literal"><span class="pre">chroot</span></code> folder on the
Fuel Master node. You can download prebuilt <a class="reference external" href="http://uec-images.ubuntu.com/trusty/current">VM images</a> for Ubuntu and
run it with your favorite hypervisor. You can also use an IBP Ubuntu image
which is built to your Fuel Master node.</p>
</div>
<p>This section describes how to create a chroot with Ubuntu on the Fuel Master
node and provides the implementation script.</p>
<p>Creating a <code class="docutils literal"><span class="pre">chroot</span></code> folder on Ubuntu can be useful for:</p>
<ul class="simple">
<li>Rebuilding kernel modules for Ubuntu</li>
<li>Creating DKMS DEB packages from sources</li>
<li>Building kernel modules binaries for a given kernel version with DKMS</li>
</ul>
<p>The script below creates <code class="docutils literal"><span class="pre">chroot</span></code> on the Fuel Master node using a prebuilt
Ubuntu cloud image <strong>trusty-server-cloudimg-amd64-root.tar.gz</strong> that is
downloaded from the <a class="reference external" href="http://uec-images.ubuntu.com/trusty/current">VM images</a> site. The name of the image and the link
are kept in the <code class="docutils literal"><span class="pre">UBUNTU_IMAGE</span></code> and <code class="docutils literal"><span class="pre">PREBUILT_IMAGE_LINK</span></code> variables
respectively.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before you copy and run the script, modify the <code class="docutils literal"><span class="pre">UBUNTU_IMAGE</span></code>,
<code class="docutils literal"><span class="pre">PREBUILT_IMAGE_LINK</span></code>, <code class="docutils literal"><span class="pre">DISTRO_RELEASE</span></code>, <code class="docutils literal"><span class="pre">KERNEL_FLAVOR</span></code>, or
<code class="docutils literal"><span class="pre">MIRROR_DISTRO</span></code> variables if required.</p>
</div>
<p>The script completes the following steps:</p>
<ol class="arabic simple">
<li>Creates <code class="docutils literal"><span class="pre">chroot</span></code> in the <code class="docutils literal"><span class="pre">/tmp</span></code> folder with the <em>ubuntu-chroot.XXXXX</em>
template name (where <em>XXXXX</em> is substituted with digits and characters,
for example, <code class="docutils literal"><span class="pre">/tmp/ubuntu-chroot.Yusk8G</span></code>).</li>
<li>Mounts the <code class="docutils literal"><span class="pre">/proc</span></code> filesystem and creates a <code class="docutils literal"><span class="pre">/dev</span></code> folder with links to
<code class="docutils literal"><span class="pre">/proc</span></code> into the <code class="docutils literal"><span class="pre">chroot</span></code> folder.</li>
<li>Prepares a configuration for the <code class="docutils literal"><span class="pre">apt</span></code> package manager.</li>
<li>Downloads and installs an additional set of packages, listed in the
<code class="docutils literal"><span class="pre">UBUNTU_PKGS</span></code> variable, to <code class="docutils literal"><span class="pre">chroot</span></code>. The packages are required to build
DKMS and deal with the DEB packages. These packages are: <code class="docutils literal"><span class="pre">linux-headers</span></code>,
<code class="docutils literal"><span class="pre">dkms</span></code>, <code class="docutils literal"><span class="pre">build-essential</span></code>, and <code class="docutils literal"><span class="pre">debhelper</span></code>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The Fuel Master node should have access to the Internet to download
a required DEB package from the Ubuntu repository.</p>
<p class="last">Unmount the <code class="docutils literal"><span class="pre">chroot/proc</span></code> file system and delete <code class="docutils literal"><span class="pre">chroot</span></code>
when you do not need it anymore.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span>!/bin/bash

<span class="gp">#</span> Define the kernel flavor and path to the link to a prebuild image.
<span class="go">[ -z &quot;$KERNEL_FLAVOR&quot;  ] &amp;&amp; KERNEL_FLAVOR=&quot;-generic-lts-trusty&quot;</span>
<span class="go">[ -z &quot;$DISTRO_RELEASE&quot; ] &amp;&amp; DISTRO_RELEASE=&quot;trusty&quot;</span>
<span class="go">[ -z &quot;$UBUNTU_IMAGE&quot;   ] &amp;&amp; UBUNTU_IMAGE=&quot;trusty-server-cloudimg-amd64-root.tar.gz&quot;</span>
<span class="go">[ -z &quot;$PREBUILT_IMAGE_LINK&quot; ] &amp;&amp; \</span>
<span class="gp">PREBUILT_IMAGE_LINK=&quot;http://uec-images.ubuntu.com/$</span><span class="o">{</span>DISTRO_RELEASE<span class="o">}</span>/current<span class="s2">&quot;</span>

<span class="go">UBUNTU_PKGS=&quot;linux-headers${KERNEL_FLAVOR} linux-firmware dkms build-essential debhelper&quot;</span>

<span class="gp">#</span> Create a temporary directory <span class="o">(</span>ubuntu-chroot<span class="o">)</span> using the command:
<span class="gp">#</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$root_dir</span><span class="s2">&quot;</span>  <span class="o">]</span> <span class="o">&amp;&amp;</span>
<span class="go">root_dir=$(mktemp -d --tmpdir ubuntu-chroot.XXXXX)</span>
<span class="go">chmod 755 ${root_dir}</span>

<span class="gp">#</span> Download a prebuilt image and un-tar it.
<span class="gp">#</span> Check <span class="k">if</span> it has been downloaded already.
<span class="go">if [ ! -e &quot;$UBUNTU_IMAGE&quot; ]; then</span>
<span class="gp"> #</span> download
<span class="go"> wget ${PREBUILT_IMAGE_LINK}/${UBUNTU_IMAGE}</span>
<span class="go">fi</span>
<span class="go">tar -xzvf &quot;${UBUNTU_IMAGE}&quot; -C ${root_dir}</span>

<span class="gp">#</span> Install required packages and resolve dependencies.
<span class="go">chroot $root_dir  env \</span>
<span class="go">             LC_ALL=C \</span>
<span class="go">             DEBIAN_FRONTEND=noninteractive \</span>
<span class="go">             DEBCONF_NONINTERACTIVE_SEEN=true \</span>
<span class="go">             TMPDIR=/tmp \</span>
<span class="go">             TMP=/tmp \</span>
<span class="go">             PATH=$PATH:/sbin:/bin \</span>
<span class="go">             apt-get update</span>

<span class="go">chroot $root_dir  env \</span>
<span class="go">             LC_ALL=C \</span>
<span class="go">             DEBIAN_FRONTEND=noninteractive \</span>
<span class="go">             DEBCONF_NONINTERACTIVE_SEEN=true \</span>
<span class="go">             TMPDIR=/tmp \</span>
<span class="go">             TMP=/tmp \</span>
<span class="go">             PATH=$PATH:/sbin:/bin \</span>
<span class="go">             apt-get install --force-yes --yes $UBUNTU_PKGS</span>

<span class="go">echo &quot;Don&#39;t forget to delete $root_dir at the end&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-dkms-kernel-modules-into-bootstrap-ubuntu">
<h2>Adding DKMS kernel modules into bootstrap (Ubuntu)<a class="headerlink" href="#adding-dkms-kernel-modules-into-bootstrap-ubuntu" title="Permalink to this headline">¶</a></h2>
<p>The key strength of <a class="reference external" href="https://help.ubuntu.com//community/DKMS">Dynamic Kernel Module Support (DKMS)</a>
is the ability to rebuild the required kernel module for a different version of
kernels. But there is a drawback of installing DKMS kernel modules into
bootstrap. DKMS builds a module during installation, that queries the
installation of additional packages like <code class="docutils literal"><span class="pre">linux-headers</span></code> and a tool-chain
building. It unnecessarily oversizes the bootstrap. The DKMS package actually
should be installed into an IBP (image-based provisioning) image, which will
be deployed on nodes and be re-built during the kernel updates.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can add kernel modules on bootstrap by making the
kernel module binaries in a form of a DEB package and by installing the
package on bootstrap like other packages.</p>
</div>
<p>DKMS provides an ability to build a DEB package and a disk driver archive
on the fly from sources.</p>
<p>Ubuntu packages can be built on the Fuel Master node in <code class="docutils literal"><span class="pre">chroot</span></code> with Ubuntu
deployed in <code class="docutils literal"><span class="pre">chroot</span></code>. For details, see <a class="reference internal" href="#chroot"><em>Creating Ubuntu chroot on the Fuel Master node</em></a>.</p>
<p><strong>To create a DKMS package in the .deb format:</strong></p>
<ol class="arabic simple">
<li>Copy the required module sources to a folder with the corresponding name
located in <code class="docutils literal"><span class="pre">/usr/src</span></code> of <code class="docutils literal"><span class="pre">chroot</span></code>.</li>
<li>Create a <code class="docutils literal"><span class="pre">dkms.conf</span></code> configuration file in the <code class="docutils literal"><span class="pre">/usr/src</span></code> directory.</li>
<li>Optimize the <code class="docutils literal"><span class="pre">dkms.conf</span></code> file as described in the
<a class="reference internal" href="#dkms-example"><em>Example of an improved dkms.conf file</em></a> section.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you already have a DKMS package built with sources and want to simply
export the kernel module binaries to DEB format, install the existing
DKMS package into the <code class="docutils literal"><span class="pre">chroot</span></code> folder (and skip the
<a class="reference internal" href="#create-dkms"><em>Creating DKMS</em></a> chapter).</p>
</div>
<div class="section" id="creating-a-dkms-package-from-sources">
<span id="create-dkms"></span><h3>Creating a DKMS package from sources<a class="headerlink" href="#creating-a-dkms-package-from-sources" title="Permalink to this headline">¶</a></h3>
<p>Before creating a <code class="docutils literal"><span class="pre">DKMS</span></code> package from sources, verify that you have
completed the following steps:</p>
<ol class="arabic simple">
<li>Create the <a class="reference internal" href="#chroot"><em>chroot folder</em></a>.</li>
<li>Install the following packages to the <code class="docutils literal"><span class="pre">chroot</span></code> folder: <code class="docutils literal"><span class="pre">DKMS</span></code>,
<code class="docutils literal"><span class="pre">build-essential</span></code>, and <code class="docutils literal"><span class="pre">debhelper</span></code>.</li>
</ol>
<p>Once you complete the steps above, create a DKMS package from sources:</p>
<ol class="arabic simple">
<li>Create a folder for a required kernel module in the <em>&lt;module name&gt;-&lt;version&gt;</em>
format in the <code class="docutils literal"><span class="pre">/usr/src</span></code> directory located in <code class="docutils literal"><span class="pre">chroot</span></code>.
For example, if the module name is i40e and module version is 1.3.47,
create a <code class="docutils literal"><span class="pre">/usr/src/i40e-1.3.47</span></code> folder in <code class="docutils literal"><span class="pre">chroot</span></code>.</li>
<li>Copy the sources into the created folder.</li>
<li>Create and modify a <code class="docutils literal"><span class="pre">dkms.conf</span></code> file in the
<code class="docutils literal"><span class="pre">&lt;chroot</span> <span class="pre">folder&gt;/usr/src/&lt;module&gt;-&lt;version&gt;/</span></code> directory.</li>
</ol>
<div class="section" id="example-of-a-minimal-dkms-conf-file">
<h4>Example of a minimal dkms.conf file<a class="headerlink" href="#example-of-a-minimal-dkms-conf-file" title="Permalink to this headline">¶</a></h4>
<p>Below is an example of a minimal
<a class="reference external" href="http://linux.dell.com/dkms/dkms-for-developers.pdf">dkms.conf</a> file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">PACKAGE_NAME=&quot;$module_name-dkms&quot;</span>
<span class="go">PACKAGE_VERSION=&quot;$module_version&quot;</span>
<span class="go">BUILT_MODULE_NAME=&quot;$module_name&quot;</span>
<span class="go">DEST_MODULE_LOCATION=&quot;/updates&quot;</span>
</pre></div>
</div>
<p>The parameters in the minimal <code class="docutils literal"><span class="pre">dkms.conf</span></code> file are obligatory but not
sufficient to build a module. Therefore, proceed with adding additional
parameters to the <code class="docutils literal"><span class="pre">dkms.conf</span></code> file to make it operational. See the
<a class="reference internal" href="#dkms-example"><em>Example of an improved dkms.conf file</em></a> section for details.</p>
</div>
<div class="section" id="example-of-an-improved-dkms-conf-file">
<span id="dkms-example"></span><h4>Example of an improved dkms.conf file<a class="headerlink" href="#example-of-an-improved-dkms-conf-file" title="Permalink to this headline">¶</a></h4>
<p>To make your <code class="docutils literal"><span class="pre">dkms.conf</span></code> file operational, add and configure the following
fields: <code class="docutils literal"><span class="pre">MAKE</span></code>, <code class="docutils literal"><span class="pre">CLEAN</span></code>, and <code class="docutils literal"><span class="pre">BUILD_MODULE_LOCATION</span></code>. There are also internal
variables in DKMS that you can use in <code class="docutils literal"><span class="pre">dkms.conf</span></code>, for example,
<code class="docutils literal"><span class="pre">$kernelver</span></code>. For details, see <a class="reference external" href="http://linux.dell.com/dkms/manpage.html">DKMS Manual page</a>.</p>
<p>The table below lists the fields that we use in our example to optimize the
<code class="docutils literal"><span class="pre">dkms.conf</span></code> file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>PACKAGE_NAME</td>
<td>The DKMS package name.</td>
</tr>
<tr class="row-even"><td>PACKAGE_VERSION</td>
<td>The DKMS package version.</td>
</tr>
<tr class="row-odd"><td>BUILT_MODULE_NAME</td>
<td>The binary kernel module name to be installed.</td>
</tr>
<tr class="row-even"><td>DEST_MODULE_LOCATION</td>
<td>The install location of the binary kernel module.</td>
</tr>
<tr class="row-odd"><td>MAKE</td>
<td>The <strong class="command">make</strong> command to build the kernel
module bounded to the kernel version, sources, and
so on.</td>
</tr>
<tr class="row-even"><td>BUILD_KERNEL</td>
<td>The kernel version for which the module should be
build. Use an internal variable <code class="docutils literal"><span class="pre">$kernelver</span></code> here.</td>
</tr>
<tr class="row-odd"><td>CLEAN</td>
<td>The <code class="docutils literal"><span class="pre">clean</span></code> directive to clean up after the module
build.</td>
</tr>
<tr class="row-even"><td>BUILT_MODULE_LOCATION</td>
<td>The location of the sources in the DKMS tree.</td>
</tr>
<tr class="row-odd"><td>REMAKE_INITRD</td>
<td>Whether the <code class="docutils literal"><span class="pre">initrd</span></code> will be rebuilt or not when
the module is installed.</td>
</tr>
</tbody>
</table>
<p>For the i40e module that is used in our example, the following configuration
is applied:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">PACKAGE_NAME=&quot;i40e-dkms&quot;</span>
<span class="go">PACKAGE_VERSION=&quot;1.3.47&quot;</span>
<span class="go">BUILT_MODULE_NAME=&quot;i40e&quot;</span>
<span class="go">DEST_MODULE_LOCATION=&quot;/updates&quot;</span>
<span class="go">MAKE=&quot;make -C src/ KERNELDIR=/lib/modules/\${kernelver}/build&quot;</span>
<span class="go">BUILD_KERNEL=&quot;\${kernelver}&quot;</span>
<span class="go">CLEAN=&quot;make -C src/ clean&quot;</span>
<span class="go">BUILT_MODULE_LOCATION=&quot;src/&quot;</span>
<span class="go">REMAKE_INITRD=&quot;yes&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The path that is set in the configuration file is bound to the DKMS tree.
For example,  <code class="docutils literal"><span class="pre">DEST_MODULE_LOCATION=&quot;/updates&quot;</span></code> actually means
<code class="docutils literal"><span class="pre">/lib/modules/$kernelver/updates</span></code>.</p>
<p class="last">We recommend that you install new modules in the <code class="docutils literal"><span class="pre">/updates</span></code> directory for a
<a class="reference external" href="http://www.linuxvox.com/2009/10/update-kernel-modules-the-smart-and-safe-way">safe update</a>
of the kernel modules.</p>
</div>
</div>
<div class="section" id="exporting-dkms-package-and-kernel-binaries">
<h4>Exporting DKMS package and kernel binaries<a class="headerlink" href="#exporting-dkms-package-and-kernel-binaries" title="Permalink to this headline">¶</a></h4>
<p>When <code class="docutils literal"><span class="pre">dkms.conf</span></code> is ready, you can build the binaries in <code class="docutils literal"><span class="pre">chroot</span></code> and
export the <code class="docutils literal"><span class="pre">DKMS</span></code> package with kernel module binaries to the <code class="docutils literal"><span class="pre">.deb</span></code> format.</p>
<p>Use the DKMS commands to add and build a DKMS module for a particular kernel
version.</p>
<p>When the build is done, run the following commands to create a DEB package
and a disk-driver <code class="docutils literal"><span class="pre">.tar</span></code> archive in <code class="docutils literal"><span class="pre">chroot</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">mkdeb</span>
<span class="go">mkdriverdisk</span>
</pre></div>
</div>
<p>See details in the bash script below.</p>
<p>The script builds a DKMS package in <code class="docutils literal"><span class="pre">chroot</span></code>. The output is a disk-driver
archive containing the module binaries built against the kernel installed in
the <code class="docutils literal"><span class="pre">chroot</span></code> .</p>
<p>The second produced package is a DKMS module. The output is placed into the
<code class="docutils literal"><span class="pre">/tmp/dkms-deb</span></code> folder:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> ls /tmp/dkms-deb/
<span class="go">i40e-1.3.47-ubuntu-dd.tar  i40e-dkms_1.3.47_all.deb</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">The script requires following parameters to be provided:</span>
<span class="gp">$</span><span class="m">1</span> - <span class="sb">``</span>chroot<span class="sb">``</span> folder with Ubuntu has been deployed
<span class="gp">$</span><span class="m">2</span> - module name
<span class="gp">$</span><span class="m">3</span> - module version
<span class="gp">$</span><span class="m">4</span> - path to the folder where is sources of the kernel module
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The script unmounts the <code class="docutils literal"><span class="pre">/proc</span></code> file system from <code class="docutils literal"><span class="pre">chroot</span></code> and
finally deletes <code class="docutils literal"><span class="pre">chroot</span></code> made by the first script. Run the script with
the root privileges.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span>#!/bin/bash
# Check passed parameters, expectations are following:
# $1 - chroot folder with Ubuntu has been deployed
# $2 - module name
# $3 - module version
# $4 - path to the folder where is sources of the kernel module

if [ $# != 4 ] ;
then
  echo &quot;ERR: Passed wrong number of parameters, the expectation are following&quot;
  echo &quot; $1 - chroot folder with Ubuntu has been deployed&quot;
  echo &quot; $2 - module name&quot;
  echo &quot; $3 - module version&quot;
  echo &quot; $4 - path to the folder where is sources of the module&quot;
  echo &quot;$0 &lt;chroot_dir&gt; &lt;module-name&gt; &lt;module-version&gt; &lt;path-to-src&gt;&quot;
  exit 1;
else
   root_dir=$1 # chroot folder
   module_name=$2
   module_version=$3
   module_src_dir=$4
fi
if [ ! -d &quot;$root_dir&quot; ]  ||  [ ! -d &quot;$module_src_dir&quot; ] ;
then
    echo &quot;ERR: The $root_dir or $module_src_dir was not found&quot;;
    exit 1;
fi

output_dir=&quot;/tmp/dkms-deb&quot;

# Create the folder ${root_dir}/usr/src/${module-name}-${module-version}
mkdir -p &quot;${root_dir}/usr/src/${module_name}-${module_version}&quot;
chmod 755 &quot;${root_dir}/usr/src/${module_name}-${module_version}&quot;

# Copy sources into the folder
cp -R &quot;$module_src_dir&quot;/* \
    ${root_dir}/usr/src/${module_name}-${module_version}

# Create the dkms.conf package
cat &gt; &quot;${root_dir}/usr/src/${module_name}-${module_version}/dkms.conf&quot; &lt;&lt;-EOF
MAKE=&quot;make -C src/ KERNELDIR=/lib/modules/\${kernelver}/build&quot;
BUILD_KERNEL=&quot;\${kernelver}&quot;
CLEAN=&quot;make -C src/ clean&quot;
BUILT_MODULE_NAME=&quot;$module_name&quot;
BUILT_MODULE_LOCATION=&quot;src/&quot;
DEST_MODULE_LOCATION=&quot;/updates&quot;
PACKAGE_NAME=&quot;$module_name-dkms&quot;
PACKAGE_VERSION=&quot;$module_version&quot;
REMAKE_INITRD=&quot;yes&quot;
EOF

# Deduce the kernel version
KERNELDIR=$(ls -d ${root_dir}/lib/modules/*)
kv=&quot;${KERNELDIR##*/}&quot;

# Build the binaries by DKMS
# Add the dkms
chroot $root_dir  env \
                LC_ALL=C \
                DEBIAN_FRONTEND=noninteractive \
                DEBCONF_NONINTERACTIVE_SEEN=true \
                TMPDIR=/tmp \
                TMP=/tmp \
                PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
                BUILD_KERNEL=${kv} \
                dkms add -m &quot;${module_name}&quot;/&quot;${module_version}&quot; -k ${kv}

# Build the kernel module by dkms
chroot $root_dir  env \
                LC_ALL=C \
                DEBIAN_FRONTEND=noninteractive \
                DEBCONF_NONINTERACTIVE_SEEN=true \
                TMPDIR=/tmp \
                TMP=/tmp \
                PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
                BUILD_KERNEL=${kv} \
                dkms build -m &quot;${module_name}&quot;/&quot;${module_version}&quot; -k ${kv}

# Create the deb-dkms package
chroot $root_dir  env \
                LC_ALL=C \
                DEBIAN_FRONTEND=noninteractive \
                DEBCONF_NONINTERACTIVE_SEEN=true \
                TMPDIR=/tmp \
                TMP=/tmp \
                PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
                BUILD_KERNEL=${kernelver} \
                dkms mkdeb -m &quot;${module_name}&quot;/&quot;${module_version}&quot; -k ${kv}

# Create the disk-driver archive with
# module binaries in deb package ready to install on bootstrap
chroot $root_dir  env \
                LC_ALL=C \
                DEBIAN_FRONTEND=noninteractive \
                DEBCONF_NONINTERACTIVE_SEEN=true \
                TMPDIR=/tmp \
                TMP=/tmp \
                BUILD_KERNEL=${kv} \
                PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \
                dkms mkdriverdisk -m &quot;${module_name}&quot;/&quot;${module_version}&quot; \
                        -k ${kv} -d ubuntu --media tar

# Create /tmp/dkms-deb folder and copy the created deb file into it
if [ ! -d &quot;${output_dir}&quot; ];
   then
   mkdir -p ${output_dir}
fi
# Copy the built deb dkms package into the folder
# and driver disk tar archive.i
# The archive contains the binary module as a deb package for given kernel version
#
cp ${root_dir}/var/lib/dkms/${module_name}/${module_version}/deb/*.deb ${output_dir}
cp ${root_dir}/var/lib/dkms/${module_name}/${module_version}/driver_disk/*.tar ${output_dir}

# Don&#39;t forget to umount ${root_dir}/proc and remove ${root_dir}
umount ${root_dir}/proc
rm -Rf ${root_dir}
</pre></div>
</div>
</div>
<div class="section" id="extracting-kernel-module-binaries">
<h4>Extracting kernel module binaries<a class="headerlink" href="#extracting-kernel-module-binaries" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">/tmp/dkms-deb</span></code> folder contains a built DKMS DEB package. You can
install it into IBP. The <code class="docutils literal"><span class="pre">DEB</span></code> package with the kernel module binaries
built for a given kernel version is archived in the disk-driver archive.</p>
<p>Unpack the <code class="docutils literal"><span class="pre">.tar</span></code> file and copy the <code class="docutils literal"><span class="pre">.deb</span></code> file into the repository.
For example, if the archive is <code class="docutils literal"><span class="pre">i40e-1.3.47-ubuntu-dd.tar</span></code> and the i40e
module was built for kernel 3.13.0-77-generic, the output should be the
following:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">tar -xvf i40e-1.3.47-ubuntu-dd.tar</span>
<span class="go">./</span>
<span class="go">./ubuntu-drivers/</span>
<span class="go">./ubuntu-drivers/3.13.0/</span>
<span class="go">./ubuntu-drivers/3.13.0/i40e_1.3.47-3.13.0-77-generic_x86_64.deb</span>
<span class="go">...</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">i40e_1.3.47-3.13.0-77-generic_x86_64.deb</span></code> package contains the kernel
module binaries for kernel 3.13.0-77-generic that you install on the
bootstrap with the kernel.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Updating the new kernel for Ubuntu requires rebuilding the DKMS package
against a new kernel in order to get the module binaries package.</p>
</div>
</div>
<div class="section" id="known-issues">
<h4>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h4>
<p>Not all the kernel module sources can be compiled by DKMS.</p>
<p>DKMS builds the given drivers sources against different kernels versions.
The ABI (kernel functions) may be changed among different kernels, and
the compilation of a module can potentially fail when calling
non-existing of expired functions.</p>
<p>The example below shows an attempt to build a module taken from one kernel
version against the other kernel version:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> dkms build -m be2net/10.4u

<span class="go">Kernel preparation unnecessary for this kernel.  Skipping...</span>

<span class="go">Building module:</span>
<span class="go">make clean</span>
<span class="go">make: *** No rule to make target `clean&#39;.  Stop.</span>
<span class="go">(bad exit status: 2)</span>
<span class="go">{ make KERNELRELEASE=3.13.0-77-generic -C /lib/modules/3.13.0-77-generic/build SUBDIRS=/var/lib/dkms/be2net/10.4u/build modules; } &gt;&gt; /var/lib/dkms/be2net/10.4u/build/make.log 2&gt;&amp;1</span>
<span class="go">(bad exit status: 2)</span>
<span class="go">ERROR (dkms apport): binary package for be2net: 10.4u not found</span>
<span class="go">Error! Bad return status for module build on kernel: 3.13.0-77-generic (x86_64)</span>
<span class="go">Consult /var/lib/dkms/be2net/10.4u/build/make.log for more information.</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">make.log</span></code> file contains errors that some functions or structures
have not been declared or declared implicitly:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat /var/lib/dkms/be2net/10.4u/build/make.log
<span class="go">DKMS make.log for be2net-10.4u for kernel 3.13.0-77-generic (x86_64)</span>

<span class="go">make: Entering directory `/usr/src/linux-headers-3.13.0-77-generic&#39;</span>
<span class="go">CC [M]  /var/lib/dkms/be2net/10.4u/build/be_main.o</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_mac_addr_set’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:315:2: error: implicit declaration of function ‘ether_addr_copy’ [-Werror=implicit-function-declaration]</span>
<span class="go">ether_addr_copy(netdev-&gt;dev_addr, addr-&gt;sa_data);</span>
<span class="go">^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_get_tx_vlan_tag’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:727:2: error: implicit declaration of function ‘skb_vlan_tag_get’ [-Werror=implicit-function-declaration]</span>
<span class="go">vlan_tag = skb_vlan_tag_get(skb);</span>
<span class="go">^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_get_wrb_params_from_skb’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:789:2: error: implicit declaration of function ‘skb_vlan_tag_present’ [-Werror=implicit-function-declaration]</span>
<span class="go">if (skb_vlan_tag_present(skb)) {</span>
<span class="go">^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_insert_vlan_in_pkt’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:1001:3: error: implicit declaration of function ‘vlan_insert_tag_set_proto’ [-Werror=implicit-function-declaration]</span>
<span class="go"> skb = vlan_insert_tag_set_proto(skb, htons(ETH_P_8021Q),</span>
<span class="go"> ^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:1001:7: warning: assignment makes pointer from integer without a cast [enabled by default]</span>
<span class="go"> skb = vlan_insert_tag_set_proto(skb, htons(ETH_P_8021Q),</span>
<span class="go">     ^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:1011:7: warning: assignment makes pointer from integer without a cast [enabled by default]</span>
<span class="go"> skb = vlan_insert_tag_set_proto(skb, htons(ETH_P_8021Q),</span>
<span class="go">     ^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_xmit_workarounds’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:1132:3: error: implicit declaration of function ‘skb_put_padto’ [-Werror=implicit-function-declaration]</span>
<span class="go"> if (skb_put_padto(skb, 36))</span>
<span class="go"> ^</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c: In function ‘be_xmit’:</span>
<span class="go">/var/lib/dkms/be2net/10.4u/build/be_main.c:1299:19: error: ‘struct sk_buff’ has no member named ‘xmit_more’</span>
<span class="go">bool flush = !skb-&gt;xmit_more;</span>
</pre></div>
</div>
<p>To make the kernel module sources compatible with different kernels, the
sources should contain the wrappers, which are re-declaring changed functions
depending on the kernel version. This work should be done by driver developers.</p>
<p>The example below shows the <code class="docutils literal"><span class="pre">compat.h</span></code> file wrapper:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">/*</span>
<span class="go">* This file is part of the Linux NIC driver for Emulex networking products.</span>
<span class="go">*</span>
<span class="go">* Copyright (C) 2005-2015 Emulex. All rights reserved.</span>
<span class="go">*</span>
<span class="go">* EMULEX and SLI are trademarks of Emulex.</span>
<span class="go">* www.emulex.com</span>
<span class="go">* linux-drivers@emulex.com</span>
<span class="go">*</span>
<span class="go">* This program is free software; you can redistribute it and/or modify</span>
<span class="go">* it under the terms of version 2 of the GNU General Public License as</span>
<span class="go">* published by the Free Software Foundation.</span>
<span class="go">*</span>
<span class="go">* This program is distributed in the hope that it will be useful.</span>
<span class="go">* ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES,</span>
<span class="go">* INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A</span>
<span class="go">* PARTICULAR PURPOSE, OR NON-INFRINGEMENT, ARE DISCLAIMED, EXCEPT TO THE</span>
<span class="go">* EXTENT THAT SUCH DISCLAIMERS ARE HELD TO BE LEGALLY INVALID.</span>
<span class="go">* See the GNU General Public License for more details, a copy of which</span>
<span class="go">* can be found in the file COPYING included with this package</span>
<span class="go">*/</span>

<span class="gp">#</span>ifndef BE_COMPAT_H
<span class="gp">#</span>define BE_COMPAT_H

<span class="gp">#</span>ifdef RHEL_RELEASE_CODE
<span class="gp">#</span>define RHEL
<span class="gp">#</span>endif

<span class="gp">#</span>ifndef RHEL_RELEASE_CODE
<span class="gp">#</span>define RHEL_RELEASE_CODE <span class="m">0</span>
<span class="gp">#</span>endif

<span class="gp">#</span>ifndef RHEL_RELEASE_VERSION
<span class="gp">#</span>define RHEL_RELEASE_VERSION<span class="o">(</span>a,b<span class="o">)</span> <span class="o">(((</span>a<span class="o">)</span> &lt;&lt; <span class="m">8</span><span class="o">)</span> + <span class="o">(</span>b<span class="o">))</span>
<span class="gp">#</span>endif

<span class="gp">#</span>ifndef NETIF_F_HW_VLAN_CTAG_DEFINED
<span class="gp">#</span>define NETIF_F_HW_VLAN_CTAG_TX         NETIF_F_HW_VLAN_TX
<span class="gp">#</span>define NETIF_F_HW_VLAN_CTAG_RX         NETIF_F_HW_VLAN_RX
<span class="gp">#</span>define NETIF_F_HW_VLAN_CTAG_FILTER     NETIF_F_HW_VLAN_FILTER
<span class="gp">#</span>endif

<span class="go">/*************************** NAPI backport ********************************/</span>
<span class="gp">#</span><span class="k">if</span> LINUX_VERSION_CODE &lt; KERNEL_VERSION<span class="o">(</span><span class="m">2</span>, <span class="m">6</span>, <span class="m">27</span><span class="o">)</span>

<span class="go">/* RHEL 5.4+ has a half baked napi_struct implementation.</span>
<span class="go">* Bypass it and use simulated NAPI using multiple netdev structs</span>
<span class="go">*/</span>
<span class="gp">#</span>ifdef RHEL
<span class="go">typedef struct napi_struct        rhel_napi;</span>
<span class="gp">#</span>endif

<span class="gp">#</span>define netif_napi_add           netif_napi_add_compat
<span class="gp">#</span>define netif_napi_del           netif_napi_del_compat
<span class="gp">#</span>define napi_gro_frags<span class="o">(</span>napi<span class="o">)</span>     napi_gro_frags<span class="o">((</span>rhel_napi*<span class="o">)</span> napi<span class="o">)</span>
<span class="gp">#</span>define napi_get_frags<span class="o">(</span>napi<span class="o">)</span>     napi_get_frags<span class="o">((</span>rhel_napi*<span class="o">)</span> napi<span class="o">)</span>
<span class="gp">#</span>define vlan_gro_frags<span class="o">(</span>napi, g, v<span class="o">)</span>    vlan_gro_frags<span class="o">((</span>rhel_napi*<span class="o">)</span> napi, g, v<span class="o">)</span><span class="p">;</span>
<span class="gp">#</span>define napi_schedule<span class="o">(</span>napi<span class="o">)</span>      netif_rx_schedule<span class="o">((</span>napi<span class="o">)</span>-&gt;dev<span class="o">)</span>
<span class="gp">#</span>define napi_enable<span class="o">(</span>napi<span class="o">)</span>        netif_poll_enable<span class="o">((</span>napi<span class="o">)</span>-&gt;dev<span class="o">)</span>
<span class="gp">#</span>define napi_disable<span class="o">(</span>napi<span class="o">)</span>       netif_poll_disable<span class="o">((</span>napi<span class="o">)</span>-&gt;dev<span class="o">)</span>
<span class="gp">#</span>define napi_complete<span class="o">(</span>napi<span class="o">)</span>      napi_gro_flush<span class="o">((</span>rhel_napi *<span class="o">)</span>napi<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
                  netif_rx_complete<span class="o">(</span>napi-&gt;dev<span class="o">)</span>
<span class="gp">#</span>define napi_schedule_prep<span class="o">(</span>napi<span class="o">)</span>    netif_rx_schedule_prep<span class="o">((</span>napi<span class="o">)</span>-&gt;dev<span class="o">)</span>
<span class="gp">#</span>define __napi_schedule<span class="o">(</span>napi<span class="o">)</span>        __netif_rx_schedule<span class="o">((</span>napi<span class="o">)</span>-&gt;dev<span class="o">)</span>

<span class="gp">#</span>define napi_struct           napi_struct_compat

<span class="go">struct napi_struct_compat {</span>
<span class="gp">#</span>ifdef RHEL
<span class="go">   rhel_napi napi;    /* must be the first member */</span>
<span class="gp">#</span>endif
<span class="go">   struct net_device *dev;</span>
<span class="go">   int (*poll) (struct napi_struct *napi, int budget);</span>
<span class="go">};</span>

<span class="go">extern void netif_napi_del_compat(struct napi_struct *napi);</span>
<span class="go">extern void netif_napi_add_compat(struct net_device *, struct napi_struct *,</span>
<span class="go">              int (*poll) (struct napi_struct *, int), int);</span>
<span class="gp">#</span>endif /*********************** NAPI backport *****************************/
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="centos-bootstrap">
<h2>CentOS bootstrap<a class="headerlink" href="#centos-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>This section describes creating a custom CentOS bootstrap image.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the Fuel 8.0 version, CentOS bootstrap is depricated and not
recommended for using.</p>
</div>
<div class="section" id="creating-and-injecting-the-initrd-update-into-bootstrap">
<h3>Creating and injecting the initrd_update into bootstrap<a class="headerlink" href="#creating-and-injecting-the-initrd-update-into-bootstrap" title="Permalink to this headline">¶</a></h3>
<p>A typical use case for creating initrd_update looks as follows:
a great number of proprietary drivers for equipment cannot be
shipped with GA Fuel ISO due to legal issues
and should be installed by users themselves.</p>
<p>That means, you can add (or inject) the required issues (drivers,
scripts etc.) during Fuel ISO
installation procedure.</p>
<p>Injection workflow consists of several stages:</p>
<ol class="arabic simple">
<li>Prepare the injected initramfs image with the required kernel modules (for CentOS).</li>
<li>Modify bootstrap (CentOS)</li>
</ol>
<p><strong>Prepare injected initramfs image for CentOS</strong></p>
<p>The injected initramfs image should contain
the files what are going to be put on (or let&#8217;s say injected into)
the original initramfs on the bootstrap in addition to
the deployed (original) RAM file system.</p>
<p>The injected initramfs image should have the following structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>/
/lib/modules/&lt;kernel-version&gt;/kernel/&lt;path-to-the-driver&gt;/&lt;module.ko&gt;
/etc/modprobe.d/&lt;module&gt;.conf
</pre></div>
</div>
<p>Let&#8217;s put all required files into the folder called <em>dd-src</em> and create the image.
For example, we need the 2.6.32-504 (CentOs 6.6) kernel:</p>
<ol class="arabic">
<li><p class="first">Create the working folder dd-src:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir dd-src
</pre></div>
</div>
</li>
<li><p class="first">Put the kernel modules into:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir -p ./dd-src/lib/modules/2.6.32-504.1.3.el6.x86_64/kernel/drivers/scsi
cp hpvsa.ko ./dd-src/lib/modules/2.6.32-504.1.3.el6.x86_64/kernel/drivers/scsi
</pre></div>
</div>
</li>
<li><p class="first">Put the <em>&lt;module-name&gt;.conf</em> file with the modprobe command into
the <em>etc/modprobe.d/</em> folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir -p ./dd-src/etc/modprobe.d/
echo modprobe hpvsa &gt; ./dd-src/etc/modprobe.d/hpvsa.conf
chmod +x ./dd-src/etc/modprobe.d/hpvsa.conf
</pre></div>
</div>
<p>There is the second (deprecated) way:
create the <em>/etc/rc.modules</em> executable file and list the command to probe with the module name.
Do not use <em>/etc/rc.local</em> file for this purpose,
because it is too late for init hardware:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir ./dd-src/etc
echo modprobe hpvsa &gt; ./dd-src/etc/rc.modules
chmod +x ./dd-src/etc/rc.modules
</pre></div>
</div>
</li>
<li><p class="first">Create the dd-src.tar.gz file for coping to the Fuel Master node:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>tar -czvf dd-src.tar.gz ./dd-src
</pre></div>
</div>
<p>The <em>dd-src.tar.gz</em> file can now be copied to the Fuel Master node.</p>
</li>
</ol>
<p><strong>Adding initrd_update image to the bootstrap</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, the bootstrap is based on CentOS (kernel and modules).</p>
</div>
<p>Assume that the Fuel Master node has been deployed:</p>
<ol class="arabic">
<li><p class="first">Connect to the Fuel Master node:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ssh root@&lt;your-Fuel-Master-node-IP&gt;
</pre></div>
</div>
</li>
<li><p class="first">Prepare initramfs update image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>tar -xzvf dd-src.tar.gz
cd dd-src
find . | cpio --quiet -o -H newc | gzip -9 &gt; /tmp/initrd_update.img
</pre></div>
</div>
</li>
<li><p class="first">Copy into the TFTP (PXE) bootstrap folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cp /tmp/initrd_update.img /var/www/nailgun/bootstrap/
chmod 755 /var/www/nailgun/bootstrap/initrd_update.img
</pre></div>
</div>
</li>
<li><p class="first">Copy inside the cobbler container to the folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>dockerctl copy initrd_update.img cobbler:/var/lib/tftpboot/initrd_update.img
</pre></div>
</div>
</li>
<li><p class="first">Modify the bootstrap menu initrd parameter.</p>
<ul>
<li><p class="first">Log into the cobbler container:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>dockerctl shell cobbler
</pre></div>
</div>
</li>
<li><p class="first">Get the variable kopts variable value:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span>cobbler profile dumpvars --name=bootstrap | grep kernel_options
kernel_options : ksdevice=bootif locale=en_US text mco_user=mcollective initrd=initrd_update.img biosdevname=0 lang url=http://10.20.0.2:8000/api priority=critical mco_pass=HfQqE2Td kssendmac
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Add <em>initrd=initrd_update.img</em> at the beginning of the string
and re-sync the container. It turns into the kernel
parameter passing to the kernel on boot
&#8216;initrd=initramfs.img,initrd_update.img&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cobbler profile edit --name bootstrap --kopts=&#39;initrd=initrd_update.img ksdevice=bootif lang=  locale=en_US text mco_user=mcollective priority=critical url=http://10.20.0.2:8000/api biosdevname=0 mco_pass=HfQqE2Td kssendmac&#39;
cobbler sync
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="modifying-initramfs-image-manually-for-bootstrap-node">
<h3>Modifying initramfs image manually for bootstrap node<a class="headerlink" href="#modifying-initramfs-image-manually-for-bootstrap-node" title="Permalink to this headline">¶</a></h3>
<p>To edit the initramfs (initrd) image,
you should unpack it, modify and pack back.
Initramfs image is a gzip-ed cpio archive.</p>
<p>To change initramfs image, follow these steps:</p>
<ol class="arabic">
<li><p class="first">Create a folder for modifying initramfs image and copy the initramfs image into it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir /tmp/initrd-orig
dockerctl copy cobbler:/var/lib/tftpboot/images/bootstrap/initramfs.img /tmp/initrd-orig/
</pre></div>
</div>
</li>
<li><p class="first">Unpack initramfs image. First of all, unzip it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /tmp/initrd-orig/
mv initramfs.img initramfs.img.gz
gunzip initramfs.img.gz
</pre></div>
</div>
</li>
<li><p class="first">Unpack the cpio archive to the initramfs folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>mkdir initramfs
cd initramfs
cpio -i &lt; ../initramfs.img
</pre></div>
</div>
</li>
<li><p class="first">Now you have the file system what you have in the RAM on the bootstrap:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">initrd</span><span class="o">-</span><span class="n">orig</span><span class="o">/</span><span class="n">initramfs</span>
</pre></div>
</div>
</li>
<li><p class="first">Modify it as you need. For example, copy files or modify the scripts:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>  cp hpvsa.ko lib/modules/2.6.32-504.1.3.el6.x86_64/kernel/drivers/scsi/
  echo &quot;modprobe hpvsa&quot; &gt; etc/modprobe.d/hpvsa.conf


To get more information on how to pass options to
the module, start dependent modules or black-list modules please,
consult see the *modprobe.d* man page.

::

    vi etc/modprobe.d/blacklist.conf
</pre></div>
</div>
</li>
<li><p class="first">Pack the initramfs back to <strong>initramfs.img.new</strong> image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /tmp/initrd-orig/initramfs
find . | cpio --quiet -o -H newc | gzip -9 &gt; /tmp/initramfs.img.new
</pre></div>
</div>
</li>
<li><p class="first">Clean up. Remove <em>/tmp/initrd-orig</em> temporary folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>rm -Rf /tmp/initrd-orig/
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id1">
<h3>Creating a custom bootstrap node<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>This option requires further investigation
and will be introduced in the near future.</p>
<p><strong>Replacing default bootstrap node with the custom one</strong></p>
<p>Let&#8217;s suppose that you have created or modified
the initramfs image. It is placed in the <em>/tmp</em> folder under <strong>initramfs.img.new</strong> name.</p>
<p>To replace the default bootstrap with the custom,
follow these steps:</p>
<ol class="arabic">
<li><p class="first">Save the previous initramfs image:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">mv</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">nailgun</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">/</span><span class="n">initramfs</span><span class="o">.</span><span class="n">img</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">nailgun</span><span class="o">/</span><span class="n">bootstrap</span><span class="o">/</span><span class="n">initramfs</span><span class="o">.</span><span class="n">img</span><span class="o">.</span><span class="n">old</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy the new initramfs image into the bootstrap folder:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cd /tmp
cp initramfs.img.new /var/www/nailgun/bootstrap/initramfs.img
dockerctl copy /var/www/nailgun/bootstrap/initramfs.img cobbler:/var/lib/tftpboot/images/bootstrap/initramfs.img
</pre></div>
</div>
</li>
<li><p class="first">Make the Cobbler update the files:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cobbler sync
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="ostf_contributors_guide.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Health Check (OSTF) Contributor&#8217;s Guide"></i></a>
          
          
            <a href="modular-architecture.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Modular Architecture"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017/02/03</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
    <div class="docs-sidebar-release-select"></div>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../../userdocs/fuel-install-guide.html">Fuel Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/intro_fuel_install_intro.html">Introduction to Fuel Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/intro/intro_fuel_intro.html">Introduction to Fuel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/intro/intro_install_overview.html">Overview of the installation process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/intro/intro_planning_your_environment.html">Planning your environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq_intro.html">System requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_hw_intro.html">Hardware requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_fuel_master_node_hw_requirements.html">Fuel Master node hardware requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_fuel_slave_node_hw_recs.html">Fuel Slave nodes hardware recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_network_requirements.html">Network requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_fuel_master_node_network_reqs.html">Fuel Master Node network requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_storage_reqs.html">Storage requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_additional_components.html">Additional components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_ironic_prereq.html">Prerequisites for the OpenStack bare-metal service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_ironic_limitations.html">Bare Metal service limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_sample_configuration.html">Sample hardware configuration for Fuel Slave nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_sample_configuration.html#controller-nodes">Controller nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_sample_configuration.html#compute-nodes">Compute nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/sysreq/sysreq_sample_configuration.html#storage-nodes">Storage nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/install_install_fuel.html">Install Fuel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_before_you_install_fuel.html">Before you install Fuel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_download_iso.html">Download the ISO image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_prepare_install_media.html">Prepare an installation media</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_prepare_install_media.html#create-a-dvd-drive">Create a DVD drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_prepare_install_media.html#create-a-usb-drive-with-the-fuel-iso-on-a-unix-system">Create a USB drive with the Fuel ISO on a UNIX system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_install_fuel_master_node.html">Install the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_set_up_fuel.html">Set up Fuel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_change_network_interface.html">Change the Admin (PXE) network interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_change_network_interface.html#configure-a-network-interface-for-the-fuel-web-ui">Configure a network interface for the Fuel web UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_login_fuel_master_node.html">Log in to the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_login_fuel_master_node_multiple_nics.html">Log in to the Fuel Master node with multiple NICs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_boot_slave_nodes.html">Boot the Fuel Slave nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/install/install_boot_slave_nodes.html#boot-workflow-of-a-fuel-slave-node">Boot workflow of a Fuel Slave node</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap_intro.html">Configure a bootstrap image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_builder.html">Overview of the Fuel bootstrap builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_container.html">The fuel-bootstrap container format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_view.html">View available bootstraps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_select.html">Select a bootstrap image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_add_package.html">Build a bootstrap image with an additional package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_install_kernel.html">Install a custom kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_install_kernel.html#install-the-latest-kernel">Install the latest kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_install_kernel.html#install-an-old-kernel">Install an old kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_inject_cert.html">Inject custom SSL certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_inject_driver.html">Inject a driver from .deb packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_debug.html">Enable advanced debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/bootstrap/bootstrap_troubleshoot.html">Troubleshoot custom bootstrap building</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/local-repo.html">Set up a local repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/local-repo.html#about-the-fuel-mirror-script">About the fuel-mirror script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins_intro.html">Fuel Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins/plugins_overview.html">Fuel plugins overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins/plugins_prerequisites.html">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins/plugins_install_plugins.html">Install a Fuel plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins/plugins_view_plugins.html">View Fuel plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/plugins/plugins_uninstall_upgrade.html">Uninstall a plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere_intro.html">Install Fuel on VMware vSphere</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_prereq.html">VMware vSphere prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_configure_esxi_networking.html">Configure ESXi host networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_upload_iso.html">Upload the Fuel ISO to the VMware vSphere datastore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_configure_network.html">Configure networks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_configure_network.html#configure-a-network-for-fuel-admin-pxe-traffic">Configure a network for Fuel Admin (PXE) traffic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_configure_network.html#create-a-vcenter-port-group-network">Create a vCenter Port Group network</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_create_vm.html">Create the Fuel Master node virtual machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_mount_iso.html">Mount the Fuel ISO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_install_master.html">Install the Fuel Master node on VMware vSphere</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_boot_master.html">Boot the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/vsphere/vsphere_verify_master.html">Verify the Fuel Master node operation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/update-fuel.html">Update Fuel to latest Mitaka</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/upgrade_intro.html">Upgrade Fuel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/upgrade/upgrade-internals.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/upgrade/upgrade-liberty.html">Upgrade Fuel Liberty to Mitaka</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-install-guide/preinstall_intro.html">Pre-installation checklists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-install-guide/preinstall/preinstall_hardware_checklist.html">Hardware checklist</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../userdocs/fuel-user-guide.html">Fuel User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/introduction.html">Introduction to the User Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/create-environment.html">Create a new OpenStack environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/create-environment/prerequisites-limitations.html">Prerequisites and limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/create-environment/start-create-env.html">Create an OpenStack environment in the deployment wizard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/create-environment/change-password.html">Change the Fuel Master node administrative password</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment.html">Configure your environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/add-nodes.html">Add a node to an OpenStack environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/add-label.html">Label an OpenStack node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/change-roles.html">Change the role of a node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/decompose-services.html">Decompose the controller node services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/change-hostname-slave-nodes.html">Modify the Fuel Slave node host name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/select-bootable-device.html">Select a bootable device for a node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-settings.html">Configure network settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/nic-bonding-ui.html">Configure network bonding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/selectable-offload.html">Edit the offloading mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/map-logical-to-physical-nic.html">Map a logical network to a physical interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/verify-networks.html">Verify network configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates.html">Deploy network configurations using network templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-overview.html">Overview of network templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-limitations.html">Network template limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-structure.html">Structure of network templates</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-structure/network_scheme.html">network_scheme</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-structure/nic_mapping.html">nic_mapping</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-structure/templates_for_node_role.html">templates_for_node_role</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-structure/network_assignment.html">network_assignment</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-create.html">Create a network template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-delete.html">Delete a network template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/network-templates-examples.html">Network template examples</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/examples/one-network.html">Configure a single network topology</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/network-templates/examples/two-networks.html">Configure the two-network topology</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/customize-partitions.html">Configure disk partitioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/config-drive-format.html">Change the configuration drive format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/settings.html">Configure the OpenStack environment settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/dns-ntp-support.html">Change the DNS and NTP server settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/configure-multipath.html">Configure an OpenStack environment on nodes with multipath block devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/nfv.html">Configure workload acceleration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/nfv/nfv-configure.html">Configure SR-IOV and DPDK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/nfv/nfv-configure-sriov-nic.html">Configure SR-IOV network interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/nfv/nfv-configure-dpdk-nic.html">Configure DPDK network interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows.html">Modify the deployment workflow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-overview.html">Overview of the deployment workflows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-precedence.html">Deployment workflows order of precedence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create.html">Create a custom deployment workflow</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/structure.html">Workflow task structure</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/examples.html">Examples</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/examples/workflows-add-task.html">Add a task</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/examples/workflows-skip-task.html">Skip a deployment task</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/examples/workflows-create-role.html">Creating a separate role with a task</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-create/examples/workflows-swap-task.html">Replace a task</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/workflows/workflows-data-driven.html">Run data-driven tasks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/enable-usb-discovery.html">Enable USB devices discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-environment/configure-vmware-vcenter-settings.html">Configure VMware vCenter settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/install-additional-components.html">Install additional components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/install-additional-components/ironic-install.html">Install the OpenStack Bare Metal service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/install-additional-components/sahara-install.html">Install the Hadoop cluster service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/deploy-environment.html">Deploy an OpenStack environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/deploy-environment/provision-environment.html">Provision an OpenStack environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/deploy-environment/deploy-changes.html">Deploy changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/deploy-environment/stop-deploy-ui.html">Stop and resume the OpenStack environment deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/deploy-environment/reset-environment.html">Reset an OpenStack environment after deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf.html">Modify an OpenStack environment after deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/modify-os-env-settings.html">Modify the OpenStack environment settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo.html">Modify configurations from a Git repository</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/lcm-prerequisites.html">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/configure-iac.html">Configure the Fuel IaC extenstion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/repo-structure.html">Git repository structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/set-up-git-repo.html">Set up a Git repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/audit-enforce-changes.html">Verify and enforce the changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/post-deployment-conf/lcm-git-repo/filter-results.html">Exclude tasks from an audit</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/next-steps.html">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-additional-components.html">Configure additional components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-additional-components/ironic_configure.html">Configure the Bare Metal service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-additional-components/ironic_prepare_image.html">Prepare a physical machine image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/configure-additional-components/sahara_configure.html">Configure the Hadoop cluster service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment.html">Verify your OpenStack environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/intro-health-checks.html">Health checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/run-health-checks.html">Run a health check</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/troubleshoot-health-checks.html">Resolve a problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/murano-test-prepare.html">Preparing the OpenStack Application Catalog for testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/murano-test-details.html">Murano platform test details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/sahara-test-prepare.html">Preparing the Hadoop cluster service for testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/sahara-test-details.html">About the Hadoop cluster service test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/verify-environment/heat-test-details.html">Overview of the OpenStack Orchestration service platform tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment.html">Manage your OpenStack environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/cgroups.html">Manage control groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/cgroups/cgroups-configure.html">Configure control groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/cgroups/cgroups-modify-multiple-nodes.html">Modify control groups for multiple nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/cgroups/cgroups-modify-single-node.html">Modify control groups for a single node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/cgroups/cgroups-example.html">Example of the control groups configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/role-operations.html">Role object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run.html">Run an instance with workload acceleration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run/nfv-create-flavor.html">Create a workload-accelerated instance flavor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run/nfv-create-sriov-port.html">Create a network port for SR-IOV</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run/nfv-launch-vm.html">Launch a virtual machine with workload acceleration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run/nfv-associate-floating-ip.html">Allocate a floating IP address to a virtual machine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/nfv-run/nfv-verify.html">Verify a virtual instance with accelerated workloads</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/manage-environment/enable-experimental-features.html">Enable experimental features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment.html">Maintain your OpenStack environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/backup-fuel.html">Back up the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/restore-fuel.html">Restore the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/remove-node.html">Remove a node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/redeploy-node.html">Redeploy a node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/access-shell.html">Access shell on nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/rollback-ug.html">Rollback a node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/rollback-compute-node.html">Rollback a compute node</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/reinstall-node.html">Reinstall a node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/create-snapshot.html">Create a diagnostic snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage.html">Manage workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/view-workflows.html">View an environment deployment workflows details</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/upload-workflows.html">Upload a deployment workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/download-workflows.html">Download a deployment workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/run-workflows.html">Run a deployment workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/delete-workflows.html">Delete a deployment workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/view-history.html">View the deployment history</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/workflows-manage/download-deployment-info.html">Download deployment information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/shutdown-env.html">Shut down an OpenStack environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/maintain-environment/start-env.html">Start an OpenStack environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/plugins/hot-plugable.html">Installing and Managing Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/plugins/plugins_install_userguide.html">Install a Fuel plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/plugins/plugins_update_userguide.html">Update a Fuel plugin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref.html">Fuel configuration files reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-master.html">astute.yaml (Fuel Master node)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-master.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-master.html#file-format">File Format</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html">astute.yaml (Fuel Slave nodes)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#file-format">File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#basic-networking-configuration">Basic networking configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#nova-configuration">Nova configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#swift-configuration">Swift configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#mp-configuration">mp configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#glance-configuration">Glance configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#mellanox-configuration">Mellanox configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#ntp-configuration">NTP configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#zabbix-configuration">Zabbix configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#definition-of-puppet-tasks">Definition of puppet tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#ceilometer-configuration">Ceilometer configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#public-networking-configuration">Public networking configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#heat-configuration">Heat configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#fuel-version">Fuel version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#nsx-configuration">NSX configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#controller-nodes-configuration">Controller nodes configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#mongodb-nodes-configuration">MongoDB nodes configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#sahara-configuration">Sahara configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#provisioning-configuration">Provisioning configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#storage-configuration">Storage configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#keystone-configuration">Keystone configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#cinder-configuration">Cinder configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#corosync-configuration">Corosync configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#miscellaneous-configs-to-look-at-later">Miscellaneous configs to look at later</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#syslog-configuration">Syslog configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#external-mongodb-configuration">External MongoDB configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#murano-configuration">Murano configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#more-miscellaneous-configs">More miscellaneous configs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#vcenter-configuration">vCenter configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/astute-yaml-target.html#id1">Syslog configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/engine-yaml.html">engine.yaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/engine-yaml.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/engine-yaml.html#description">Description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/network-1-yaml.html">network_1.yaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/network-1-yaml.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/network-1-yaml.html#file-format">File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/network-1-yaml.html#global-settings">Global settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/network-1-yaml.html#networks">Networks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/openstack-yaml.html">openstack.yaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/openstack-yaml.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/openstack-yaml.html#file-format">File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/openstack-yaml.html#roles">Roles</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/settings-yaml.html">settings.yaml</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/settings-yaml.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/fuel-user-guide/file-ref/settings-yaml.html#file-format">File Format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli.html">Use the Fuel CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_comparison_matrix.html">Fuel CLI commands comparison matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_acronyms.html">Interpretation of acronyms in Fuel commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_basic_usage.html">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_client_config_file.html">Modify the Fuel CLI configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_management.html">Fuel management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_environment.html">Environment commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_provision.html">Provisioning commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_deploy.html">Deployment commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_network.html">Network commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_network_group.html">Network group management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_network_template.html">Network template management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_vip.html">Virtual IP management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_nodes.html">Node management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_node_group.html">Node group management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_roles.html">Role management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_nodes_empty_role.html">Deploy a node with an empty role</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_plugins.html">Plugin management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_workflows.html">Deployment workflows management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_config_openstack.html">Modify the configuration of the OpenStack services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_config_openstack_services_workflow.html">Workflow of the configuration change override</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_change_ip_range.html">Add network ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_modify_environment.html">Modify an Openstack environment using CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_noop.html">Detect custom configurations in an OpenStack environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_manage_gitrepo.html">Fuel IaC: Git repository management commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/cli/cli_audit_enforce.html">Fuel IaC: Audit commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting/service-status.html">Verify an OpenStack service status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting/restart-service.html">Restart an OpenStack service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting/logging.html">OpenStack services logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting/debug-mode.html">Enable debug mode for an OpenStack service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/fuel-user-guide/troubleshooting/network.html">Troubleshoot network</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../userdocs/release-notes.html">Fuel Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/release-notes/new-features.html">New features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/master-backup-restore.html">Fuel Master node backup and restore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-web-ui.html">Fuel web UI features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-web-ui.html#custom-deployment-workflows-management">Custom deployment workflows management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-web-ui.html#deployment-details-overview">Deployment details overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-cli.html">Fuel CLI versions consolidation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-plugins.html">Fuel plugins features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-plugins.html#consumption-of-fuel-plugins-from-a-public-yum-repository">Consumption of Fuel plugins from a public YUM repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-plugins.html#deployment-of-plugins-updates-on-a-running-environment">Deployment of plugins updates on a running environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../userdocs/release-notes/new-features/fuel-plugins.html#definition-of-fuel-release-through-the-plugin-framework">Definition of Fuel release through the plugin framework</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/task-graphs.html">Data-driven workflows for basic environment actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/vmware-certificate.html">Verification of the VMware vCenter server certificate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/brute-force.html">SSH brute force protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/snapshots-timmy.html">Creation of targeted diagnostic snapshots with Timmy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/s3-api.html">S3 API authentication through Keystone</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/dmz.html">Basic DMZ enablement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../userdocs/release-notes/new-features/user-documentation.html">User documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/release-notes/fuel-resolved-issues.html">Resolved issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/release-notes/fuel-known-issues.html">Known issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userdocs/release-notes/obtain-product.html">How to obtain Fuel</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../develop.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Fuel Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="sequence.html">Sequence Diagrams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sequence.html#os-provisioning">OS Provisioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="sequence.html#networks-verification">Networks Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="sequence.html#details-on-cluster-provisioning-deployment-via-facter-extension">Details on Cluster Provisioning &amp; Deployment (via Facter extension)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="quick_start.html">Fuel Development Quick-Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="addition_examples.html">Fuel Development Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#adding-zabbix-role">Adding Zabbix Role</a></li>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#additions-to-fuel-web-for-zabbix-role">Additions to Fuel-Web for Zabbix role</a></li>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#additions-to-fuel-library-for-zabbix-role">Additions to Fuel-Library for Zabbix role</a></li>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#adding-hardware-support">Adding Hardware Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#adding-a-hardware-driver-to-bootstrap">Adding a hardware driver to bootstrap</a></li>
<li class="toctree-l3"><a class="reference internal" href="addition_examples.html#adding-to-fuel-package-repositories">Adding to Fuel package repositories</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="env.html">Fuel Development Environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="env.html#getting-the-source-code">Getting the Source Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#building-the-fuel-iso">Building the Fuel ISO</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#nailgun-fuel-web">Nailgun (Fuel-Web)</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#astute">Astute</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#running-fuel-puppet-modules-unit-tests">Running Fuel Puppet Modules Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#installing-cobbler">Installing Cobbler</a></li>
<li class="toctree-l3"><a class="reference internal" href="env.html#building-documentation">Building Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="system_tests/tree.html">System Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="live_masternode.html">Fuel Development Environment on Live Master Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="nailgun.html">Nailgun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="nailgun/tree.html">Nailgun Development Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/env.html">Setting up Environment</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#preparing-development-environment">Preparing Development Environment</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#setup-for-nailgun-unit-tests">Setup for Nailgun Unit Tests</a><ul>
<li class="toctree-l6"><a class="reference internal" href="nailgun/development/env.html#running-nailgun-performance-tests">Running Nailgun Performance Tests</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#running-parallel-tests-with-py-test">Running parallel tests with py.test</a><ul>
<li class="toctree-l6"><a class="reference internal" href="nailgun/development/env.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#running-nailgun-in-fake-mode">Running Nailgun in Fake Mode</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#running-the-fuel-system-tests">Running the Fuel System Tests</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/env.html#flushing-database-before-after-running-tests">Flushing database before/after running tests</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/i18n.html">Fuel UI Internationalization Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/i18n.html#validating-translations">Validating translations</a></li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/db_migrations.html">Nailgun database migrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/shell_doc.html">Interacting with Nailgun using Shell</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/shell_doc.html#launching-shell">Launching shell</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/shell_doc.html#interaction">Interaction</a><ul>
<li class="toctree-l6"><a class="reference internal" href="nailgun/development/shell_doc.html#objects-approach">Objects approach</a></li>
<li class="toctree-l6"><a class="reference internal" href="nailgun/development/shell_doc.html#sqlalchemy-approach">SQLAlchemy approach</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/development/shell_doc.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/ui_dependencies.html">Managing UI Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/development/code_testing.html">Code testing policy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nailgun/tree.html#nailgun-customization-instructions">Nailgun Customization Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/partitions.html">Creating Partitions on Nodes</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#adding-an-lv-to-an-existing-volume-group">Adding an LV to an Existing Volume Group</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#adding-generators-to-nailgun-volumemanager">Adding Generators to Nailgun VolumeManager</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#creating-a-new-volume-group">Creating a New Volume Group</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#creating-a-new-plain-partition">Creating a New Plain Partition</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#updating-the-node-role-to-volumes-mapping">Updating the Node Role to Volumes Mapping</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/partitions.html#setting-volume-parameters-from-nailgun-settings">Setting Volume Parameters from Nailgun Settings</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/reliability.html">Reliability</a></li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/roles.html">Creating roles</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/roles.html#roles-restrictions">Roles restrictions</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/settings.html">Extending OpenStack Settings</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/settings.html#restrictions">Restrictions</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/settings.html#expression-syntax">Expression Syntax</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html">Bonding in UI/Nailgun</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#abstract">Abstract</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#design-docs">Design docs</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#fuel-support">Fuel Support</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#deployment-serialization">Deployment serialization</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#rest-api">REST API</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/bonding_in_ui.html#nailgun-db">Nailgun DB</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="nailgun/customization/extensions.html">Nailgun Extensions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#overview-of-extensions">Overview of extensions</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#required-properties">Required properties</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#available-events">Available events</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#rest-api-handlers">REST API handlers</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#database-interaction">Database interaction</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#extension-data-pipelines">Extension Data Pipelines</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#how-to-install-and-plug-in-extensions">How to install and plug in extensions</a></li>
<li class="toctree-l5"><a class="reference internal" href="nailgun/customization/extensions.html#example-extension-with-pipeline-additional-logging">Example Extension with Pipeline - additional logging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="module_structure.html">Contributing to Fuel Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="module_structure.html#adding-new-modules-to-fuel-library">Adding new modules to fuel-library</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_structure.html#contributing-to-existing-fuel-library-modules">Contributing to existing fuel-library modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_structure.html#the-puppet-modules-structure">The Puppet modules structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_structure.html#adding-python-code-to-fuel-library">Adding Python code to fuel-library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="fuel_settings.html">Using Fuel settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="fuel_settings.html#example-module">Example module</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet_tips.html">Resource duplication and file conflicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet_tips.html#puppet-module-containment">Puppet module containment</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet_tips.html#puppet-scope-and-variables">Puppet scope and variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="puppet_tips.html#where-to-find-more-information">Where to find more information</a></li>
<li class="toctree-l2"><a class="reference internal" href="pxe_deployment.html">Fuel Master Node Deployment over PXE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#tech-explanation-of-the-process">Tech Explanation of the process</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#installing-packages">Installing packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#setting-up-dhcp-server">Setting up DHCP server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pxe_deployment.html#standalone-isc-dhcpd">Standalone ISC DHCPD</a></li>
<li class="toctree-l4"><a class="reference internal" href="pxe_deployment.html#libvirt-with-dnsmasq">Libvirt with dnsmasq</a></li>
<li class="toctree-l4"><a class="reference internal" href="pxe_deployment.html#dnsmasq-without-libvirt">Dnsmasq without libvirt</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#setting-our-tftp-server">Setting our TFTP server</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#setting-up-nfs-server">Setting up NFS server</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#set-up-tftp-root">Set up tftp root</a></li>
<li class="toctree-l3"><a class="reference internal" href="pxe_deployment.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ostf_contributors_guide.html">Health Check (OSTF) Contributor&#8217;s Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#health-check-or-ostf">Health Check or OSTF?</a></li>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#main-goal-of-ostf">Main goal of OSTF</a></li>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#main-rules-of-code-contributions">Main rules of code contributions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#how-to-setup-my-environment">How to setup my environment?</a></li>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#how-should-my-modules-look-like">How should my modules look like?</a></li>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#test-run-ordering-and-profiles">Test run ordering and profiles</a></li>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#how-to-execute-my-tests">How to execute my tests?</a></li>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#now-i-m-done-what-s-next">Now I&#8217;m done, what&#8217;s next?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#general-ostf-architecture">General OSTF architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#ostf-rest-api-interface">OSTF REST api interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#ostf-package-architecture">OSTF package architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="ostf_contributors_guide.html#ostf-adapter-architecture">OSTF Adapter architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ostf_contributors_guide.html#appendix-1">Appendix 1</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Bootstrap node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu-bootstrap">Ubuntu bootstrap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-custom-bootstrap-node">Creating a custom bootstrap node</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modifying-initramfs-image-manually-for-the-bootstrap-node">Modifying initramfs image manually for the bootstrap node</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-ubuntu-chroot-on-the-fuel-master-node">Creating Ubuntu chroot on the Fuel Master node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-dkms-kernel-modules-into-bootstrap-ubuntu">Adding DKMS kernel modules into bootstrap (Ubuntu)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-dkms-package-from-sources">Creating a DKMS package from sources</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#example-of-a-minimal-dkms-conf-file">Example of a minimal dkms.conf file</a></li>
<li class="toctree-l5"><a class="reference internal" href="#example-of-an-improved-dkms-conf-file">Example of an improved dkms.conf file</a></li>
<li class="toctree-l5"><a class="reference internal" href="#exporting-dkms-package-and-kernel-binaries">Exporting DKMS package and kernel binaries</a></li>
<li class="toctree-l5"><a class="reference internal" href="#extracting-kernel-module-binaries">Extracting kernel module binaries</a></li>
<li class="toctree-l5"><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#centos-bootstrap">CentOS bootstrap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-and-injecting-the-initrd-update-into-bootstrap">Creating and injecting the initrd_update into bootstrap</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modifying-initramfs-image-manually-for-bootstrap-node">Modifying initramfs image manually for bootstrap node</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Creating a custom bootstrap node</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modular-architecture.html">Modular Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#granular-deployment-process">Granular deployment process</a></li>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#task-graph">Task Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#graph-example">Graph example</a></li>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#modular-manifests">Modular manifests</a></li>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#modular-example">Modular example</a></li>
<li class="toctree-l3"><a class="reference internal" href="modular-architecture.html#testing">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devops.html">DevOps Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#devops-installation-in-virtualenv">Devops installation in virtualenv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#configuring-libvirt-pool">Configuring libvirt pool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#permissions-to-run-kvm-vms-with-libvirt-with-current-user">Permissions to run KVM VMs with libvirt with current user</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#configuring-database">Configuring database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../devops.html#configuring-postgresql">Configuring PostgreSQL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../devops.html#configuring-sqlite3-database">Configuring SQLite3 database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#configuring-django">Configuring Django</a></li>
<li class="toctree-l3"><a class="reference internal" href="../devops.html#optional-enabling-nested-paging">[Optional] Enabling Nested Paging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#environment-creation-via-devops-fuel-qa-or-fuel-main">Environment creation via Devops + Fuel_QA or Fuel_main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#important-notes-for-sahara-tests">Important notes for Sahara tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#important-notes-for-murano-tests">Important notes for Murano tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#run-single-ostf-tests-several-times">Run single OSTF tests several times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#upgrade-from-system-wide-devops-to-devops-in-python-virtual-environment">Upgrade from system-wide devops to devops in Python virtual environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devops.html#known-issues">Known issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../buildsystem.html">Fuel ISO build system</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html#quick-start">Quick start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html#build-system-structure">Build system structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html#build-targets">Build targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html#customizing-build-process">Customizing build process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../buildsystem.html#other-options">Other options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../infra.html">Fuel Infra configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../infra/overview.html">Fuel Infrastructure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/overview.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infra/overview.html#jenkins-jobs">Jenkins Jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#install-jenkins-job-builder">Install Jenkins Job Builder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#upload-jobs-to-jenkins">Upload jobs to Jenkins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../infra/overview.html#building-iso-with-jenkins">Building ISO with Jenkins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#create-jenkins-jobs">Create Jenkins jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#start-iso-building">Start ISO building</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../infra/overview.html#gerrit">Gerrit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#contributing">Contributing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infra/overview.html#feedback">Feedback</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/jenkins_master_deployment.html">Jenkins Master</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/jenkins_master_deployment.html#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/jenkins_slave_deployment.html">Jenkins Slave</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/jenkins_slave_deployment.html#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/puppet_master_deployment.html">Puppet Master</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/puppet_master_deployment.html#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/puppet_master_deployment.html#using-hiera">Using Hiera</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/puppet_master_deployment.html#the-hiera-hierarchy">The Hiera hierarchy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/zabbix_server_deployment.html">Zabbix server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/zabbix_server_deployment.html#deployment">Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infra/zabbix_server_deployment.html#import-templates">Import templates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infra/seed_server_deployment.html">Seed server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../infra/seed_server_deployment.html#deployment">Deployment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packaging.html">Packaging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../packaging/package_versions.html">Package version problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packaging/perestroika.html">Perestroika build system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../packaging/perestroika.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../packaging/perestroika.html#perestroika-structure">Perestroika structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../packaging/perestroika.html#scheduler">Scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../packaging/perestroika.html#build-workers">Build workers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../packaging/perestroika.html#publisher-node">Publisher node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../packaging/perestroika.html#mirror-node">Mirror node</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide.html">Fuel Plugin SDK Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/introduction.html">Introduction to the Fuel Plugin SDK Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/how-plugins-work.html">About Fuel plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/existing-plugins.html">Overview of existing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment.html">Create a development environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/development-requirements.html">Development requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/code-style.html">Install style checkers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/repository-workflow.html">Repository workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/repository-branching.html">Managing Git branches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/repository-branching/repository-branching-create.html">Create a branch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/repository-branching/repository-branching-delete.html">Delete a branch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/launchpad-project.html">Launchpad project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/plugin-repo.html">Request an OpenStack repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/plugin-ci.html">Configure a continuous integration environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/plugin-ci/plugin-ci-workflow.html">CI workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/plugin-ci/plugin-ci-job-examples.html">Job examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/autotests.html">Prepare a testing environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/autotests/autotests-workflow.html">Automation tests execution order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-environment/autotests/autotests-files.html">Automation test files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin.html">Create a Fuel plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/install-plugin-builder.html">Install Fuel Plugin Builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/create-auto-plugin.html">Create an automatically generated plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/describe-plugin.html">Describe your plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/define-plugin-actions.html">Define plugin actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/actions-existing-roles.html">Actions for existing roles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/actions-existing-roles/deployment-stages.html">Pre- and post-deployment stages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/actions-existing-roles/skip-core-tasks.html">Skipping core tasks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-settings.html">Plugin settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-settings/add-settings.html">Add plugin settings to the Fuel web UI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-settings/settings-restrictions.html">Settings restrictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-settings/task-conditions.html">Conditions for plugin tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-settings/override-core-settings.html">Override core settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-node-roles.html">Plugin specific node roles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-node-roles/define-new-role.html">Define a new role</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-node-roles/volume-allocation.html">Volume allocation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-node-roles/hot-pluggable.html">Hot-pluggable plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-node-roles/modify-ui-wizard.html">Modify the Fuel web UI wizard</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-attributes.html">Additional attributes for NICs, bonds, and nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/modify-ui.html">Modify the Fuel web UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-repos.html">Plugin repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/add-driverlog.html">Add plugin to DriverLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-versioning-system.html">Plugin versioning system</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-versioning-system.html#update-procedure">Update procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/create-plugin/plugin-versioning-system.html#versioning-scheme">Versioning scheme</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/limitations.html">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference.html">Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files.html">Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/components.html">components.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/deployment_tasks.html">deployment_tasks.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/environment_config.html">environment_config.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/metadata.html">metadata.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/network_roles.html">network_roles.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/node_roles.html">node_roles.yaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/reference/files/volumes.html">volumes.yaml</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plugindocs/fuel-plugin-sdk-guide/additional-information.html">Additional information</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/glossary.html">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/d.html">D</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-graph.html">Deployment graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-graph-hierarchy.html">Deployment graph hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-graph-rendering.html">Deployment graph rendering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-group.html">Deployment group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-group-fault-tolerance.html">Deployment group fault tolerance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-pipeline.html">Deployment pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-role.html">Deployment role</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/deployment-task.html">Deployment task</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/d/discovery.html">Discovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/e.html">E</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/e/environment-release.html">Environment release</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/i.html">I</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/i/inventory.html">Inventory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/n.html">N</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/n/nailgun-extension.html">Nailgun extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/n/nailgun-supertask.html">Nailgun supertask</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/p.html">P</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/p/provisioning.html">Provisioning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary/s.html">S</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../glossary/s/serialized-attributes.html">Serialized attributes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../../_static/js/jquery-1.11.3.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../../_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: d97307f6e880637366f348c881f195fb96eaef2d";
        var bugProject = "fuel";
    var bugTitle = "Bootstrap node in fuel-docs";
    var fieldTags = "";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 9.0.0.dev2018 on 2017/02/03";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>
  </body>
</html>