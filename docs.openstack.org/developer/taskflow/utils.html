<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utilities &mdash; TaskFlow 2.9.1.dev5 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.9.1.dev5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="TaskFlow 2.9.1.dev5 documentation" href="index.html" />
    <link rel="next" title="Libraries &amp; frameworks" href="shelf.html" />
    <link rel="prev" title="Types" href="types.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">External usage of internal utility functions and modules should be kept
to a <strong>minimum</strong> as they may be altered, refactored or moved to other
locations <strong>without</strong> notice (and without the typical deprecation cycle).</p>
</div>
<div class="section" id="module-taskflow.utils.async_utils">
<span id="async"></span><h2>Async<a class="headerlink" href="#module-taskflow.utils.async_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.async_utils.make_completed_future">
<code class="descclassname">taskflow.utils.async_utils.</code><code class="descname">make_completed_future</code><span class="sig-paren">(</span><em>result</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/async_utils.html#make_completed_future"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.async_utils.make_completed_future" title="Permalink to this definition">¶</a></dt>
<dd><p>Make and return a future completed with a given result.</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.banner">
<span id="banner"></span><h2>Banner<a class="headerlink" href="#module-taskflow.utils.banner" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.banner.make_banner">
<code class="descclassname">taskflow.utils.banner.</code><code class="descname">make_banner</code><span class="sig-paren">(</span><em>what</em>, <em>chapters</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/banner.html#make_banner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.banner.make_banner" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a taskflow banner string.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">taskflow.utils</span> <span class="kn">import</span> <span class="n">banner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chapters</span> <span class="o">=</span> <span class="p">{</span>
<span class="go">    &#39;Connection details&#39;: {</span>
<span class="go">        &#39;Topic&#39;: &#39;hello&#39;,</span>
<span class="go">    },</span>
<span class="go">    &#39;Powered by&#39;: {</span>
<span class="go">        &#39;Executor&#39;: &#39;parallel&#39;,</span>
<span class="go">    },</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">banner</span><span class="o">.</span><span class="n">make_banner</span><span class="p">(</span><span class="s1">&#39;Worker&#39;</span><span class="p">,</span> <span class="n">chapters</span><span class="p">))</span>
</pre></div>
</div>
<p>This will output:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>___    __
 |    |_
 |ask |low v1.26.1
*Worker*
Connection details:
  Topic =&gt; hello
Powered by:
  Executor =&gt; parallel
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.eventlet_utils">
<span id="eventlet"></span><h2>Eventlet<a class="headerlink" href="#module-taskflow.utils.eventlet_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.eventlet_utils.check_for_eventlet">
<code class="descclassname">taskflow.utils.eventlet_utils.</code><code class="descname">check_for_eventlet</code><span class="sig-paren">(</span><em>exc=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/eventlet_utils.html#check_for_eventlet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.eventlet_utils.check_for_eventlet" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if eventlet is available and if not raise a runtime error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exc</strong> (<a class="reference internal" href="types.html#taskflow.types.failure.Failure.exception" title="taskflow.types.failure.Failure.exception"><em>exception</em></a>) &#8211; exception to raise instead of raising a runtime error</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.iter_utils">
<span id="iterators"></span><h2>Iterators<a class="headerlink" href="#module-taskflow.utils.iter_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.iter_utils.fill">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">fill</code><span class="sig-paren">(</span><em>it</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#fill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.fill" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over a provided iterator up to the desired length.</p>
<p>If the source iterator does not have enough values then the filler
value is yielded until the desired length is reached.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.count">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">count</code><span class="sig-paren">(</span><em>it</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns how many values in the iterator (depletes the iterator).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.generate_delays">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">generate_delays</code><span class="sig-paren">(</span><em>delay</em>, <em>max_delay</em>, <em>multiplier=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#generate_delays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.generate_delays" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator/iterator that provides back delays values.</p>
<p>The values it generates increments by a given multiple after each
iteration (using the max delay as a upper bound). Negative values
will never be generated... and it will iterate forever (ie it will never
stop generating values).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.unique_seen">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">unique_seen</code><span class="sig-paren">(</span><em>its</em>, <em>seen_selector=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#unique_seen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.unique_seen" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields unique values from iterator(s) (and retains order).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.find_first_match">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">find_first_match</code><span class="sig-paren">(</span><em>it</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#find_first_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.find_first_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches iterator for first value that matcher callback returns true.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.while_is_not">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">while_is_not</code><span class="sig-paren">(</span><em>it</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#while_is_not"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.while_is_not" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields given values from iterator until stop value is passed.</p>
<p>This uses the <code class="docutils literal"><span class="pre">is</span></code> operator to determine equivalency (and not the
<code class="docutils literal"><span class="pre">==</span></code> operator).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.iter_utils.iter_forever">
<code class="descclassname">taskflow.utils.iter_utils.</code><code class="descname">iter_forever</code><span class="sig-paren">(</span><em>limit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/iter_utils.html#iter_forever"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.iter_utils.iter_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Yields values from iterator until a limit is reached.</p>
<p>if limit is negative, we iterate forever.</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.kazoo_utils">
<span id="kazoo"></span><h2>Kazoo<a class="headerlink" href="#module-taskflow.utils.kazoo_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.kazoo_utils.prettify_failures">
<code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">prettify_failures</code><span class="sig-paren">(</span><em>failures</em>, <em>limit=-1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#prettify_failures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.prettify_failures" title="Permalink to this definition">¶</a></dt>
<dd><p>Prettifies a checked commits failures (ignores sensitive data...).</p>
</dd></dl>

<dl class="exception">
<dt id="taskflow.utils.kazoo_utils.KazooTransactionException">
<em class="property">exception </em><code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">KazooTransactionException</code><span class="sig-paren">(</span><em>message</em>, <em>failures</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#KazooTransactionException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.KazooTransactionException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">kazoo.exceptions.KazooException</span></code></p>
<p>Exception raised when a checked commit fails.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.kazoo_utils.checked_commit">
<code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">checked_commit</code><span class="sig-paren">(</span><em>txn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#checked_commit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.checked_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commits a kazoo transcation and validates the result.</p>
<p>NOTE(harlowja): Until <a class="reference external" href="https://github.com/python-zk/kazoo/pull/224">https://github.com/python-zk/kazoo/pull/224</a> is fixed
or a similar pull request is merged we have to workaround the transaction
failing silently.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.kazoo_utils.finalize_client">
<code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">finalize_client</code><span class="sig-paren">(</span><em>client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#finalize_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.finalize_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops and closes a client, even if it wasn&#8217;t started.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.kazoo_utils.check_compatible">
<code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">check_compatible</code><span class="sig-paren">(</span><em>client</em>, <em>min_version=None</em>, <em>max_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#check_compatible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.check_compatible" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a kazoo client is backed by a zookeeper server version.</p>
<p>This check will verify that the zookeeper server version that the client
is connected to satisfies a given minimum version (inclusive) and
maximum (inclusive) version range. If the server is not in the provided
version range then a exception is raised indiciating this.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.kazoo_utils.make_client">
<code class="descclassname">taskflow.utils.kazoo_utils.</code><code class="descname">make_client</code><span class="sig-paren">(</span><em>conf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kazoo_utils.html#make_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kazoo_utils.make_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <a class="reference external" href="http://kazoo.readthedocs.org/">kazoo</a> <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/client.html">client</a> given a configuration dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>conf</strong> (<em>dict</em>) &#8211; configuration dictionary that will be used to configure
the created client</td>
</tr>
</tbody>
</table>
<p>The keys that will be extracted are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">read_only</span></code>: boolean that specifies whether to allow connections to
read only servers, defaults to <code class="docutils literal"><span class="pre">False</span></code></li>
<li><code class="docutils literal"><span class="pre">randomize_hosts</span></code>: boolean that specifies whether to randomize
host lists provided, defaults to <code class="docutils literal"><span class="pre">False</span></code></li>
<li><code class="docutils literal"><span class="pre">command_retry</span></code>: a kazoo <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/retry.html">retry</a> object (or dict of options which
will be used for creating one) that will be used for retrying commands
that are executed</li>
<li><code class="docutils literal"><span class="pre">connection_retry</span></code>: a kazoo <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/retry.html">retry</a> object (or dict of options which
will be used for creating one)  that will be used for retrying
connection failures that occur</li>
<li><code class="docutils literal"><span class="pre">hosts</span></code>: a string, list, set (or dict with host keys) that will
specify the hosts the kazoo client should be connected to, if none
is provided then <code class="docutils literal"><span class="pre">localhost:2181</span></code> will be used by default</li>
<li><code class="docutils literal"><span class="pre">timeout</span></code>: a float value that specifies the default timeout that the
kazoo client will use</li>
<li><code class="docutils literal"><span class="pre">handler</span></code>: a kazoo handler object that can be used to provide the
client with alternate async strategies (the default is <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/handlers/threading.html">thread</a>
based, but <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/handlers/gevent.html">gevent</a>, or <a class="reference external" href="http://kazoo.readthedocs.org/en/latest/api/handlers/eventlet.html">eventlet</a> ones can be provided as needed)</li>
</ul>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.kombu_utils">
<span id="kombu"></span><h2>Kombu<a class="headerlink" href="#module-taskflow.utils.kombu_utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="taskflow.utils.kombu_utils.DelayedPretty">
<em class="property">class </em><code class="descclassname">taskflow.utils.kombu_utils.</code><code class="descname">DelayedPretty</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/kombu_utils.html#DelayedPretty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.kombu_utils.DelayedPretty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Wraps a message and delays prettifying it until requested.</p>
<p>TODO(harlowja): remove this when <a class="reference external" href="https://github.com/celery/kombu/pull/454/">https://github.com/celery/kombu/pull/454/</a>
is merged and a release is made that contains it (since that pull
request is equivalent and/or better than this).</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.misc">
<span id="miscellaneous"></span><h2>Miscellaneous<a class="headerlink" href="#module-taskflow.utils.misc" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="taskflow.utils.misc.StrEnum">
<em class="property">class </em><code class="descclassname">taskflow.utils.misc.</code><code class="descname">StrEnum</code><a class="reference internal" href="_modules/taskflow/utils/misc.html#StrEnum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.StrEnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal"><span class="pre">enum.Enum</span></code></p>
<p>An enumeration that is also a string and can be compared to strings.</p>
</dd></dl>

<dl class="class">
<dt id="taskflow.utils.misc.StringIO">
<em class="property">class </em><code class="descclassname">taskflow.utils.misc.</code><code class="descname">StringIO</code><span class="sig-paren">(</span><em>buf=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#StringIO"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.StringIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">StringIO.StringIO</span></code></p>
<p>String buffer with some small additions.</p>
</dd></dl>

<dl class="class">
<dt id="taskflow.utils.misc.BytesIO">
<em class="property">class </em><code class="descclassname">taskflow.utils.misc.</code><code class="descname">BytesIO</code><span class="sig-paren">(</span><em>buf=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#BytesIO"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.BytesIO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">StringIO.StringIO</span></code></p>
<p>Byte buffer with some small additions.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.get_hostname">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">get_hostname</code><span class="sig-paren">(</span><em>unknown_hostname='&lt;unknown&gt;'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#get_hostname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.get_hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the machines hostname; if not able to returns an invalid one.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.match_type">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">match_type</code><span class="sig-paren">(</span><em>obj</em>, <em>matchers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#match_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.match_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches a given object using the given matchers list/iterable.</p>
<p>NOTE(harlowja): each element of the provided list/iterable must be
tuple of (valid types, result).</p>
<p>Returns the result (the second element of the provided tuple) if a type
match occurs, otherwise none if no matches are found.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.countdown_iter">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">countdown_iter</code><span class="sig-paren">(</span><em>start_at</em>, <em>decr=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#countdown_iter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.countdown_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that decrements after each generation until &lt;= zero.</p>
<p>NOTE(harlowja): we can likely remove this when we can use an
<code class="docutils literal"><span class="pre">itertools.count</span></code> that takes a step (on py2.6 which we still support
that step parameter does <strong>not</strong> exist and therefore can&#8217;t be used).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.extract_driver_and_conf">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">extract_driver_and_conf</code><span class="sig-paren">(</span><em>conf</em>, <em>conf_key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#extract_driver_and_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.extract_driver_and_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Common function to get a driver name and its configuration.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.reverse_enumerate">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">reverse_enumerate</code><span class="sig-paren">(</span><em>items</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#reverse_enumerate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.reverse_enumerate" title="Permalink to this definition">¶</a></dt>
<dd><p>Like reversed(enumerate(items)) but with less copying/cloning...</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.merge_uri">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">merge_uri</code><span class="sig-paren">(</span><em>uri</em>, <em>conf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#merge_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.merge_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges a parsed uri into the given configuration dictionary.</p>
<p>Merges the username, password, hostname, port, and query parameters of
a URI into the given configuration dictionary (it does <strong>not</strong> overwrite
existing configuration keys if they already exist) and returns the merged
configuration.</p>
<p>NOTE(harlowja): does not merge the path, scheme or fragment.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.find_subclasses">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">find_subclasses</code><span class="sig-paren">(</span><em>locations</em>, <em>base_cls</em>, <em>exclude_hidden=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#find_subclasses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.find_subclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds subclass types in the given locations.</p>
<p>This will examines the given locations for types which are subclasses of
the base class type provided and returns the found subclasses (or fails
with exceptions if this introspection can not be accomplished).</p>
<p>If a string is provided as one of the locations it will be imported and
examined if it is a subclass of the base class. If a module is given,
all of its members will be examined for attributes which are subclasses of
the base class. If a type itself is given it will be examined for being a
subclass of the base class.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.pick_first_not_none">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">pick_first_not_none</code><span class="sig-paren">(</span><em>*values</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#pick_first_not_none"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.pick_first_not_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns first of values that is <em>not</em> None (or None if all are/were).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.parse_uri">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">parse_uri</code><span class="sig-paren">(</span><em>uri</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#parse_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.parse_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a uri into its components.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.disallow_when_frozen">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">disallow_when_frozen</code><span class="sig-paren">(</span><em>excp_cls</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#disallow_when_frozen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.disallow_when_frozen" title="Permalink to this definition">¶</a></dt>
<dd><p>Frozen checking/raising method decorator.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.clamp">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">clamp</code><span class="sig-paren">(</span><em>value</em>, <em>minimum</em>, <em>maximum</em>, <em>on_clamped=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#clamp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.clamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Clamps a value to ensure its &gt;= minimum and &lt;= maximum.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.fix_newlines">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">fix_newlines</code><span class="sig-paren">(</span><em>text</em>, <em>replacement='\n'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#fix_newlines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.fix_newlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Fixes text that <em>may</em> end with wrong nl by replacing with right nl.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.binary_encode">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">binary_encode</code><span class="sig-paren">(</span><em>text</em>, <em>encoding='utf-8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#binary_encode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.binary_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Encodes a text string into a binary string using given encoding.</p>
<p>Does nothing if data is already a binary string (raises on unknown types).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.binary_decode">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">binary_decode</code><span class="sig-paren">(</span><em>data</em>, <em>encoding='utf-8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#binary_decode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.binary_decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Decodes a binary string into a text string using given encoding.</p>
<p>Does nothing if data is already a text string (raises on unknown types).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.decode_msgpack">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">decode_msgpack</code><span class="sig-paren">(</span><em>raw_data</em>, <em>root_types=(&lt;type 'dict'&gt;</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#decode_msgpack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.decode_msgpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse raw data to get decoded object.</p>
<p>Decodes a msgback encoded &#8216;blob&#8217; from a given raw data binary string and
checks that the root type of that decoded object is in the allowed set of
types (by default a dict should be the root type).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.decode_json">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">decode_json</code><span class="sig-paren">(</span><em>raw_data</em>, <em>root_types=(&lt;type 'dict'&gt;</em>, <em>)</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#decode_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.decode_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse raw data to get decoded object.</p>
<p>Decodes a JSON encoded &#8216;blob&#8217; from a given raw data binary string and
checks that the root type of that decoded object is in the allowed set of
types (by default a dict should be the root type).</p>
</dd></dl>

<dl class="class">
<dt id="taskflow.utils.misc.cachedproperty">
<em class="property">class </em><code class="descclassname">taskflow.utils.misc.</code><code class="descname">cachedproperty</code><span class="sig-paren">(</span><em>fget=None</em>, <em>require_lock=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#cachedproperty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.cachedproperty" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A <em>thread-safe</em> descriptor property that is only evaluated once.</p>
<p>This caching descriptor can be placed on instance methods to translate
those methods into properties that will be cached in the instance (avoiding
repeated attribute checking logic to do the equivalent).</p>
<p>NOTE(harlowja): by default the property that will be saved will be under
the decorated methods name prefixed with an underscore. For example if we
were to attach this descriptor to an instance method &#8216;get_thing(self)&#8217; the
cached property would be stored under &#8216;_get_thing&#8217; in the self object
after the first call to &#8216;get_thing&#8217; occurs.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.millis_to_datetime">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">millis_to_datetime</code><span class="sig-paren">(</span><em>milliseconds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#millis_to_datetime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.millis_to_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts number of milliseconds (from epoch) into a datetime object.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.get_version_string">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">get_version_string</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#get_version_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.get_version_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a object&#8217;s version as a string.</p>
<p>Returns string representation of object&#8217;s version taken from
its &#8216;version&#8217; attribute, or None if object does not have such
attribute or its version is None.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.sequence_minus">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">sequence_minus</code><span class="sig-paren">(</span><em>seq1</em>, <em>seq2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#sequence_minus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.sequence_minus" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate difference of two sequences.</p>
<p>Result contains the elements from first sequence that are not
present in second sequence, in original order. Works even
if sequence elements are not hashable.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.as_int">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">as_int</code><span class="sig-paren">(</span><em>obj</em>, <em>quiet=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#as_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.as_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an arbitrary value into a integer.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.capture_failure">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">capture_failure</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#capture_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.capture_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Captures the occurring exception and provides a failure object back.</p>
<p>This will save the current exception information and yield back a
failure object for the caller to use (it will raise a runtime error if
no active exception is being handled).</p>
<p>This is useful since in some cases the exception context can be cleared,
resulting in None being attempted to be saved after an exception handler is
run. This can happen when eventlet switches greenthreads or when running an
exception handler, code raises and catches an exception. In both
cases the exception context will be cleared.</p>
<p>To work around this, we save the exception state, yield a failure and
then run other code.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">taskflow.utils</span> <span class="kn">import</span> <span class="n">misc</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">cleanup</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">save_failure</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Saving </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s2">&quot;Broken&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="n">misc</span><span class="o">.</span><span class="n">capture_failure</span><span class="p">()</span> <span class="k">as</span> <span class="n">fail</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Activating cleanup&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">cleanup</span><span class="p">()</span>
<span class="gp">... </span>        <span class="n">save_failure</span><span class="p">(</span><span class="n">fail</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Activating cleanup</span>
<span class="go">Saving Failure: IOError: Broken</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.is_iterable">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">is_iterable</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#is_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.is_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests an object to to determine whether it is iterable.</p>
<p>This function will test the specified object to determine whether it is
iterable. String types (both <code class="docutils literal"><span class="pre">str</span></code> and <code class="docutils literal"><span class="pre">unicode</span></code>) are ignored and will
return False.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>obj</strong> &#8211; object to be tested for iterable</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if object is iterable and is not a string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.misc.safe_copy_dict">
<code class="descclassname">taskflow.utils.misc.</code><code class="descname">safe_copy_dict</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/misc.html#safe_copy_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.misc.safe_copy_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy an existing dictionary or default to empty dict...</p>
<p>This will return a empty dict if given object is falsey, otherwise it
will create a dict of the given object (which if provided a dictionary
object will make a shallow copy of that object).</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.mixins">
<span id="mixins"></span><h2>Mixins<a class="headerlink" href="#module-taskflow.utils.mixins" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="taskflow.utils.mixins.StrMixin">
<em class="property">class </em><code class="descclassname">taskflow.utils.mixins.</code><code class="descname">StrMixin</code><a class="reference internal" href="_modules/taskflow/utils/mixins.html#StrMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.mixins.StrMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Mixin that helps deal with the PY2 and PY3 method differences.</p>
<p><a class="reference external" href="http://lucumr.pocoo.org/2011/1/22/forwards-compatible-python/">http://lucumr.pocoo.org/2011/1/22/forwards-compatible-python/</a> explains
why this is quite useful...</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.persistence_utils">
<span id="persistence"></span><h2>Persistence<a class="headerlink" href="#module-taskflow.utils.persistence_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.persistence_utils.temporary_log_book">
<code class="descclassname">taskflow.utils.persistence_utils.</code><code class="descname">temporary_log_book</code><span class="sig-paren">(</span><em>backend=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/persistence_utils.html#temporary_log_book"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.persistence_utils.temporary_log_book" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a temporary logbook for temporary usage in the given backend.</p>
<p>Mainly useful for tests and other use cases where a temporary logbook
is needed for a short-period of time.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.persistence_utils.temporary_flow_detail">
<code class="descclassname">taskflow.utils.persistence_utils.</code><code class="descname">temporary_flow_detail</code><span class="sig-paren">(</span><em>backend=None</em>, <em>meta=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/persistence_utils.html#temporary_flow_detail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.persistence_utils.temporary_flow_detail" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a temporary flow detail and logbook in the given backend.</p>
<p>Mainly useful for tests and other use cases where a temporary flow detail
and a temporary logbook is needed for a short-period of time.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.persistence_utils.create_flow_detail">
<code class="descclassname">taskflow.utils.persistence_utils.</code><code class="descname">create_flow_detail</code><span class="sig-paren">(</span><em>flow</em>, <em>book=None</em>, <em>backend=None</em>, <em>meta=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/persistence_utils.html#create_flow_detail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.persistence_utils.create_flow_detail" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a flow detail for a flow &amp; adds &amp; saves it in a logbook.</p>
<p>This will create a flow detail for the given flow using the flow name,
and add it to the provided logbook and then uses the given backend to save
the logbook and then returns the created flow detail.</p>
<p>If no book is provided a temporary one will be created automatically (no
reference to the logbook will be returned, so this should nearly <em>always</em>
be provided or only used in situations where no logbook is needed, for
example in tests). If no backend is provided then no saving will occur and
the created flow detail will not be persisted even if the flow detail was
added to a given (or temporarily generated) logbook.</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.redis_utils">
<span id="redis"></span><h2>Redis<a class="headerlink" href="#module-taskflow.utils.redis_utils" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="taskflow.utils.redis_utils.RedisClient">
<em class="property">class </em><code class="descclassname">taskflow.utils.redis_utils.</code><code class="descname">RedisClient</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/redis_utils.html#RedisClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.redis_utils.RedisClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">redis.client.StrictRedis</span></code></p>
<p>A redis client that can be closed (and raises on-usage after closed).</p>
<p>TODO(harlowja): if <a class="reference external" href="https://github.com/andymccurdy/redis-py/issues/613">https://github.com/andymccurdy/redis-py/issues/613</a> ever
gets resolved or merged or other then we can likely remove this.</p>
<dl class="method">
<dt id="taskflow.utils.redis_utils.RedisClient.execute_command">
<code class="descname">execute_command</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#taskflow.utils.redis_utils.RedisClient.execute_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a command and return a parsed response</p>
</dd></dl>

<dl class="method">
<dt id="taskflow.utils.redis_utils.RedisClient.transaction">
<code class="descname">transaction</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#taskflow.utils.redis_utils.RedisClient.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for executing the callable <cite>func</cite> as a transaction
while watching all keys specified in <cite>watches</cite>. The &#8216;func&#8217; callable
should expect a single argument which is a Pipeline object.</p>
</dd></dl>

<dl class="method">
<dt id="taskflow.utils.redis_utils.RedisClient.pubsub">
<code class="descname">pubsub</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#taskflow.utils.redis_utils.RedisClient.pubsub" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Publish/Subscribe object. With this object, you can
subscribe to channels and listen for messages that get published to
them.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="taskflow.utils.redis_utils.UnknownExpire">
<em class="property">class </em><code class="descclassname">taskflow.utils.redis_utils.</code><code class="descname">UnknownExpire</code><a class="reference internal" href="_modules/taskflow/utils/redis_utils.html#UnknownExpire"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.redis_utils.UnknownExpire" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">enum.IntEnum</span></code></p>
<p>Non-expiry (not ttls) results return from <a class="reference internal" href="#taskflow.utils.redis_utils.get_expiry" title="taskflow.utils.redis_utils.get_expiry"><code class="xref py py-func docutils literal"><span class="pre">get_expiry()</span></code></a>.</p>
<p>See: <a class="reference external" href="http://redis.io/commands/ttl">http://redis.io/commands/ttl</a> or <a class="reference external" href="http://redis.io/commands/pttl">http://redis.io/commands/pttl</a></p>
<dl class="attribute">
<dt id="taskflow.utils.redis_utils.UnknownExpire.DOES_NOT_EXPIRE">
<code class="descname">DOES_NOT_EXPIRE</code><em class="property"> = &lt;UnknownExpire.DOES_NOT_EXPIRE: -1&gt;</em><a class="headerlink" href="#taskflow.utils.redis_utils.UnknownExpire.DOES_NOT_EXPIRE" title="Permalink to this definition">¶</a></dt>
<dd><p>The command returns <code class="docutils literal"><span class="pre">-1</span></code> if the key exists but has no associated expire.</p>
</dd></dl>

<dl class="attribute">
<dt id="taskflow.utils.redis_utils.UnknownExpire.KEY_NOT_FOUND">
<code class="descname">KEY_NOT_FOUND</code><em class="property"> = &lt;UnknownExpire.KEY_NOT_FOUND: -2&gt;</em><a class="headerlink" href="#taskflow.utils.redis_utils.UnknownExpire.KEY_NOT_FOUND" title="Permalink to this definition">¶</a></dt>
<dd><p>The command returns <code class="docutils literal"><span class="pre">-2</span></code> if the key does not exist.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="taskflow.utils.redis_utils.get_expiry">
<code class="descclassname">taskflow.utils.redis_utils.</code><code class="descname">get_expiry</code><span class="sig-paren">(</span><em>client</em>, <em>key</em>, <em>prior_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/redis_utils.html#get_expiry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.redis_utils.get_expiry" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets an expiry for a key (using <strong>best</strong> determined ttl method).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.redis_utils.apply_expiry">
<code class="descclassname">taskflow.utils.redis_utils.</code><code class="descname">apply_expiry</code><span class="sig-paren">(</span><em>client</em>, <em>key</em>, <em>expiry</em>, <em>prior_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/redis_utils.html#apply_expiry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.redis_utils.apply_expiry" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies an expiry to a key (using <strong>best</strong> determined expiry method).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.redis_utils.is_server_new_enough">
<code class="descclassname">taskflow.utils.redis_utils.</code><code class="descname">is_server_new_enough</code><span class="sig-paren">(</span><em>client</em>, <em>min_version</em>, <em>default=False</em>, <em>prior_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/redis_utils.html#is_server_new_enough"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.redis_utils.is_server_new_enough" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a client is attached to a new enough redis server.</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.schema_utils">
<span id="schema"></span><h2>Schema<a class="headerlink" href="#module-taskflow.utils.schema_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.schema_utils.schema_validate">
<code class="descclassname">taskflow.utils.schema_utils.</code><code class="descname">schema_validate</code><span class="sig-paren">(</span><em>data</em>, <em>schema</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/schema_utils.html#schema_validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.schema_utils.schema_validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates given data using provided json schema.</p>
</dd></dl>

</div>
<div class="section" id="module-taskflow.utils.threading_utils">
<span id="threading"></span><h2>Threading<a class="headerlink" href="#module-taskflow.utils.threading_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="taskflow.utils.threading_utils.is_alive">
<code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">is_alive</code><span class="sig-paren">(</span><em>thread</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#is_alive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.is_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to determine if a thread is alive (handles none safely).</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.threading_utils.get_ident">
<code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">get_ident</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#get_ident"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.get_ident" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the &#8216;thread identifier&#8217; of the current thread.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.threading_utils.get_optimal_thread_count">
<code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">get_optimal_thread_count</code><span class="sig-paren">(</span><em>default=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#get_optimal_thread_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.get_optimal_thread_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to guess optimal thread count for current system.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.threading_utils.daemon_thread">
<code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">daemon_thread</code><span class="sig-paren">(</span><em>target</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#daemon_thread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.daemon_thread" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a daemon thread that calls the given target when started.</p>
</dd></dl>

<dl class="function">
<dt id="taskflow.utils.threading_utils.no_op">
<code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">no_op</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#no_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.no_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that does nothing.</p>
</dd></dl>

<dl class="class">
<dt id="taskflow.utils.threading_utils.ThreadBundle">
<em class="property">class </em><code class="descclassname">taskflow.utils.threading_utils.</code><code class="descname">ThreadBundle</code><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#ThreadBundle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.ThreadBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>A group/bundle of threads that start/stop together.</p>
<dl class="method">
<dt id="taskflow.utils.threading_utils.ThreadBundle.bind">
<code class="descname">bind</code><span class="sig-paren">(</span><em>thread_factory</em>, <em>before_start=None</em>, <em>after_start=None</em>, <em>before_join=None</em>, <em>after_join=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#ThreadBundle.bind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.ThreadBundle.bind" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a thread (to-be) into this bundle (with given callbacks).</p>
<dl class="docutils">
<dt>NOTE(harlowja): callbacks provided should not attempt to call</dt>
<dd>mutating methods (<a class="reference internal" href="#taskflow.utils.threading_utils.ThreadBundle.stop" title="taskflow.utils.threading_utils.ThreadBundle.stop"><code class="xref py py-meth docutils literal"><span class="pre">stop()</span></code></a>, <a class="reference internal" href="#taskflow.utils.threading_utils.ThreadBundle.start" title="taskflow.utils.threading_utils.ThreadBundle.start"><code class="xref py py-meth docutils literal"><span class="pre">start()</span></code></a>,
<a class="reference internal" href="#taskflow.utils.threading_utils.ThreadBundle.bind" title="taskflow.utils.threading_utils.ThreadBundle.bind"><code class="xref py py-meth docutils literal"><span class="pre">bind()</span></code></a> ...) on this object as that will result
in dead-lock since the lock on this object is not
meant to be (and is not) reentrant...</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="taskflow.utils.threading_utils.ThreadBundle.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#ThreadBundle.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.ThreadBundle.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates &amp; starts all associated threads (that are not running).</p>
</dd></dl>

<dl class="method">
<dt id="taskflow.utils.threading_utils.ThreadBundle.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/taskflow/utils/threading_utils.html#ThreadBundle.stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#taskflow.utils.threading_utils.ThreadBundle.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops &amp; joins all associated threads (that have been started).</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Utilities</a><ul>
<li><a class="reference internal" href="#module-taskflow.utils.async_utils">Async</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.banner">Banner</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.eventlet_utils">Eventlet</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.iter_utils">Iterators</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.kazoo_utils">Kazoo</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.kombu_utils">Kombu</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.misc">Miscellaneous</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.mixins">Mixins</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.persistence_utils">Persistence</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.redis_utils">Redis</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.schema_utils">Schema</a></li>
<li><a class="reference internal" href="#module-taskflow.utils.threading_utils">Threading</a></li>
</ul>
</li>
</ul>

  <h3>Navigation</h3>
  <ul>

    <li><a href="index.html">Table Of Contents</a></li>


    <li><a href="shelf.html" title="next chapter">Next topic: Libraries &amp; frameworks</a></li>


    <li><a href="types.html" title="previous chapter">Previous topic: Types</a></li>

  </ul>

            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/taskflow
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/utils.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="shelf.html" title="Libraries &amp; frameworks"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="types.html" title="Types"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">TaskFlow 2.9.1.dev5 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, OpenStack Foundation.
      Last updated on &#39;Fri Feb 10 20:11:01 2017, commit b7e2fcd&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/TaskFlow");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>