<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>tempest.lib.services.clients &mdash; Tempest 14.0.1.dev239 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '14.0.1.dev239',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="Tempest 14.0.1.dev239 documentation" href="../../../../index.html" />
    <link rel="up" title="Module code" href="../../../index.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for tempest.lib.services.clients</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2012 OpenStack Foundation</span>
<span class="c1"># Copyright (c) 2016 Hewlett-Packard Enterprise Development Company, L.P.</span>
<span class="c1"># All Rights Reserved.</span>
<span class="c1">#</span>
<span class="c1">#    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may</span>
<span class="c1">#    not use this file except in compliance with the License. You may obtain</span>
<span class="c1">#    a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#         http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1">#    Unless required by applicable law or agreed to in writing, software</span>
<span class="c1">#    distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span>
<span class="c1">#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span>
<span class="c1">#    License for the specific language governing permissions and limitations</span>
<span class="c1">#    under the License.</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="kn">from</span> <span class="nn">oslo_log</span> <span class="kn">import</span> <span class="n">log</span> <span class="k">as</span> <span class="n">logging</span>

<span class="kn">from</span> <span class="nn">tempest.lib</span> <span class="kn">import</span> <span class="n">auth</span>
<span class="kn">from</span> <span class="nn">tempest.lib.common.utils</span> <span class="kn">import</span> <span class="n">misc</span>
<span class="kn">from</span> <span class="nn">tempest.lib</span> <span class="kn">import</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">tempest.lib.services</span> <span class="kn">import</span> <span class="n">compute</span>
<span class="kn">from</span> <span class="nn">tempest.lib.services</span> <span class="kn">import</span> <span class="n">identity</span>
<span class="kn">from</span> <span class="nn">tempest.lib.services</span> <span class="kn">import</span> <span class="n">image</span>
<span class="kn">from</span> <span class="nn">tempest.lib.services</span> <span class="kn">import</span> <span class="n">network</span>
<span class="kn">from</span> <span class="nn">tempest.lib.services</span> <span class="kn">import</span> <span class="n">volume</span>


<span class="n">LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="tempest_modules"><a class="viewcode-back" href="../../../../library/clients.html#tempest.lib.services.clients.tempest_modules">[docs]</a><span class="k">def</span> <span class="nf">tempest_modules</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Dict of service client modules available in Tempest.</span>

<span class="sd">    Provides a dict of stable service modules available in Tempest, with</span>
<span class="sd">    ``service_version`` as key, and the module object as value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">&#39;compute&#39;</span><span class="p">:</span> <span class="n">compute</span><span class="p">,</span>
        <span class="s1">&#39;identity.v2&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="o">.</span><span class="n">v2</span><span class="p">,</span>
        <span class="s1">&#39;identity.v3&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="o">.</span><span class="n">v3</span><span class="p">,</span>
        <span class="s1">&#39;image.v1&#39;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">v1</span><span class="p">,</span>
        <span class="s1">&#39;image.v2&#39;</span><span class="p">:</span> <span class="n">image</span><span class="o">.</span><span class="n">v2</span><span class="p">,</span>
        <span class="s1">&#39;network&#39;</span><span class="p">:</span> <span class="n">network</span><span class="p">,</span>
        <span class="s1">&#39;volume.v1&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="o">.</span><span class="n">v1</span><span class="p">,</span>
        <span class="s1">&#39;volume.v2&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="o">.</span><span class="n">v2</span><span class="p">,</span>
        <span class="s1">&#39;volume.v3&#39;</span><span class="p">:</span> <span class="n">volume</span><span class="o">.</span><span class="n">v3</span>
    <span class="p">}</span></div>


<span class="k">def</span> <span class="nf">_tempest_internal_modules</span><span class="p">():</span>
    <span class="c1"># Set of unstable service clients available in Tempest</span>
    <span class="c1"># NOTE(andreaf) This list will exists only as long the remain clients</span>
    <span class="c1"># are migrated to tempest.lib, and it will then be deleted without</span>
    <span class="c1"># deprecation or advance notice</span>
    <span class="k">return</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;object-storage&#39;</span><span class="p">])</span>


<div class="viewcode-block" id="available_modules"><a class="viewcode-back" href="../../../../library/clients.html#tempest.lib.services.clients.available_modules">[docs]</a><span class="k">def</span> <span class="nf">available_modules</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Set of service client modules available in Tempest and plugins</span>

<span class="sd">    Set of stable service clients from Tempest and service clients exposed</span>
<span class="sd">    by plugins. This set of available modules can be used for automatic</span>
<span class="sd">    configuration.</span>

<span class="sd">    :raise PluginRegistrationException: if a plugin exposes a service_version</span>
<span class="sd">        already defined by Tempest or another plugin.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; from tempest import config</span>
<span class="sd">        &gt;&gt;&gt; params = {}</span>
<span class="sd">        &gt;&gt;&gt; for service_version in available_modules():</span>
<span class="sd">        &gt;&gt;&gt;     service = service_version.split(&#39;.&#39;)[0]</span>
<span class="sd">        &gt;&gt;&gt;     params[service] = config.service_client_config(service)</span>
<span class="sd">        &gt;&gt;&gt; service_clients = ServiceClients(creds, identity_uri,</span>
<span class="sd">        &gt;&gt;&gt;                                  client_parameters=params)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">extra_service_versions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([])</span>
    <span class="n">_tempest_modules</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">tempest_modules</span><span class="p">())</span>
    <span class="n">plugin_services</span> <span class="o">=</span> <span class="n">ClientsRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">get_service_clients</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">plugin_name</span> <span class="ow">in</span> <span class="n">plugin_services</span><span class="p">:</span>
        <span class="n">plug_service_versions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;service_version&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span>
                                     <span class="n">plugin_services</span><span class="p">[</span><span class="n">plugin_name</span><span class="p">]])</span>
        <span class="c1"># If a plugin exposes a duplicate service_version raise an exception</span>
        <span class="k">if</span> <span class="n">plug_service_versions</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">plug_service_versions</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">extra_service_versions</span><span class="p">):</span>
                <span class="n">detailed_error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;Plugin </span><span class="si">%s</span><span class="s1"> is trying to register a service </span><span class="si">%s</span><span class="s1"> already &#39;</span>
                    <span class="s1">&#39;claimed by another one&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span>
                                                <span class="n">extra_service_versions</span> <span class="o">&amp;</span>
                                                <span class="n">plug_service_versions</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PluginRegistrationException</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">detailed_error</span><span class="o">=</span><span class="n">detailed_error</span><span class="p">)</span>
            <span class="c1"># NOTE(andreaf) Once all tempest clients are stable, the following</span>
            <span class="c1"># if will have to be removed.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">plug_service_versions</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span>
                    <span class="n">_tempest_internal_modules</span><span class="p">()):</span>
                <span class="n">detailed_error</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;Plugin </span><span class="si">%s</span><span class="s1"> is trying to register a service </span><span class="si">%s</span><span class="s1"> already &#39;</span>
                    <span class="s1">&#39;claimed by a Tempest one&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span>
                                                  <span class="n">_tempest_internal_modules</span><span class="p">()</span> <span class="o">&amp;</span>
                                                  <span class="n">plug_service_versions</span><span class="p">))</span>
                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PluginRegistrationException</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">detailed_error</span><span class="o">=</span><span class="n">detailed_error</span><span class="p">)</span>
        <span class="n">extra_service_versions</span> <span class="o">|=</span> <span class="n">plug_service_versions</span>
    <span class="k">return</span> <span class="n">_tempest_modules</span> <span class="o">|</span> <span class="n">extra_service_versions</span></div>


<span class="nd">@misc.singleton</span>
<span class="k">class</span> <span class="nc">ClientsRegistry</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Registry of all service clients available from plugins&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_service_clients</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">register_service_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_name</span><span class="p">,</span> <span class="n">service_client_data</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">plugin_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_service_clients</span><span class="p">:</span>
            <span class="n">detailed_error</span> <span class="o">=</span> <span class="s1">&#39;Clients for plugin </span><span class="si">%s</span><span class="s1"> already registered&#39;</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PluginRegistrationException</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">plugin_name</span><span class="p">,</span>
                <span class="n">detailed_error</span><span class="o">=</span><span class="n">detailed_error</span> <span class="o">%</span> <span class="n">plugin_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_service_clients</span><span class="p">[</span><span class="n">plugin_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">service_client_data</span>

    <span class="k">def</span> <span class="nf">get_service_clients</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_service_clients</span>


<div class="viewcode-block" id="ClientsFactory"><a class="viewcode-back" href="../../../../library/clients.html#tempest.lib.services.clients.ClientsFactory">[docs]</a><span class="k">class</span> <span class="nc">ClientsFactory</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Builds service clients for a service client module</span>

<span class="sd">    This class implements the logic of feeding service client parameters</span>
<span class="sd">    to service clients from a specific module. It allows setting the</span>
<span class="sd">    parameters once and obtaining new instances of the clients without the</span>
<span class="sd">    need of passing any parameter.</span>

<span class="sd">    ClientsFactory can be used directly, or consumed via the `ServiceClients`</span>
<span class="sd">    class, which manages the authorization part.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_path</span><span class="p">,</span> <span class="n">client_names</span><span class="p">,</span> <span class="n">auth_provider</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialises the client factory</span>

<span class="sd">        :param module_path: Path to module that includes all service clients.</span>
<span class="sd">            All service client classes must be exposed by a single module.</span>
<span class="sd">            If they are separated in different modules, defining __all__</span>
<span class="sd">            in the root module can help, similar to what is done by service</span>
<span class="sd">            clients in tempest.</span>
<span class="sd">        :param client_names: List or set of names of the service client</span>
<span class="sd">            classes.</span>
<span class="sd">        :param auth_provider: The auth provider used to initialise client.</span>
<span class="sd">        :param kwargs: Parameters to be passed to all clients. Parameters</span>
<span class="sd">            values can be overwritten when clients are initialised, but</span>
<span class="sd">            parameters cannot be deleted.</span>
<span class="sd">        :raise ImportError if the specified module_path cannot be imported</span>

<span class="sd">        Example:</span>

<span class="sd">            &gt;&gt;&gt; # Get credentials and an auth_provider</span>
<span class="sd">            &gt;&gt;&gt; clients = ClientsFactory(</span>
<span class="sd">            &gt;&gt;&gt;     module_path=&#39;my_service.my_service_clients&#39;,</span>
<span class="sd">            &gt;&gt;&gt;     client_names=[&#39;ServiceClient1&#39;, &#39;ServiceClient2&#39;],</span>
<span class="sd">            &gt;&gt;&gt;     auth_provider=auth_provider,</span>
<span class="sd">            &gt;&gt;&gt;     service=&#39;my_service&#39;,</span>
<span class="sd">            &gt;&gt;&gt;     region=&#39;region1&#39;)</span>
<span class="sd">            &gt;&gt;&gt; my_api_client = clients.MyApiClient()</span>
<span class="sd">            &gt;&gt;&gt; my_api_client_region2 = clients.MyApiClient(region=&#39;region2&#39;)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Import the module. If it&#39;s not importable, the raised exception</span>
        <span class="c1"># provides good enough information about what happened</span>
        <span class="n">_module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>
        <span class="c1"># If any of the classes is not in the module we fail</span>
        <span class="k">for</span> <span class="n">class_name</span> <span class="ow">in</span> <span class="n">client_names</span><span class="p">:</span>
            <span class="c1"># TODO(andreaf) This always passes all parameters to all clients.</span>
            <span class="c1"># In future to allow clients to specify the list of parameters</span>
            <span class="c1"># that they accept based out of a list of standard ones.</span>

            <span class="c1"># Obtain the class</span>
            <span class="n">klass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_class</span><span class="p">(</span><span class="n">_module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>
            <span class="n">final_kwargs</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="c1"># Set the function as an attribute of the factory</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_partial_class</span><span class="p">(</span>
                <span class="n">klass</span><span class="p">,</span> <span class="n">auth_provider</span><span class="p">,</span> <span class="n">final_kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_get_partial_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">klass</span><span class="p">,</span> <span class="n">auth_provider</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># Define a function that returns a new class instance by</span>
        <span class="c1"># combining default kwargs with extra ones</span>
        <span class="k">def</span> <span class="nf">partial_class</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">later_kwargs</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Returns a callable the initialises a service client</span>

<span class="sd">            Builds a callable that accepts kwargs, which are passed through</span>
<span class="sd">            to the __init__ of the service client, along with a set of defaults</span>
<span class="sd">            set in factory at factory __init__ time.</span>
<span class="sd">            Original args in the service client can only be passed as kwargs.</span>

<span class="sd">            It accepts one extra parameter &#39;alias&#39; compared to the original</span>
<span class="sd">            service client. When alias is provided, the returned callable will</span>
<span class="sd">            also set an attribute called with a name defined in &#39;alias&#39;, which</span>
<span class="sd">            contains the instance of the service client.</span>

<span class="sd">            :param alias: str Name of the attribute set on the factory once</span>
<span class="sd">                the callable is invoked which contains the initialised</span>
<span class="sd">                service client. If None, no attribute is set.</span>
<span class="sd">            :param later_kwargs: kwargs passed through to the service client</span>
<span class="sd">                __init__ on top of defaults set at factory level.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">later_kwargs</span><span class="p">)</span>
            <span class="n">_client</span> <span class="o">=</span> <span class="n">klass</span><span class="p">(</span><span class="n">auth_provider</span><span class="o">=</span><span class="n">auth_provider</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">alias</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias</span><span class="p">,</span> <span class="n">_client</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_client</span>

        <span class="k">return</span> <span class="n">partial_class</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_class</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">):</span>
        <span class="n">klass</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">klass</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Invalid class name, </span><span class="si">%s</span><span class="s1"> is not found in </span><span class="si">%s</span><span class="s1">&#39;</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="n">module</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">klass</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Expected a class, got </span><span class="si">%s</span><span class="s1"> of type </span><span class="si">%s</span><span class="s1"> instead&#39;</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">klass</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">klass</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">klass</span></div>


<div class="viewcode-block" id="ServiceClients"><a class="viewcode-back" href="../../../../library/clients.html#tempest.lib.services.clients.ServiceClients">[docs]</a><span class="k">class</span> <span class="nc">ServiceClients</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Service client provider class</span>

<span class="sd">    The ServiceClients object provides a useful means for tests to access</span>
<span class="sd">    service clients configured for a specified set of credentials.</span>
<span class="sd">    It hides some of the complexity from the authorization and configuration</span>
<span class="sd">    layers.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; from tempest.lib.services import clients</span>
<span class="sd">        &gt;&gt;&gt; johndoe = cred_provider.get_creds_by_role([&#39;johndoe&#39;])</span>
<span class="sd">        &gt;&gt;&gt; johndoe_clients = clients.ServiceClients(johndoe,</span>
<span class="sd">        &gt;&gt;&gt;                                                  identity_uri)</span>
<span class="sd">        &gt;&gt;&gt; johndoe_servers = johndoe_clients.servers_client.list_servers()</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># NOTE(andreaf) This class does not depend on tempest configuration</span>
    <span class="c1"># and its meant for direct consumption by external clients such as tempest</span>
    <span class="c1"># plugins. Tempest provides a wrapper class, `clients.Manager`, that</span>
    <span class="c1"># initialises this class using values from tempest CONF object. The wrapper</span>
    <span class="c1"># class should only be used by tests hosted in Tempest.</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">credentials</span><span class="p">,</span> <span class="n">identity_uri</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="s1">&#39;project&#39;</span><span class="p">,</span>
                 <span class="n">disable_ssl_certificate_validation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ca_certs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">trace_requests</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">client_parameters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Service Clients provider</span>

<span class="sd">        Instantiate a `ServiceClients` object, from a set of credentials and an</span>
<span class="sd">        identity URI. The identity version is inferred from the credentials</span>
<span class="sd">        object. Optionally auth scope can be provided.</span>

<span class="sd">        A few parameters can be given a value which is applied as default</span>
<span class="sd">        for all service clients: region, dscv, ca_certs, trace_requests.</span>

<span class="sd">        Parameters dscv, ca_certs and trace_requests all apply to the auth</span>
<span class="sd">        provider as well as any service clients provided by this manager.</span>

<span class="sd">        Any other client parameter must be set via client_parameters.</span>
<span class="sd">        The list of available parameters is defined in the service clients</span>
<span class="sd">        interfaces. For reference, most clients will accept &#39;region&#39;,</span>
<span class="sd">        &#39;service&#39;, &#39;endpoint_type&#39;, &#39;build_timeout&#39; and &#39;build_interval&#39;, which</span>
<span class="sd">        are all inherited from RestClient.</span>

<span class="sd">        The `config` module in Tempest exposes an helper function</span>
<span class="sd">        `service_client_config` that can be used to extract from configuration</span>
<span class="sd">        a dictionary ready to be injected in kwargs.</span>

<span class="sd">        Exceptions are:</span>
<span class="sd">        - Token clients for &#39;identity&#39; must be given an &#39;auth_url&#39; parameter</span>
<span class="sd">        - Volume client for &#39;volume&#39; accepts &#39;default_volume_size&#39;</span>
<span class="sd">        - Servers client from &#39;compute&#39; accepts &#39;enable_instance_password&#39;</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; identity_params = config.service_client_config(&#39;identity&#39;)</span>
<span class="sd">            &gt;&gt;&gt; params = {</span>
<span class="sd">            &gt;&gt;&gt;     &#39;identity&#39;: identity_params,</span>
<span class="sd">            &gt;&gt;&gt;     &#39;compute&#39;: {&#39;region&#39;: &#39;region2&#39;}}</span>
<span class="sd">            &gt;&gt;&gt; manager = lib_manager.Manager(</span>
<span class="sd">            &gt;&gt;&gt;     my_creds, identity_uri, client_parameters=params)</span>

<span class="sd">        :param credentials: An instance of `auth.Credentials`</span>
<span class="sd">        :param identity_uri: URI of the identity API. This should be a</span>
<span class="sd">                             mandatory parameter, and it will so soon.</span>
<span class="sd">        :param region: Default value of region for service clients.</span>
<span class="sd">        :param scope: default scope for tokens produced by the auth provider</span>
<span class="sd">        :param disable_ssl_certificate_validation: Applies to auth and to all</span>
<span class="sd">                                                  service clients.</span>
<span class="sd">        :param ca_certs: Applies to auth and to all service clients.</span>
<span class="sd">        :param trace_requests: Applies to auth and to all service clients.</span>
<span class="sd">        :param client_parameters: Dictionary with parameters for service</span>
<span class="sd">            clients. Keys of the dictionary are the service client service</span>
<span class="sd">            name, as declared in `service_clients.available_modules()` except</span>
<span class="sd">            for the version. Values are dictionaries of parameters that are</span>
<span class="sd">            going to be passed to all clients in the service client module.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; params_service_x = {&#39;param_name&#39;: &#39;param_value&#39;}</span>
<span class="sd">            &gt;&gt;&gt; client_parameters = { &#39;service_x&#39;: params_service_x }</span>

<span class="sd">            &gt;&gt;&gt; params_service_y = config.service_client_config(&#39;service_y&#39;)</span>
<span class="sd">            &gt;&gt;&gt; client_parameters[&#39;service_y&#39;] = params_service_y</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_services</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span> <span class="o">=</span> <span class="n">credentials</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identity_uri</span> <span class="o">=</span> <span class="n">identity_uri</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">identity_uri</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">InvalidCredentials</span><span class="p">(</span>
                <span class="s1">&#39;ServiceClients requires a non-empty identity_uri.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">region</span> <span class="o">=</span> <span class="n">region</span>
        <span class="c1"># Check if passed or default credentials are valid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">InvalidCredentials</span><span class="p">()</span>
        <span class="c1"># Get the identity classes matching the provided credentials</span>
        <span class="c1"># TODO(andreaf) Define a new interface in Credentials to get</span>
        <span class="c1"># the API version from an instance</span>
        <span class="n">identity</span> <span class="o">=</span> <span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="n">auth</span><span class="o">.</span><span class="n">IDENTITY_VERSION</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span>
                    <span class="n">auth</span><span class="o">.</span><span class="n">IDENTITY_VERSION</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span>
                    <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">,</span> <span class="n">auth</span><span class="o">.</span><span class="n">IDENTITY_VERSION</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">])]</span>
        <span class="c1"># Zero matches or more than one are both not valid.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">identity</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">InvalidCredentials</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auth_version</span><span class="p">,</span> <span class="n">auth_provider_class</span> <span class="o">=</span> <span class="n">identity</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dscv</span> <span class="o">=</span> <span class="n">disable_ssl_certificate_validation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span> <span class="o">=</span> <span class="n">ca_certs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_requests</span> <span class="o">=</span> <span class="n">trace_requests</span>
        <span class="c1"># Creates an auth provider for the credentials</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auth_provider</span> <span class="o">=</span> <span class="n">auth_provider_class</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">credentials</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identity_uri</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">scope</span><span class="p">,</span>
            <span class="n">disable_ssl_certificate_validation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dscv</span><span class="p">,</span>
            <span class="n">ca_certs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span><span class="p">,</span> <span class="n">trace_requests</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">trace_requests</span><span class="p">)</span>
        <span class="c1"># Setup some defaults for client parameters of registered services</span>
        <span class="n">client_parameters</span> <span class="o">=</span> <span class="n">client_parameters</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Parameters are provided for unversioned services</span>
        <span class="n">all_modules</span> <span class="o">=</span> <span class="n">available_modules</span><span class="p">()</span> <span class="o">|</span> <span class="n">_tempest_internal_modules</span><span class="p">()</span>
        <span class="n">unversioned_services</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_modules</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="n">unversioned_services</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">service</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_setup_parameters</span><span class="p">(</span>
                <span class="n">client_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="p">{}))</span>
        <span class="c1"># Check that no client parameters was supplied for unregistered clients</span>
        <span class="k">if</span> <span class="n">client_parameters</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">UnknownServiceClient</span><span class="p">(</span>
                <span class="n">services</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">client_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

        <span class="c1"># Register service clients from the registry (__tempest__ and plugins)</span>
        <span class="n">clients_registry</span> <span class="o">=</span> <span class="n">ClientsRegistry</span><span class="p">()</span>
        <span class="n">plugin_service_clients</span> <span class="o">=</span> <span class="n">clients_registry</span><span class="o">.</span><span class="n">get_service_clients</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">plugin_service_clients</span><span class="p">:</span>
            <span class="n">service_clients</span> <span class="o">=</span> <span class="n">plugin_service_clients</span><span class="p">[</span><span class="n">plugin</span><span class="p">]</span>
            <span class="c1"># Each plugin returns a list of service client parameters</span>
            <span class="k">for</span> <span class="n">service_client</span> <span class="ow">in</span> <span class="n">service_clients</span><span class="p">:</span>
                <span class="c1"># NOTE(andreaf) If a plugin cannot register, stop the</span>
                <span class="c1"># registration process, log some details to help</span>
                <span class="c1"># troubleshooting, and re-raise</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">register_service_client_module</span><span class="p">(</span><span class="o">**</span><span class="n">service_client</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                        <span class="s1">&#39;Failed to register service client from plugin </span><span class="si">%s</span><span class="s1"> &#39;</span>
                        <span class="s1">&#39;with parameters </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">service_client</span><span class="p">)</span>
                    <span class="k">raise</span>

<div class="viewcode-block" id="ServiceClients.register_service_client_module"><a class="viewcode-back" href="../../../../library/clients.html#tempest.lib.services.clients.ServiceClients.register_service_client_module">[docs]</a>    <span class="k">def</span> <span class="nf">register_service_client_module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">service_version</span><span class="p">,</span>
                                       <span class="n">module_path</span><span class="p">,</span> <span class="n">client_names</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register a service client module</span>

<span class="sd">        Initiates a client factory for the specified module, using this</span>
<span class="sd">        class auth_provider, and accessible via a `name` attribute in the</span>
<span class="sd">        service client.</span>

<span class="sd">        :param name: Name used to access the client</span>
<span class="sd">        :param service_version: Name of the service complete with version.</span>
<span class="sd">            Used to track registered services. When a plugin implements it,</span>
<span class="sd">            it can be used by other plugins to obtain their configuration.</span>
<span class="sd">        :param module_path: Path to module that includes all service clients.</span>
<span class="sd">            All service client classes must be exposed by a single module.</span>
<span class="sd">            If they are separated in different modules, defining __all__</span>
<span class="sd">            in the root module can help, similar to what is done by service</span>
<span class="sd">            clients in tempest.</span>
<span class="sd">        :param client_names: List or set of names of service client classes.</span>
<span class="sd">        :param kwargs: Extra optional parameters to be passed to all clients.</span>
<span class="sd">            ServiceClient provides defaults for region, dscv, ca_certs and</span>
<span class="sd">            trace_requests.</span>
<span class="sd">        :raise ServiceClientRegistrationException: if the provided name is</span>
<span class="sd">            already in use or if service_version is already registered.</span>
<span class="sd">        :raise ImportError: if module_path cannot be imported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="n">using_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">detailed_error</span> <span class="o">=</span> <span class="s1">&#39;Module name already in use: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">using_name</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">ServiceClientRegistrationException</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">service_version</span><span class="o">=</span><span class="n">service_version</span><span class="p">,</span>
                <span class="n">module_path</span><span class="o">=</span><span class="n">module_path</span><span class="p">,</span> <span class="n">client_names</span><span class="o">=</span><span class="n">client_names</span><span class="p">,</span>
                <span class="n">detailed_error</span><span class="o">=</span><span class="n">detailed_error</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">service_version</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">registered_services</span><span class="p">:</span>
            <span class="n">detailed_error</span> <span class="o">=</span> <span class="s1">&#39;Service </span><span class="si">%s</span><span class="s1"> already registered.&#39;</span> <span class="o">%</span> <span class="n">service_version</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">ServiceClientRegistrationException</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">service_version</span><span class="o">=</span><span class="n">service_version</span><span class="p">,</span>
                <span class="n">module_path</span><span class="o">=</span><span class="n">module_path</span><span class="p">,</span> <span class="n">client_names</span><span class="o">=</span><span class="n">client_names</span><span class="p">,</span>
                <span class="n">detailed_error</span><span class="o">=</span><span class="n">detailed_error</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                      <span class="n">disable_ssl_certificate_validation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dscv</span><span class="p">,</span>
                      <span class="n">ca_certs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span><span class="p">,</span>
                      <span class="n">trace_requests</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">trace_requests</span><span class="p">)</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># Instantiate the client factory</span>
        <span class="n">_factory</span> <span class="o">=</span> <span class="n">ClientsFactory</span><span class="p">(</span><span class="n">module_path</span><span class="o">=</span><span class="n">module_path</span><span class="p">,</span>
                                  <span class="n">client_names</span><span class="o">=</span><span class="n">client_names</span><span class="p">,</span>
                                  <span class="n">auth_provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth_provider</span><span class="p">,</span>
                                  <span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="c1"># Adds the client factory to the service_client</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">_factory</span><span class="p">)</span>
        <span class="c1"># Add the name of the new service in self.SERVICES for discovery</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_registered_services</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">service_version</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">registered_services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># NOTE(andreaf) Once all tempest modules are stable this needs to</span>
        <span class="c1"># be updated to remove _tempest_internal_modules</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registered_services</span> <span class="o">|</span> <span class="n">_tempest_internal_modules</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setup_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Setup default values for client parameters</span>

<span class="sd">        Region by default is the region passed as an __init__ parameter.</span>
<span class="sd">        Checks that no parameter for an unknown service is provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_parameters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Use region from __init__</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">:</span>
            <span class="n">_parameters</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="c1"># Update defaults with specified parameters</span>
        <span class="n">_parameters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="c1"># If any parameter is left, parameters for an unknown service were</span>
        <span class="c1"># provided as input. Fail rather than ignore silently.</span>
        <span class="k">return</span> <span class="n">_parameters</span></div>
</pre></div>

          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/tempest
"
                     rel="nofollow">Project Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">Tempest 14.0.1.dev239 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2013, OpenStack QA Team.
      Last updated on &#39;Wed Feb 15 06:42:15 2017, commit ee84e39&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/Tempest");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>