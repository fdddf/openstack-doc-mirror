<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>REST API Usage &#8212; gnocchi 3.1.1.dev12 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.1.1.dev12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/gnocchi-logo.jpg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Statsd Daemon Usage" href="statsd.html" />
    <link rel="prev" title="Client" href="client.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="rest-api-usage">
<h1>REST API Usage<a class="headerlink" href="#rest-api-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>By default, the authentication is configured to the &#8220;basic&#8221; mode. You need to
provide an <a href="#id1"><span class="problematic" id="id2">`</span></a>Authorization&#8217; header in your HTTP requests with a valid username
(the password is not used). The &#8220;admin&#8221; password is granted all privileges,
whereas any other username is recognize as having standard permissions.</p>
<p>You can customize permissions by specifying a different <cite>policy_file</cite> than the
default one.</p>
<p>If you set the <cite>api.auth_mode</cite> value to <cite>keystone</cite>, the OpenStack Keystone
middleware will be enabled for authentication. It is then needed to
authenticate against Keystone and provide a <cite>X-Auth-Token</cite> header with a valid
token for each request sent to Gnocchi&#8217;s API.</p>
</div>
<div class="section" id="metrics">
<h2>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h2>
<p>Gnocchi provides an object type that is called <em>metric</em>. A metric designates
any thing that can be measured: the CPU usage of a server, the temperature of a
room or the number of bytes sent by a network interface.</p>
<p>A metric only has a few properties: a UUID to identify it, a name, the archive
policy that will be used to store and aggregate the measures.</p>
<p>To create a metric, the following API request should be used:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/metric</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">35</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">206</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;resource_id&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Once created, you can retrieve the metric information:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">532</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">10080</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;7 days, 0:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">8760</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;365 days, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;resource&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>To retrieve the list of all the metrics created, use the following request:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1071</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;archive_policy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:05:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;30 days, 0:00:00&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1c49cb06-29dc-448e-90a1-a181f2c742b1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;resource_id&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;archive_policy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">10080</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;7 days, 0:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">8760</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;365 days, 0:00:00&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;resource_id&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Considering the large volume of metrics Gnocchi will store, query results are
limited to <cite>max_limit</cite> value set in the configuration file. Returned results
are ordered by metrics&#8217; id values. To retrieve the next page of results, the
id of a metric should be given as <cite>marker</cite> for the beginning of the next page
of results.</p>
</div>
<p>Default ordering and limits as well as page start can be modified
using query parameters:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric?limit=100&amp;sort=name:asc</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1071</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;archive_policy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:05:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;30 days, 0:00:00&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1c49cb06-29dc-448e-90a1-a181f2c742b1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;resource_id&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;archive_policy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;min&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="s2">&quot;count&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:01:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">10080</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;7 days, 0:00:00&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
          <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">8760</span><span class="p">,</span>
          <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;365 days, 0:00:00&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;resource_id&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;unit&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It is possible to send measures to the metric:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">198</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:33:57&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">43.1</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">12</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/html; charset=UTF-8</span>
</pre></div>
</div>
</div></blockquote>
<p>If there are no errors, Gnocchi does not return a response body, only a simple
status code. It is possible to provide any number of measures.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">While it is possible to send any number of (timestamp, value), it is still
needed to honor constraints defined by the archive policy used by the metric,
such as the maximum timespan.</p>
</div>
<p>Once measures are sent, it is possible to retrieve them using <em>GET</em> on the same
endpoint:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">297</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">3600.0</span><span class="p">,</span>
    <span class="mf">19.033333333333335</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">7.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Depending on the driver, there may be some lag after POSTing measures before
they are processed and queryable. To ensure your query returns all measures
that have been POSTed, you can force any unprocessed measures to be handled:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures?refresh=true</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">297</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">3600.0</span><span class="p">,</span>
    <span class="mf">19.033333333333335</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">7.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on the amount of data that is unprocessed, <cite>refresh</cite> may add
some overhead to your query.</p>
</div>
<p>The list of points returned is composed of tuples with (timestamp, granularity,
value) sorted by timestamp. The granularity is the timespan covered by
aggregation for this point.</p>
<p>It is possible to filter the measures over a time range by specifying the
<em>start</em> and/or <em>stop</em> parameters to the query with timestamp. The timestamp
format can be either a floating number (UNIX epoch) or an ISO8601 formated
timestamp:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures?start=2014-10-06T14:34</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">184</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">3600.0</span><span class="p">,</span>
    <span class="mf">19.033333333333335</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">7.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>By default, the aggregated values that are returned use the <em>mean</em> aggregation
method. It is possible to request for any other method by specifying the
<em>aggregation</em> query parameter:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures?aggregation=max</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">298</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">3600.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The list of aggregation method available is: <em>mean</em>, <em>sum</em>, <em>last</em>, <em>max</em>,
<em>min</em>, <em>std</em>, <em>median</em>, <em>first</em>, <em>count</em> and <em>Npct</em> (with 0 &lt; N &lt; 100).</p>
<p>It&#8217;s possible to provide the <cite>granularity</cite> argument to specify the granularity
to retrieve, rather than all the granularities available:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures?granularity=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">139</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>In addition to granularities defined by the archive policy, measures can be
resampled to a new granularity.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/metric/daeb22ee-e7fc-4047-ba4d-e671b40b6eba/measures?resample=5&amp;granularity=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">139</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:55+00:00&quot;</span><span class="p">,</span>
    <span class="mf">5.0</span><span class="p">,</span>
    <span class="mf">43.1</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:10+00:00&quot;</span><span class="p">,</span>
    <span class="mf">5.0</span><span class="p">,</span>
    <span class="mf">12.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">5.0</span><span class="p">,</span>
    <span class="mf">2.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on the aggregation method and frequency of measures, resampled
data may lack accuracy as it is working against previously aggregated data.</p>
</div>
</div>
<div class="section" id="measures-batching">
<h2>Measures batching<a class="headerlink" href="#measures-batching" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to batch measures sending, i.e. send several measures for
different metrics in a simple call:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/batch/metrics/measures</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">391</span>

<span class="p">{</span>
  <span class="nt">&quot;1c49cb06-29dc-448e-90a1-a181f2c742b1&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T16:12:12&quot;</span><span class="p">,</span>
      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">3</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T18:14:52&quot;</span><span class="p">,</span>
      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">4</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">12</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
      <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/html; charset=UTF-8</span>
</pre></div>
</div>
</div></blockquote>
<p>Or using named metrics of resources:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/batch/resources/metrics/measures</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">585</span>

<span class="p">{</span>
  <span class="nt">&quot;15e9c872-7ca9-11e4-a2da-2fb4032dfc09&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">12</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;6f24edd9-5a2f-4592-b708-ffbed821c5d2&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">6</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">25</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">17</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">18</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">4</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="kc">null</span>
</pre></div>
</div>
</div></blockquote>
<p>If some named metrics specified in the batch request do not exist, Gnocchi can
try to create them as long as an archive policy rule matches:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/batch/resources/metrics/measures?create_metrics=true</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">200</span>

<span class="p">{</span>
  <span class="nt">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;disk.io.test&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:12&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">71</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-10-06T14:34:20&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">81</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">4</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="kc">null</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="archive-policy">
<h2>Archive Policy<a class="headerlink" href="#archive-policy" title="Permalink to this headline">¶</a></h2>
<p>When sending measures for a metric to Gnocchi, the values are dynamically
aggregated. That means that Gnocchi does not store all sent measures, but
aggregates them over a certain period of time. Gnocchi provides several
aggregation methods (mean, min, max, sum…) that are builtin.</p>
<p>An archive policy is defined by a list of items in the <cite>definition</cite> field. Each
item is composed of the timespan and the level of precision that must be kept
when aggregating data, determined using at least 2 of the <cite>points</cite>,
<cite>granularity</cite> and <cite>timespan</cite> fields. For example, an item might be defined
as 12 points over 1 hour (one point every 5 minutes), or 1 point every 1 hour
over 1 day (24 points).</p>
<p>By default, new measures can only be processed if they have timestamps in the
future or part of the last aggregation period. The last aggregation period size
is based on the largest granularity defined in the archive policy definition.
To allow processing measures that are older than the period, the <cite>back_window</cite>
parameter can be used to set the number of coarsest periods to keep. That way
it is possible to process measures that are older than the last timestamp
period boundary.</p>
<p>For example, if an archive policy is defined with coarsest aggregation of 1
hour, and the last point processed has a timestamp of 14:34, it&#8217;s possible to
process measures back to 14:00 with a <cite>back_window</cite> of 0. If the <cite>back_window</cite>
is set to 2, it will be possible to send measures with timestamp back to 12:00
(14:00 minus 2 times 1 hour).</p>
<p>The REST API allows to create archive policies in this way:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/archive_policy</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">189</span>

<span class="p">{</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1s&quot;</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 hour&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/archive_policy/short</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">260</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>By default, the aggregation methods computed and stored are the ones defined
with <cite>default_aggregation_methods</cite> in the configuration file. It is possible to
change the aggregation methods used in an archive policy by specifying the list
of aggregation method to use in the <cite>aggregation_methods</cite> attribute of an
archive policy.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/archive_policy</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">244</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;-max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;-min&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1s&quot;</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 hour&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short-without-max&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/archive_policy/short-without-max</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">258</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short-without-max&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The list of aggregation methods can either be:</p>
<ul class="simple">
<li>a list of aggregation methods to use, e.g. <cite>[&#8220;mean&#8221;, &#8220;max&#8221;]</cite></li>
<li>a list of methods to remove (prefixed by <cite>-</cite>) and/or to add (prefixed by <cite>+</cite>)
to the default list (e.g. <cite>[&#8220;+mean&#8221;, &#8220;-last&#8221;]</cite>)</li>
</ul>
<p>If <cite>*</cite> is included in the list, it&#8217;s substituted by the list of all supported
aggregation methods.</p>
<p>Once the archive policy is created, the complete set of properties is computed
and returned, with the URL of the archive policy. This URL can be used to
retrieve the details of the archive policy later:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/archive_policy/short</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">260</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also possible to list archive policies:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/archive_policy</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1772</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:02&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;2 days, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;no_granularity_match&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:05:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;30 days, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">10080</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;7 days, 0:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">8760</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;365 days, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:01:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">1440</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">168</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;7 days, 0:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;365 days, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;max&quot;</span><span class="p">,</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span><span class="p">,</span>
      <span class="s2">&quot;min&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
      <span class="s2">&quot;count&quot;</span><span class="p">,</span>
      <span class="s2">&quot;std&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
        <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
        <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short-without-max&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Existing archive policies can be modified to retain more or less data depending
on requirements. If the policy coverage is expanded, measures are not
retroactively calculated as backfill to accommodate the new timespan:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/v1/archive_policy/short</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">150</span>

<span class="p">{</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;1s&quot;</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 hour&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">260</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;back_window&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:00:01&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1:00:00&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;granularity&quot;</span><span class="p">:</span> <span class="s2">&quot;0:30:00&quot;</span><span class="p">,</span>
      <span class="nt">&quot;points&quot;</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span>
      <span class="nt">&quot;timespan&quot;</span><span class="p">:</span> <span class="s2">&quot;1 day, 0:00:00&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Granularities cannot be changed to a different rate. Also, granularities
cannot be added or dropped from a policy.</p>
</div>
<p>It is possible to delete an archive policy if it is not used by any metric:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/archive_policy/some-archive-policy</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An archive policy cannot be deleted until all metrics associated with it
are removed by a metricd daemon.</p>
</div>
</div>
<div class="section" id="archive-policy-rule">
<h2>Archive Policy Rule<a class="headerlink" href="#archive-policy-rule" title="Permalink to this headline">¶</a></h2>
<p>Gnocchi provides the ability to define a mapping called <cite>archive_policy_rule</cite>.
An archive policy rule defines a mapping between a metric and an archive policy.
This gives users the ability to pre-define rules so an archive policy is assigned to
metrics based on a matched pattern.</p>
<p>An archive policy rule has a few properties: a name to identify it, an archive
policy name that will be used to store the policy name and metric pattern to
match metric names.</p>
<p>An archive policy rule for example could be a mapping to default a medium archive
policy for any volume metric with a pattern matching <cite>volume.*</cite>. When a sample metric
is posted with a name of <cite>volume.size</cite>, that would match the pattern and the
rule applies and sets the archive policy to medium. If multiple rules match,
the longest matching rule is taken. For example, if two rules exists which
match <cite>*</cite> and <cite>disk.*</cite>, a <cite>disk.io.rate</cite> metric would match the <cite>disk.*</cite> rule
rather than <cite>*</cite> rule.</p>
<p>To create a rule, the following API request should be used:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/archive_policy_rule</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">90</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metric_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;disk.io.*&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_rule&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/archive_policy_rule/test_rule</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">82</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metric_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;disk.io.*&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_rule&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The <cite>metric_pattern</cite> is used to pattern match so as some examples,</p>
<ul class="simple">
<li><cite>*</cite> matches anything</li>
<li><cite>disk.*</cite> matches disk.io</li>
<li><cite>disk.io.*</cite> matches disk.io.rate</li>
</ul>
<p>Once created, you can retrieve the rule information:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/archive_policy_rule/test_rule</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">82</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metric_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;disk.io.*&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_rule&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also possible to list archive policy rules. The result set is ordered by
the <cite>metric_pattern</cite>, in reverse alphabetical order:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/archive_policy_rule</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">84</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metric_pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;disk.io.*&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test_rule&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It is possible to delete an archive policy rule:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/archive_policy_rule/test_rule_delete</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<p>Gnocchi provides the ability to store and index resources. Each resource has a
type. The basic type of resources is <em>generic</em>, but more specialized subtypes
also exist, especially to describe OpenStack resources.</p>
<p>The REST API allows to manipulate resources. To create a generic resource:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/generic</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">159</span>

<span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource/generic/75c44741-cc60-4033-804e-2d3098c7d2e9</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;7aff40fe6edfbc66a3884dca627a2c32397d2039&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:14 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">473</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The <em>id</em>, <em>user_id</em> and <em>project_id</em> attributes must be UUID. The timestamp
describing the lifespan of the resource are optional, and <em>started_at</em> is by
default set to the current timestamp.</p>
<p>It&#8217;s possible to retrieve the resource by the URL provided in the <cite>Location</cite>
header.</p>
<p>More specialized resources can be created. For example, the <em>instance</em> is used
to describe an OpenStack instance as managed by <a class="reference external" href="http://launchpad.net/nova">Nova</a>.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">351</span>

<span class="p">{</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04 10:00:12&quot;</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02 23:23:34&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource/instance/6868da77-fa82-4e67-aba9-270c5ae8cbca</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;c0f369245d7f5b1fdcdfa628f23542d91742d8d0&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:14 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">603</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>All specialized types have their own optional and mandatory attributes,
but they all include attributes from the generic type as well.</p>
<p>It is possible to create metrics at the same time you create a resource to save
some requests:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/generic</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">221</span>

<span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB68DA77-FA82-4E67-ABA9-270C5A98CBCB&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource/generic/ab68da77-fa82-4e67-aba9-270c5a98cbcb</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;bf220f48e19ac185711bb52b52e698fe12a644a6&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:14 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">526</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="s2">&quot;7738a090-4e15-419a-b3db-fbfa6eeb35a3&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB68DA77-FA82-4E67-ABA9-270C5A98CBCB&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361171+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361158+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>To retrieve a resource by its URL provided by the <cite>Location</cite> header at creation
time:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/generic/75c44741-cc60-4033-804e-2d3098c7d2e9</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;7aff40fe6edfbc66a3884dca627a2c32397d2039&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:14 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">473</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>It&#8217;s possible to modify a resource by re-uploading it partially with the
modified fields:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/v1/resource/instance/6868da77-fa82-4e67-aba9-270c5ae8cbca</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">20</span>

<span class="p">{</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;e21ae27213383e023cd66a5e5df1b3bb83544317&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:14 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">603</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>And to retrieve its modification history:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/instance/6868da77-fa82-4e67-aba9-270c5ae8cbca/history</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1240</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It is possible to delete a resource altogether:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/resource/generic/75c44741-cc60-4033-804e-2d3098c7d2e9</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also possible to delete a batch of resources based on attribute values, and
returns a number of deleted resources.</p>
<p>To delete resources based on ids:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/resource/generic</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">172</span>

<span class="p">{</span>
  <span class="nt">&quot;in&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;3cbcca4f-af46-5285-b7f7-951affcb4772&quot;</span><span class="p">,</span>
      <span class="s2">&quot;8a1bfad0-8a51-52ce-938b-c82cd028e91e&quot;</span><span class="p">,</span>
      <span class="s2">&quot;4f46cf43-784d-5e77-9d66-acb2c23ac5b4&quot;</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">14</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;deleted&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>or delete resources based on time:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/resource/generic</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">62</span>

<span class="p">{</span>
  <span class="nt">&quot;&gt;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:15.492629+00:00&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">14</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;deleted&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>When a resource is deleted, all its associated metrics are deleted at the
same time.</p>
<p class="last">When a batch of resources are deleted, an attribute filter is required to
avoid deletion of the entire database.</p>
</div>
<p>All resources can be listed, either by using the <cite>generic</cite> type that will list
all types of resources, or by filtering on their resource type:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/generic</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1495</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="s2">&quot;7738a090-4e15-419a-b3db-fbfa6eeb35a3&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB68DA77-FA82-4E67-ABA9-270C5A98CBCB&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361171+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361158+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>No attributes specific to the resource type are retrieved when using the
<cite>generic</cite> endpoint. To retrieve the details, either list using the specific
resource type endpoint:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">605</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>or using <cite>details=true</cite> in the query parameter:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/generic?details=true</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1608</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="s2">&quot;7738a090-4e15-419a-b3db-fbfa6eeb35a3&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB68DA77-FA82-4E67-ABA9-270C5A98CBCB&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361171+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361158+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Similar to metric list, query results are limited to <cite>max_limit</cite> value set in
the configuration file.</p>
</div>
<p>Returned results represent a single page of data and are ordered by resouces&#8217;
revision_start time and started_at values:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/generic?limit=2&amp;sort=id:asc</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">967</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Each resource can be linked to any number of metrics. The <cite>metrics</cite> attributes
is a key/value field where the key is the name of the relationship and
the value is a metric:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">368</span>

<span class="p">{</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6F24EDD9-5A2F-4592-B708-FFBED821C5D2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource/instance/6f24edd9-5a2f-4592-b708-ffbed821c5d2</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;15c01dedb5dec5745a76ca13af9fbd5b2dc3872e&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:15 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">656</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6f24edd9-5a2f-4592-b708-ffbed821c5d2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="s2">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6F24EDD9-5A2F-4592-B708-FFBED821C5D2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:15.101086+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:15.101070+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>It&#8217;s also possible to create metrics dynamically while creating a resource:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">362</span>

<span class="p">{</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm3&quot;</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;15e9c872-7ca9-11e4-a2da-2fb4032dfc09&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource/instance/15e9c872-7ca9-11e4-a2da-2fb4032dfc09</span>
<span class="na">ETag</span><span class="o">:</span> <span class="l">&quot;bb6a0179b96394bd4bb5a33e1d20b12be5c6c0ff&quot;</span>
<span class="na">Last-Modified</span><span class="o">:</span> <span class="l">Tue, 14 Feb 2017 03:36:15 GMT</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">656</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
  <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm3&quot;</span><span class="p">,</span>
  <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;15e9c872-7ca9-11e4-a2da-2fb4032dfc09&quot;</span><span class="p">,</span>
  <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
  <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cpu.util&quot;</span><span class="p">:</span> <span class="s2">&quot;1ebbe8f3-25e2-4edc-8b13-e615e69b6d5d&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;15e9c872-7ca9-11e4-a2da-2fb4032dfc09&quot;</span><span class="p">,</span>
  <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
  <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:15.124970+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span><span class="p">,</span>
  <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:15.124956+00:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The metric associated with a resource can be accessed and manipulated using the
usual <cite>/v1/metric</cite> endpoint or using the named relationship with the resource:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource/generic/6f24edd9-5a2f-4592-b708-ffbed821c5d2/metric/cpu.util/measures?start=2014-10-06T14:34</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">185</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">3600.0</span><span class="p">,</span>
    <span class="mf">24.7</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
    <span class="mf">60.0</span><span class="p">,</span>
    <span class="mf">15.5</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">6.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">25.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The same endpoint can be used to append metrics to a resource:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource/generic/6f24edd9-5a2f-4592-b708-ffbed821c5d2/metric</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">42</span>

<span class="p">{</span>
  <span class="nt">&quot;memory&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;archive_policy_name&quot;</span><span class="p">:</span> <span class="s2">&quot;low&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="resource-types">
<h2>Resource Types<a class="headerlink" href="#resource-types" title="Permalink to this headline">¶</a></h2>
<p>Gnocchi is able to manage resource types with custom attributes.</p>
<p>To create a new resource type:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/resource_type</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">360</span>

<span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;myid&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mf">32.8</span><span class="p">,</span>
      <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_type&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="o">:</span> <span class="l">http://localhost/v1/resource_type/my_custom_type</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">395</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;myid&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mf">32.8</span><span class="p">,</span>
      <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_type&quot;</span><span class="p">,</span>
  <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Then to retrieve its description:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource_type/my_custom_type</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">395</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;myid&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mf">32.8</span><span class="p">,</span>
      <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_type&quot;</span><span class="p">,</span>
  <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>All resource types can be listed like this:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/resource_type</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1013</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;myid&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;prefix&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mf">32.8</span><span class="p">,</span>
        <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_type&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_other_type&quot;</span><span class="p">,</span>
    <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It can also be deleted if no more resources are associated to it:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/v1/resource_type/my_custom_type</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
</div></blockquote>
<p>Attributes can be added or removed:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/v1/resource_type/my_custom_type</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json-patch+json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">372</span>

<span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/attributes/awesome-stuff&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">}</span>
     <span class="p">},</span>
     <span class="p">{</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/attributes/required-stuff&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;fill&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">}}</span>
     <span class="p">},</span>
     <span class="p">{</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/attributes/prefix&quot;</span>
     <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">420</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;awesome-stuff&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max_length&quot;</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span>
      <span class="nt">&quot;min_length&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;myid&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;required-stuff&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;max&quot;</span><span class="p">:</span> <span class="mf">32.8</span><span class="p">,</span>
      <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my_custom_type&quot;</span><span class="p">,</span>
  <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Creating resource type means creation of new tables on the indexer backend.
This is heavy operation that will lock some tables for a short amount of times.
When the resource type is created, its initial <cite>state</cite> is <cite>creating</cite>. When the
new tables have been created, the state switches to <cite>active</cite> and the new
resource type is ready to be used. If something unexpected occurs during this
step, the state switches to <cite>creation_error</cite>.</p>
<p>The same behavior occurs when the resource type is deleted. The state starts to
switch to <cite>deleting</cite>, the resource type is no more usable. Then the tables are
removed and the finally the resource_type is really deleted from the database.
If some unexpected occurs the state switches to <cite>deletion_error</cite>.</p>
</div>
<div class="section" id="searching-for-resources">
<h2>Searching for resources<a class="headerlink" href="#searching-for-resources" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s possible to search for resources using a query mechanism, using the
<cite>POST</cite> method and uploading a JSON formatted query.</p>
<p>When listing resources, it is possible to filter resources based on attributes
values:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">58</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">605</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Or even:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">30</span>

<span class="p">{</span>
  <span class="nt">&quot;like&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute%&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">605</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Complex operators such as <cite>and</cite> and <cite>or</cite> are also available:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">113</span>

<span class="p">{</span>
  <span class="nt">&quot;and&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;&gt;=&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2010-01-01&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">605</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Details about the resource can also be retrieved at the same time:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/generic?details=true</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">58</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1608</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;75c44741-cc60-4033-804e-2d3098c7d2e9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;75C44741-CC60-4033-804E-2D3098C7D2E9&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345127+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.345108+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab68da77-fa82-4e67-aba9-270c5a98cbcb&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;temperature&quot;</span><span class="p">:</span> <span class="s2">&quot;7738a090-4e15-419a-b3db-fbfa6eeb35a3&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB68DA77-FA82-4E67-ABA9-270C5A98CBCB&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361171+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.361158+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It&#8217;s possible to search for old revisions of resources in the same ways:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance?history=true</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">53</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1240</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It is also possible to send the <em>history</em> parameter in the <em>Accept</em> header:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json; history=true</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">53</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1240</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The timerange of the history can be set, too:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json; history=true</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">227</span>

<span class="p">{</span>
  <span class="nt">&quot;and&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;&gt;=&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;or&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;&lt;=&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1224</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.739271+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab0b5802-e79b-4c84-8998-9237f60d9cae&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;AB0B5802-E79B-4C84-8998-9237F60D9CAE&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.706639+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.706625+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The supported operators are: equal to (<cite>=</cite>, <cite>==</cite> or <cite>eq</cite>), less than (<cite>&lt;</cite> or
<cite>lt</cite>), greater than (<cite>&gt;</cite> or <cite>gt</cite>), less than or equal to (<cite>&lt;=</cite>, <cite>le</cite> or <cite>≤</cite>)
greater than or equal to (<cite>&gt;=</cite>, <cite>ge</cite> or <cite>≥</cite>) not equal to (<cite>!=</cite>, <cite>ne</cite> or <cite>≠</cite>),
value is in (<cite>in</cite>), value is like (<cite>like</cite>), or (<cite>or</cite> or <cite>∨</cite>), and (<cite>and</cite> or
<cite>∧</cite>) and negation (<cite>not</cite>).</p>
<p>The special attribute <cite>lifespan</cite> which is equivalent to <cite>ended_at - started_at</cite>
is also available in the filtering queries.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/resource/instance</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">30</span>

<span class="p">{</span>
  <span class="nt">&quot;&gt;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;lifespan&quot;</span><span class="p">:</span> <span class="s2">&quot;30 min&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">605</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;created_by_project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created_by_user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;creator&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;myvm&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ended_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-04T10:00:12+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868da77-fa82-4e67-aba9-270c5ae8cbca&quot;</span><span class="p">,</span>
    <span class="nt">&quot;image_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;http://image&quot;</span><span class="p">,</span>
    <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;original_resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;6868DA77-FA82-4E67-ABA9-270C5AE8CBCA&quot;</span><span class="p">,</span>
    <span class="nt">&quot;project_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span><span class="p">,</span>
    <span class="nt">&quot;revision_end&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;revision_start&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-14T03:36:14.434099+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;started_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-01-02T23:23:34+00:00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;instance&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;BD3A1E52-1C62-44CB-BF04-660BD88CD74D&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="searching-for-values-in-metrics">
<h2>Searching for values in metrics<a class="headerlink" href="#searching-for-values-in-metrics" title="Permalink to this headline">¶</a></h2>
<p>It is possible to search for values in metrics. For example, this will look for
all values that are greater than or equal to 50 if we add 23 to them and that
are not equal to 55. You have to specify the list of metrics to look into by
using the <cite>metric_id</cite> query parameter several times.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/metric?metric_id=daeb22ee-e7fc-4047-ba4d-e671b40b6eba</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">46</span>

<span class="p">{</span>
  <span class="nt">&quot;and&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;&gt;=&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;+&quot;</span><span class="p">:</span> <span class="mi">23</span>
        <span class="p">},</span>
        <span class="mi">50</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;!=&quot;</span><span class="p">:</span> <span class="mi">55</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">155</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;daeb22ee-e7fc-4047-ba4d-e671b40b6eba&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:33:00+00:00&quot;</span><span class="p">,</span>
      <span class="mf">60.0</span><span class="p">,</span>
      <span class="mf">43.1</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">43.1</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>And it is possible to search for values in metrics by using one or multiple
granularities:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/search/metric?metric_id=1d5d61dc-e7ab-45e2-8537-b822bd6f1e56&amp;granularity=1second&amp;granularity=1800s</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">9</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="mi">12</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">381</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;1d5d61dc-e7ab-45e2-8537-b822bd6f1e56&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:30:00+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1800.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:14+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:16+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:18+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:22+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s2">&quot;2014-10-06T14:34:24+00:00&quot;</span><span class="p">,</span>
      <span class="mf">1.0</span><span class="p">,</span>
      <span class="mf">12.0</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>You can specify a time range to look for by specifying the <cite>start</cite> and/or
<cite>stop</cite> query parameter, and the aggregation method to use by specifying the
<cite>aggregation</cite> query parameter.</p>
<p>The supported operators are: equal to (<cite>=</cite>, <cite>==</cite> or <cite>eq</cite>), lesser than (<cite>&lt;</cite> or
<cite>lt</cite>), greater than (<cite>&gt;</cite> or <cite>gt</cite>), less than or equal to (<cite>&lt;=</cite>, <cite>le</cite> or <cite>≤</cite>)
greater than or equal to (<cite>&gt;=</cite>, <cite>ge</cite> or <cite>≥</cite>) not equal to (<cite>!=</cite>, <cite>ne</cite> or <cite>≠</cite>),
addition (<cite>+</cite> or <cite>add</cite>), substraction (<cite>-</cite> or <cite>sub</cite>), multiplication (<cite>*</cite>,
<cite>mul</cite> or <cite>×</cite>), division (<cite>/</cite>, <cite>div</cite> or <cite>÷</cite>). These operations take either one
argument, and in this case the second argument passed is the value, or it.</p>
<p>The operators or (<cite>or</cite> or <cite>∨</cite>), and (<cite>and</cite> or <cite>∧</cite>) and <cite>not</cite> are also
supported, and take a list of arguments as parameters.</p>
</div>
<div class="section" id="aggregation-across-metrics">
<h2>Aggregation across metrics<a class="headerlink" href="#aggregation-across-metrics" title="Permalink to this headline">¶</a></h2>
<p>Gnocchi allows to do on-the-fly aggregation of already aggregated data of
metrics.</p>
<p>It can also be done by providing the list of metrics to aggregate:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/aggregation/metric?metric=daeb22ee-e7fc-4047-ba4d-e671b40b6eba&amp;metric=1ebbe8f3-25e2-4edc-8b13-e615e69b6d5d&amp;start=2014-10-06T14:34&amp;aggregation=mean</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">85</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.25</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">11.6</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This aggregation is done against the aggregates built and updated for
a metric when new measurements are posted in Gnocchi. Therefore, the aggregate
of this already aggregated data may not have sense for certain kind of
aggregation method (e.g. stdev).</p>
</div>
<p>By default, the measures are aggregated using the aggregation method provided,
e.g. you&#8217;ll get a mean of means, or a max of maxs. You can specify what method
to use over the retrieved aggregation by using the <cite>reaggregation</cite> parameter:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/aggregation/metric?metric=daeb22ee-e7fc-4047-ba4d-e671b40b6eba&amp;metric=1ebbe8f3-25e2-4edc-8b13-e615e69b6d5d&amp;aggregation=mean&amp;reaggregation=min</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">123</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">3.5</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">4.5</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">9.0</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It&#8217;s also possible to do that aggregation on metrics linked to resources. In
order to select these resources, the following endpoint accepts a query such as
the one described in <a class="reference internal" href="#searching-for-resources">Searching for resources</a>.</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/aggregation/resource/instance/metric/cpu.util?start=2014-10-06T14:34&amp;aggregation=mean</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">47</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">85</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.25</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">11.6</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>It is possible to group the resource search results by any attribute of the
requested resource type, and the compute the aggregation:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/v1/aggregation/resource/instance/metric/cpu.util?groupby=host&amp;groupby=flavor_id</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">47</span>

<span class="p">{</span>
  <span class="nt">&quot;=&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;server_group&quot;</span><span class="p">:</span> <span class="s2">&quot;my_autoscaling_group&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">596</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;group&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;measures&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:00:00+00:00&quot;</span><span class="p">,</span>
        <span class="mf">3600.0</span><span class="p">,</span>
        <span class="mf">10.833333333333334</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:33:00+00:00&quot;</span><span class="p">,</span>
        <span class="mf">60.0</span><span class="p">,</span>
        <span class="mf">3.5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:34:00+00:00&quot;</span><span class="p">,</span>
        <span class="mf">60.0</span><span class="p">,</span>
        <span class="mf">14.5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">3.5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">20.0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">9.0</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;group&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;flavor_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;compute2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;measures&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:30:00+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1800.0</span><span class="p">,</span>
        <span class="mf">14.6</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">25.1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">4.5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">14.2</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Similar to retrieving measures for a single metric, the <cite>refresh</cite> parameter
can be provided to force all POSTed measures to be processed across all
metrics before computing the result. The <cite>resample</cite> parameter may be used as
well.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Resampling is done prior to any reaggregation if both parameters are
specified.</p>
</div>
<p>Also, aggregation across metrics have different behavior depending
on whether boundary values are set (&#8216;start&#8217; and &#8216;stop&#8217;) and if &#8216;needed_overlap&#8217;
is set.</p>
<p>If boundaries are not set, Gnocchi makes the aggregation only with points
at timestamp present in all timeseries. When boundaries are set, Gnocchi
expects that we have certain percent of timestamps common between timeseries,
this percent is controlled by needed_overlap (defaulted with 100%). If this
percent is not reached an error is returned.</p>
<p>The ability to fill in points missing from a subset of timeseries is supported
by specifying a <cite>fill</cite> value. Valid fill values include any valid float or
<cite>null</cite> which will compute aggregation with only the points that exist. The
<cite>fill</cite> parameter will not backfill timestamps which contain no points in any
of the timeseries. Only timestamps which have datapoints in at least one of
the timeseries is returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A granularity must be specified when using the <cite>fill</cite> parameter.</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/aggregation/metric?metric=daeb22ee-e7fc-4047-ba4d-e671b40b6eba&amp;metric=1ebbe8f3-25e2-4edc-8b13-e615e69b6d5d&amp;fill=0&amp;granularity=1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="last highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">141</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:33:57+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">14.3</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:12+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">12.25</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="s2">&quot;2014-10-06T14:34:20+00:00&quot;</span><span class="p">,</span>
    <span class="mf">1.0</span><span class="p">,</span>
    <span class="mf">11.6</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="capabilities">
<h2>Capabilities<a class="headerlink" href="#capabilities" title="Permalink to this headline">¶</a></h2>
<p>The list aggregation methods that can be used in Gnocchi are extendable and
can differ between deployments. It is possible to get the supported list of
aggregation methods from the API server:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/capabilities</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">1030</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;91pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;80pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;46pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;52pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;12pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;61pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;8pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;14pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;43pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;first&quot;</span><span class="p">,</span>
    <span class="s2">&quot;76pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;41pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;71pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;50pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;22pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;57pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;last&quot;</span><span class="p">,</span>
    <span class="s2">&quot;85pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;53pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;83pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;73pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;5pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;15pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;30pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="s2">&quot;78pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;42pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;79pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;92pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;36pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;13pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;18pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;7pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;81pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;29pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;4pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;90pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;77pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;62pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;47pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;17pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;3pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;6pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;37pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;75pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;74pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;60pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;70pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;44pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;69pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;23pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;39pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;1pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;49pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;25pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;9pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;max&quot;</span><span class="p">,</span>
    <span class="s2">&quot;86pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;34pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;88pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;96pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;32pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;64pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;45pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;65pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;94pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;24pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;28pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;66pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;59pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;93pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;19pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;63pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;33pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;16pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;35pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min&quot;</span><span class="p">,</span>
    <span class="s2">&quot;38pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;10pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;51pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;40pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;27pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;72pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;21pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;95pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;99pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;54pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;82pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;84pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;56pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;89pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;31pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;87pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;11pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;58pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;48pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;median&quot;</span><span class="p">,</span>
    <span class="s2">&quot;68pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;98pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;20pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;26pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;55pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;97pct&quot;</span><span class="p">,</span>
    <span class="s2">&quot;67pct&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;dynamic_aggregation_methods&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;moving-average&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="status">
<h2>Status<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<p>The overall status of the Gnocchi installation can be retrieved via an API call
reporting values such as the number of new measures to process for each metric:</p>
<blockquote>
<div><div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/v1/status</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">0</span>
</pre></div>
</div>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">82</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;measures_to_process&quot;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="nt">&quot;summary&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;measures&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nt">&quot;metrics&quot;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="timestamp-format">
<h2>Timestamp format<a class="headerlink" href="#timestamp-format" title="Permalink to this headline">¶</a></h2>
<p>Timestamps used in Gnocchi are always returned using the ISO 8601 format.
Gnocchi is able to understand a few formats of timestamp when querying or
creating resources, for example</p>
<ul class="simple">
<li>&#8220;2014-01-01 12:12:34&#8221; or &#8220;2014-05-20T10:00:45.856219&#8221;, ISO 8601 timestamps.</li>
<li>&#8220;10 minutes&#8221;, which means &#8220;10 minutes from now&#8221;.</li>
<li>&#8220;-2 days&#8221;, which means &#8220;2 days ago&#8221;.</li>
<li>1421767030, a Unix epoch based timestamp.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">REST API Usage</a><ul>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#metrics">Metrics</a></li>
<li><a class="reference internal" href="#measures-batching">Measures batching</a></li>
<li><a class="reference internal" href="#archive-policy">Archive Policy</a></li>
<li><a class="reference internal" href="#archive-policy-rule">Archive Policy Rule</a></li>
<li><a class="reference internal" href="#resources">Resources</a></li>
<li><a class="reference internal" href="#resource-types">Resource Types</a></li>
<li><a class="reference internal" href="#searching-for-resources">Searching for resources</a></li>
<li><a class="reference internal" href="#searching-for-values-in-metrics">Searching for values in metrics</a></li>
<li><a class="reference internal" href="#aggregation-across-metrics">Aggregation across metrics</a></li>
<li><a class="reference internal" href="#capabilities">Capabilities</a></li>
<li><a class="reference internal" href="#status">Status</a></li>
<li><a class="reference internal" href="#timestamp-format">Timestamp format</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="client.html"
                                  title="previous chapter">Client</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="statsd.html"
                                  title="next chapter">Statsd Daemon Usage</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/rest.rst.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="statsd.html" title="Statsd Daemon Usage"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="client.html" title="Client"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">gnocchi 3.1.1.dev12 documentation</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, OpenStack Foundation.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/gnocchi");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>