<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Horizon Forms &mdash; horizon 11.0.0.0rc2.dev56 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '11.0.0.0rc2.dev56',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="horizon 11.0.0.0rc2.dev56 documentation" href="../index.html" />
    <link rel="next" title="Horizon Middleware" href="middleware.html" />
    <link rel="prev" title="Horizon Tabs and TabGroups" href="tabs.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="horizon-forms">
<h1>Horizon Forms<a class="headerlink" href="#horizon-forms" title="Permalink to this headline">¶</a></h1>
<p>Horizon ships with some very useful base form classes, form fields,
class-based views, and javascript helpers which streamline most of the common
tasks related to form handling.</p>
<div class="section" id="module-horizon.forms.base">
<span id="form-classes"></span><h2>Form Classes<a class="headerlink" href="#module-horizon.forms.base" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="horizon.forms.base.DateForm">
<em class="property">class </em><code class="descclassname">horizon.forms.base.</code><code class="descname">DateForm</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/base.html#DateForm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.base.DateForm" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple form for selecting a range of time.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.base.SelfHandlingForm">
<em class="property">class </em><code class="descclassname">horizon.forms.base.</code><code class="descname">SelfHandlingForm</code><span class="sig-paren">(</span><em>request</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/base.html#SelfHandlingForm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.base.SelfHandlingForm" title="Permalink to this definition">¶</a></dt>
<dd><p>A base <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> class which includes
processing logic in its subclasses.</p>
<dl class="method">
<dt id="horizon.forms.base.SelfHandlingForm.api_error">
<code class="descname">api_error</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/base.html#SelfHandlingForm.api_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.base.SelfHandlingForm.api_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an error to the form&#8217;s error dictionary after validation
based on problems reported via the API. This is useful when you
wish for API errors to appear as errors on the form rather than
using the messages framework.</p>
</dd></dl>

<dl class="method">
<dt id="horizon.forms.base.SelfHandlingForm.set_warning">
<code class="descname">set_warning</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/base.html#SelfHandlingForm.set_warning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.base.SelfHandlingForm.set_warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a warning on the form.</p>
<p>Unlike NON_FIELD_ERRORS, this doesn&#8217;t fail form validation.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-horizon.forms.fields">
<span id="form-fields"></span><h2>Form Fields<a class="headerlink" href="#module-horizon.forms.fields" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="horizon.forms.fields.DynamicChoiceField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">DynamicChoiceField</code><span class="sig-paren">(</span><em>add_item_link=None</em>, <em>add_item_link_args=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#DynamicChoiceField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.DynamicChoiceField" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of <code class="docutils literal"><span class="pre">ChoiceField</span></code> with additional properties that make
dynamically updating its elements easier.</p>
<p>Notably, the field declaration takes an extra argument, <code class="docutils literal"><span class="pre">add_item_link</span></code>
which may be a string or callable defining the URL that should be used
for the &#8220;add&#8221; link associated with the field.</p>
<dl class="attribute">
<dt id="horizon.forms.fields.DynamicChoiceField.widget">
<code class="descname">widget</code><a class="headerlink" href="#horizon.forms.fields.DynamicChoiceField.widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#horizon.forms.fields.DynamicSelectWidget" title="horizon.forms.fields.DynamicSelectWidget"><code class="xref py py-class docutils literal"><span class="pre">DynamicSelectWidget</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.DynamicSelectWidget">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">DynamicSelectWidget</code><span class="sig-paren">(</span><em>attrs=None</em>, <em>choices=()</em>, <em>data_attrs=()</em>, <em>transform=None</em>, <em>transform_html_attrs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#DynamicSelectWidget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.DynamicSelectWidget" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of the <code class="docutils literal"><span class="pre">Select</span></code> widget which renders extra attributes for
use in callbacks to handle dynamic changes to the available choices.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.DynamicTypedChoiceField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">DynamicTypedChoiceField</code><span class="sig-paren">(</span><em>add_item_link=None</em>, <em>add_item_link_args=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#DynamicTypedChoiceField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.DynamicTypedChoiceField" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple mix of <code class="docutils literal"><span class="pre">DynamicChoiceField</span></code> and <code class="docutils literal"><span class="pre">TypedChoiceField</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ExternalFileField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ExternalFileField</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#ExternalFileField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ExternalFileField" title="Permalink to this definition">¶</a></dt>
<dd><p>A special flavor of FileField which is meant to be used in cases when
instead of uploading file to Django it should be uploaded to some external
location, while the form validation is done as usual. Should be paired
with ExternalUploadMeta metaclass embedded into the Form class.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ExternalUploadMeta">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ExternalUploadMeta</code><a class="reference internal" href="../_modules/horizon/forms/fields.html#ExternalUploadMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ExternalUploadMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Set this class as the metaclass of a form that contains
ExternalFileField in order to process ExternalFileField fields in a
specific way. A hidden CharField twin of FieldField is created which
contains just the filename (if any file was selected on browser side) and
a special <cite>clean</cite> method for FileField is defined which extracts just file
name. This allows to avoid actual file upload to Django server, yet
process form clean() phase as usual. Actual file upload happens entirely
on client-side.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.IPField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">IPField</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#IPField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.IPField" title="Permalink to this definition">¶</a></dt>
<dd><p>Form field for entering IP/range values, with validation.
Supports IPv4/IPv6 in the format:
.. xxx.xxx.xxx.xxx
.. xxx.xxx.xxx.xxx/zz
.. ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff
.. ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff/zz
and all compressed forms. Also the short forms
are supported:
xxx/yy
xxx.xxx/yy</p>
<dl class="attribute">
<dt id="horizon.forms.fields.IPField.version">
<code class="descname">version</code><a class="headerlink" href="#horizon.forms.fields.IPField.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies which IP version to validate,
valid values are 1 (fields.IPv4), 2 (fields.IPv6) or
both - 3 (fields.IPv4 | fields.IPv6).
Defaults to IPv4 (1)</p>
</dd></dl>

<dl class="attribute">
<dt id="horizon.forms.fields.IPField.mask">
<code class="descname">mask</code><a class="headerlink" href="#horizon.forms.fields.IPField.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean flag to validate subnet masks along with IP address.
E.g: 10.0.0.1/32</p>
</dd></dl>

<dl class="attribute">
<dt id="horizon.forms.fields.IPField.mask_range_from">
<code class="descname">mask_range_from</code><a class="headerlink" href="#horizon.forms.fields.IPField.mask_range_from" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="descname">Subnet range limitation, e.g. 16</code></dt>
<dt>
<code class="descname">That means the input mask will be checked to be in the range</code></dt>
<dt>
<code class="descname">16:max_value. Useful to limit the subnet ranges</code></dt>
<dt>
<code class="descname">to A/B/C-class networks.</code></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.MultiIPField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">MultiIPField</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#MultiIPField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.MultiIPField" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends IPField to allow comma-separated lists of addresses.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.SelectWidget">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">SelectWidget</code><span class="sig-paren">(</span><em>attrs=None</em>, <em>choices=()</em>, <em>data_attrs=()</em>, <em>transform=None</em>, <em>transform_html_attrs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#SelectWidget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.SelectWidget" title="Permalink to this definition">¶</a></dt>
<dd><p>Customizable select widget, that allows to render
data-xxx attributes from choices. This widget also
allows user to specify additional html attributes
for choices.</p>
<dl class="attribute">
<dt id="horizon.forms.fields.SelectWidget.data_attrs">
<code class="descname">data_attrs</code><a class="headerlink" href="#horizon.forms.fields.SelectWidget.data_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies object properties to serialize as
data-xxx attribute. If passed (&#8216;id&#8217;, ),
this will be rendered as:
&lt;option data-id=&#8221;123&#8221;&gt;option_value&lt;/option&gt;
where 123 is the value of choice_value.id</p>
</dd></dl>

<dl class="attribute">
<dt id="horizon.forms.fields.SelectWidget.transform">
<code class="descname">transform</code><a class="headerlink" href="#horizon.forms.fields.SelectWidget.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable used to render the display value
from the option object.</p>
</dd></dl>

<dl class="attribute">
<dt id="horizon.forms.fields.SelectWidget.transform_html_attrs">
<code class="descname">transform_html_attrs</code><a class="headerlink" href="#horizon.forms.fields.SelectWidget.transform_html_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable used to render additional HTML attributes
for the option object. It returns a dictionary
containing the html attributes and their values.
For example, to define a title attribute for the
choices:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>helpText = { &#39;Apple&#39;: &#39;This is a fruit&#39;,
          &#39;Carrot&#39;: &#39;This is a vegetable&#39; }

def get_title(data):
    text = helpText.get(data, None)
    if text:
        return {&#39;title&#39;: text}
    else:
        return {}

....
....

widget=forms.ThemableSelect( attrs={&#39;class&#39;: &#39;switchable&#39;,
                                 &#39;data-slug&#39;: &#39;source&#39;},
                        transform_html_attrs=get_title )

self.fields[&lt;field name&gt;].choices =
    ([
        (&#39;apple&#39;,&#39;Apple&#39;),
        (&#39;carrot&#39;,&#39;Carrot&#39;)
    ])
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ThemableCheckboxInput">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ThemableCheckboxInput</code><span class="sig-paren">(</span><em>attrs=None</em>, <em>check_test=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#ThemableCheckboxInput"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ThemableCheckboxInput" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of the <code class="docutils literal"><span class="pre">Checkbox</span></code> widget which renders extra markup to
allow a custom checkbox experience.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ThemableChoiceField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ThemableChoiceField</code><span class="sig-paren">(</span><em>choices=()</em>, <em>required=True</em>, <em>widget=None</em>, <em>label=None</em>, <em>initial=None</em>, <em>help_text=u''</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#ThemableChoiceField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ThemableChoiceField" title="Permalink to this definition">¶</a></dt>
<dd><p>Bootstrap based select field.</p>
<dl class="attribute">
<dt id="horizon.forms.fields.ThemableChoiceField.widget">
<code class="descname">widget</code><a class="headerlink" href="#horizon.forms.fields.ThemableChoiceField.widget" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#horizon.forms.fields.ThemableSelectWidget" title="horizon.forms.fields.ThemableSelectWidget"><code class="xref py py-class docutils literal"><span class="pre">ThemableSelectWidget</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ThemableDynamicTypedChoiceField">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ThemableDynamicTypedChoiceField</code><span class="sig-paren">(</span><em>add_item_link=None</em>, <em>add_item_link_args=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#ThemableDynamicTypedChoiceField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ThemableDynamicTypedChoiceField" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple mix of <code class="docutils literal"><span class="pre">ThemableDynamicChoiceField</span></code> &amp; <code class="docutils literal"><span class="pre">TypedChoiceField</span></code>.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.fields.ThemableSelectWidget">
<em class="property">class </em><code class="descclassname">horizon.forms.fields.</code><code class="descname">ThemableSelectWidget</code><span class="sig-paren">(</span><em>attrs=None</em>, <em>choices=()</em>, <em>data_attrs=()</em>, <em>transform=None</em>, <em>transform_html_attrs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/fields.html#ThemableSelectWidget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.fields.ThemableSelectWidget" title="Permalink to this definition">¶</a></dt>
<dd><p>Bootstrap base select field widget.</p>
</dd></dl>

</div>
<div class="section" id="module-horizon.forms.views">
<span id="form-views"></span><h2>Form Views<a class="headerlink" href="#module-horizon.forms.views" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="horizon.forms.views.ModalBackdropMixin">
<em class="property">class </em><code class="descclassname">horizon.forms.views.</code><code class="descname">ModalBackdropMixin</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/views.html#ModalBackdropMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.views.ModalBackdropMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>This mixin class is to be used for together with ModalFormView and
WorkflowView classes to augment them with modal_backdrop context data.</p>
</dd></dl>

<dl class="class">
<dt id="horizon.forms.views.ModalFormView">
<em class="property">class </em><code class="descclassname">horizon.forms.views.</code><code class="descname">ModalFormView</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/views.html#ModalFormView"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.views.ModalFormView" title="Permalink to this definition">¶</a></dt>
<dd><p>The main view class from which all views which handle forms in Horizon
should inherit. It takes care of all details with processing
<a class="reference internal" href="#horizon.forms.base.SelfHandlingForm" title="horizon.forms.base.SelfHandlingForm"><code class="xref py py-class docutils literal"><span class="pre">SelfHandlingForm</span></code></a> classes, and modal concerns
when the associated template inherits from
<cite>horizon/common/_modal_form.html</cite>.</p>
<p>Subclasses must define a <code class="docutils literal"><span class="pre">form_class</span></code> and <code class="docutils literal"><span class="pre">template_name</span></code> attribute
at minimum.</p>
<p>See Django&#8217;s documentation on the <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/#formview">FormView</a> class for
more details.</p>
<dl class="method">
<dt id="horizon.forms.views.ModalFormView.get_form">
<code class="descname">get_form</code><span class="sig-paren">(</span><em>form_class=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/views.html#ModalFormView.get_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.views.ModalFormView.get_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of the form to be used in this view.</p>
</dd></dl>

<dl class="method">
<dt id="horizon.forms.views.ModalFormView.get_object_display">
<code class="descname">get_object_display</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/views.html#ModalFormView.get_object_display"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.views.ModalFormView.get_object_display" title="Permalink to this definition">¶</a></dt>
<dd><p>For dynamic insertion of resources created in modals, this method
returns the display name of the created object. Defaults to returning
the <code class="docutils literal"><span class="pre">name</span></code> attribute.</p>
</dd></dl>

<dl class="method">
<dt id="horizon.forms.views.ModalFormView.get_object_id">
<code class="descname">get_object_id</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/horizon/forms/views.html#ModalFormView.get_object_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#horizon.forms.views.ModalFormView.get_object_id" title="Permalink to this definition">¶</a></dt>
<dd><p>For dynamic insertion of resources created in modals, this method
returns the id of the created object. Defaults to returning the <code class="docutils literal"><span class="pre">id</span></code>
attribute.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="forms-javascript">
<h2>Forms Javascript<a class="headerlink" href="#forms-javascript" title="Permalink to this headline">¶</a></h2>
<div class="section" id="switchable-fields">
<h3>Switchable Fields<a class="headerlink" href="#switchable-fields" title="Permalink to this headline">¶</a></h3>
<p>By marking fields with the <code class="docutils literal"><span class="pre">&quot;switchable&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;switched&quot;</span></code> classes along
with defining a few data attributes you can programmatically hide, show,
and rename fields in a form.</p>
<p>The triggers are fields using a <code class="docutils literal"><span class="pre">select</span></code> input widget, marked with the
&#8220;switchable&#8221; class, and defining a &#8220;data-slug&#8221; attribute. When they are changed,
any input with the <code class="docutils literal"><span class="pre">&quot;switched&quot;</span></code> class and defining a <code class="docutils literal"><span class="pre">&quot;data-switch-on&quot;</span></code>
attribute which matches the <code class="docutils literal"><span class="pre">select</span></code> input&#8217;s <code class="docutils literal"><span class="pre">&quot;data-slug&quot;</span></code> attribute will be
evaluated for necessary changes. In simpler terms, if the <code class="docutils literal"><span class="pre">&quot;switched&quot;</span></code> target
input&#8217;s <code class="docutils literal"><span class="pre">&quot;switch-on&quot;</span></code> matches the <code class="docutils literal"><span class="pre">&quot;slug&quot;</span></code> of the <code class="docutils literal"><span class="pre">&quot;switchable&quot;</span></code> trigger
input, it gets switched. Simple, right?</p>
<p>The <code class="docutils literal"><span class="pre">&quot;switched&quot;</span></code> inputs also need to define states. For each state in which
the input should be shown, it should define a data attribute like the
following: <code class="docutils literal"><span class="pre">data-&lt;slug&gt;-&lt;value&gt;=&quot;&lt;desired</span> <span class="pre">label&gt;&quot;</span></code>. When the switch event
happens the value of the <code class="docutils literal"><span class="pre">&quot;switchable&quot;</span></code> field will be compared to the
data attributes and the correct label will be applied to the field. If
a corresponding label for that value is <em>not</em> found, the field will
be hidden instead.</p>
<p>A simplified example is as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Source&#39;</span><span class="p">),</span>
    <span class="n">choices</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;cidr&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;CIDR&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s1">&#39;sg&#39;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Security Group&#39;</span><span class="p">))</span>
    <span class="p">],</span>
    <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;switchable&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data-slug&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span>
    <span class="p">})</span>
<span class="p">)</span>

<span class="n">cidr</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IPField</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;CIDR&quot;</span><span class="p">),</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">TextInput</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;switched&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data-switch-on&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data-source-cidr&#39;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;CIDR&#39;</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">)</span>

<span class="n">security_group</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Security Group&#39;</span><span class="p">),</span>
    <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;switched&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data-switch-on&#39;</span><span class="p">:</span> <span class="s1">&#39;source&#39;</span><span class="p">,</span>
        <span class="s1">&#39;data-source-sg&#39;</span><span class="p">:</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Security Group&#39;</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
<p>That code would create the <code class="docutils literal"><span class="pre">&quot;switchable&quot;</span></code> control field <code class="docutils literal"><span class="pre">source</span></code>, and the
two <code class="docutils literal"><span class="pre">&quot;switched&quot;</span></code> fields <code class="docutils literal"><span class="pre">cidr</span></code> and <code class="docutils literal"><span class="pre">security</span> <span class="pre">group</span></code> which are hidden or
shown depending on the value of <code class="docutils literal"><span class="pre">source</span></code>.</p>
<p>NOTE: A field can only safely define one slug in its <code class="docutils literal"><span class="pre">&quot;switch-on&quot;</span></code> attribute.
While switching on multiple fields is possible, the behavior is very hard to
predict due to the events being fired from the various switchable fields in
order. You generally end up just having it hidden most of the time by accident,
so it&#8217;s not recommended. Instead just add a second field to the form and control
the two independently, then merge their results in the form&#8217;s clean or handle
methods at the end.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Horizon Forms</a><ul>
<li><a class="reference internal" href="#module-horizon.forms.base">Form Classes</a></li>
<li><a class="reference internal" href="#module-horizon.forms.fields">Form Fields</a></li>
<li><a class="reference internal" href="#module-horizon.forms.views">Form Views</a></li>
<li><a class="reference internal" href="#forms-javascript">Forms Javascript</a><ul>
<li><a class="reference internal" href="#switchable-fields">Switchable Fields</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="tabs.html"
                                  title="previous chapter">Horizon Tabs and TabGroups</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="middleware.html"
                                  title="next chapter">Horizon Middleware</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/horizon
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/ref/forms.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="middleware.html" title="Horizon Middleware"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tabs.html" title="Horizon Tabs and TabGroups"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">horizon 11.0.0.0rc2.dev56 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2012, OpenStack Foundation.
      Last updated on &#39;Tue Feb 14 01:44:33 2017, commit d07a02a&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/horizon");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>