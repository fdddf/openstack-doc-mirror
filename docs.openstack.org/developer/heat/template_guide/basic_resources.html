<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Instances &mdash; heat 8.0.0.0rc2.dev38 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '8.0.0.0rc2.dev38',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="heat 8.0.0.0rc2.dev38 documentation" href="../index.html" />
    <link rel="up" title="Template Guide" href="index.html" />
    <link rel="next" title="Software configuration" href="software_deployment.html" />
    <link rel="prev" title="Heat Orchestration Template (HOT) specification" href="hot_spec.html" /> 
  </head>
  <body role="document">
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="instances">
<span id="basic-resources"></span><h1>Instances<a class="headerlink" href="#instances" title="Permalink to this headline">¶</a></h1>
<div class="section" id="manage-instances">
<h2>Manage instances<a class="headerlink" href="#manage-instances" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-an-instance">
<h3>Create an instance<a class="headerlink" href="#create-an-instance" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="openstack.html#OS::Nova::Server" title="OS::Nova::Server"><span class="xref std std-ref">OS::Nova::Server</span></a> resource to create a Compute instance. The
<code class="docutils literal"><span class="pre">flavor</span></code> property is the only mandatory one, but you need to define a boot
source using one of the <code class="docutils literal"><span class="pre">image</span></code> or <code class="docutils literal"><span class="pre">block_device_mapping</span></code> properties.</p>
<p>You also need to define the <code class="docutils literal"><span class="pre">networks</span></code> property to indicate to which networks
your instance must connect if multiple networks are available in your tenant.</p>
<p>The following example creates a simple instance, booted from an image, and
connecting to the <code class="docutils literal"><span class="pre">private</span></code> network:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
</pre></div>
</div>
</div>
<div class="section" id="connect-an-instance-to-a-network">
<h3>Connect an instance to a network<a class="headerlink" href="#connect-an-instance-to-a-network" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">networks</span></code> property of an <a class="reference internal" href="openstack.html#OS::Nova::Server" title="OS::Nova::Server"><span class="xref std std-ref">OS::Nova::Server</span></a> resource to
define which networks an instance should connect to. Define each network as a
YAML map, containing one of the following keys:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">port</span></code></dt>
<dd>The ID of an existing Networking port. You usually create this port in the
same template using an <a class="reference internal" href="openstack.html#OS::Neutron::Port" title="OS::Neutron::Port"><span class="xref std std-ref">OS::Neutron::Port</span></a> resource. You will be
able to associate a floating IP to this port, and the port to your Compute
instance.</dd>
<dt><code class="docutils literal"><span class="pre">network</span></code></dt>
<dd>The name or ID of an existing network. You don&#8217;t need to create an
<a class="reference internal" href="openstack.html#OS::Neutron::Port" title="OS::Neutron::Port"><span class="xref std std-ref">OS::Neutron::Port</span></a> resource if you use this property. But you will
not be able to use neutron floating IP association for this instance
because there will be no specified port for server.</dd>
</dl>
<p>The following example demonstrates the use of the <code class="docutils literal"><span class="pre">port</span></code> and <code class="docutils literal"><span class="pre">network</span></code>
properties:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">instance_port</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Port</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
      <span class="l l-Scalar l-Scalar-Plain">fixed_ips</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">subnet_id</span><span class="p p-Indicator">:</span> <span class="s">&quot;private-subnet&quot;</span>

  <span class="l l-Scalar l-Scalar-Plain">instance1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">instance_port</span> <span class="p p-Indicator">}</span>

  <span class="l l-Scalar l-Scalar-Plain">instance2</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
</pre></div>
</div>
</div>
<div class="section" id="create-and-associate-security-groups-to-an-instance">
<h3>Create and associate security groups to an instance<a class="headerlink" href="#create-and-associate-security-groups-to-an-instance" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="openstack.html#OS::Neutron::SecurityGroup" title="OS::Neutron::SecurityGroup"><span class="xref std std-ref">OS::Neutron::SecurityGroup</span></a> resource to create security
groups.</p>
<p>Define the <code class="docutils literal"><span class="pre">security_groups</span></code> property of the <a class="reference internal" href="openstack.html#OS::Neutron::Port" title="OS::Neutron::Port"><span class="xref std std-ref">OS::Neutron::Port</span></a>
resource to associate security groups to a port, then associate the port to an
instance.</p>
<p>The following example creates a security group allowing inbound connections on
ports 80 and 443 (web server) and associates this security group to an instance
port:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">web_secgroup</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::SecurityGroup</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">rules</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">protocol</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
          <span class="l l-Scalar l-Scalar-Plain">remote_ip_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>
          <span class="l l-Scalar l-Scalar-Plain">port_range_min</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
          <span class="l l-Scalar l-Scalar-Plain">port_range_max</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">protocol</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
          <span class="l l-Scalar l-Scalar-Plain">remote_ip_prefix</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>
          <span class="l l-Scalar l-Scalar-Plain">port_range_min</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
          <span class="l l-Scalar l-Scalar-Plain">port_range_max</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>

  <span class="l l-Scalar l-Scalar-Plain">instance_port</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Port</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
      <span class="l l-Scalar l-Scalar-Plain">security_groups</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">web_secgroup</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">fixed_ips</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">subnet_id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private-subnet</span>

  <span class="l l-Scalar l-Scalar-Plain">instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">instance_port</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
<div class="section" id="create-and-associate-a-floating-ip-to-an-instance">
<h3>Create and associate a floating IP to an instance<a class="headerlink" href="#create-and-associate-a-floating-ip-to-an-instance" title="Permalink to this headline">¶</a></h3>
<p>You can use two sets of resources to create and associate floating IPs to
instances.</p>
<div class="section" id="os-nova-resources">
<h4>OS::Nova resources<a class="headerlink" href="#os-nova-resources" title="Permalink to this headline">¶</a></h4>
<p>Use the <a class="reference internal" href="openstack.html#OS::Nova::FloatingIP" title="OS::Nova::FloatingIP"><span class="xref std std-ref">OS::Nova::FloatingIP</span></a> resource to create a floating IP, and
the <a class="reference internal" href="openstack.html#OS::Nova::FloatingIPAssociation" title="OS::Nova::FloatingIPAssociation"><span class="xref std std-ref">OS::Nova::FloatingIPAssociation</span></a> resource to associate the
floating IP to an instance.</p>
<p>The following example creates an instance and a floating IP, and associate the
floating IP to the instance:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">floating_ip</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::FloatingIP</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">pool</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">public</span>

  <span class="l l-Scalar l-Scalar-Plain">inst1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>

  <span class="l l-Scalar l-Scalar-Plain">association</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::FloatingIPAssociation</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">floating_ip</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">floating_ip</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">server_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">inst1</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
<div class="section" id="os-neutron-resources">
<h4>OS::Neutron resources<a class="headerlink" href="#os-neutron-resources" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Networking service (neutron) must be enabled on your OpenStack
deployment to use these resources.</p>
</div>
<p>Use the <a class="reference internal" href="openstack.html#OS::Neutron::FloatingIP" title="OS::Neutron::FloatingIP"><span class="xref std std-ref">OS::Neutron::FloatingIP</span></a> resource to create a floating IP, and
the <a class="reference internal" href="openstack.html#OS::Neutron::FloatingIPAssociation" title="OS::Neutron::FloatingIPAssociation"><span class="xref std std-ref">OS::Neutron::FloatingIPAssociation</span></a> resource to associate the
floating IP to a port:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">net</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">name of network used to launch instance.</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="l l-Scalar l-Scalar-Plain">default</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>

<span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">inst1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">get_param</span><span class="p p-Indicator">:</span> <span class="nv">net</span><span class="p p-Indicator">}</span>

  <span class="l l-Scalar l-Scalar-Plain">floating_ip</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::FloatingIP</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">floating_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">public</span>

  <span class="l l-Scalar l-Scalar-Plain">association</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::FloatingIPAssociation</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">floatingip_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">floating_ip</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">port_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span><span class="nv">get_attr</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">inst1</span><span class="p p-Indicator">,</span> <span class="nv">addresses</span><span class="p p-Indicator">,</span> <span class="p p-Indicator">{</span><span class="nv">get_param</span><span class="p p-Indicator">:</span> <span class="nv">net</span><span class="p p-Indicator">},</span> <span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">port</span><span class="p p-Indicator">]}</span>
</pre></div>
</div>
<p>You can also create an OS::Neutron::Port and associate that with the server and
the floating IP. However the approach mentioned above will work better
with stack updates.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">instance_port</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Port</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
      <span class="l l-Scalar l-Scalar-Plain">fixed_ips</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">subnet_id</span><span class="p p-Indicator">:</span> <span class="s">&quot;private-subnet&quot;</span>

  <span class="l l-Scalar l-Scalar-Plain">floating_ip</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::FloatingIP</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">floating_network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">public</span>

  <span class="l l-Scalar l-Scalar-Plain">association</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::FloatingIPAssociation</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">floatingip_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">floating_ip</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">port_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">instance_port</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enable-remote-access-to-an-instance">
<h3>Enable remote access to an instance<a class="headerlink" href="#enable-remote-access-to-an-instance" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">key_name</span></code> attribute of the <a class="reference internal" href="openstack.html#OS::Nova::Server" title="OS::Nova::Server"><span class="xref std std-ref">OS::Nova::Server</span></a> resource defines
the key pair to use to enable SSH remote access:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my_instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">key_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my_key</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information about key pairs, see
<a class="reference external" href="http://docs.openstack.org/user-guide/configure_access_and_security_for_instances.html">Configure access and security for instances</a>.</p>
</div>
</div>
<div class="section" id="create-a-key-pair">
<h3>Create a key pair<a class="headerlink" href="#create-a-key-pair" title="Permalink to this headline">¶</a></h3>
<p>You can create new key pairs with the <a class="reference internal" href="openstack.html#OS::Nova::KeyPair" title="OS::Nova::KeyPair"><span class="xref std std-ref">OS::Nova::KeyPair</span></a> resource. Key
pairs can be imported or created during the stack creation.</p>
<p>If the <code class="docutils literal"><span class="pre">public_key</span></code> property is not specified, the Orchestration module
creates a new key pair. If the <code class="docutils literal"><span class="pre">save_private_key</span></code> property is set to
<code class="docutils literal"><span class="pre">true</span></code>, the <code class="docutils literal"><span class="pre">private_key</span></code> attribute of the resource holds the private key.</p>
<p>The following example creates a new key pair and uses it as authentication key
for an instance:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my_key</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::KeyPair</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">save_private_key</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my_key</span>

  <span class="l l-Scalar l-Scalar-Plain">my_instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
      <span class="l l-Scalar l-Scalar-Plain">key_name</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">my_key</span> <span class="p p-Indicator">}</span>

<span class="l l-Scalar l-Scalar-Plain">outputs</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">private_key</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Private key</span>
    <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_attr</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="nv">my_key</span><span class="p p-Indicator">,</span> <span class="nv">private_key</span> <span class="p p-Indicator">]</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="manage-networks">
<h2>Manage networks<a class="headerlink" href="#manage-networks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-network-and-a-subnet">
<h3>Create a network and a subnet<a class="headerlink" href="#create-a-network-and-a-subnet" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Networking service (neutron) must be enabled on your OpenStack
deployment to create and manage networks and subnets. Networks and subnets
cannot be created if your deployment uses legacy networking (nova-network).</p>
</div>
<p>Use the <a class="reference internal" href="openstack.html#OS::Neutron::Net" title="OS::Neutron::Net"><span class="xref std std-ref">OS::Neutron::Net</span></a> resource to create a network, and the
<a class="reference internal" href="openstack.html#OS::Neutron::Subnet" title="OS::Neutron::Subnet"><span class="xref std std-ref">OS::Neutron::Subnet</span></a> resource to provide a subnet for this network:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">new_net</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Net</span>

  <span class="l l-Scalar l-Scalar-Plain">new_subnet</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Subnet</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">network_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">new_net</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">cidr</span><span class="p p-Indicator">:</span> <span class="s">&quot;10.8.1.0/24&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">dns_nameservers</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;8.8.8.8&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;8.8.4.4&quot;</span> <span class="p p-Indicator">]</span>
      <span class="l l-Scalar l-Scalar-Plain">ip_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</div>
<div class="section" id="create-and-manage-a-router">
<h3>Create and manage a router<a class="headerlink" href="#create-and-manage-a-router" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="openstack.html#OS::Neutron::Router" title="OS::Neutron::Router"><span class="xref std std-ref">OS::Neutron::Router</span></a> resource to create a router. You can
define its gateway with the <code class="docutils literal"><span class="pre">external_gateway_info</span></code> property:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">router1</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Router</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">external_gateway_info</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">network</span><span class="p p-Indicator">:</span> <span class="nv">public</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>You can connect subnets to routers with the
<a class="reference internal" href="openstack.html#OS::Neutron::RouterInterface" title="OS::Neutron::RouterInterface"><span class="xref std std-ref">OS::Neutron::RouterInterface</span></a> resource:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">subnet1_interface</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::RouterInterface</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">router_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">router1</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private-subnet</span>
</pre></div>
</div>
</div>
<div class="section" id="complete-network-example">
<h3>Complete network example<a class="headerlink" href="#complete-network-example" title="Permalink to this headline">¶</a></h3>
<p>The following example creates a network stack:</p>
<ul class="simple">
<li>A network and an associated subnet.</li>
<li>A router with an external gateway.</li>
<li>An interface to the new subnet for the new router.</li>
</ul>
<p>In this example, the <code class="docutils literal"><span class="pre">public</span></code> network is an existing shared network:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">internal_net</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Net</span>

  <span class="l l-Scalar l-Scalar-Plain">internal_subnet</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Subnet</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">network_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">internal_net</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">cidr</span><span class="p p-Indicator">:</span> <span class="s">&quot;10.8.1.0/24&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">dns_nameservers</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;8.8.8.8&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;8.8.4.4&quot;</span> <span class="p p-Indicator">]</span>
      <span class="l l-Scalar l-Scalar-Plain">ip_version</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>

  <span class="l l-Scalar l-Scalar-Plain">internal_router</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::Router</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">external_gateway_info</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">network</span><span class="p p-Indicator">:</span> <span class="nv">public</span> <span class="p p-Indicator">}</span>

  <span class="l l-Scalar l-Scalar-Plain">internal_interface</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Neutron::RouterInterface</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">router_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">internal_router</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">internal_subnet</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="manage-volumes">
<h2>Manage volumes<a class="headerlink" href="#manage-volumes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-volume">
<h3>Create a volume<a class="headerlink" href="#create-a-volume" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="openstack.html#OS::Cinder::Volume" title="OS::Cinder::Volume"><span class="xref std std-ref">OS::Cinder::Volume</span></a> resource to create a new Block Storage
volume.</p>
<p>For example:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my_new_volume</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::Volume</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">size</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
</pre></div>
</div>
<p>The volumes that you create are empty by default. Use the <code class="docutils literal"><span class="pre">image</span></code> property to
create a bootable volume from an existing image:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my_new_bootable_volume</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::Volume</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">size</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>
</pre></div>
</div>
<p>You can also create new volumes from another volume, a volume snapshot, or a
volume backup. Use the <code class="docutils literal"><span class="pre">source_volid</span></code>, <code class="docutils literal"><span class="pre">snapshot_id</span></code> or <code class="docutils literal"><span class="pre">backup_id</span></code>
properties to create a new volume from an existing source.</p>
<p>For example, to create a new volume from a backup:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">another_volume</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::Volume</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">backup_id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2fff50ab-1a9c-4d45-ae60-1d054d6bc868</span>
</pre></div>
</div>
<p>In this example the <code class="docutils literal"><span class="pre">size</span></code> property is not defined because the Block Storage
service uses the size of the backup to define the size of the new volume.</p>
</div>
<div class="section" id="attach-a-volume-to-an-instance">
<h3>Attach a volume to an instance<a class="headerlink" href="#attach-a-volume-to-an-instance" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="openstack.html#OS::Cinder::VolumeAttachment" title="OS::Cinder::VolumeAttachment"><span class="xref std std-ref">OS::Cinder::VolumeAttachment</span></a> resource to attach a volume to
an instance.</p>
<p>The following example creates a volume and an instance, and attaches the volume
to the instance:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">new_volume</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::Volume</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">size</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>

  <span class="l l-Scalar l-Scalar-Plain">new_instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>

  <span class="l l-Scalar l-Scalar-Plain">volume_attachment</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::VolumeAttachment</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">volume_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">new_volume</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">instance_uuid</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">new_instance</span> <span class="p p-Indicator">}</span>
</pre></div>
</div>
</div>
<div class="section" id="boot-an-instance-from-a-volume">
<h3>Boot an instance from a volume<a class="headerlink" href="#boot-an-instance-from-a-volume" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal"><span class="pre">block_device_mapping</span></code> property of the <a class="reference internal" href="openstack.html#OS::Nova::Server" title="OS::Nova::Server"><span class="xref std std-ref">OS::Nova::Server</span></a>
resource to define a volume used to boot the instance. This property is a list
of volumes to attach to the instance before its boot.</p>
<p>The following example creates a bootable volume from an image, and uses it to
boot an instance:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">bootable_volume</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Cinder::Volume</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">size</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ubuntu-trusty-x86_64</span>

  <span class="l l-Scalar l-Scalar-Plain">instance</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
    <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">private</span>
      <span class="l l-Scalar l-Scalar-Plain">block_device_mapping</span><span class="p p-Indicator">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">device_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">vda</span>
          <span class="l l-Scalar l-Scalar-Plain">volume_id</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_resource</span><span class="p p-Indicator">:</span> <span class="nv">bootable_volume</span> <span class="p p-Indicator">}</span>
          <span class="l l-Scalar l-Scalar-Plain">delete_on_termination</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Instances</a><ul>
<li><a class="reference internal" href="#manage-instances">Manage instances</a><ul>
<li><a class="reference internal" href="#create-an-instance">Create an instance</a></li>
<li><a class="reference internal" href="#connect-an-instance-to-a-network">Connect an instance to a network</a></li>
<li><a class="reference internal" href="#create-and-associate-security-groups-to-an-instance">Create and associate security groups to an instance</a></li>
<li><a class="reference internal" href="#create-and-associate-a-floating-ip-to-an-instance">Create and associate a floating IP to an instance</a><ul>
<li><a class="reference internal" href="#os-nova-resources">OS::Nova resources</a></li>
<li><a class="reference internal" href="#os-neutron-resources">OS::Neutron resources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enable-remote-access-to-an-instance">Enable remote access to an instance</a></li>
<li><a class="reference internal" href="#create-a-key-pair">Create a key pair</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manage-networks">Manage networks</a><ul>
<li><a class="reference internal" href="#create-a-network-and-a-subnet">Create a network and a subnet</a></li>
<li><a class="reference internal" href="#create-and-manage-a-router">Create and manage a router</a></li>
<li><a class="reference internal" href="#complete-network-example">Complete network example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manage-volumes">Manage volumes</a><ul>
<li><a class="reference internal" href="#create-a-volume">Create a volume</a></li>
<li><a class="reference internal" href="#attach-a-volume-to-an-instance">Attach a volume to an instance</a></li>
<li><a class="reference internal" href="#boot-an-instance-from-a-volume">Boot an instance from a volume</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="hot_spec.html"
                                  title="previous chapter">Heat Orchestration Template (HOT) specification</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="software_deployment.html"
                                  title="next chapter">Software configuration</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/heat
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/template_guide/basic_resources.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="software_deployment.html" title="Software configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="hot_spec.html" title="Heat Orchestration Template (HOT) specification"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">heat 8.0.0.0rc2.dev38 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Template Guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2012,2013 Heat Developers.
      Last updated on &#39;Tue Feb 14 11:42:51 2017, commit 3ffc97c&#39;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/heat");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>