
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Release Management &mdash; OpenStack Project Team Guide 0.0.1.dev126 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1.dev126',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="OpenStack Project Team Guide 0.0.1.dev126 documentation" href="index.html" />
    <link rel="next" title="Stable Branches" href="stable-branches.html" />
    <link rel="prev" title="Cross-Project" href="cross-project.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
      
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="release-management">
<h1>Release Management<a class="headerlink" href="#release-management" title="Permalink to this headline">¶</a></h1>
<p>OpenStack project teams produce a large variety of code repositories. Some
are services providing infrastructure APIs. Some are libraries being consumed
by those services. Some are supporting cast and tools. Most of those
are formally &#8220;released&#8221; at given points. We call those &#8220;deliverables&#8221;, and
use git tags to define the release points. Deliverables may contain multiple
git repositories, which are all tagged with the same version at the same
moment.</p>
<p>OpenStack deliverables can be released under four different models. Most
follow a common 6-month development cycle, with some releasing intermediary
releases within that. The release management team manages the release process
for all deliverables following the development cycle, and provide tools for
cycle-independent deliverables and other teams and repositories to do
self-service releases.</p>
<div class="section" id="release-models">
<h2>Release models<a class="headerlink" href="#release-models" title="Permalink to this headline">¶</a></h2>
<div class="section" id="common-cycle-with-development-milestones">
<h3>Common cycle with development milestones<a class="headerlink" href="#common-cycle-with-development-milestones" title="Permalink to this headline">¶</a></h3>
<p>By default, most OpenStack services opt to follow a common, time-based
release model. It results in a single release at the end of the development
cycle. It is recommended at the earlier stages of development, when
it is difficult to commit to multiple upgrade paths and large features or
architectural refactors are still common.</p>
<p>Projects following that model use a pre-version numbering scheme. If the
final release will be called 5.0.0, intermediary milestones will be called
5.0.0.0b1, 5.0.0.0rc2 etc.</p>
<p>This time-based release model includes 3 development milestones, called
<tt class="docutils literal"><span class="pre">$SERIES-1</span></tt>, <tt class="docutils literal"><span class="pre">$SERIES-2</span></tt> and <tt class="docutils literal"><span class="pre">$SERIES-3</span></tt>. Those make useful reference
points in time to organize the development cycle. Project teams may, for
example, set specific deadlines that match those dates. b1, b2 and b3 tags are
pushed to the repositories to clearly mark those reference points in the git
history.</p>
<p>The dates for the milestones and final release in a given development cycle
are defined by the Release Management team, and communicated before the new
development cycle starts on <cite>http://releases.openstack.org</cite>.</p>
<p>The $series-3 milestone coincides with Feature Freeze (&#8220;FF&#8221;). Managed projects
are requested to stop merging code adding new features, new dependencies, new
configuration options, database schema changes, changes in strings... all
things that make the work of packagers, documenters or testers more difficult.
Feature Freeze Exceptions (&#8220;FFE&#8221;) may be exceptionally granted by project PTLs
(or release liaison), but every FFE accepted results in more work, less time
spent testing and fixing issues in release candidates, therefore lowering the
quality of the end release. The closer we get to the final release date, the
greater the impact on release quality. In doubt, the Release Team is available
for advice.</p>
<p>At the same time as Feature Freeze, is Soft String Freeze. Translators start
to translate the strings after <tt class="docutils literal"><span class="pre">$SERIES-3</span></tt>. To aid their work, it is
important to avoid changing existing strings, as this will invalidate some of
their translation work. New strings are allowed for things like new log
messages, as in many cases leaving those strings untranslated is better than
not having any message at all.</p>
<p>After the $series-3 milestone, each team works on a list of release-critical
bugs, and when they consider that all the critical issues are fixed (or
considered not-release-critical after all), the release liaison requests the
publication of a first release candidate (rc1). This RC1 will be used as-is
as the final release, unless new release-critical issues are found that
warrant a RC respin.</p>
<p>After RC1 is tagged, a stable/$series branch is cut from that same commit.
That is where further release candidates (and the final release) will be
tagged. The master branch starts on the new development cycle and is no
longer feature-frozen.</p>
<p>After RC1 is tagged, that project hits a Hard String Freeze. At this point the
translation team tries to complete the translation before the final release.
Any string changes after RC1 should be discussed with the translation
team. It is expected that at least 10 working days after RC1 there will be
another milestone tagged that includes the latest translations.</p>
<p>Potential new release critical issues have first to get fixed on the master
branch. Once merged in master, they can be backported to the release branch.
Such backports are approved by the PTL (or release liaison), and once all the
desired backports (and translations updates) are merged, a new release
candidate can be produced.</p>
<p>On final release day, the Release Team will take each project&#8217;s last release
candidate and re-tag it with the final release version. There is no difference
between the last release candidate and the final version, apart from the
version number. The stable branch then passes under stable maintenance team
management, and is open for backports following the stable branch rules.</p>
</div>
<div class="section" id="common-cycle-with-intermediary-releases">
<h3>Common cycle with intermediary releases<a class="headerlink" href="#common-cycle-with-intermediary-releases" title="Permalink to this headline">¶</a></h3>
<p>Projects which want to do a formal release more often, but still want to
coordinate a release at the end of the cycle from which to maintain a stable
branch may opt for this model. This is especially suitable to libraries, and
to more stable projects which add a limited set of new features and don&#8217;t plan
to go through large architectural changes. Getting the latest and greatest out
as often as possible, while ensuring stability and upgradeability.</p>
<p>Projects following this model do not use intermediary development milestones.
They may request publication of versions at any point in time during the
development cycle. They do not use Feature Freeze, they do not go through a
release candidate cycle. They use a post-version semver-based numbering scheme,
where every tag is a X.Y.Z version.</p>
<p>Those projects must request a final version for a development cycle (generally
in the last month of the cycle). A stable branch is cut from that proposed
version, and the master branch will from then on produce releases of the
next development cycle. If a critical issue is found in the &#8220;final release&#8221;,
backports can be pushed to the stable branch and a new release be requested
there. That is why it is important to increment at least the Y component
of the X.Y.Z version when we switch to the next development cycle, so that the
Z component can be used in future tags on the release (or stable) branch.</p>
<p>While the release management team will not enforce a formal feature-frozen
period for projects in an independent release model, it is recommended to
focus on bugfixes and hold on major disruptive features as you get closer
to the end of a development cycle, to ensure that the final release of any
given development cycle is as usable and bug-free as it can be.</p>
</div>
<div class="section" id="trailing-the-common-cycle">
<h3>Trailing the common cycle<a class="headerlink" href="#trailing-the-common-cycle" title="Permalink to this headline">¶</a></h3>
<p>Some projects follow the release cycle, but because they rely on the other
projects being completed, they may not always publish their final release at
the same time as those projects. For example, projects related to packaging
or deploying OpenStack components need the final releases of those components
to be available before they can run their own final tests.</p>
<p>Cycle-trailing projects are given an extra 2 weeks after the final release date
to request publication of their release. They may otherwise use intermediary
releases or development milestones.</p>
</div>
<div class="section" id="independent-release-model">
<h3>Independent release model<a class="headerlink" href="#independent-release-model" title="Permalink to this headline">¶</a></h3>
<p>Deliverables that do not benefit from a coordinated release or from stable
branches may opt to follow a completely independent release model.</p>
<p>Versions are tagged from the master branch without any specific constraint,
although the usage of a post-version numbering scheme based on
<a class="reference external" href="http://docs.openstack.org/developer/pbr/semver.html">semantic versioning</a> is strongly recommended.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Client libraries and libraries distributed by official project
teams should not use this model.</p>
<p class="last">In order to support security and critical bug fixes in official
projects, they all need to provide series-based stable branches. If
a library has no stable branch for a series, then in order to fix
issues in the library for that series we must allow new versions
from the master branch to be used in the stable branch. Sometimes
that works fine, but in cases where the new release from master
requires new minimum versions of second-tier dependencies, we
cannot safely introduce the new version into the stable branch. It
is better to use the cycle-with-intermediary model, even if a
project does not aggressively backport changes to the stable
branches created.</p>
</div>
</div>
</div>
<div class="section" id="how-to-release">
<h2>How to release ?<a class="headerlink" href="#how-to-release" title="Permalink to this headline">¶</a></h2>
<p>Releases occur as often as weekly (or more), and are typically
scheduled for early in the day and early in the week, based on the
time zone of the library maintainers. This scheduling gives the
maintainers plenty of time to handle issues that arise after a new
release is made to minimize the duration of any outage, without
requiring extra effort outside of a normal work week by overlapping
with the weekend.</p>
<p>Technically, releases are created by pushing a <em>signed</em> tag to the gerrit
repository where the library is managed. The CI system recognizes the
new signed tag, and triggers the jobs that build the packages, upload them
to the distribution servers (our tarball site and the Python Package Index),
and send email announcements.</p>
<p>For more details about setting up a repository to support automated
releases, see the <a class="reference external" href="http://docs.openstack.org/infra/manual/creators.html">Project Creator&#8217;s Guide</a> from the
<em>Infrastructure User Manual</em>.</p>
<div class="section" id="release-process-for-projects-following-the-release-cycle">
<span id="release-process-managed"></span><h3>Release process for projects following the release cycle<a class="headerlink" href="#release-process-for-projects-following-the-release-cycle" title="Permalink to this headline">¶</a></h3>
<p>Releases for deliverables following one of the three models tied to the release
cycle (cycle-with-milestones, cycle-with-intermediary, and cycle-trailing) are
handled by the release team at the request of the PTL or release liaison for
the project. Requests should be submitted in the form of a patch to the
appropriate &#8220;deliverables&#8221; file in the <tt class="docutils literal"><span class="pre">openstack/releases</span></tt> git repository.
See the <a class="reference external" href="http://git.openstack.org/cgit/openstack/releases/tree/README.rst">README file in that repository</a> for more details.</p>
<p>Such requests are then checked and processed by the Release Team, generally
avoiding Mondays and Fridays and periods where the CI system is not fully
operational.</p>
</div>
<div class="section" id="release-process-for-other-projects">
<h3>Release process for other projects<a class="headerlink" href="#release-process-for-other-projects" title="Permalink to this headline">¶</a></h3>
<p>OpenStack projects following a cycle-independent model can use the process
for projects following the release cycle, or push signed tags by themselves.</p>
<p>In all cases they should use a variation of <a class="reference external" href="http://docs.openstack.org/developer/pbr/semver.html">semantic versioning</a> (or SemVer)
rules to choose version numbers, and they should push the corresponding patch
to the <tt class="docutils literal"><span class="pre">openstack/releases</span></tt> git repository so that the release appears on
the <a class="reference external" href="https://releases.openstack.org">https://releases.openstack.org</a> website.</p>
</div>
</div>
<div class="section" id="release-liaisons">
<h2>Release Liaisons<a class="headerlink" href="#release-liaisons" title="Permalink to this headline">¶</a></h2>
<p>As with other cross-project teams, the release management team relies
on a liaison from each participating project to help with coordination
and release-related tasks. The liaison is usually the PTL, but the PTL
can also delegate the responsibilities to someone else on the team by
updating the liaison list on the <a class="reference external" href="https://wiki.openstack.org/wiki/CrossProjectLiaisons">CrossProjectLiaisons</a> wiki page.</p>
<div class="section" id="liaison-responsibilities">
<h3>Liaison Responsibilities<a class="headerlink" href="#liaison-responsibilities" title="Permalink to this headline">¶</a></h3>
<p>The liaison does not have to personally do all of these things, but
must ensure they are done by someone on the project team.</p>
<ol class="arabic">
<li><p class="first">Monitor the release schedule and remind team members of deadlines.</p>
</li>
<li><p class="first">Ensure that release-related patches in the project are reviewed in
a timely manner.</p>
<p>From time to time, teams need to merge changes to their projects to
stay current with release team practices. The release team relies
on liaisons to help make and review such changes quickly to avoid
blocking future releases. For example, keeping the requirements
lists up to date, adding tools, and updating packaging files.</p>
</li>
<li><p class="first">Submit miletone and release tag requests. If the request is not
submitted by the liaison or PTL, one of them must indicate their
approval.</p>
<p>See <a class="reference internal" href="#release-process-managed"><em>Release process for projects following the release cycle</em></a> above.</p>
</li>
<li><p class="first">Coordinate feature freeze exceptions (FFEs) at the end of a
release, and track blocking bug fixes and feature work that must be
completed before a release.</p>
<p>The period between feature freeze and release should be used to
stabilize new features and fix bugs. However, for every release
there are a few &#8220;must have&#8221; features that do not quite make the
deadline for a variety of reasons. It is up to the project team to
decide which features they will allow after the deadline, and which
will be delayed until the next release. The liaison is responsible
for tracking any open exceptions to the feature freeze, and helping
the project team to focus their energy on completing the work in a
timely fashion.</p>
</li>
<li><p class="first">Be available in the <tt class="docutils literal"><span class="pre">#openstack-release</span></tt> IRC channel on freenode
to answer questions and address issues.</p>
<p>There are too many projects for the release team to join all of
their channels. Please join the central release channel when you
are on IRC.</p>
</li>
<li><p class="first">Monitor and participate in mailing list discussions about release
topics.</p>
<p>The primary means of communication between the release management
team and other project teams is the openstack-dev mailing
list. Liaisons must be subscribed and ensure that they pay
attention to threads with the topic &#8220;[release]&#8221;. Watch for
instructions related to deadlines, release changes that need to be
made, etc.</p>
</li>
<li><p class="first">Manage the release-related tags on project deliverables in the
project list in the <tt class="docutils literal"><span class="pre">openstack/governance</span></tt> repository.</p>
<p>Ensure that as new repositories are added to the list managed by
each project team, the release model and project type tags are
accurate.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="typical-development-cycle-schedule">
<h2>Typical Development Cycle Schedule<a class="headerlink" href="#typical-development-cycle-schedule" title="Permalink to this headline">¶</a></h2>
<p>The development cycles follow a repeating pattern, which is described
in general terms here. The length of time between milestones may
change from cycle to cycle because of holidays, summit scheduling, and
other factors, so consult the wiki for the actual schedule for the
current cycle.  The cycles follow a repeating pattern, which is
described more generally here.</p>
<p>Weeks with negative numbers are counting down leading to the event
(&#8220;Summit -2&#8221; is 2 weeks before the summit). Weeks with positive
numbers are counting up following an event (&#8220;Feature Freeze +1&#8221; is the
week following the feature freeze).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dates for elections are specified in the Technical Committee charter
relative to the design summits, while most other dates are based on
community consensus and expressed in terms of the release date.
Because the summit may move around in the cycle, the two scheduling
systems may overlap differently in different cycles.</p>
</div>
<div class="section" id="weeks-leading-to-milestone-1">
<h3>Weeks Leading to Milestone 1<a class="headerlink" href="#weeks-leading-to-milestone-1" title="Permalink to this headline">¶</a></h3>
<p><em>Usually 4-6 weeks</em></p>
<ul class="simple">
<li>Finishing work left over from previous cycle</li>
<li>Completing blueprint and spec discussions</li>
<li>Foundational work for the rest of the cycle</li>
</ul>
</div>
<div class="section" id="weeks-leading-to-milestone-2">
<h3>Weeks Leading to Milestone 2<a class="headerlink" href="#weeks-leading-to-milestone-2" title="Permalink to this headline">¶</a></h3>
<p><em>Usually 5-6 weeks</em></p>
<p>Normal development work</p>
</div>
<div class="section" id="weeks-leading-to-milestone-3">
<h3>Weeks Leading to Milestone 3<a class="headerlink" href="#weeks-leading-to-milestone-3" title="Permalink to this headline">¶</a></h3>
<p><em>Usually 4-6 weeks</em></p>
<ul class="simple">
<li>Feature development completion</li>
<li>Bug fixes</li>
<li>Stabilization work</li>
</ul>
</div>
<div class="section" id="feature-freeze-1">
<h3>Feature Freeze -1<a class="headerlink" href="#feature-freeze-1" title="Permalink to this headline">¶</a></h3>
<p>The week before the full feature freeze we prepare the final releases
for Oslo and other non-client libraries to give consuming projects
time to stablize and for the owners to prepare bug fixes if needed.</p>
<ul class="simple">
<li>Final Oslo and non-client library release</li>
</ul>
</div>
<div class="section" id="milestone-3-feature-freeze">
<h3>Milestone 3 / Feature Freeze<a class="headerlink" href="#milestone-3-feature-freeze" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Feature development stops (&#8220;feature freeze&#8221;)</li>
<li>Message strings stop changing (&#8220;string freeze&#8221;) to give the
translation team time to finish their work</li>
<li>Dependency specifications stop changing (&#8220;requirements freeze&#8221;) to
give packagers time to prepare packages</li>
<li>Final releases for client libraries for all projects. Note that new
features that block other projects need to be released earlier in
the cycle than this, since the projects will not be able to adopt
them while the feature freeze and requirements freeze are in effect.</li>
</ul>
</div>
<div class="section" id="id1">
<h3>Feature Freeze +1<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Final Feature Freeze Exceptions merged</li>
<li>Create stable branches for all libraries</li>
</ul>
</div>
<div class="section" id="release-candidate-period-release-3">
<h3>Release Candidate Period, Release -3<a class="headerlink" href="#release-candidate-period-release-3" title="Permalink to this headline">¶</a></h3>
<p>The release candidate period spans several weeks, and usually starts
the week after the feature freeze.</p>
<ul>
<li><p class="first">All projects issue their first release candidates</p>
</li>
<li><p class="first">Create branches for all services to use for release candidates, and
eventually stable maintenance work</p>
<p>During this period, patches submitted to and being merged into the
new branch should be managed carefully.</p>
<ol class="arabic simple">
<li>Avoid aggressive backports during this time period, since having
a lot of pending reviews consumes reviewer resources and makes it
harder to understand which patches are release blockers.</li>
<li>All code patches should merge into the master branch before being
approved to merge into the new release branch.</li>
<li>Translation updates should be merged quickly to ensure they make
it into the final release.</li>
<li>Requirements sync patches should be merged quickly to ensure they
make it into the final release.</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="release-2">
<h3>Release -2<a class="headerlink" href="#release-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create the stable branch for the global requirements list and
testing tools like devstack and grenade</li>
<li>Remove the freeze for the global requirements list on the master
branch</li>
<li>All library releases freeze</li>
</ul>
</div>
<div class="section" id="release-1">
<h3>Release -1<a class="headerlink" href="#release-1" title="Permalink to this headline">¶</a></h3>
<p>Final release candidates, with translations</p>
</div>
<div class="section" id="release-0">
<h3>Release 0<a class="headerlink" href="#release-0" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Emergency last-minute release candidates (unlikely)</li>
<li>Tag the final release candidates as the official release early on
Thursday of this week</li>
<li>All library releases freeze on master ends</li>
</ul>
</div>
<div class="section" id="summit-2">
<h3>Summit -2<a class="headerlink" href="#summit-2" title="Permalink to this headline">¶</a></h3>
<p>Final summit planning and design session preparation.</p>
</div>
<div class="section" id="summit">
<h3>Summit<a class="headerlink" href="#summit" title="Permalink to this headline">¶</a></h3>
<p>The semi-annual Design Summit and Conference where contributors,
operators, and users meet in person to discuss the state of the
project and future work.</p>
</div>
</div>
<div class="section" id="managing-release-notes">
<h2>Managing Release Notes<a class="headerlink" href="#managing-release-notes" title="Permalink to this headline">¶</a></h2>
<p>Release notes for OpenStack deliverables are managed in the source
repository for the project using <a class="reference external" href="http://docs.openstack.org/developer/reno/">reno</a>. The reno documentation
explains how the tool works in general, and the instructions below
explain how to set it up for use in your project.</p>
<div class="section" id="directory-structure">
<h3>Directory Structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h3>
<p>Most projects have a <tt class="docutils literal"><span class="pre">doc/source</span></tt> directory with Sphinx configured
to build developer-focused documentation that is eventually published
under <tt class="docutils literal"><span class="pre">https://docs.openstack.org/developer/$PROJECT</span></tt>. Release notes
are not developer-focused, so they need to be published separately,
and that means a separate Sphinx project in the source tree. The jobs
that run the release note builds expect to find that project in
<tt class="docutils literal"><span class="pre">releasenotes/source</span></tt>.</p>
<p>The release note files read by reno should be kept in
<tt class="docutils literal"><span class="pre">releasenotes/notes</span></tt>. <em>Only</em> release notes YAML files should be
placed in this directory.</p>
</div>
<div class="section" id="setting-up-the-release-note-tool-within-your-project">
<h3>Setting up the Release Note Tool Within Your Project<a class="headerlink" href="#setting-up-the-release-note-tool-within-your-project" title="Permalink to this headline">¶</a></h3>
<p>The release notes are built from the configuration in the master
branch, and pull notes from all of the stable branches for which notes
should be published. Start by following these steps to configure the
master branch build, and then backporting necessary changes to the
stable branches where you wish to use reno.</p>
<ol class="arabic">
<li><p class="first">Set up a new Sphinx project using <tt class="docutils literal"><span class="pre">sphinx-quickstart</span></tt>. The
interactive prompts will ask where to put the new files. If you run
the tool from the root of your git repository, answering
<tt class="docutils literal"><span class="pre">releasenotes/source</span></tt> will produce the correct results.</p>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">releasenotes/source/conf.py</span></tt> to change the <tt class="docutils literal"><span class="pre">extensions</span></tt>
list to include <tt class="docutils literal"><span class="pre">'reno.sphinxext'</span></tt>.</p>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">releasenotes/source/conf.py</span></tt> and add:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># -- Options for Internationalization output ------------------------------</span>
<span class="n">locale_dirs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;locale/&#39;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">test-requirements.txt</span></tt> to add <tt class="docutils literal"><span class="pre">reno</span></tt>. Make sure to use
the current entry from the global requirements list to avoid
version conflicts.</p>
</li>
<li><p class="first">Create a directory <tt class="docutils literal"><span class="pre">releasenotes/notes</span></tt> and add an empty
<tt class="docutils literal"><span class="pre">.placeholder</span></tt> file to ensure git tracks the directory.</p>
</li>
<li><p class="first">Create a file to hold the release notes from the &#8220;current&#8221; branch
by using a <tt class="docutils literal"><span class="pre">release-notes</span></tt> directive without specifying an
explicit branch. This file is used by the test jobs to ensure that
patches on a stable branch cannot introduce release notes that
break the real release notes build job on the master branch. For
example, Glance uses <tt class="docutils literal"><span class="pre">releasenotes/source/unreleased.rst</span></tt>
containing:</p>
<div class="highlight-python"><pre>==============================
 Current Series Release Notes
==============================

.. release-notes::</pre>
</div>
</li>
<li><p class="first">Create a separate file for each stable branch for which you plan to
use reno to manage release notes. Use the <tt class="docutils literal"><span class="pre">release-notes</span></tt>
directive to generate the correct release notes for each
series. For example, the liberty release is represented in a file
called <tt class="docutils literal"><span class="pre">releasenotes/source/liberty.rst</span></tt> containing:</p>
<div class="highlight-python"><pre>==============================
 Liberty Series Release Notes
==============================

.. release-notes::
   :branch: origin/stable/liberty</pre>
</div>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">releasenotes/source/index.rst</span></tt> to remove most of the
automatically-generated content and replace it with a title and
<tt class="docutils literal"><span class="pre">toctree</span></tt> referring to the branch files you created in the
previous two steps.</p>
</li>
<li><p class="first">Update <tt class="docutils literal"><span class="pre">tox.ini</span></tt> to add a <tt class="docutils literal"><span class="pre">releasenotes</span></tt> test environment by
adding:</p>
<div class="highlight-python"><pre>[testenv:releasenotes]
commands = sphinx-build -a -W -E -d releasenotes/build/doctrees -b html releasenotes/source releasenotes/build/html</pre>
</div>
</li>
<li><p class="first">Submit all of the above changes together as one patch. For example,
see <a class="reference external" href="https://review.openstack.org/241323">https://review.openstack.org/241323</a> and
<a class="reference external" href="https://review.openstack.org/243302">https://review.openstack.org/243302</a> (Glance was set up using 2
separate patches).</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Repeat this process for any existing stable branches for which reno
is being used for release notes, back through
stable/liberty. Although we do not run reno in the branches to
publish the notes, we <em>do</em> run it in test jobs to ensure that
release note changes in stable branches do not break the release
note build in master.</p>
</div>
</div>
<div class="section" id="adding-the-release-notes-jobs-to-your-ci">
<h3>Adding the Release Notes Jobs to Your CI<a class="headerlink" href="#adding-the-release-notes-jobs-to-your-ci" title="Permalink to this headline">¶</a></h3>
<p>After your project has the necessary change to enable reno to build
the release notes, the next step is to modify the CI system to add the
necessary jobs. All of these changes are made to the
<tt class="docutils literal"><span class="pre">openstack-infra/project-config</span></tt> repository.</p>
<ol class="arabic simple">
<li>Modify the section of <tt class="docutils literal"><span class="pre">jenkins/jobs/projects.yaml</span></tt> related to
your repository to add the <tt class="docutils literal"><span class="pre">openstack-releasenotes-jobs</span></tt> job
group to the list of jobs for your project.</li>
<li>Modify the section of <tt class="docutils literal"><span class="pre">zuul/layout.yaml</span></tt> related to your
repository to add <tt class="docutils literal"><span class="pre">release-notes-jobs</span></tt> to the list of job
templates for your project.</li>
<li>Submit all of the changes as one patch. You may want to set the
<tt class="docutils literal"><span class="pre">Depends-On</span></tt> tag in the commit message to point to the Change-Id
of the commit from the previous section, to avoid adding jobs that
will fail until that patch lands. For example, see
<a class="reference external" href="https://review.openstack.org/241344">https://review.openstack.org/241344</a>.</li>
</ol>
</div>
<div class="section" id="how-to-add-new-release-notes">
<h3>How to Add New Release Notes<a class="headerlink" href="#how-to-add-new-release-notes" title="Permalink to this headline">¶</a></h3>
<p>reno scans the git history to find release notes files and tags to
determine which notes are part of each release. That means you need to
put the notes for a release into the branch where the release will be
generated <em>before</em> the release is tagged. The note files can be edited
later, but they will always appear under the first release in the
series where they were introduced.</p>
<p>In general, release notes should be added with fixes that go into the
master branch, and then included in the backport for the fix as it
goes into older stable branches. Because the release notes for each
series are generated separately, the same note may appear in the
output for multiple versions.</p>
<p>If a note does not apply to the master branch for some reason, it can
be added directly to the stable branch.</p>
<p>Use <tt class="docutils literal"><span class="pre">reno</span> <span class="pre">new</span></tt> to generate a new release note file with a unique
suffix value. The unique filename created by reno ensures that there
will be no merge conflicts as the fix is backported. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tox -e venv -- reno new bug-XXX
</pre></div>
</div>
<p>After the new file is created, edit it to remove any sections that are
not relevant and to add notes under the appropriate sections. Refer to
the <a class="reference external" href="http://docs.openstack.org/developer/reno/usage.html#creating-new-release-notes">Editing a Release Note</a>
section of the reno documentation for details about what should go in
each section of the YAML file and for tips on formatting notes.</p>
<p>To see the rendered version of the new release note, you need to
commit the change so reno can find the note file in the git log, and
then build the release notes documentation.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git commit  <span class="c1"># Commit the change because reno scans git log.</span>

$ tox -e releasenotes
</pre></div>
</div>
<p>Then look at the generated release notes files in
<tt class="docutils literal"><span class="pre">releasenotes/build/html</span></tt> in a web browser.</p>
</div>
<div class="section" id="when-to-add-release-notes">
<h3>When to Add Release Notes<a class="headerlink" href="#when-to-add-release-notes" title="Permalink to this headline">¶</a></h3>
<p>The release notes for a patch should be included in the patch. If not, the
release notes should be in a follow-on review.</p>
<p>If the patch meets any of the following criteria, a release note is
recommended.</p>
<ul class="simple">
<li>Upgrades<ul>
<li>The deployer needs to take an action when upgrading</li>
<li>A new configuration option is added that the deployer should
consider changing from the default</li>
<li>A configuration option is deprecated</li>
<li>A configuration option is removed</li>
</ul>
</li>
<li>Features<ul>
<li>A new feature is implemented</li>
<li>A feature is marked for deprecation</li>
<li>A feature is removed</li>
<li>Default behavior is changed</li>
</ul>
</li>
<li>Bugs<ul>
<li>A security bug is fixed</li>
<li>A long-standing or important bug is fixed</li>
</ul>
</li>
<li>APIs<ul>
<li>A driver interface or other plugin API changes</li>
<li>A REST API changes</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
<div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Release Management</a><ul>
<li><a class="reference internal" href="#release-models">Release models</a><ul>
<li><a class="reference internal" href="#common-cycle-with-development-milestones">Common cycle with development milestones</a></li>
<li><a class="reference internal" href="#common-cycle-with-intermediary-releases">Common cycle with intermediary releases</a></li>
<li><a class="reference internal" href="#trailing-the-common-cycle">Trailing the common cycle</a></li>
<li><a class="reference internal" href="#independent-release-model">Independent release model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-release">How to release ?</a><ul>
<li><a class="reference internal" href="#release-process-for-projects-following-the-release-cycle">Release process for projects following the release cycle</a></li>
<li><a class="reference internal" href="#release-process-for-other-projects">Release process for other projects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-liaisons">Release Liaisons</a><ul>
<li><a class="reference internal" href="#liaison-responsibilities">Liaison Responsibilities</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typical-development-cycle-schedule">Typical Development Cycle Schedule</a><ul>
<li><a class="reference internal" href="#weeks-leading-to-milestone-1">Weeks Leading to Milestone 1</a></li>
<li><a class="reference internal" href="#weeks-leading-to-milestone-2">Weeks Leading to Milestone 2</a></li>
<li><a class="reference internal" href="#weeks-leading-to-milestone-3">Weeks Leading to Milestone 3</a></li>
<li><a class="reference internal" href="#feature-freeze-1">Feature Freeze -1</a></li>
<li><a class="reference internal" href="#milestone-3-feature-freeze">Milestone 3 / Feature Freeze</a></li>
<li><a class="reference internal" href="#id1">Feature Freeze +1</a></li>
<li><a class="reference internal" href="#release-candidate-period-release-3">Release Candidate Period, Release -3</a></li>
<li><a class="reference internal" href="#release-2">Release -2</a></li>
<li><a class="reference internal" href="#release-1">Release -1</a></li>
<li><a class="reference internal" href="#release-0">Release 0</a></li>
<li><a class="reference internal" href="#summit-2">Summit -2</a></li>
<li><a class="reference internal" href="#summit">Summit</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-release-notes">Managing Release Notes</a><ul>
<li><a class="reference internal" href="#directory-structure">Directory Structure</a></li>
<li><a class="reference internal" href="#setting-up-the-release-note-tool-within-your-project">Setting up the Release Note Tool Within Your Project</a></li>
<li><a class="reference internal" href="#adding-the-release-notes-jobs-to-your-ci">Adding the Release Notes Jobs to Your CI</a></li>
<li><a class="reference internal" href="#how-to-add-new-release-notes">How to Add New Release Notes</a></li>
<li><a class="reference internal" href="#when-to-add-release-notes">When to Add Release Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="cross-project.html"
                                  title="previous chapter">Cross-Project</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="stable-branches.html"
                                  title="next chapter">Stable Branches</a></p>
            <h3>Project Source</h3>
            <ul class="this-page-menu">
              <li><a href="http://git.openstack.org/cgit/openstack/project-team-guide
"
                     rel="nofollow">Project Source</a></li>
            </ul>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/release-management.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
    </div>
</div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="stable-branches.html" title="Stable Branches"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="cross-project.html" title="Cross-Project"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">OpenStack Project Team Guide 0.0.1.dev126 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2017, OpenStack Contributors - use the <a href="https://git.openstack.org/cgit/openstack/project-team-guide">project-team-guide git repo</a> to propose changes.
      Last updated on Tue Jan 31 20:58:51 2017, commit b2069ac.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
//Tracking docs.openstack.org/developer/<projectname> only
//The URL is built from the project variable in conf.py
var pageTracker = _gat._getTracker("UA-17511903-1");
pageTracker._setCookiePath("/developer/OpenStack Project Team Guide");
pageTracker._trackPageview();
} catch(err) {}</script>

  </body>
</html>