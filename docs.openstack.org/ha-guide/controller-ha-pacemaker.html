<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Pacemaker cluster stack</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Pacemaker cluster stack</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="intro-ha-arch-pacemaker.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: The Pacemaker architecture"></i></a>
    
    
    <a href="controller-ha-vip.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure the VIP"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 08:40</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Pacemaker cluster stack</a><ul>
<li><a class="reference internal" href="#install-packages">Install packages</a></li>
<li><a class="reference internal" href="#set-up-the-cluster-with-pcs">Set up the cluster with pcs</a></li>
<li><a class="reference internal" href="#set-up-the-cluster-with-crmsh">Set up the cluster with <cite>crmsh</cite></a><ul>
<li><a class="reference internal" href="#set-up-corosync-with-multicast">Set up Corosync with multicast</a></li>
<li><a class="reference internal" href="#set-up-corosync-with-unicast">Set up Corosync with unicast</a></li>
<li><a class="reference internal" href="#set-up-corosync-with-votequorum-library">Set up Corosync with votequorum library</a></li>
<li><a class="reference internal" href="#start-corosync">Start Corosync</a></li>
<li><a class="reference internal" href="#start-pacemaker">Start Pacemaker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-basic-cluster-properties">Set basic cluster properties</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="pacemaker-cluster-stack">
<h1>Pacemaker cluster stack<a class="headerlink" href="#pacemaker-cluster-stack" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://clusterlabs.org/">Pacemaker</a> cluster stack is a state-of-the-art
high availability and load balancing stack for the Linux platform.
Pacemaker is used to make OpenStack infrastructure highly available.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is storage and application-agnostic, and in no way specific to OpenStack.</p>
</div>
<p>Pacemaker relies on the
<a class="reference external" href="http://corosync.github.io/corosync/">Corosync</a> messaging layer
for reliable cluster communications. Corosync implements the Totem single-ring
ordering and membership protocol. It also provides UDP and InfiniBand based
messaging, quorum, and cluster membership to Pacemaker.</p>
<p>Pacemaker does not inherently understand the applications it manages.
Instead, it relies on resource agents (RAs) that are scripts that encapsulate
the knowledge of how to start, stop, and check the health of each application
managed by the cluster.</p>
<p>These agents must conform to one of the <a class="reference external" href="https://github.com/ClusterLabs/OCF-spec/blob/master/ra/resource-agent-api.md">OCF</a>,
<a class="reference external" href="http://refspecs.linux-foundation.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/iniscrptact.html">SysV Init</a>, Upstart, or Systemd standards.</p>
<p>Pacemaker ships with a large set of OCF agents (such as those managing
MySQL databases, virtual IP addresses, and RabbitMQ), but can also use
any agents already installed on your system and can be extended with
your own (see the
<a class="reference external" href="http://www.linux-ha.org/doc/dev-guides/ra-dev-guide.html">developer guide</a>).</p>
<p>The steps to implement the Pacemaker cluster stack are:</p>
<ul class="simple">
<li><a class="reference internal" href="#pacemaker-install"><span class="std std-ref">Install packages</span></a></li>
<li><a class="reference internal" href="#pacemaker-corosync-setup"><span class="std std-ref">Set up the cluster with pcs</span></a></li>
<li><a class="reference internal" href="#pacemaker-corosync-start"><span class="std std-ref">Start Corosync</span></a></li>
<li><a class="reference internal" href="#pacemaker-start"><span class="std std-ref">Start Pacemaker</span></a></li>
<li><a class="reference internal" href="#pacemaker-cluster-properties"><span class="std std-ref">Set basic cluster properties</span></a></li>
</ul>
<div class="section" id="install-packages">
<span id="pacemaker-install"></span><h2>Install packages<a class="headerlink" href="#install-packages" title="Permalink to this headline">¶</a></h2>
<p>On any host that is meant to be part of a Pacemaker cluster, establish cluster
communications through the Corosync messaging layer.
This involves installing the following packages (and their dependencies, which
your package manager usually installs automatically):</p>
<ul class="simple">
<li><cite>pacemaker</cite></li>
<li><cite>pcs</cite> (CentOS or RHEL) or crmsh</li>
<li><cite>corosync</cite></li>
<li><cite>fence-agents</cite> (CentOS or RHEL) or cluster-glue</li>
<li><cite>resource-agents</cite></li>
<li><cite>libqb0</cite></li>
</ul>
</div>
<div class="section" id="set-up-the-cluster-with-pcs">
<span id="pacemaker-corosync-setup"></span><h2>Set up the cluster with pcs<a class="headerlink" href="#set-up-the-cluster-with-pcs" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Make sure <cite>pcs</cite> is running and configured to start at boot time:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> systemctl <span class="nb">enable</span> pcsd
<span class="gp">$</span> systemctl start pcsd
</pre></div>
</div>
</li>
<li><p class="first">Set a password for hacluster user on each host:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> my-secret-password-no-dont-use-this-one <span class="se">\</span>
  <span class="p">|</span> passwd --stdin hacluster
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since the cluster is a single administrative domain, it is
acceptable to use the same password on all nodes.</p>
</div>
</li>
<li><p class="first">Use that password to authenticate to the nodes that will
make up the cluster:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pcs cluster auth controller1 controller2 controller3 <span class="se">\</span>
  -u hacluster -p my-secret-password-no-dont-use-this-one --force
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">-p</span></code> option is used to give the password on command
line and makes it easier to script.</p>
</div>
</li>
<li><p class="first">Create and name the cluster. Then, start it and enable all components to
auto-start at boot time:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pcs cluster setup --force --name my-first-openstack-cluster <span class="se">\</span>
  controller1 controller2 controller3
<span class="gp">$</span> pcs cluster start --all
<span class="gp">$</span> pcs cluster <span class="nb">enable</span> --all
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In Red Hat Enterprise Linux or CentOS environments, this is a recommended
path to perform configuration. For more information, see the <a class="reference external" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/High_Availability_Add-On_Reference/ch-clusteradmin-HAAR.html#s1-clustercreate-HAAR">RHEL docs</a>.</p>
</div>
</div>
<div class="section" id="set-up-the-cluster-with-crmsh">
<h2>Set up the cluster with <cite>crmsh</cite><a class="headerlink" href="#set-up-the-cluster-with-crmsh" title="Permalink to this headline">¶</a></h2>
<p>After installing the Corosync package, you must create
the <code class="file docutils literal"><span class="pre">/etc/corosync/corosync.conf</span></code> configuration file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For Ubuntu, you should also enable the Corosync service in the
<code class="docutils literal"><span class="pre">/etc/default/corosync</span></code> configuration file.</p>
</div>
<p>Corosync can be configured to work with either multicast or unicast IP
addresses or to use the votequorum library.</p>
<ul class="simple">
<li><a class="reference internal" href="#corosync-multicast"><span class="std std-ref">Set up Corosync with multicast</span></a></li>
<li><a class="reference internal" href="#corosync-unicast"><span class="std std-ref">Set up Corosync with unicast</span></a></li>
<li><a class="reference internal" href="#corosync-votequorum"><span class="std std-ref">Set up Corosync with votequorum library</span></a></li>
</ul>
<div class="section" id="set-up-corosync-with-multicast">
<span id="corosync-multicast"></span><h3>Set up Corosync with multicast<a class="headerlink" href="#set-up-corosync-with-multicast" title="Permalink to this headline">¶</a></h3>
<p>Most distributions ship an example configuration file
(<code class="file docutils literal"><span class="pre">corosync.conf.example</span></code>) as part of the documentation bundled with
the Corosync package. An example Corosync configuration file is shown below:</p>
<p><strong>Example Corosync configuration file for multicast (``corosync.conf``)</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>totem {
      version: 2

      # Time (in ms) to wait for a token (1)
      token: 10000

     # How many token retransmits before forming a new
     # configuration
     token_retransmits_before_loss_const: 10

     # Turn off the virtual synchrony filter
     vsftype: none

     # Enable encryption (2)
     secauth: on

     # How many threads to use for encryption/decryption
     threads: 0

     # This specifies the redundant ring protocol, which may be
     # none, active, or passive. (3)
     rrp_mode: active

     # The following is a two-ring multicast configuration. (4)
     interface {
             ringnumber: 0
             bindnetaddr: 10.0.0.0
             mcastaddr: 239.255.42.1
             mcastport: 5405
     }
     interface {
             ringnumber: 1
             bindnetaddr: 10.0.42.0
             mcastaddr: 239.255.42.2
             mcastport: 5405
     }
}

amf {
     mode: disabled
}

service {
        # Load the Pacemaker Cluster Resource Manager (5)
        ver:       1
        name:      pacemaker
}

aisexec {
        user:   root
        group:  root
}

logging {
        fileline: off
        to_stderr: yes
        to_logfile: no
        to_syslog: yes
        syslog_facility: daemon
        debug: off
        timestamp: on
        logger_subsys {
                subsys: AMF
                debug: off
                tags: enter|leave|trace1|trace2|trace3|trace4|trace6
        }}
</pre></div>
</div>
<p>Note the following:</p>
<ul>
<li><p class="first">The <code class="docutils literal"><span class="pre">token</span></code> value specifies the time, in milliseconds,
during which the Corosync token is expected
to be transmitted around the ring.
When this timeout expires, the token is declared lost,
and after <code class="docutils literal"><span class="pre">token_retransmits_before_loss_const</span> <span class="pre">lost</span></code> tokens,
the non-responding processor (cluster node) is declared dead.
<code class="docutils literal"><span class="pre">token</span> <span class="pre">×</span> <span class="pre">token_retransmits_before_loss_const</span></code>
is the maximum time a node is allowed to not respond to cluster messages
before being considered dead.
The default for token is 1000 milliseconds (1 second),
with 4 allowed retransmits.
These defaults are intended to minimize failover times,
but can cause frequent false alarms and unintended failovers
in case of short network interruptions. The values used here are safer,
albeit with slightly extended failover times.</p>
</li>
<li><p class="first">With <code class="docutils literal"><span class="pre">secauth</span></code> enabled,
Corosync nodes mutually authenticates using a 128-byte shared secret
stored in the <code class="file docutils literal"><span class="pre">/etc/corosync/authkey</span></code> file.
This can be generated with the <strong class="command">corosync-keygen</strong> utility.
Cluster communications are encrypted when using <code class="docutils literal"><span class="pre">secauth</span></code>.</p>
</li>
<li><p class="first">In Corosync, configurations use redundant networking
(with more than one interface). This means you must select a Redundant
Ring Protocol (RRP) mode other than none. We recommend <code class="docutils literal"><span class="pre">active</span></code> as
the RRP mode.</p>
<p>Note the following about the recommended interface configuration:</p>
<ul class="simple">
<li>Each configured interface must have a unique <code class="docutils literal"><span class="pre">ringnumber</span></code>,
starting with 0.</li>
<li>The <code class="docutils literal"><span class="pre">bindnetaddr</span></code> is the network address of the interfaces to bind to.
The example uses two network addresses of /24 IPv4 subnets.</li>
<li>Multicast groups (<code class="docutils literal"><span class="pre">mcastaddr</span></code>) must not be reused
across cluster boundaries. No two distinct clusters
should ever use the same multicast group.
Be sure to select multicast addresses compliant with
<a class="reference external" href="http://www.ietf.org/rfc/rfc2365.txt">RFC 2365, &#8220;Administratively Scoped IP Multicast&#8221;</a>.</li>
<li>For firewall configurations, Corosync communicates over UDP only,
and uses <code class="docutils literal"><span class="pre">mcastport</span></code> (for receives) and <code class="docutils literal"><span class="pre">mcastport</span> <span class="pre">-</span> <span class="pre">1</span></code> (for sends).</li>
</ul>
</li>
<li><p class="first">The service declaration for the Pacemaker service
may be placed in the <code class="file docutils literal"><span class="pre">corosync.conf</span></code> file directly
or in its own separate file, <code class="file docutils literal"><span class="pre">/etc/corosync/service.d/pacemaker</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are using Corosync version 2 on Ubuntu 14.04,
remove or comment out lines under the service stanza.
These stanzas enable Pacemaker to start up. Another potential
problem is the boot and shutdown order of Corosync and
Pacemaker. To force Pacemaker to start after Corosync and
stop before Corosync, fix the start and kill symlinks manually:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> update-rc.d pacemaker start <span class="m">20</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> . stop <span class="m">00</span> <span class="m">0</span> <span class="m">1</span> <span class="m">6</span> .
</pre></div>
</div>
<p>The Pacemaker service also requires an additional
configuration file <code class="docutils literal"><span class="pre">/etc/corosync/uidgid.d/pacemaker</span></code>
to be created with the following content:</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>uidgid {
  uid: hacluster
  gid: haclient
}
</pre></div>
</div>
</div>
</li>
<li><p class="first">Once created, synchronize the <code class="file docutils literal"><span class="pre">corosync.conf</span></code> file
(and the <code class="file docutils literal"><span class="pre">authkey</span></code> file if the secauth option is enabled)
across all cluster nodes.</p>
</li>
</ul>
</div>
<div class="section" id="set-up-corosync-with-unicast">
<span id="corosync-unicast"></span><h3>Set up Corosync with unicast<a class="headerlink" href="#set-up-corosync-with-unicast" title="Permalink to this headline">¶</a></h3>
<p>For environments that do not support multicast, Corosync should be configured
for unicast. An example fragment of the <code class="file docutils literal"><span class="pre">corosync.conf</span></code> file
for unicastis is shown below:</p>
<p><strong>Corosync configuration file fragment for unicast (``corosync.conf``)</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>totem {
        #...
        interface {
                ringnumber: 0
                bindnetaddr: 10.0.0.0
                broadcast: yes (1)
                mcastport: 5405
        }
        interface {
                ringnumber: 1
                bindnetaddr: 10.0.42.0
                broadcast: yes
                mcastport: 5405
        }
        transport: udpu (2)
}

nodelist { (3)
        node {
                ring0_addr: 10.0.0.12
                ring1_addr: 10.0.42.12
                nodeid: 1
        }
        node {
                ring0_addr: 10.0.0.13
                ring1_addr: 10.0.42.13
                nodeid: 2
        }
        node {
                ring0_addr: 10.0.0.14
                ring1_addr: 10.0.42.14
                nodeid: 3
        }
}
#...
</pre></div>
</div>
<p>Note the following:</p>
<ul>
<li><p class="first">If the <code class="docutils literal"><span class="pre">broadcast</span></code> parameter is set to <code class="docutils literal"><span class="pre">yes</span></code>, the broadcast address is
used for communication. If this option is set, the <code class="docutils literal"><span class="pre">mcastaddr</span></code> parameter
should not be set.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">transport</span></code> directive controls the transport mechanism.
To avoid the use of multicast entirely, specify the <code class="docutils literal"><span class="pre">udpu</span></code> unicast
transport parameter. This requires specifying the list of members in the
<code class="docutils literal"><span class="pre">nodelist</span></code> directive. This potentially makes up the membership before
deployment. The default is <code class="docutils literal"><span class="pre">udp</span></code>. The transport type can also be set to
<code class="docutils literal"><span class="pre">udpu</span></code> or <code class="docutils literal"><span class="pre">iba</span></code>.</p>
</li>
<li><p class="first">Within the <code class="docutils literal"><span class="pre">nodelist</span></code> directive, it is possible to specify specific
information about the nodes in the cluster. The directive can contain only
the node sub-directive, which specifies every node that should be a member
of the membership, and where non-default options are needed. Every node must
have at least the <code class="docutils literal"><span class="pre">ring0_addr</span></code> field filled.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For UDPU, every node that should be a member of the membership must be specified.</p>
</div>
<p>Possible options are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ring{X}_addr</span></code> specifies the IP address of one of the nodes.
<code class="docutils literal"><span class="pre">{X}</span></code> is the ring number.</li>
<li><code class="docutils literal"><span class="pre">nodeid</span></code> is optional when using IPv4 and required when using IPv6.
This is a 32-bit value specifying the node identifier delivered to the
cluster membership service. If this is not specified with IPv4,
the node ID is determined from the 32-bit IP address of the system to which
the system is bound with ring identifier of 0. The node identifier value of
zero is reserved and should not be used.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="set-up-corosync-with-votequorum-library">
<span id="corosync-votequorum"></span><h3>Set up Corosync with votequorum library<a class="headerlink" href="#set-up-corosync-with-votequorum-library" title="Permalink to this headline">¶</a></h3>
<p>The votequorum library is part of the Corosync project. It provides an
interface to the vote-based quorum service and it must be explicitly enabled
in the Corosync configuration file. The main role of votequorum library is to
avoid split-brain situations, but it also provides a mechanism to:</p>
<ul class="simple">
<li>Query the quorum status</li>
<li>List the nodes known to the quorum service</li>
<li>Receive notifications of quorum state changes</li>
<li>Change the number of votes assigned to a node</li>
<li>Change the number of expected votes for a cluster to be quorate</li>
<li>Connect an additional quorum device to allow small clusters remain quorate
during node outages</li>
</ul>
<p>The votequorum library has been created to replace and eliminate <code class="docutils literal"><span class="pre">qdisk</span></code>, the
disk-based quorum daemon for CMAN, from advanced cluster configurations.</p>
<p>A sample votequorum service configuration in the <code class="file docutils literal"><span class="pre">corosync.conf</span></code> file is:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>quorum {
        provider: corosync_votequorum (1)
        expected_votes: 7 (2)
        wait_for_all: 1 (3)
        last_man_standing: 1 (4)
        last_man_standing_window: 10000 (5)
       }
</pre></div>
</div>
<p>Note the following:</p>
<ul class="simple">
<li>Specifying <code class="docutils literal"><span class="pre">corosync_votequorum</span></code> enables the votequorum library.
This is the only required option.</li>
<li>The cluster is fully operational with <code class="docutils literal"><span class="pre">expected_votes</span></code> set to 7 nodes
(each node has 1 vote), quorum: 4. If a list of nodes is specified as
<code class="docutils literal"><span class="pre">nodelist</span></code>, the <code class="docutils literal"><span class="pre">expected_votes</span></code> value is ignored.</li>
<li>When you start up a cluster (all nodes down) and set <code class="docutils literal"><span class="pre">wait_for_all</span></code> to 1,
the cluster quorum is held until all nodes are online and have joined the
cluster for the first time. This parameter is new in Corosync 2.0.</li>
<li>Setting <code class="docutils literal"><span class="pre">last_man_standing</span></code> to 1 enables the Last Man Standing (LMS)
feature. By default, it is disabled (set to 0).
If a cluster is on the quorum edge (<code class="docutils literal"><span class="pre">expected_votes:</span></code> set to 7;
<code class="docutils literal"><span class="pre">online</span> <span class="pre">nodes:</span></code> set to 4) for longer than the time specified
for the <code class="docutils literal"><span class="pre">last_man_standing_window</span></code> parameter, the cluster can recalculate
quorum and continue operating even if the next node will be lost.
This logic is repeated until the number of online nodes in the cluster
reaches 2. In order to allow the cluster to step down from 2 members to only
1, the <code class="docutils literal"><span class="pre">auto_tie_breaker</span></code> parameter needs to be set.
We do not recommended this for production environments.</li>
<li><code class="docutils literal"><span class="pre">last_man_standing_window</span></code> specifies the time, in milliseconds,
required to recalculate quorum after one or more hosts
have been lost from the cluster. To perform a new quorum recalculation,
the cluster must have quorum for at least the interval
specified for <code class="docutils literal"><span class="pre">last_man_standing_window</span></code>. The default is 10000ms.</li>
</ul>
</div>
<div class="section" id="start-corosync">
<span id="pacemaker-corosync-start"></span><h3>Start Corosync<a class="headerlink" href="#start-corosync" title="Permalink to this headline">¶</a></h3>
<p>Corosync is started as a regular system service. Depending on your
distribution, it may ship with an LSB init script, an upstart job, or
a Systemd unit file.</p>
<ul>
<li><p class="first">Start <code class="docutils literal"><span class="pre">corosync</span></code> with the LSB init script:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> /etc/init.d/corosync start
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> service corosync start
</pre></div>
</div>
</li>
<li><p class="first">Start <code class="docutils literal"><span class="pre">corosync</span></code> with upstart:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> start corosync
</pre></div>
</div>
</li>
<li><p class="first">Start <code class="docutils literal"><span class="pre">corosync</span></code> with systemd unit file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl start corosync
</pre></div>
</div>
</li>
</ul>
<p>You can now check the <code class="docutils literal"><span class="pre">corosync</span></code> connectivity with one of these tools.</p>
<p>Use the <strong class="command">corosync-cfgtool</strong> utility with the <code class="docutils literal"><span class="pre">-s</span></code> option
to get a summary of the health of the communication rings:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> corosync-cfgtool -s
<span class="go">Printing ring status.</span>
<span class="go">Local node ID 435324542</span>
<span class="go">RING ID 0</span>
<span class="go">        id      = 10.0.0.82</span>
<span class="go">        status  = ring 0 active with no faults</span>
<span class="go">RING ID 1</span>
<span class="go">        id      = 10.0.42.100</span>
<span class="go">        status  = ring 1 active with no faults</span>
</pre></div>
</div>
<p>Use the <strong class="command">corosync-objctl</strong> utility to dump the Corosync cluster
member list:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> corosync-objctl runtime.totem.pg.mrp.srp.members
<span class="go">runtime.totem.pg.mrp.srp.435324542.ip=r(0) ip(10.0.0.82) r(1) ip(10.0.42.100)</span>
<span class="go">runtime.totem.pg.mrp.srp.435324542.join_count=1</span>
<span class="go">runtime.totem.pg.mrp.srp.435324542.status=joined</span>
<span class="go">runtime.totem.pg.mrp.srp.983895584.ip=r(0) ip(10.0.0.87) r(1) ip(10.0.42.254)</span>
<span class="go">runtime.totem.pg.mrp.srp.983895584.join_count=1</span>
<span class="go">runtime.totem.pg.mrp.srp.983895584.status=joined</span>
</pre></div>
</div>
<p>You should see a <code class="docutils literal"><span class="pre">status=joined</span></code> entry for each of your constituent
cluster nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using Corosync version 2, use the <strong class="command">corosync-cmapctl</strong>
utility instead of <strong class="command">corosync-objctl</strong>; it is a direct replacement.</p>
</div>
</div>
<div class="section" id="start-pacemaker">
<span id="pacemaker-start"></span><h3>Start Pacemaker<a class="headerlink" href="#start-pacemaker" title="Permalink to this headline">¶</a></h3>
<p>After the <code class="docutils literal"><span class="pre">corosync</span></code> service have been started and you have verified that the
cluster is communicating properly, you can start <strong class="command">pacemakerd</strong>, the
Pacemaker master control process. Choose one from the following four ways to
start it:</p>
<ol class="arabic simple">
<li>Start <code class="docutils literal"><span class="pre">pacemaker</span></code> with the LSB init script:</li>
</ol>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> /etc/init.d/pacemaker start
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> service pacemaker start
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li>Start <code class="docutils literal"><span class="pre">pacemaker</span></code> with upstart:</li>
</ol>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> start pacemaker
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li>Start <code class="docutils literal"><span class="pre">pacemaker</span></code> with the systemd unit file:</li>
</ol>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl start pacemaker
</pre></div>
</div>
</div></blockquote>
<p>After the <code class="docutils literal"><span class="pre">pacemaker</span></code> service has started, Pacemaker creates a default empty
cluster configuration with no resources. Use the <strong class="command">crm_mon</strong> utility to
observe the status of <code class="docutils literal"><span class="pre">pacemaker</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> crm_mon -1
<span class="go">Last updated: Sun Oct  7 21:07:52 2012</span>
<span class="go">Last change: Sun Oct  7 20:46:00 2012 via cibadmin on controller2</span>
<span class="go">Stack: openais</span>
<span class="go">Current DC: controller2 - partition with quorum</span>
<span class="go">Version: 1.1.6-9971ebba4494012a93c03b40a2c58ec0eb60f50c</span>
<span class="go">3 Nodes configured, 3 expected votes</span>
<span class="go">0 Resources configured.</span>


<span class="go">Online: [ controller3 controller2 controller1 ]</span>
<span class="go">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-basic-cluster-properties">
<span id="pacemaker-cluster-properties"></span><h2>Set basic cluster properties<a class="headerlink" href="#set-basic-cluster-properties" title="Permalink to this headline">¶</a></h2>
<p>After you set up your Pacemaker cluster, set a few basic cluster properties:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">crmsh</span></code></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> crm configure property pe-warn-series-max<span class="o">=</span><span class="s2">&quot;1000&quot;</span> <span class="se">\</span>
  pe-input-series-max<span class="o">=</span><span class="s2">&quot;1000&quot;</span> <span class="se">\</span>
  pe-error-series-max<span class="o">=</span><span class="s2">&quot;1000&quot;</span> <span class="se">\</span>
  cluster-recheck-interval<span class="o">=</span><span class="s2">&quot;5min&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">pcs</span></code></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pcs property <span class="nb">set</span> pe-warn-series-max<span class="o">=</span><span class="m">1000</span> <span class="se">\</span>
  pe-input-series-max<span class="o">=</span><span class="m">1000</span> <span class="se">\</span>
  pe-error-series-max<span class="o">=</span><span class="m">1000</span> <span class="se">\</span>
  cluster-recheck-interval<span class="o">=</span>5min
</pre></div>
</div>
</li>
</ul>
<p>Note the following:</p>
<ul class="simple">
<li>Setting the <code class="docutils literal"><span class="pre">pe-warn-series-max</span></code>, <code class="docutils literal"><span class="pre">pe-input-series-max</span></code>,
and <code class="docutils literal"><span class="pre">pe-error-series-max</span></code> parameters to 1000
instructs Pacemaker to keep a longer history of the inputs processed
and errors and warnings generated by its Policy Engine.
This history is useful if you need to troubleshoot the cluster.</li>
<li>Pacemaker uses an event-driven approach to cluster state processing.
The <code class="docutils literal"><span class="pre">cluster-recheck-interval</span></code> parameter (which defaults to 15 minutes)
defines the interval at which certain Pacemaker actions occur.
It is usually prudent to reduce this to a shorter interval,
such as 5 or 3 minutes.</li>
</ul>
<p>By default, STONITH is enabled in Pacemaker, but STONITH mechanisms (to
shutdown a node via IPMI or ssh) are not configured. In this case Pacemaker
will refuse to start any resources.
For production cluster it is recommended to configure appropriate STONITH
mechanisms. But for demo or testing purposes STONITH can be disabled completely
as follows:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">crmsh</span></code></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> crm configure property stonith-enabled<span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">pcs</span></code></p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pcs property <span class="nb">set</span> stonith-enabled<span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
</li>
</ul>
<p>After you make these changes, commit the updated configuration.</p>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="intro-ha-arch-pacemaker.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: The Pacemaker architecture"></i></a>
          
          
            <a href="controller-ha-vip.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure the VIP"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 08:40</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-ha.html">Introduction to OpenStack high availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Configuring the basic environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared-services.html">Configuring the shared services</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="controller-ha.html">Configuring the controller</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro-ha-arch-pacemaker.html">The Pacemaker architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Pacemaker cluster stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha-vip.html">Configure the VIP</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha-haproxy.html">HAProxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha-memcached.html">Memcached</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha-identity.html">Highly available Identity API</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha-telemetry.html">Highly available Telemetry API</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha.html#overview-of-highly-available-controllers">Overview of highly available controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller-ha.html#common-deployment-architectures">Common deployment architectures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="networking-ha.html">Configuring the networking services</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-ha.html">Configuring storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute-node-ha.html">Configuring the compute node</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ha-community.html">HA community</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "controller-ha-pacemaker" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/ha-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 0719207c6d82d2c215b9c13234f3a27478e0c0f3";
        var bugProject = "openstack-manuals";
        var bugTitle = "Pacemaker cluster stack in High Availability Guide";
    var fieldTags = "ha-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.0.1 on 2017-02-14 08:40";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>