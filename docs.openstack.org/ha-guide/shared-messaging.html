<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Messaging service for high availability</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Messaging service for high availability</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="shared-database-manage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Management"></i></a>
    
    
    <a href="controller-ha.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configuring the controller"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-14 08:40</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Messaging service for high availability</a><ul>
<li><a class="reference internal" href="#install-rabbitmq">Install RabbitMQ</a></li>
<li><a class="reference internal" href="#configure-rabbitmq-for-ha-queues">Configure RabbitMQ for HA queues</a></li>
<li><a class="reference internal" href="#configure-openstack-services-to-use-rabbit-ha-queues">Configure OpenStack services to use Rabbit HA queues</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="messaging-service-for-high-availability">
<h1>Messaging service for high availability<a class="headerlink" href="#messaging-service-for-high-availability" title="Permalink to this headline">¶</a></h1>
<p>An AMQP (Advanced Message Queuing Protocol) compliant message bus is
required for most OpenStack components in order to coordinate the
execution of jobs entered into the system.</p>
<p>The most popular AMQP implementation used in OpenStack installations
is RabbitMQ.</p>
<p>RabbitMQ nodes fail over on the application and the infrastructure layers.</p>
<p>The application layer is controlled by the <code class="docutils literal"><span class="pre">oslo.messaging</span></code>
configuration options for multiple AMQP hosts. If the AMQP node fails,
the application reconnects to the next one configured within the
specified reconnect interval. The specified reconnect interval
constitutes its SLA.</p>
<p>On the infrastructure layer, the SLA is the time for which RabbitMQ
cluster reassembles. Several cases are possible. The Mnesia keeper
node is the master of the corresponding Pacemaker resource for
RabbitMQ. When it fails, the result is a full AMQP cluster downtime
interval. Normally, its SLA is no more than several minutes. Failure
of another node that is a slave of the corresponding Pacemaker
resource for RabbitMQ results in no AMQP cluster downtime at all.</p>
<p>Making the RabbitMQ service highly available involves the following steps:</p>
<ul class="simple">
<li><a class="reference internal" href="#rabbitmq-install"><span class="std std-ref">Install RabbitMQ</span></a></li>
<li><a class="reference internal" href="#rabbitmq-configure"><span class="std std-ref">Configure RabbitMQ for HA queues</span></a></li>
<li><a class="reference internal" href="#rabbitmq-services"><span class="std std-ref">Configure OpenStack services to use RabbitMQ HA queues</span></a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Access to RabbitMQ is not normally handled by HAProxy. Instead,
consumers must be supplied with the full list of hosts running
RabbitMQ with <code class="docutils literal"><span class="pre">rabbit_hosts</span></code> and turn on the <code class="docutils literal"><span class="pre">rabbit_ha_queues</span></code>
option. For more information, read the <a class="reference external" href="http://people.redhat.com/jeckersb/private/vip-failover-tcp-persist.html">core issue</a>.
For more detail, read the <a class="reference external" href="http://john.eckersberg.com/improving-ha-failures-with-tcp-timeouts.html">history and solution</a>.</p>
</div>
<div class="section" id="install-rabbitmq">
<span id="rabbitmq-install"></span><h2>Install RabbitMQ<a class="headerlink" href="#install-rabbitmq" title="Permalink to this headline">¶</a></h2>
<p>The commands for installing RabbitMQ are specific to the Linux distribution
you are using.</p>
<p>For Ubuntu or Debian:</p>
<p>For RHEL, Fedora, or CentOS:</p>
<p>For openSUSE:</p>
<p>For SLES 12:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For SLES 12, the packages are signed by GPG key 893A90DAD85F9316.
You should verify the fingerprint of the imported GPG key before using it.</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>Key ID: 893A90DAD85F9316
Key Name: Cloud:OpenStack OBS Project &lt;Cloud:OpenStack@build.opensuse.org&gt;
Key Fingerprint: 35B34E18ABC1076D66D5A86B893A90DAD85F9316
Key Created: Tue Oct  8 13:34:21 2013
Key Expires: Thu Dec 17 13:34:21 2015
</pre></div>
</div>
</div>
<p>For more information, see the official installation manual for the
distribution:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.rabbitmq.com/install-debian.html">Debian and Ubuntu</a></li>
<li><a class="reference external" href="https://www.rabbitmq.com/install-rpm.html">RPM based</a>
(RHEL, Fedora, CentOS, openSUSE)</li>
</ul>
</div>
<div class="section" id="configure-rabbitmq-for-ha-queues">
<span id="rabbitmq-configure"></span><h2>Configure RabbitMQ for HA queues<a class="headerlink" href="#configure-rabbitmq-for-ha-queues" title="Permalink to this headline">¶</a></h2>
<p>The following components/services can work with HA queues:</p>
<ul class="simple">
<li>OpenStack Compute</li>
<li>OpenStack Block Storage</li>
<li>OpenStack Networking</li>
<li>Telemetry</li>
</ul>
<p>Consider that, while exchanges and bindings survive the loss of individual
nodes, queues and their messages do not because a queue and its contents
are located on one node. If we lose this node, we also lose the queue.</p>
<p>Mirrored queues in RabbitMQ improve the availability of service since
it is resilient to failures.</p>
<p>Production servers should run (at least) three RabbitMQ servers for testing
and demonstration purposes, however it is possible to run only two servers.
In this section, we configure two nodes, called <code class="docutils literal"><span class="pre">rabbit1</span></code> and <code class="docutils literal"><span class="pre">rabbit2</span></code>.
To build a broker, ensure that all nodes have the same Erlang cookie file.</p>
<ol class="arabic">
<li><p class="first">Stop RabbitMQ and copy the cookie from the first node to each of the
other node(s):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> scp /var/lib/rabbitmq/.erlang.cookie root@NODE:/var/lib/rabbitmq/.erlang.cookie
</pre></div>
</div>
</li>
<li><p class="first">On each target node, verify the correct owner,
group, and permissions of the file <code class="file docutils literal"><span class="pre">erlang.cookie</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> chown rabbitmq:rabbitmq /var/lib/rabbitmq/.erlang.cookie
<span class="gp">#</span> chmod <span class="m">400</span> /var/lib/rabbitmq/.erlang.cookie
</pre></div>
</div>
</li>
<li><p class="first">Start the message queue service on all nodes and configure it to start
when the system boots. On Ubuntu, it is configured by default.</p>
<p>On CentOS, RHEL, openSUSE, and SLES:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl <span class="nb">enable</span> rabbitmq-server.service
<span class="gp">#</span> systemctl start rabbitmq-server.service
</pre></div>
</div>
</li>
<li><p class="first">Verify that the nodes are running:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rabbitmqctl cluster_status
<span class="go">Cluster status of node rabbit@NODE...</span>
<span class="go">[{nodes,[{disc,[rabbit@NODE]}]},</span>
<span class="go"> {running_nodes,[rabbit@NODE]},</span>
<span class="go"> {partitions,[]}]</span>
<span class="go">...done.</span>
</pre></div>
</div>
</li>
<li><p class="first">Run the following commands on each node except the first one:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rabbitmqctl stop_app
<span class="go">Stopping node rabbit@NODE...</span>
<span class="go">...done.</span>
<span class="gp">#</span> rabbitmqctl join_cluster --ram rabbit@rabbit1
<span class="gp">#</span> rabbitmqctl start_app
<span class="go">Starting node rabbit@NODE ...</span>
<span class="go">...done.</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default node type is a disc node. In this guide, nodes
join the cluster as RAM nodes.</p>
</div>
<ol class="arabic">
<li><p class="first">Verify the cluster status:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rabbitmqctl cluster_status
<span class="go">Cluster status of node rabbit@NODE...</span>
<span class="go">[{nodes,[{disc,[rabbit@rabbit1]},{ram,[rabbit@NODE]}]}, \</span>
<span class="go">    {running_nodes,[rabbit@NODE,rabbit@rabbit1]}]</span>
</pre></div>
</div>
<p>If the cluster is working, you can create usernames and passwords
for the queues.</p>
</li>
<li><p class="first">To ensure that all queues except those with auto-generated names
are mirrored across all running nodes,
set the <code class="docutils literal"><span class="pre">ha-mode</span></code> policy key to all
by running the following command on one of the nodes:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rabbitmqctl set_policy ha-all <span class="s1">&#39;^(?!amq\.).*&#39;</span> <span class="s1">&#39;{&quot;ha-mode&quot;: &quot;all&quot;}&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>More information is available in the RabbitMQ documentation:</p>
<ul class="simple">
<li><a class="reference external" href="https://www.rabbitmq.com/ha.html">Highly Available Queues</a></li>
<li><a class="reference external" href="https://www.rabbitmq.com/clustering.html">Clustering Guide</a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As another option to make RabbitMQ highly available, RabbitMQ contains the
OCF scripts for the Pacemaker cluster resource agents since version 3.5.7.
It provides the active/active RabbitMQ cluster with mirrored queues.
For more information, see <a class="reference external" href="https://www.rabbitmq.com/pacemaker.html">Auto-configuration of a cluster with
a Pacemaker</a>.</p>
</div>
</div>
<div class="section" id="configure-openstack-services-to-use-rabbit-ha-queues">
<span id="rabbitmq-services"></span><h2>Configure OpenStack services to use Rabbit HA queues<a class="headerlink" href="#configure-openstack-services-to-use-rabbit-ha-queues" title="Permalink to this headline">¶</a></h2>
<p>Configure the OpenStack components to use at least two RabbitMQ nodes.</p>
<p>Use these steps to configurate all services using RabbitMQ:</p>
<ol class="arabic">
<li><p class="first">RabbitMQ HA cluster <code class="docutils literal"><span class="pre">host:port</span></code> pairs:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_hosts=rabbit1:5672,rabbit2:5672,rabbit3:5672</span>
</pre></div>
</div>
</li>
<li><p class="first">Retry connecting with RabbitMQ:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_retry_interval=1</span>
</pre></div>
</div>
</li>
<li><p class="first">How long to back-off for between retries when connecting to RabbitMQ:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_retry_backoff=2</span>
</pre></div>
</div>
</li>
<li><p class="first">Maximum retries with trying to connect to RabbitMQ (infinite by default):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_max_retries=0</span>
</pre></div>
</div>
</li>
<li><p class="first">Use durable queues in RabbitMQ:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_durable_queues=true</span>
</pre></div>
</div>
</li>
<li><p class="first">Use HA queues in RabbitMQ (<code class="docutils literal"><span class="pre">x-ha-policy:</span> <span class="pre">all</span></code>):</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">rabbit_ha_queues=true</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you change the configuration from an old set-up
that did not use HA queues, restart the service:</p>
<div class="last highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> rabbitmqctl stop_app
<span class="gp">#</span> rabbitmqctl reset
<span class="gp">#</span> rabbitmqctl start_app
</pre></div>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="shared-database-manage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Management"></i></a>
          
          
            <a href="controller-ha.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configuring the controller"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-14 08:40</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro-ha.html">Introduction to OpenStack high availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Configuring the basic environment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="shared-services.html">Configuring the shared services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="shared-database.html">Database (Galera Cluster) for high availability</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Messaging service for high availability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="controller-ha.html">Configuring the controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking-ha.html">Configuring the networking services</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage-ha.html">Configuring storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute-node-ha.html">Configuring the compute node</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ha-community.html">HA community</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "shared-messaging" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/ha-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 0719207c6d82d2c215b9c13234f3a27478e0c0f3";
        var bugProject = "openstack-manuals";
        var bugTitle = "Messaging service for high availability in High Availability Guide";
    var fieldTags = "ha-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.0.1 on 2017-02-14 08:40";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>