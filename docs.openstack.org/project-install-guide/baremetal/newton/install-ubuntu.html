<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Install and configure for Ubuntu</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Install and configure for Ubuntu</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="install-rdo.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Install and configure for Red Hat Enterprise Linux and CentOS"></i></a>
    
    
    <a href="install-obs.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Install and configure for openSUSE and SUSE Linux Enterprise"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-06 13:15</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Install and configure for Ubuntu</a><ul>
<li><a class="reference internal" href="#install-and-configure-prerequisites">Install and configure prerequisites</a><ul>
<li><a class="reference internal" href="#set-up-the-database-for-bare-metal">Set up the database for Bare Metal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#install-and-configure-components">Install and configure components</a><ul>
<li><a class="reference internal" href="#configuring-ironic-api-service">Configuring ironic-api service</a></li>
<li><a class="reference internal" href="#configuring-ironic-api-behind-mod-wsgi">Configuring ironic-api behind mod_wsgi</a></li>
<li><a class="reference internal" href="#configuring-ironic-conductor-service">Configuring ironic-conductor service</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="install-and-configure-for-ubuntu">
<span id="install-ubuntu"></span><h1>Install and configure for Ubuntu<a class="headerlink" href="#install-and-configure-for-ubuntu" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to install and configure the Bare Metal
service for Ubuntu 14.04 (LTS).</p>
<div class="section" id="install-and-configure-prerequisites">
<h2>Install and configure prerequisites<a class="headerlink" href="#install-and-configure-prerequisites" title="Permalink to this headline">¶</a></h2>
<p>The Bare Metal service is a collection of components that provides support to
manage and provision physical machines. You can configure these components to
run on separate nodes or the same node. In this guide, the components run on
one node, typically the Compute Service&#8217;s compute node.</p>
<p>It assumes that the Identity, Image, Compute, and Networking services
have already been set up.</p>
<div class="section" id="set-up-the-database-for-bare-metal">
<h3>Set up the database for Bare Metal<a class="headerlink" href="#set-up-the-database-for-bare-metal" title="Permalink to this headline">¶</a></h3>
<p>The Bare Metal service stores information in a database. This guide uses the
MySQL database that is used by other OpenStack services.</p>
<ol class="arabic">
<li><p class="first">In MySQL, create an <code class="docutils literal"><span class="pre">ironic</span></code> database that is accessible by the
<code class="docutils literal"><span class="pre">ironic</span></code> user. Replace <code class="docutils literal"><span class="pre">IRONIC_DBPASSWORD</span></code> with a suitable password:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mysql -u root -p
<span class="go">mysql&gt; CREATE DATABASE ironic CHARACTER SET utf8;</span>
<span class="go">mysql&gt; GRANT ALL PRIVILEGES ON ironic.* TO &#39;ironic&#39;@&#39;localhost&#39; \</span>
<span class="go">       IDENTIFIED BY &#39;IRONIC_DBPASSWORD&#39;;</span>
<span class="go">mysql&gt; GRANT ALL PRIVILEGES ON ironic.* TO &#39;ironic&#39;@&#39;%&#39; \</span>
<span class="go">       IDENTIFIED BY &#39;IRONIC_DBPASSWORD&#39;;</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="install-and-configure-components">
<h2>Install and configure components<a class="headerlink" href="#install-and-configure-components" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Install from packages (using apt-get)</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install ironic-api ironic-conductor python-ironicclient
</pre></div>
</div>
</li>
<li><p class="first">Enable services</p>
<p>Services are enabled by default on Ubuntu.</p>
</li>
</ol>
<p>The Bare Metal service is configured via its configuration file. This file
is typically located at <code class="docutils literal"><span class="pre">/etc/ironic/ironic.conf</span></code>.</p>
<p>Although some configuration options are mentioned here, it is recommended that
you review all the <a class="reference external" href="https://git.openstack.org/cgit/openstack/ironic/tree/etc/ironic/ironic.conf.sample?stable%2Fnewton">available options</a>
so that the Bare Metal service is configured for your needs.</p>
<p>It is possible to set up an ironic-api and an ironic-conductor services on the
same host or different hosts. Users also can add new ironic-conductor hosts
to deal with an increasing number of bare metal nodes. But the additional
ironic-conductor services should be at the same version as that of existing
ironic-conductor services.</p>
<div class="section" id="configuring-ironic-api-service">
<h3>Configuring ironic-api service<a class="headerlink" href="#configuring-ironic-api-service" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">The Bare Metal service stores information in a database. This guide uses the
MySQL database that is used by other OpenStack services.</p>
<p>Configure the location of the database via the <code class="docutils literal"><span class="pre">connection</span></code> option. In the
following, replace <code class="docutils literal"><span class="pre">IRONIC_DBPASSWORD</span></code> with the password of your
<code class="docutils literal"><span class="pre">ironic</span></code> user, and replace <code class="docutils literal"><span class="pre">DB_IP</span></code> with the IP address where the DB
server is located:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[database]</span>

<span class="c1"># The SQLAlchemy connection string used to connect to the</span>
<span class="c1"># database (string value)</span>
<span class="na">connection</span><span class="o">=</span><span class="s">mysql+pymysql://ironic:IRONIC_DBPASSWORD@DB_IP/ironic?charset=utf8</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the ironic-api service to use the RabbitMQ message broker by
setting one or more of these options. Replace <code class="docutils literal"><span class="pre">RABBIT_HOST</span></code> with the
address of the RabbitMQ server:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>

<span class="c1"># The messaging driver to use, defaults to rabbit. Other</span>
<span class="c1"># drivers include qpid and zmq. (string value)</span>
<span class="c1">#rpc_backend=rabbit</span>

<span class="k">[oslo_messaging_rabbit]</span>

<span class="c1"># The RabbitMQ broker address where a single node is used</span>
<span class="c1"># (string value)</span>
<span class="na">rabbit_host</span><span class="o">=</span><span class="s">RABBIT_HOST</span>

<span class="c1"># The RabbitMQ userid (string value)</span>
<span class="c1">#rabbit_userid=guest</span>

<span class="c1"># The RabbitMQ password (string value)</span>
<span class="c1">#rabbit_password=guest</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the ironic-api service to use these credentials with the Identity
service. Replace <code class="docutils literal"><span class="pre">PUBLIC_IDENTITY_IP</span></code> with the public IP of the Identity
server, <code class="docutils literal"><span class="pre">PRIVATE_IDENTITY_IP</span></code> with the private IP of the Identity server
and replace <code class="docutils literal"><span class="pre">IRONIC_PASSWORD</span></code> with the password you chose for the
<code class="docutils literal"><span class="pre">ironic</span></code> user in the Identity service:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>

<span class="c1"># Authentication strategy used by ironic-api: one of</span>
<span class="c1"># &quot;keystone&quot; or &quot;noauth&quot;. &quot;noauth&quot; should not be used in a</span>
<span class="c1"># production environment because all authentication will be</span>
<span class="c1"># disabled. (string value)</span>
<span class="na">auth_strategy</span><span class="o">=</span><span class="s">keystone</span>

<span class="k">[keystone_authtoken]</span>

<span class="c1"># Authentication type to load (string value)</span>
<span class="na">auth_type</span><span class="o">=</span><span class="s">v3password</span>

<span class="c1"># Complete public Identity API endpoint (string value)</span>
<span class="na">auth_uri</span><span class="o">=</span><span class="s">http://PUBLIC_IDENTITY_IP:5000/v3/</span>

<span class="c1"># Complete admin Identity API endpoint. (string value)</span>
<span class="na">auth_url</span><span class="o">=</span><span class="s">http://PRIVATE_IDENTITY_IP:35357/v3/</span>

<span class="c1"># Service username. (string value)</span>
<span class="na">admin_user</span><span class="o">=</span><span class="s">ironic</span>

<span class="c1"># Service account password. (string value)</span>
<span class="na">admin_password</span><span class="o">=</span><span class="s">IRONIC_PASSWORD</span>

<span class="c1"># Service tenant name. (string value)</span>
<span class="na">admin_tenant_name</span><span class="o">=</span><span class="s">service</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the Bare Metal service database tables:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ironic-dbsync --config-file /etc/ironic/ironic.conf create_schema
</pre></div>
</div>
</li>
<li><p class="first">Restart the ironic-api service:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Fedora/RHEL7/CentOS7:</span>
<span class="go">  sudo systemctl restart openstack-ironic-api</span>

<span class="go">Ubuntu:</span>
<span class="go">  sudo service ironic-api restart</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="configuring-ironic-api-behind-mod-wsgi">
<h3>Configuring ironic-api behind mod_wsgi<a class="headerlink" href="#configuring-ironic-api-behind-mod-wsgi" title="Permalink to this headline">¶</a></h3>
<p>Bare Metal service comes with an example file for configuring the
<code class="docutils literal"><span class="pre">ironic-api</span></code> service to run behind Apache with mod_wsgi.</p>
<ol class="arabic">
<li><p class="first">Install the apache service:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Fedora 21/RHEL7/CentOS7:</span>
<span class="go">  sudo yum install httpd</span>

<span class="go">Fedora 22 (or higher):</span>
<span class="go">  sudo dnf install httpd</span>

<span class="go">Debian/Ubuntu:</span>
<span class="go">  apt-get install apache2</span>
</pre></div>
</div>
</li>
<li><p class="first">Copy the <code class="docutils literal"><span class="pre">etc/apache2/ironic</span></code> file under the apache sites:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Fedora/RHEL7/CentOS7:</span>
<span class="go">  sudo cp etc/apache2/ironic /etc/httpd/conf.d/ironic.conf</span>

<span class="go">Debian/Ubuntu:</span>
<span class="go">  sudo cp etc/apache2/ironic /etc/apache2/sites-available/ironic.conf</span>
</pre></div>
</div>
</li>
<li><p class="first">Edit the recently copied <code class="docutils literal"><span class="pre">&lt;apache-configuration-dir&gt;/ironic.conf</span></code>:</p>
<ol class="arabic simple">
<li>Modify the <code class="docutils literal"><span class="pre">WSGIDaemonProcess</span></code>, <code class="docutils literal"><span class="pre">APACHE_RUN_USER</span></code> and
<code class="docutils literal"><span class="pre">APACHE_RUN_GROUP</span></code> directives to set the user and group values to
an appropriate user on your server.</li>
<li>Modify the <code class="docutils literal"><span class="pre">WSGIScriptAlias</span></code> directive to point to the
<code class="docutils literal"><span class="pre">ironic/api/app.wsgi</span></code> script.</li>
<li>Modify the <code class="docutils literal"><span class="pre">Directory</span></code> directive to set the path to the Ironic API code.</li>
<li>Modify the <code class="docutils literal"><span class="pre">ErrorLog</span></code> and <code class="docutils literal"><span class="pre">CustomLog</span></code> to redirect the logs
to the right directory (on Red Hat systems this is usually under
/var/log/httpd).</li>
</ol>
</li>
<li><p class="first">Enable the apache <code class="docutils literal"><span class="pre">ironic</span></code> in site and reload:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Fedora/RHEL7/CentOS7:</span>
<span class="go">  sudo systemctl reload httpd</span>

<span class="go">Debian/Ubuntu:</span>
<span class="go">  sudo a2ensite ironic</span>
<span class="go">  sudo service apache2 reload</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The file <code class="docutils literal"><span class="pre">ironic/api/app.wsgi</span></code> is installed with the rest of the Bare Metal
service application code, and should not need to be modified.</p>
</div>
</div>
<div class="section" id="configuring-ironic-conductor-service">
<h3>Configuring ironic-conductor service<a class="headerlink" href="#configuring-ironic-conductor-service" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Replace <code class="docutils literal"><span class="pre">HOST_IP</span></code> with IP of the conductor host, and replace <code class="docutils literal"><span class="pre">DRIVERS</span></code>
with a comma-separated list of drivers you chose for the conductor service
as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>

<span class="c1"># IP address of this host. If unset, will determine the IP</span>
<span class="c1"># programmatically. If unable to do so, will use &quot;127.0.0.1&quot;.</span>
<span class="c1"># (string value)</span>
<span class="na">my_ip</span><span class="o">=</span><span class="s">HOST_IP</span>

<span class="c1"># Specify the list of drivers to load during service</span>
<span class="c1"># initialization. Missing drivers, or drivers which fail to</span>
<span class="c1"># initialize, will prevent the conductor service from</span>
<span class="c1"># starting. The option default is a recommended set of</span>
<span class="c1"># production-oriented drivers. A complete list of drivers</span>
<span class="c1"># present on your system may be found by enumerating the</span>
<span class="c1"># &quot;ironic.drivers&quot; entrypoint. An example may be found in the</span>
<span class="c1"># developer documentation online. (list value)</span>
<span class="na">enabled_drivers</span><span class="o">=</span><span class="s">DRIVERS</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If a conductor host has multiple IPs, <code class="docutils literal"><span class="pre">my_ip</span></code> should
be set to the IP which is on the same network as the bare metal nodes.</p>
</div>
</li>
<li><p class="first">Configure the ironic-api service URL. Replace <code class="docutils literal"><span class="pre">IRONIC_API_IP</span></code> with IP of
ironic-api service as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[conductor]</span>

<span class="c1"># URL of Ironic API service. If not set ironic can get the</span>
<span class="c1"># current value from the keystone service catalog. (string</span>
<span class="c1"># value)</span>
<span class="na">api_url</span><span class="o">=</span><span class="s">http://IRONIC_API_IP:6385</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the location of the database. Ironic-conductor should use the same
configuration as ironic-api. Replace <code class="docutils literal"><span class="pre">IRONIC_DBPASSWORD</span></code> with the password
of your <code class="docutils literal"><span class="pre">ironic</span></code> user, and replace DB_IP with the IP address where the DB
server is located:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[database]</span>

<span class="c1"># The SQLAlchemy connection string to use to connect to the</span>
<span class="c1"># database. (string value)</span>
<span class="na">connection</span><span class="o">=</span><span class="s">mysql+pymysql://ironic:IRONIC_DBPASSWORD@DB_IP/ironic?charset=utf8</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the ironic-conductor service to use the RabbitMQ message broker by
setting one or more of these options. Ironic-conductor should use the same
configuration as ironic-api. Replace <code class="docutils literal"><span class="pre">RABBIT_HOST</span></code> with the address of the
RabbitMQ server:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>

<span class="c1"># The messaging driver to use, defaults to rabbit. Other</span>
<span class="c1"># drivers include qpid and zmq. (string value)</span>
<span class="c1">#rpc_backend=rabbit</span>

<span class="k">[oslo_messaging_rabbit]</span>

<span class="c1"># The RabbitMQ broker address where a single node is used.</span>
<span class="c1"># (string value)</span>
<span class="na">rabbit_host</span><span class="o">=</span><span class="s">RABBIT_HOST</span>

<span class="c1"># The RabbitMQ userid. (string value)</span>
<span class="c1">#rabbit_userid=guest</span>

<span class="c1"># The RabbitMQ password. (string value)</span>
<span class="c1">#rabbit_password=guest</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the ironic-conductor service so that it can communicate with the
Image service. Replace <code class="docutils literal"><span class="pre">GLANCE_IP</span></code> with the hostname or IP address of
the Image service:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[glance]</span>

<span class="c1"># Default glance hostname or IP address. (string value)</span>
<span class="na">glance_host</span><span class="o">=</span><span class="s">GLANCE_IP</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Swift backend for the Image service should be installed and configured
for <code class="docutils literal"><span class="pre">agent_*</span></code> drivers. Starting with Mitaka the Bare Metal service also
supports Ceph Object Gateway (RADOS Gateway) as the Image service&#8217;s backend
(<a class="reference external" href="http://docs.openstack.org/developer/ironic/newton/deploy/radosgw.html#radosgw-support">radosgw support</a>).</p>
</div>
</li>
<li><p class="first">Set the URL (replace <code class="docutils literal"><span class="pre">NEUTRON_IP</span></code>) for connecting to the Networking
service, to be the Networking service endpoint:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[neutron]</span>

<span class="c1"># URL for connecting to neutron. (string value)</span>
<span class="na">url</span><span class="o">=</span><span class="s">http://NEUTRON_IP:9696</span>
</pre></div>
</div>
<p>To configure the network for ironic-conductor service to perform node
cleaning, see <a class="reference external" href="http://docs.openstack.org/developer/ironic/newton/deploy/cleaning.html">CleaningNetworkSetup</a>
from the Ironic deploy guide.</p>
</li>
<li><p class="first">Configure credentials for accessing other OpenStack services.</p>
<p>In order to communicate with other OpenStack services, the Bare Metal
service needs to use service users to authenticate to the OpenStack
Identity service when making requests to other services.
These users&#8217; credentials have to be configured in each
configuration file section related to the corresponding service:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">[neutron]</span></code> - to access the OpenStack Networking service</li>
<li><code class="docutils literal"><span class="pre">[glance]</span></code> - to access the OpenStack Image service</li>
<li><code class="docutils literal"><span class="pre">[swift]</span></code> - to access the OpenStack Object Storage service</li>
<li><code class="docutils literal"><span class="pre">[inspector]</span></code> - to access the OpenStack Bare Metal Introspection
service</li>
<li><code class="docutils literal"><span class="pre">[service_catalog]</span></code> - a special section holding credentials
the Bare Metal service will use to discover its own API URL endpoint
as registered in the OpenStack Identity service catalog.</li>
</ul>
<p>For simplicity, you can use the same service user for all services.
For backward compatibility, this should be the same user configured
in the <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> section for the ironic-api service
(see &#8220;Configuring ironic-api service&#8221;).
However, this is not necessary, and you can create and configure separate
service users for each service.</p>
<p>Under the hood, Bare Metal service uses <code class="docutils literal"><span class="pre">keystoneauth</span></code> library
together with <code class="docutils literal"><span class="pre">Authentication</span> <span class="pre">plugin</span></code> and <code class="docutils literal"><span class="pre">Session</span></code> concepts
provided by it to instantiate service clients.
Please refer to <a class="reference external" href="http://docs.openstack.org/developer/keystoneauth/">Keystoneauth documentation</a> for supported plugins,
their available options as well as Session-related options
for authentication and connection respectively.</p>
<p>In the example below, authentication information for user to access the
OpenStack Networking service is configured to use:</p>
<ul class="simple">
<li>HTTPS connection with specific CA SSL certificate when making requests</li>
<li>the same service user as configured for ironic-api service</li>
<li>dynamic <code class="docutils literal"><span class="pre">password</span></code> authentication plugin that will discover
appropriate version of Identity service API based on other
provided options<ul>
<li>replace <code class="docutils literal"><span class="pre">IDENTITY_IP</span></code> with the IP of the Identity server,
and replace <code class="docutils literal"><span class="pre">IRONIC_PASSWORD</span></code> with the password you chose for the
<code class="docutils literal"><span class="pre">ironic</span></code> user in the Identity service</li>
</ul>
</li>
</ul>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[neutron]</span>

<span class="c1"># Authentication type to load (string value)</span>
<span class="na">auth_type</span> <span class="o">=</span> <span class="s">password</span>

<span class="c1"># Authentication URL (string value)</span>
<span class="na">auth_url</span><span class="o">=</span><span class="s">https://IDENTITY_IP:5000/</span>

<span class="c1"># Username (string value)</span>
<span class="na">username</span><span class="o">=</span><span class="s">ironic</span>

<span class="c1"># User&#39;s password (string value)</span>
<span class="na">password</span><span class="o">=</span><span class="s">IRONIC_PASSWORD</span>

<span class="c1"># Project name to scope to (string value)</span>
<span class="na">project_name</span><span class="o">=</span><span class="s">service</span>

<span class="c1"># Domain ID containing project (string value)</span>
<span class="na">project_domain_id</span><span class="o">=</span><span class="s">default</span>

<span class="c1"># User&#39;s domain id (string value)</span>
<span class="na">user_domain_id</span><span class="o">=</span><span class="s">default</span>

<span class="c1"># PEM encoded Certificate Authority to use when verifying</span>
<span class="c1"># HTTPs connections. (string value)</span>
<span class="na">cafile</span><span class="o">=</span><span class="s">/opt/stack/data/ca-bundle.pem</span>
</pre></div>
</div>
</li>
<li><p class="first">Make sure that <code class="docutils literal"><span class="pre">qemu-img</span></code> and <code class="docutils literal"><span class="pre">iscsiadm</span></code> (in the case of using iscsi-deploy driver)
binaries are installed and prepare the host system as described at
<a class="reference external" href="http://docs.openstack.org/developer/ironic/newton/deploy/install-guide.html#setup-the-drivers-for-the-bare-metal-service">Setup the drivers for the Bare Metal service</a></p>
</li>
<li><p class="first">Restart the ironic-conductor service:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Fedora/RHEL7/CentOS7:</span>
<span class="go">  sudo systemctl restart openstack-ironic-conductor</span>

<span class="go">Ubuntu:</span>
<span class="go">  sudo service ironic-conductor restart</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="install-rdo.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Install and configure for Red Hat Enterprise Linux and CentOS"></i></a>
          
          
            <a href="install-obs.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Install and configure for openSUSE and SUSE Linux Enterprise"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-06 13:15</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Bare Metal service overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="install.html">Install and configure the Bare Metal service</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install-rdo.html">Install and configure for Red Hat Enterprise Linux and CentOS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Install and configure for Ubuntu</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-obs.html">Install and configure for openSUSE and SUSE Linux Enterprise</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configure-integration.html">Integration with other OpenStack services</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-cleaning.html">Configure the Bare Metal service for cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-tenant-networks.html">Configure tenant networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="enrollment.html">Enrollment</a></li>
<li class="toctree-l1"><a class="reference internal" href="enabling-https.html">Enabling HTTPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="standalone.html">Using Bare Metal service as a standalone service</a></li>
<li class="toctree-l1"><a class="reference internal" href="configdrive.html">Enabling the configuration drive (configdrive)</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy-ramdisk.html">Building or downloading a deploy ramdisk image</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-drivers.html">Setup the drivers for the Bare Metal service</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced features</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="next-steps.html">Next steps</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "install-ubuntu" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/ironic/tree/install-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 27318e28ceaa372868a7cb5dde53f377a7170e86";
        var bugProject = "ironic";
        var bugTitle = "Install and configure for Ubuntu in Installation Guide for Bare Metal Service";
    var fieldTags = "install-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1 on 2017-02-06 13:15";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>