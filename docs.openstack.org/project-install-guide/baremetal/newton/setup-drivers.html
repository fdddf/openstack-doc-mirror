<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Setup the drivers for the Bare Metal service</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Setup the drivers for the Bare Metal service</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="deploy-ramdisk.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Building or downloading a deploy ramdisk image"></i></a>
    
    
    <a href="advanced.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Advanced features"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2017-02-06 13:15</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Setup the drivers for the Bare Metal service</a><ul>
<li><a class="reference internal" href="#pxe-setup">PXE setup</a></li>
<li><a class="reference internal" href="#pxe-uefi-setup">PXE UEFI setup</a><ul>
<li><a class="reference internal" href="#elilo-an-alternative-to-grub2">Elilo: an alternative to Grub2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ipxe-setup">iPXE setup</a></li>
<li><a class="reference internal" href="#networking-service-configuration">Networking service configuration</a></li>
<li><a class="reference internal" href="#ipmi-support">IPMI support</a></li>
<li><a class="reference internal" href="#configure-node-web-console">Configure node web console</a></li>
<li><a class="reference internal" href="#boot-mode-support">Boot mode support</a></li>
<li><a class="reference internal" href="#choosing-the-disk-label">Choosing the disk label</a><ul>
<li><a class="reference internal" href="#when-used-with-compute-service">When used with Compute service</a></li>
<li><a class="reference internal" href="#when-used-in-standalone-mode">When used in standalone mode</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="setup-the-drivers-for-the-bare-metal-service">
<h1>Setup the drivers for the Bare Metal service<a class="headerlink" href="#setup-the-drivers-for-the-bare-metal-service" title="Permalink to this headline">¶</a></h1>
<div class="section" id="pxe-setup">
<h2>PXE setup<a class="headerlink" href="#pxe-setup" title="Permalink to this headline">¶</a></h2>
<p>If you will be using PXE, it needs to be set up on the Bare Metal service
node(s) where <code class="docutils literal"><span class="pre">ironic-conductor</span></code> is running.</p>
<ol class="arabic">
<li><p class="first">Make sure the tftp root directory exist and can be written to by the
user the <code class="docutils literal"><span class="pre">ironic-conductor</span></code> is running as. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo mkdir -p /tftpboot
sudo chown -R ironic /tftpboot
</pre></div>
</div>
</li>
<li><p class="first">Install tftp server and the syslinux package with the PXE boot images:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu: (Up to and including 14.04)
    sudo apt-get install xinetd tftpd-hpa syslinux-common syslinux

Ubuntu: (14.10 and after)
    sudo apt-get install xinetd tftpd-hpa syslinux-common pxelinux

Fedora 21/RHEL7/CentOS7:
    sudo yum install tftp-server syslinux-tftpboot xinetd

Fedora 22 or higher:
     sudo dnf install tftp-server syslinux-tftpboot xinetd
</pre></div>
</div>
</li>
<li><p class="first">Using xinetd to provide a tftp server setup to serve <code class="docutils literal"><span class="pre">/tftpboot</span></code>.
Create or edit <code class="docutils literal"><span class="pre">/etc/xinetd.d/tftp</span></code> as below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>service tftp
{
  protocol        = udp
  port            = 69
  socket_type     = dgram
  wait            = yes
  user            = root
  server          = /usr/sbin/in.tftpd
  server_args     = -v -v -v -v -v --map-file /tftpboot/map-file /tftpboot
  disable         = no
  # This is a workaround for Fedora, where TFTP will listen only on
  # IPv6 endpoint, if IPv4 flag is not used.
  flags           = IPv4
}
</pre></div>
</div>
<p>and restart xinetd service:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu:
    sudo service xinetd restart

Fedora:
    sudo systemctl restart xinetd
</pre></div>
</div>
</li>
<li><p class="first">Copy the PXE image to <code class="docutils literal"><span class="pre">/tftpboot</span></code>. The PXE image might be found at <a class="footnote-reference" href="#id4" id="id1">[1]</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu (Up to and including 14.04):
    sudo cp /usr/lib/syslinux/pxelinux.0 /tftpboot

Ubuntu (14.10 and after):
    sudo cp /usr/lib/PXELINUX/pxelinux.0 /tftpboot
</pre></div>
</div>
</li>
<li><p class="first">If whole disk images need to be deployed via PXE-netboot, copy the
chain.c32 image to <code class="docutils literal"><span class="pre">/tftpboot</span></code> to support it. The chain.c32 image
might be found at:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu (Up to and including 14.04):
    sudo cp /usr/lib/syslinux/chain.c32 /tftpboot

Ubuntu (14.10 and after):
    sudo cp /usr/lib/syslinux/modules/bios/chain.c32 /tftpboot

Fedora/RHEL7/CentOS7:
    sudo cp /boot/extlinux/chain.c32 /tftpboot
</pre></div>
</div>
</li>
<li><p class="first">If the version of syslinux is <strong>greater than</strong> 4 we also need to make sure
that we copy the library modules into the <code class="docutils literal"><span class="pre">/tftpboot</span></code> directory <a class="footnote-reference" href="#id5" id="id2">[2]</a>
<a class="footnote-reference" href="#id4" id="id3">[1]</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu:
    sudo cp /usr/lib/syslinux/modules/*/ldlinux.* /tftpboot
</pre></div>
</div>
</li>
<li><p class="first">Create a map file in the tftp boot directory (<code class="docutils literal"><span class="pre">/tftpboot</span></code>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>echo &#39;re ^(/tftpboot/) /tftpboot/\2&#39; &gt; /tftpboot/map-file
echo &#39;re ^/tftpboot/ /tftpboot/&#39; &gt;&gt; /tftpboot/map-file
echo &#39;re ^(^/) /tftpboot/\1&#39; &gt;&gt; /tftpboot/map-file
echo &#39;re ^([^/]) /tftpboot/\1&#39; &gt;&gt; /tftpboot/map-file
</pre></div>
</div>
</li>
</ol>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> On <strong>Fedora/RHEL</strong> the <code class="docutils literal"><span class="pre">syslinux-tftpboot</span></code> package already install
the library modules and PXE image at <code class="docutils literal"><span class="pre">/tftpboot</span></code>. If the TFTP server
is configured to listen to a different directory you should copy the
contents of <code class="docutils literal"><span class="pre">/tftpboot</span></code> to the configured directory</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://www.syslinux.org/wiki/index.php/Library_modules">http://www.syslinux.org/wiki/index.php/Library_modules</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="pxe-uefi-setup">
<h2>PXE UEFI setup<a class="headerlink" href="#pxe-uefi-setup" title="Permalink to this headline">¶</a></h2>
<p>If you want to deploy on a UEFI supported bare metal, perform these additional
steps on the ironic conductor node to configure the PXE UEFI environment.</p>
<ol class="arabic">
<li><p class="first">Install Grub2 and shim packages:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu: (14.04LTS and later)
    sudo apt-get install grub-efi-amd64-signed shim-signed

Fedora 21/RHEL7/CentOS7:
    sudo yum install grub2-efi shim

Fedora 22 or higher:
    sudo dnf install grub2-efi shim
</pre></div>
</div>
</li>
<li><p class="first">Copy grub and shim boot loader images to <code class="docutils literal"><span class="pre">/tftpboot</span></code> directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu: (14.04LTS and later)
    sudo cp /usr/lib/shim/shim.efi.signed /tftpboot/bootx64.efi
    sudo cp /usr/lib/grub/x86_64-efi-signed/grubnetx64.efi.signed  \
    /tftpboot/grubx64.efi

Fedora: (21 and later)
    sudo cp /boot/efi/EFI/fedora/shim.efi /tftpboot/bootx64.efi
    sudo cp /boot/efi/EFI/fedora/grubx64.efi /tftpboot/grubx64.efi

CentOS: (7 and later)
    sudo cp /boot/efi/EFI/centos/shim.efi /tftpboot/bootx64.efi
    sudo cp /boot/efi/EFI/centos/grubx64.efi /tftpboot/grubx64.efi
</pre></div>
</div>
</li>
<li><p class="first">Create master grub.cfg:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu: Create grub.cfg under ``/tftpboot/grub`` directory.
    GRUB_DIR=/tftpboot/grub

Fedora: Create grub.cfg under ``/tftpboot/EFI/fedora`` directory.
     GRUB_DIR=/tftpboot/EFI/fedora

CentOS: Create grub.cfg under ``/tftpboot/EFI/centos`` directory.
    GRUB_DIR=/tftpboot/EFI/centos

Create directory GRUB_DIR
  sudo mkdir -p $GRUB_DIR
</pre></div>
</div>
<p>This file is used to redirect grub to baremetal node specific config file.
It redirects it to specific grub config file based on DHCP IP assigned to
baremetal node.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>set default=master
set timeout=5
set hidden_timeout_quiet=false

menuentry &quot;master&quot;  {
configfile /tftpboot/$net_default_ip.conf
}
</pre></div>
</div>
<p>Change the permission of grub.cfg:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo chmod 644 $GRUB_DIR/grub.cfg
</pre></div>
</div>
</li>
<li><p class="first">Update the bare metal node with <code class="docutils literal"><span class="pre">boot_mode</span></code> capability in node&#8217;s properties
field:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ironic node-update &lt;node-uuid&gt; add properties/capabilities=&#39;boot_mode:uefi&#39;
</pre></div>
</div>
</li>
<li><p class="first">Make sure that bare metal node is configured to boot in UEFI boot mode and
boot device is set to network/pxe.</p>
<p>NOTE: <code class="docutils literal"><span class="pre">pxe_ilo</span></code> driver supports automatic setting of UEFI boot mode and
boot device on the bare metal node. So this step is not required for
<code class="docutils literal"><span class="pre">pxe_ilo</span></code> driver.</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information on configuring boot modes, see <a class="reference internal" href="#boot-mode-support">boot_mode_support</a>.</p>
</div>
<div class="section" id="elilo-an-alternative-to-grub2">
<h3>Elilo: an alternative to Grub2<a class="headerlink" href="#elilo-an-alternative-to-grub2" title="Permalink to this headline">¶</a></h3>
<p>Elilo is a UEFI bootloader. It is an alternative to Grub2, although it
isn&#8217;t recommended since it is not being supported.</p>
<ol class="arabic">
<li><p class="first">Download and untar the elilo bootloader version &gt;= 3.16 from
<a class="reference external" href="http://sourceforge.net/projects/elilo/">http://sourceforge.net/projects/elilo/</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo tar zxvf elilo-3.16-all.tar.gz
</pre></div>
</div>
</li>
<li><p class="first">Copy the elilo boot loader image to <code class="docutils literal"><span class="pre">/tftpboot</span></code> directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo cp ./elilo-3.16-x86_64.efi /tftpboot/elilo.efi
</pre></div>
</div>
</li>
<li><p class="first">Update bootfile and template file configuration parameters for UEFI
PXE boot in the Bare Metal Service&#8217;s configuration file
(/etc/ironic/ironic.conf):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[pxe]

# Bootfile DHCP parameter for UEFI boot mode. (string value)
uefi_pxe_bootfile_name=elilo.efi

# Template file for PXE configuration for UEFI boot loader.
# (string value)
uefi_pxe_config_template=$pybasedir/drivers/modules/elilo_efi_pxe_config.template
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="ipxe-setup">
<h2>iPXE setup<a class="headerlink" href="#ipxe-setup" title="Permalink to this headline">¶</a></h2>
<p>An alternative to PXE boot, iPXE was introduced in the Juno release
(2014.2.0) of Bare Metal service.</p>
<p>If you will be using iPXE to boot instead of PXE, iPXE needs to be set up
on the Bare Metal service node(s) where <code class="docutils literal"><span class="pre">ironic-conductor</span></code> is running.</p>
<ol class="arabic">
<li><p class="first">Make sure these directories exist and can be written to by the user
the <code class="docutils literal"><span class="pre">ironic-conductor</span></code> is running as. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo mkdir -p /tftpboot
sudo mkdir -p /httpboot
sudo chown -R ironic /tftpboot
sudo chown -R ironic /httpboot
</pre></div>
</div>
</li>
<li><p class="first">Create a map file in the tftp boot directory (<code class="docutils literal"><span class="pre">/tftpboot</span></code>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>echo &#39;r ^([^/]) /tftpboot/\1&#39; &gt; /tftpboot/map-file
echo &#39;r ^(/tftpboot/) /tftpboot/\2&#39; &gt;&gt; /tftpboot/map-file
</pre></div>
</div>
</li>
<li id="http-server"><p class="first">Set up TFTP and HTTP servers.</p>
<p>These servers should be running and configured to use the local
/tftpboot and /httpboot directories respectively, as their root
directories. (Setting up these servers is outside the scope of this
install guide.)</p>
<p>These root directories need to be mounted locally to the
<code class="docutils literal"><span class="pre">ironic-conductor</span></code> services, so that the services can access them.</p>
<p>The Bare Metal service&#8217;s configuration file (/etc/ironic/ironic.conf)
should be edited accordingly to specify the TFTP and HTTP root
directories and server addresses. For example:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[pxe]</span>

<span class="c1"># Ironic compute node&#39;s tftp root path. (string value)</span>
<span class="na">tftp_root</span><span class="o">=</span><span class="s">/tftpboot</span>

<span class="c1"># IP address of Ironic compute node&#39;s tftp server. (string</span>
<span class="c1"># value)</span>
<span class="na">tftp_server</span><span class="o">=</span><span class="s">192.168.0.2</span>

<span class="k">[deploy]</span>
<span class="c1"># Ironic compute node&#39;s http root path. (string value)</span>
<span class="na">http_root</span><span class="o">=</span><span class="s">/httpboot</span>

<span class="c1"># Ironic compute node&#39;s HTTP server URL. Example:</span>
<span class="c1"># http://192.1.2.3:8080 (string value)</span>
<span class="na">http_url</span><span class="o">=</span><span class="s">http://192.168.0.2:8080</span>
</pre></div>
</div>
</li>
<li><p class="first">Install the iPXE package with the boot images:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu:
    apt-get install ipxe

Fedora 21/RHEL7/CentOS7:
    yum install ipxe-bootimgs

Fedora 22 or higher:
    dnf install ipxe-bootimgs
</pre></div>
</div>
</li>
<li><p class="first">Copy the iPXE boot image (<code class="docutils literal"><span class="pre">undionly.kpxe</span></code> for <strong>BIOS</strong> and
<code class="docutils literal"><span class="pre">ipxe.efi</span></code> for <strong>UEFI</strong>) to <code class="docutils literal"><span class="pre">/tftpboot</span></code>. The binary might
be found at:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Ubuntu:
    cp /usr/lib/ipxe/{undionly.kpxe,ipxe.efi} /tftpboot

Fedora/RHEL7/CentOS7:
    cp /usr/share/ipxe/{undionly.kpxe,ipxe.efi} /tftpboot
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the packaged version of the iPXE boot image doesn&#8217;t work, you can
download a prebuilt one from <a class="reference external" href="http://boot.ipxe.org">http://boot.ipxe.org</a> or build one image
from source, see <a class="reference external" href="http://ipxe.org/download">http://ipxe.org/download</a> for more information.</p>
</div>
</li>
<li><p class="first">Enable/Configure iPXE in the Bare Metal Service&#8217;s configuration file
(/etc/ironic/ironic.conf):</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[pxe]</span>

<span class="c1"># Enable iPXE boot. (boolean value)</span>
<span class="na">ipxe_enabled</span><span class="o">=</span><span class="s">True</span>

<span class="c1"># Neutron bootfile DHCP parameter. (string value)</span>
<span class="na">pxe_bootfile_name</span><span class="o">=</span><span class="s">undionly.kpxe</span>

<span class="c1"># Bootfile DHCP parameter for UEFI boot mode. (string value)</span>
<span class="na">uefi_pxe_bootfile_name</span><span class="o">=</span><span class="s">ipxe.efi</span>

<span class="c1"># Template file for PXE configuration. (string value)</span>
<span class="na">pxe_config_template</span><span class="o">=</span><span class="s">$pybasedir/drivers/modules/ipxe_config.template</span>

<span class="c1"># Template file for PXE configuration for UEFI boot loader.</span>
<span class="c1"># (string value)</span>
<span class="na">uefi_pxe_config_template</span><span class="o">=</span><span class="s">$pybasedir/drivers/modules/ipxe_config.template</span>
</pre></div>
</div>
</li>
<li><p class="first">It is possible to configure the Bare Metal service in such a way
that nodes will boot into the deploy image directly from Object Storage.
Doing this avoids having to cache the images on the ironic-conductor
host and serving them via the ironic-conductor&#8217;s <a class="reference internal" href="#http-server">HTTP server</a>.
This can be done if:</p>
<ol class="arabic simple">
<li>the Image Service is used for image storage;</li>
<li>the images in the Image Service are internally stored in
Object Storage;</li>
<li>the Object Storage supports generating temporary URLs
for accessing objects stored in it.
Both the OpenStack Swift and RADOS Gateway provide support for this.<ul>
<li>See <a class="reference external" href="http://docs.openstack.org/developer/ironic/deploy/radosgw.html">Ceph Object Gateway support</a> on how to configure
the Bare Metal Service with RADOS Gateway as the Object Storage.</li>
</ul>
</li>
</ol>
<p>Configure this by setting the <code class="docutils literal"><span class="pre">[pxe]/ipxe_use_swift</span></code> configuration
option to <code class="docutils literal"><span class="pre">True</span></code> as follows:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[pxe]</span>

<span class="c1"># Download deploy images directly from swift using temporary</span>
<span class="c1"># URLs. If set to false (default), images are downloaded to</span>
<span class="c1"># the ironic-conductor node and served over its local HTTP</span>
<span class="c1"># server. Applicable only when &#39;ipxe_enabled&#39; option is set to</span>
<span class="c1"># true. (boolean value)</span>
<span class="na">ipxe_use_swift</span><span class="o">=</span><span class="s">True</span>
</pre></div>
</div>
<p>Although the <a class="reference internal" href="#http-server">HTTP server</a> still has to be deployed and configured
(as it will serve iPXE boot script and boot configuration files for nodes),
such configuration will shift some load from ironic-conductor hosts
to the Object Storage service which can be scaled horizontally.</p>
<p>Note that when SSL is enabled on the Object Storage service
you have to ensure that iPXE firmware on the nodes can indeed
boot from generated temporary URLs that use HTTPS protocol.</p>
</li>
<li><p class="first">Restart the <code class="docutils literal"><span class="pre">ironic-conductor</span></code> process:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Fedora/RHEL7/CentOS7:
  sudo systemctl restart openstack-ironic-conductor

Ubuntu:
  sudo service ironic-conductor restart
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="networking-service-configuration">
<h2>Networking service configuration<a class="headerlink" href="#networking-service-configuration" title="Permalink to this headline">¶</a></h2>
<p>DHCP requests from iPXE need to have a DHCP tag called <code class="docutils literal"><span class="pre">ipxe</span></code>, in order
for the DHCP server to tell the client to get the boot.ipxe script via
HTTP. Otherwise, if the tag isn&#8217;t there, the DHCP server will tell the
DHCP client to chainload the iPXE image (undionly.kpxe).
The Networking service needs to be configured to create this DHCP tag,
since it isn&#8217;t created by default.</p>
<ol class="arabic">
<li><p class="first">Create a custom <code class="docutils literal"><span class="pre">dnsmasq.conf</span></code> file with a setting for the ipxe tag. For
example, create the file <code class="docutils literal"><span class="pre">/etc/dnsmasq-ironic.conf</span></code> with the content:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># Create the &quot;ipxe&quot; tag if request comes from iPXE user class
dhcp-userclass=set:ipxe,iPXE

# Alternatively, create the &quot;ipxe&quot; tag if request comes from DHCP option 175
# dhcp-match=set:ipxe,175
</pre></div>
</div>
</li>
<li><p class="first">In the Networking service DHCP Agent configuration file (typically located at
/etc/neutron/dhcp_agent.ini), set the custom <code class="docutils literal"><span class="pre">/etc/dnsmasq-ironic.conf</span></code>
file as the dnsmasq configuration file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>[DEFAULT]
dnsmasq_config_file = /etc/dnsmasq-ironic.conf
</pre></div>
</div>
</li>
<li><p class="first">Restart the <code class="docutils literal"><span class="pre">neutron-dhcp-agent</span></code> process:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>service neutron-dhcp-agent restart
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="ipmi-support">
<h2>IPMI support<a class="headerlink" href="#ipmi-support" title="Permalink to this headline">¶</a></h2>
<p>If using the IPMITool driver, the <code class="docutils literal"><span class="pre">ipmitool</span></code> command must be present on the
service node(s) where <code class="docutils literal"><span class="pre">ironic-conductor</span></code> is running. On most distros, this
is provided as part of the <code class="docutils literal"><span class="pre">ipmitool</span></code> package. Source code is available at
<a class="reference external" href="http://ipmitool.sourceforge.net/">http://ipmitool.sourceforge.net/</a></p>
<p>Note that certain distros, notably Mac OS X and SLES, install <code class="docutils literal"><span class="pre">openipmi</span></code>
instead of <code class="docutils literal"><span class="pre">ipmitool</span></code> by default. THIS DRIVER IS NOT COMPATIBLE WITH
<code class="docutils literal"><span class="pre">openipmi</span></code> AS IT RELIES ON ERROR HANDLING OPTIONS NOT PROVIDED BY THIS TOOL.</p>
<p>Check that you can connect to and authenticate with the IPMI
controller in your bare metal server by using <code class="docutils literal"><span class="pre">ipmitool</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ipmitool -I lanplus -H &lt;ip-address&gt; -U &lt;username&gt; -P &lt;password&gt; chassis power status
</pre></div>
</div>
<p>&lt;ip-address&gt; = The IP of the IPMI controller you want to access</p>
<p><em>Note:</em></p>
<ol class="arabic simple">
<li>This is not the bare metal node&#8217;s main IP. The IPMI controller
should have its own unique IP.</li>
<li>In case the above command doesn&#8217;t return the power status of the
bare metal server, check for these:<ul>
<li><code class="docutils literal"><span class="pre">ipmitool</span></code> is installed.</li>
<li>The IPMI controller on your bare metal server is turned on.</li>
<li>The IPMI controller credentials passed in the command are right.</li>
<li>The conductor node has a route to the IPMI controller. This can be
checked by just pinging the IPMI controller IP from the conductor
node.</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are slow or unresponsive BMCs in the environment, the retry_timeout
configuration option in the [ipmi] section may need to be lowered. The
default is fairly conservative, as setting this timeout too low can cause
older BMCs to crash and require a hard-reset.</p>
</div>
<p>Bare Metal service supports sending IPMI sensor data to Telemetry with pxe_ipmitool,
pxe_ipminative, agent_ipmitool, agent_pyghmi, agent_ilo, iscsi_ilo, pxe_ilo,
and with pxe_irmc driver starting from Kilo release. By default, support for
sending IPMI sensor data to Telemetry is disabled. If you want to enable it,
you should make the following two changes in <code class="docutils literal"><span class="pre">ironic.conf</span></code>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">notification_driver</span> <span class="pre">=</span> <span class="pre">messaging</span></code> in the <code class="docutils literal"><span class="pre">DEFAULT</span></code> section</li>
<li><code class="docutils literal"><span class="pre">send_sensor_data</span> <span class="pre">=</span> <span class="pre">true</span></code> in the <code class="docutils literal"><span class="pre">conductor</span></code> section</li>
</ul>
<p>If you want to customize the sensor types which will be sent to Telemetry,
change the <code class="docutils literal"><span class="pre">send_sensor_data_types</span></code> option. For example, the below
settings will send temperature, fan, voltage and these three sensor types
of data to Telemetry:</p>
<ul class="simple">
<li>send_sensor_data_types=Temperature,Fan,Voltage</li>
</ul>
<p>If we use default value &#8216;All&#8217; for all the sensor types which are supported by
Telemetry, they are:</p>
<ul class="simple">
<li>Temperature, Fan, Voltage, Current</li>
</ul>
</div>
<div class="section" id="configure-node-web-console">
<h2>Configure node web console<a class="headerlink" href="#configure-node-web-console" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="http://docs.openstack.org/developer/ironic/newton/deploy/console.html">Configuring Web or Serial Console</a>.</p>
</div>
<div class="section" id="boot-mode-support">
<span id="id6"></span><h2>Boot mode support<a class="headerlink" href="#boot-mode-support" title="Permalink to this headline">¶</a></h2>
<p>The following drivers support setting of boot mode (Legacy BIOS or UEFI).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">pxe_ipmitool</span></code></li>
</ul>
<p>The boot modes can be configured in Bare Metal service in the following way:</p>
<ul>
<li><p class="first">When no boot mode setting is provided, these drivers default the boot_mode
to Legacy BIOS.</p>
</li>
<li><p class="first">Only one boot mode (either <code class="docutils literal"><span class="pre">uefi</span></code> or <code class="docutils literal"><span class="pre">bios</span></code>) can be configured for
the node.</p>
</li>
<li><p class="first">If the operator wants a node to boot always in <code class="docutils literal"><span class="pre">uefi</span></code> mode or <code class="docutils literal"><span class="pre">bios</span></code>
mode, then they may use <code class="docutils literal"><span class="pre">capabilities</span></code> parameter within <code class="docutils literal"><span class="pre">properties</span></code>
field of an bare metal node.  The operator must manually set the appropriate
boot mode on the bare metal node.</p>
<p>To configure a node in <code class="docutils literal"><span class="pre">uefi</span></code> mode, then set <code class="docutils literal"><span class="pre">capabilities</span></code> as below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ironic node-update &lt;node-uuid&gt; add properties/capabilities=&#39;boot_mode:uefi&#39;
</pre></div>
</div>
<p>Nodes having <code class="docutils literal"><span class="pre">boot_mode</span></code> set to <code class="docutils literal"><span class="pre">uefi</span></code> may be requested by adding an
<code class="docutils literal"><span class="pre">extra_spec</span></code> to the Compute service flavor:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>nova flavor-key ironic-test-3 set capabilities:boot_mode=&quot;uefi&quot;
nova boot --flavor ironic-test-3 --image test-image instance-1
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">capabilities</span></code> is used in <code class="docutils literal"><span class="pre">extra_spec</span></code> as above, nova scheduler
(<code class="docutils literal"><span class="pre">ComputeCapabilitiesFilter</span></code>) will match only bare metal nodes which have
the <code class="docutils literal"><span class="pre">boot_mode</span></code> set appropriately in <code class="docutils literal"><span class="pre">properties/capabilities</span></code>. It will
filter out rest of the nodes.</p>
<p>The above facility for matching in the Compute service can be used in
heterogeneous environments where there is a mix of <code class="docutils literal"><span class="pre">uefi</span></code> and <code class="docutils literal"><span class="pre">bios</span></code>
machines, and operator wants to provide a choice to the user regarding
boot modes. If the flavor doesn&#8217;t contain <code class="docutils literal"><span class="pre">boot_mode</span></code> and <code class="docutils literal"><span class="pre">boot_mode</span></code>
is configured for bare metal nodes, then nova scheduler will consider all
nodes and user may get either <code class="docutils literal"><span class="pre">bios</span></code> or <code class="docutils literal"><span class="pre">uefi</span></code> machine.</p>
</li>
</ul>
</div>
<div class="section" id="choosing-the-disk-label">
<span id="id7"></span><h2>Choosing the disk label<a class="headerlink" href="#choosing-the-disk-label" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The term <code class="docutils literal"><span class="pre">disk</span> <span class="pre">label</span></code> is historically used in Ironic and was taken
from <a class="reference external" href="https://www.gnu.org/software/parted">parted</a>. Apparently
everyone seems to have a different word for <code class="docutils literal"><span class="pre">disk</span> <span class="pre">label</span></code> - these
are all the same thing: disk type, partition table, partition map
and so on...</p>
</div>
<p>Ironic allows operators to choose which disk label they want their
bare metal node to be deployed with when Ironic is responsible for
partitioning the disk; therefore choosing the disk label does not apply
when the image being deployed is a <code class="docutils literal"><span class="pre">whole</span> <span class="pre">disk</span> <span class="pre">image</span></code>.</p>
<p>There are some edge cases where someone may want to choose a specific
disk label for the images being deployed, including but not limited to:</p>
<ul class="simple">
<li>For machines in <code class="docutils literal"><span class="pre">bios</span></code> boot mode with disks larger than 2 terabytes
it&#8217;s recommended to use a <code class="docutils literal"><span class="pre">gpt</span></code> disk label. That&#8217;s because
a capacity beyond 2 terabytes is not addressable by using the
MBR partitioning type. But, although GPT claims to be backward
compatible with legacy BIOS systems <a class="reference external" href="http://www.rodsbooks.com/gdisk/bios.html">that&#8217;s not always the case</a>.</li>
<li>Operators may want to force the partitioning to be always MBR (even
if the machine is deployed with boot mode <code class="docutils literal"><span class="pre">uefi</span></code>) to avoid breakage
of applications and tools running on those instances.</li>
</ul>
<p>The disk label can be configured in two ways; when Ironic is used with
the Compute service or in standalone mode. The following bullet points
and sections will describe both methods:</p>
<ul class="simple">
<li>When no disk label is provided Ironic will configure it according
to the <a class="reference internal" href="#boot-mode-support">boot mode</a>; <code class="docutils literal"><span class="pre">bios</span></code> boot mode will use
<code class="docutils literal"><span class="pre">msdos</span></code> and <code class="docutils literal"><span class="pre">uefi</span></code> boot mode will use <code class="docutils literal"><span class="pre">gpt</span></code>.</li>
<li>Only one disk label - either <code class="docutils literal"><span class="pre">msdos</span></code> or <code class="docutils literal"><span class="pre">gpt</span></code> - can be configured
for the node.</li>
</ul>
<div class="section" id="when-used-with-compute-service">
<h3>When used with Compute service<a class="headerlink" href="#when-used-with-compute-service" title="Permalink to this headline">¶</a></h3>
<p>When Ironic is used with the Compute service the disk label should be
set to node&#8217;s <code class="docutils literal"><span class="pre">properties/capabilities</span></code> field and also to the flavor
which will request such capability, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ironic node-update &lt;node-uuid&gt; add properties/capabilities=&#39;disk_label:gpt&#39;
</pre></div>
</div>
<p>As for the flavor:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>nova flavor-key baremetal set capabilities:disk_label=&quot;gpt&quot;
</pre></div>
</div>
</div>
<div class="section" id="when-used-in-standalone-mode">
<h3>When used in standalone mode<a class="headerlink" href="#when-used-in-standalone-mode" title="Permalink to this headline">¶</a></h3>
<p>When used without the Compute service, the disk label should be set
directly to the node&#8217;s <code class="docutils literal"><span class="pre">instance_info</span></code> field, as below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ironic node-update &lt;node-uuid&gt; add instance_info/capabilities=&#39;{&quot;disk_label&quot;: &quot;gpt&quot;}&#39;
</pre></div>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="deploy-ramdisk.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Building or downloading a deploy ramdisk image"></i></a>
          
          
            <a href="advanced.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Advanced features"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2017-02-06 13:15</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Bare Metal service overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install and configure the Bare Metal service</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-integration.html">Integration with other OpenStack services</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-cleaning.html">Configure the Bare Metal service for cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure-tenant-networks.html">Configure tenant networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="enrollment.html">Enrollment</a></li>
<li class="toctree-l1"><a class="reference internal" href="enabling-https.html">Enabling HTTPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="standalone.html">Using Bare Metal service as a standalone service</a></li>
<li class="toctree-l1"><a class="reference internal" href="configdrive.html">Enabling the configuration drive (configdrive)</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy-ramdisk.html">Building or downloading a deploy ramdisk image</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Setup the drivers for the Bare Metal service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pxe-setup">PXE setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pxe-uefi-setup">PXE UEFI setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ipxe-setup">iPXE setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#networking-service-configuration">Networking service configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ipmi-support">IPMI support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-node-web-console">Configure node web console</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot-mode-support">Boot mode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#choosing-the-disk-label">Choosing the disk label</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced features</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="next-steps.html">Next steps</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.12.4.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "setup-drivers" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/ironic/tree/install-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 27318e28ceaa372868a7cb5dde53f377a7170e86";
        var bugProject = "ironic";
        var bugTitle = "Setup the drivers for the Bare Metal service in Installation Guide for Bare Metal Service";
    var fieldTags = "install-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.1 on 2017-02-06 13:15";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>